<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><title>å•ä¾‹æ¨¡å¼(Singleton Pattern)</title>
<link rel="stylesheet" href="/css/layout.css">
<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="/css/vendors/rabbit-lyrics.css">
<link rel="shortcut icon" href="/img/favicon.ico"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ç®€å•æ˜“æ‡‚ã®ç°ä»£é­”æ³•" type="application/atom+xml">
</head><body><header class="base-menu"><div class="menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a class="menu-link" href="/">ç®€å•æ˜“æ‡‚ã®ç°ä»£é­”æ³•</a></li><li class="menu-item"><a class="menu-link" href="/archives/">Archives</a></li><li class="menu-item"><a class="menu-link" target="_blank" rel="noopener" href="http://weibo.com/u/2360401155">Weibo</a></li><li class="menu-item"><a class="menu-link" href="/about">About</a></li><li class="menu-item"><a class="menu-link" href="/atom.xml">Rss</a></li></ul></nav></div></header><header class="base-mobile-menu"><div class="mobile-menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a class="menu-link" href="/">ç®€å•æ˜“æ‡‚ã®ç°ä»£é­”æ³•</a></li><li class="menu-item"><a class="menu-link" href="/archives/">Archives</a></li><li class="menu-item"><a class="menu-link" target="_blank" rel="noopener" href="http://weibo.com/u/2360401155">Weibo</a></li><li class="menu-item"><a class="menu-link" href="/about">About</a></li><li class="menu-item"><a class="menu-link" href="/atom.xml">Rss</a></li></ul></nav><div class="toggle-menu" id="mobile-menu-toggle"><span class="menu-bar"></span><span class="menu-bar"> </span><span class="menu-bar"></span></div></div></header><div class="base-content"><div class="base-content-main"><article class="article-main"><h1 class="article-title">å•ä¾‹æ¨¡å¼(Singleton Pattern)</h1><div class="article-meta"><p class="meta-item meta-time"><span class="meta-item-title"></span><i class="icon-calendar"> </i>2025-05-10</p><p class="meta-item meta-tag"><span class="meta-item-title"></span><i class="icon-tags"> </i><a class="tag-link" href="/tags/creational/">creational<span class="tag">, </span></a><a class="tag-link" href="/tags/singleton/">singleton</a></p></div><div class="article-content"><blockquote>
<p>å•ä¾‹æ¨¡å¼ä¸»è¦æ˜¯ä¸ºäº†é¿å…å› ä¸ºåˆ›å»ºäº†å¤šä¸ªå®ä¾‹é€ æˆèµ„æºçš„æµªè´¹ï¼Œä¸”å¤šä¸ªå®ä¾‹ç”±äºå¤šæ¬¡è°ƒç”¨å®¹æ˜“å¯¼è‡´ç»“æœå‡ºç°é”™è¯¯ï¼Œä½¿ç”¨å•ä¾‹æ¨¡å¼èƒ½å¤Ÿä¿è¯æ•´ä¸ªåº”ç”¨ä¸­æœ‰ä¸”åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</p>
</blockquote>
<img src="/assert/puml/359337590fefc13016479eafc3964310fc75e006e0e1b4327142069cdb1181e8.svg"/>
<span id="more"></span>
<ul>
<li>å®šä¹‰ï¼š åªéœ€è¦ä¸‰æ­¥å°±å¯ä»¥ä¿è¯å¯¹è±¡çš„å”¯ä¸€æ€§
<ul>
<li>ç§æœ‰åŒ–æ„é€ å‡½æ•°</li>
<li>ç±»å†…åˆ›å»ºå¯¹è±¡</li>
<li>å¯¹å¤–æä¾›ä¸€ä¸ªå¯ä»¥è®©å…¶ä»–ç¨‹åºè·å–è¯¥å¯¹è±¡çš„æ–¹æ³•</li>
</ul>
</li>
</ul>
<p>å¸¸å¸¸è¢«ç”¨ä½œå·¥å…·ç±»(-Util/-Helper)ã€‚</p>
<h3 id="é¥¿æ±‰å¼"><a class="header-anchor" href="#é¥¿æ±‰å¼">Â¶</a>é¥¿æ±‰å¼</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Singleton</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> INSTANCE;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ä¼˜ç‚¹</strong>ï¼šä»å®ƒçš„å®ç°ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™ç§æ–¹å¼çš„å®ç°æ¯”è¾ƒç®€å•ï¼Œåœ¨ç±»åŠ è½½çš„æ—¶å€™å°±å®Œæˆäº†å®ä¾‹åŒ–ï¼Œé¿å…äº†çº¿ç¨‹çš„åŒæ­¥é—®é¢˜ã€‚</p>
<p><strong>ç¼ºç‚¹</strong>ï¼šç”±äºåœ¨ç±»åŠ è½½çš„æ—¶å€™å°±å®ä¾‹åŒ–äº†ï¼Œæ‰€ä»¥æ²¡æœ‰è¾¾åˆ°Lazy Loading(æ‡’åŠ è½½)çš„æ•ˆæœï¼Œä¹Ÿå°±æ˜¯è¯´å¯èƒ½æˆ‘æ²¡æœ‰ç”¨åˆ°è¿™ä¸ªå®ä¾‹ï¼Œä½†æ˜¯å®ƒä¹Ÿä¼šåŠ è½½ï¼Œä¼šé€ æˆå†…å­˜çš„æµªè´¹ã€‚</p>
<h3 id="æ‡’æ±‰"><a class="header-anchor" href="#æ‡’æ±‰">Â¶</a>æ‡’æ±‰</h3>
<p>åˆ›å»ºä¸€ä¸ªæ‡’æ±‰æ¨¡å¼çš„å•ä¾‹ï¼Œå»¶è¿Ÿå®ä¾‹çš„åˆ›å»ºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance; <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123; <span class="comment">// <i class="conum" data-value="2"></i></span></span><br><span class="line">      instance = <span class="keyword">new</span> <span class="title class_">singleton</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><i class="conum" data-value="1"></i> å•ä¾‹æ¨¡å¼çš„æ‡’æ±‰æ¨¡å¼.</p>
<p><i class="conum" data-value="2"></i> è¿™é‡Œçš„çº¿ç¨‹æ˜¯ä¸å®‰å…¨çš„ï¼Œå¯èƒ½å¾—åˆ°ä¸¤ä¸ªä¸åŒçš„å®ä¾‹ã€‚</p>
<p>ä¿®å¤çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œæ”¹è¿›ç‰ˆæœ¬1ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;  <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">    <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">      instance = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><i class="conum" data-value="1"></i> æ‡’æ±‰å¼çº¿ç¨‹å®‰å…¨ï¼Œé€šè¿‡<code>synchronized</code>å…³é”®å­—æ§åˆ¶ï¼Œä½†æ•ˆç‡ä½ï¼Œå› ä¸º<code>synchronized</code>ä¼šğŸ”“ä½è¯¥å¯¹è±¡ã€‚</p>
<p><strong>ç¼ºç‚¹</strong>ï¼š æ•ˆç‡å¤ªä½äº†ï¼Œæ¯ä¸ªçº¿ç¨‹åœ¨æƒ³è·å¾—ç±»çš„å®ä¾‹æ—¶å€™ï¼Œæ‰§è¡Œ<code>getInstance()</code>æ–¹æ³•éƒ½è¦è¿›è¡ŒåŒæ­¥æ“ä½œï¼Œè€Œå…¶å®è¿™ä¸ªæ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡å®ä¾‹åŒ–å°±å¤Ÿäº†ã€‚</p>
<p>æ”¹è¿›ç‰ˆæœ¬2ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">synchronized</span> (Singleton.class) &#123;  <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">        instance = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><i class="conum" data-value="1"></i> çº¿ç¨‹ä¸å®‰å…¨ï¼Œä¸å¯ç”¨ã€‚è™½ç„¶åŠ äº†ğŸ”“ï¼Œä½†æ³¨æ„è¿™é‡Œé”çš„æ˜¯è¯¥ç±»ï¼Œä¸æ˜¯å¯¹è±¡å®ä¾‹ã€‚ç­‰åˆ°ç¬¬ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œ<code>instance = new Singleton()</code>è·³å‡ºè¿™ä¸ªğŸ”“æ—¶ï¼Œå¦ä¸€ä¸ªè¿›å…¥<code>if</code>è¯­å¥çš„çº¿ç¨‹åŒæ ·ä¼šå®ä¾‹åŒ–å¦å¤–ä¸€ä¸ªSingletonå¯¹è±¡ã€‚</p>
<p>æ”¹è¿›ç‰ˆæœ¬3ï¼š åŒé‡æ ¡éªŒğŸ”“ï¼Œæ–°ç‰ˆjvmä¸å†æ¨è</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">MUTEX</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">synchronized</span> (MUTEX) &#123; <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">          instance = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><i class="conum" data-value="1"></i> åŒé‡æ ¡éªŒé”(Double-checked locking)ï¼Œä¸å†æ¨èä½¿ç”¨ï¼Œå‚è€ƒ<a target="_blank" rel="noopener" href="https://cwe.mitre.org/data/definitions/609">cwe-609</a>ã€‚</p>
<p>æ”¹è¿›ç‰ˆæœ¬4ï¼š <strong>å†…éƒ¨ç±»</strong>å†™æ³•ã€æ¨èã€‘ã€‚ä¹Ÿæ˜¯å…¶ä»–jvmè¡ç”Ÿè¯­è¨€çš„è¯­æ³•ç³–ï¼Œè­¬å¦‚kotlin/scala/groovyçš„<code>object</code>æ•°æ®ç±»å‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> SingletonHolder.INSTANCE;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">SingletonHolder</span> &#123;  <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Singleton</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><i class="conum" data-value="1"></i> å†…éƒ¨ç±»ä¼šè¢«å»¶è¿Ÿæ„å»ºã€‚</p>
<p><strong>ä¼˜ç‚¹</strong>: é¿å…äº†çº¿ç¨‹ä¸å®‰å…¨çš„å‡ºç°ï¼Œå»¶è¿ŸåŠ è½½ï¼Œæ•ˆç‡é«˜ã€‚</p>
<p>æ”¹è¿›ç‰ˆæœ¬5ï¼š <strong>æšä¸¾</strong>ã€æ¨èã€‘ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">  INSTANCE;  <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><i class="conum" data-value="1"></i> å€ŸåŠ©JDK1.5ä¸­æ·»åŠ çš„æšä¸¾æ¥å®ç°å•ä¾‹æ¨¡å¼ã€‚ä¸ä»…èƒ½é¿å…å¤šçº¿ç¨‹åŒæ­¥é—®é¢˜ï¼Œè€Œä¸”è¿˜èƒ½é˜²æ­¢ååºåˆ—åŒ–é‡æ–°åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚</p>
<p>æ”¹è¿›ç‰ˆæœ¬6ï¼š <strong>åŸå­ç±»</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> AtomicReference&lt;Singleton&gt; INSTANCE = <span class="keyword">new</span> <span class="title class_">AtomicReference</span>&lt;&gt;();</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;  <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">    <span class="keyword">if</span> (INSTANCE.get() == <span class="literal">null</span>) &#123;</span><br><span class="line">      INSTANCE.compareAndSet(<span class="literal">null</span>, <span class="keyword">new</span> <span class="title class_">Singleton</span>());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> INSTANCE.get();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><i class="conum" data-value="1"></i> ä¸å¤ªå¸¸è§çš„å®ç°æ–¹å¼ï¼Œæ›´å¤šçš„æ˜¯ç”¨ä½œè¡¨ç¤ºçŠ¶æ€ã€‚å¯¹å®ä¾‹æœ‰ä¸€å®šçš„å®¹å¿åº¦ã€‚æ— ğŸ”“è®¾è®¡ï¼Œç”±CASè‡ªæ—‹ç­‰å¾…ã€‚</p>
<p>æ”¹è¿›ç‰ˆæœ¬7ï¼š <strong>é”æ ¸åŸå­ç±»</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> AtomicReference&lt;Singleton&gt; INSTANCE = <span class="keyword">new</span> <span class="title class_">AtomicReference</span>&lt;&gt;();</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (INSTANCE.get() == <span class="literal">null</span>) &#123;  <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">      INSTANCE.compareAndSet(<span class="literal">null</span>, <span class="keyword">new</span> <span class="title class_">Singleton</span>());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> INSTANCE.get();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><i class="conum" data-value="1"></i> ä¸å…·æœ‰å®¹å¿åº¦çš„å•ä¾‹å®ç°ï¼Œä¸€å®šè¦å¯¹è±¡å®ä¾‹çš„å­˜åœ¨æ‰å¾€ä¸‹æ‰§è¡Œã€‚</p>
</div></article><div id="base-discus"><div id="disqus_thread"></div><script>var disqus_shortname = 'barudisshu-github-io';
var disqus_identifier = '2025/05/10/pattern/basic/creational/Singleton/';
var disqus_title = 'å•ä¾‹æ¨¡å¼(Singleton Pattern)';
var disqus_url = 'https://galudisu.info/2025/05/10/pattern/basic/creational/Singleton/';
(function () {
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async>  </script></div></div></div><footer class="base-footer"><div class="footer-wrapper"><span>Â©2016 - 2025 <a href="https://galudisu.info">barudisshu</a>, unless otherwise noted.</span></div></footer><div class="dom-ready">
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>

<link rel="stylesheet" href="//cdn.bootcss.com/pace/1.0.2/themes/green/pace-theme-flash.min.css">

<script src="/js/base.js"></script>

<script src="/js/rabbit-lyrics.js"></script>
</div></body></html>