<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><title>è£…é¥°å™¨æ¨¡å¼(Decorator Pattern)</title>
<link rel="stylesheet" href="/css/layout.css">
<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="/css/vendors/rabbit-lyrics.css">
<link rel="shortcut icon" href="/img/favicon.ico"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ç®€å•æ˜“æ‡‚ã®ç°ä»£é­”æ³•" type="application/atom+xml">
</head><body><header class="base-menu"><div class="menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a class="menu-link" href="/">ç®€å•æ˜“æ‡‚ã®ç°ä»£é­”æ³•</a></li><li class="menu-item"><a class="menu-link" href="/archives/">Archives</a></li><li class="menu-item"><a class="menu-link" target="_blank" rel="noopener" href="http://weibo.com/u/2360401155">Weibo</a></li><li class="menu-item"><a class="menu-link" href="/about">About</a></li><li class="menu-item"><a class="menu-link" href="/atom.xml">Rss</a></li></ul></nav></div></header><header class="base-mobile-menu"><div class="mobile-menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a class="menu-link" href="/">ç®€å•æ˜“æ‡‚ã®ç°ä»£é­”æ³•</a></li><li class="menu-item"><a class="menu-link" href="/archives/">Archives</a></li><li class="menu-item"><a class="menu-link" target="_blank" rel="noopener" href="http://weibo.com/u/2360401155">Weibo</a></li><li class="menu-item"><a class="menu-link" href="/about">About</a></li><li class="menu-item"><a class="menu-link" href="/atom.xml">Rss</a></li></ul></nav><div class="toggle-menu" id="mobile-menu-toggle"><span class="menu-bar"></span><span class="menu-bar"> </span><span class="menu-bar"></span></div></div></header><div class="base-content"><div class="base-content-main"><article class="article-main"><h1 class="article-title">è£…é¥°å™¨æ¨¡å¼(Decorator Pattern)</h1><div class="article-meta"><p class="meta-item meta-time"><span class="meta-item-title"></span><i class="icon-calendar"> </i>2025-05-10</p><p class="meta-item meta-tag"><span class="meta-item-title"></span><i class="icon-tag"> </i><a class="tag-link" href="/tags/decorator-structural/">decorator,structural</a></p></div><div class="article-content"><blockquote>
<p>è‹¥è¦æ‰©å±•åŠŸèƒ½ï¼Œè£…é¥°è€…æä¾›äº†æ¯”é›†æˆæ›´æœ‰å¼¹æ€§çš„æ›¿ä»£æ–¹æ¡ˆï¼ŒåŠ¨æ€åœ°å°†è´£ä»»é™„åŠ åˆ°å¯¹è±¡ä¸Šã€‚</p>
</blockquote>
<img class="kroki" src="/assert/puml/6efdba923988930429dcc41550dcc8239b07f004c423e932e85d32a048a32763.svg"/>
<span id="more"></span>
<h3 id="æ ¸å¿ƒç»“æ„"><a class="header-anchor" href="#æ ¸å¿ƒç»“æ„">Â¶</a>æ ¸å¿ƒç»“æ„</h3>
<p><strong>è£…é¥°å™¨æ¨¡å¼(Decorator Pattern)</strong> çš„æ ¸å¿ƒåœ¨äºåœ¨ä¸ä¿®æ”¹å·²æœ‰å®ç°çš„å‰æä¸‹ï¼Œå¯¹å…¶è¿›è¡Œå¢å¼ºã€‚è¿™é‡Œä½“ç°äº†ä¸€ä¸ªåŸåˆ™ï¼š<strong>ç±»åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­</strong>ã€‚</p>
<h3 id="åº”ç”¨åœºæ™¯"><a class="header-anchor" href="#åº”ç”¨åœºæ™¯">Â¶</a>åº”ç”¨åœºæ™¯</h3>
<ul>
<li>å½“éœ€è¦åœ¨ä¸ä¿®æ”¹åŸæœ‰å¯¹è±¡çš„å‰æä¸‹ä¸ºå…¶æ·»åŠ æ–°åŠŸèƒ½æ—¶ã€‚</li>
<li>å½“å­ç±»æ‰©å±•ä¸åˆ‡å®é™…æ—¶(æ¯”å¦‚éœ€è¦å¤šä¸ªå¯é€‰åŠŸèƒ½ç»„åˆçš„æƒ…å†µ)ã€‚</li>
<li>åœ¨Java IOæµä¸­å¤§é‡ä½¿ç”¨äº†è£…é¥°å™¨æ¨¡å¼ï¼Œä¾‹å¦‚<code>BufferedInputStream(InputStream)</code>å°±æ˜¯å¯¹è¾“å…¥æµçš„ä¸€ç§è£…é¥°ã€‚</li>
</ul>
<h3 id="éœ€æ±‚"><a class="header-anchor" href="#éœ€æ±‚">Â¶</a>éœ€æ±‚</h3>
<p>è®¾è®¡æ¸¸æˆçš„è£…å¤‡ç³»ç»Ÿï¼Œè¦æ±‚å¯ä»¥è®¡ç®—å‡ºæ¯ç§è£…å¤‡åœ¨é•¶åµŒäº†å„ç§å®çŸ³åçš„æ”»å‡»åŠ›å’Œæè¿°ï¼š</p>
<ul>
<li>æŒ‰ç…§è¦æ±‚ï¼Œæ„å»ºå¦‚ä¸‹UMLç±»å›¾ï¼Œå…¶ä¸­åŒ…å«è£…å¤‡è¶…ç±»<code>Equip</code>ã€è£…é¥°è¶…ç±»<code>EquipDecorator</code>ã€æ¸¸æˆå±æ€§è§’è‰²å¦‚ä¸‹ï¼š</li>
</ul>
<table>
<thead>
<tr>
<th><strong>è£…å¤‡</strong></th>
<th>çº¢å®çŸ³(hp+)</th>
<th>è“å®çŸ³(mp+)</th>
<th>ç»¿å®çŸ³(sp+)</th>
<th>é»„å®çŸ³(ak+)</th>
<th>ç´«å®çŸ³(df+)</th>
</tr>
</thead>
<tbody>
<tr>
<td>å¸½å­ğŸ§¢</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>ä¸Šè¡£ğŸ‘”</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>æŠ¤ç”²ğŸ§¥</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>è£¤å­ğŸ‘–</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>é‹å­ğŸ‘¢</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>æ­¦å™¨ğŸ—¡</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>æ ¹æ®å±æ€§æ ï¼Œè®¾è®¡è£…å¤‡å±æ€§ï¼Œæœ‰æ”»å‡»ã€æ•æ·ã€é˜²å¾¡ã€hp/mpå€¼ã€‚å…¶ä¸­çº¢å®çŸ³+hpï¼Œè“å®çŸ³+mpï¼Œç»¿å®çŸ³+æ•æ·ï¼Œé»„å®çŸ³+æ”»å‡»åŠ›ï¼Œç´«å®çŸ³+é˜²å¾¡åŠ›ã€‚</p>
<img class="kroki" src="/assert/puml/29f4aa41110a2ad1a491cd7aa2fdb974ea7a962fdcae444abb3dbc6cee7f50ad.svg"/>
<p>è£…é¥°å™¨å¯ä»¥å¤šå±‚åµŒå¥—ï¼Œä¾‹å¦‚è·å–å¾—åˆ°çš„å®çŸ³éƒ½ç”¨åœ¨æ­¦å™¨çš„åŠ ç‚¹ä¸Šï¼Œ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Equip</span> <span class="variable">levelUpWeapon</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RedGem</span>(<span class="keyword">new</span> <span class="title class_">BlueGem</span>(<span class="keyword">new</span> <span class="title class_">YellowGem</span>(<span class="keyword">new</span> <span class="title class_">GreenGem</span>(<span class="keyword">new</span> <span class="title class_">WwaponEquip</span>()))));</span><br><span class="line"><span class="comment">// åˆ›å»ºå‰‘å£«å¹¶ç©¿æˆ´è¯¥æ°ªé‡‘æ­¦å™¨</span></span><br><span class="line"><span class="type">Swordman</span> <span class="variable">swordman</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Swordman</span>();</span><br><span class="line">swordman.equip(levelUpWeapon);</span><br><span class="line"></span><br><span class="line">System.out.println(swordman);</span><br><span class="line"></span><br><span class="line">Swordman&#123;</span><br><span class="line">  attack=<span class="number">12</span>, </span><br><span class="line">  defense=<span class="number">0</span>, </span><br><span class="line">  speed=<span class="number">5</span>, </span><br><span class="line">  hp=<span class="number">5</span>, </span><br><span class="line">  mp=<span class="number">10</span>, </span><br><span class="line">  equipment=å·²è£…å¤‡æœ‰ï¼šğŸ—¡</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯ç¤ºä¾‹ä»£ç çš„éƒ¨åˆ†å®ç°ï¼š</p>
<p>è¢«è£…é¥°çš„ç±»ä»¥åŠå…¶è¶…ç±»ï¼Œ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Equip</span> &#123;</span><br><span class="line">  EquipType <span class="title function_">getType</span><span class="params">()</span>;</span><br><span class="line">  <span class="type">int</span> <span class="title function_">attack</span><span class="params">()</span>;</span><br><span class="line">  <span class="type">int</span> <span class="title function_">speed</span><span class="params">()</span>;</span><br><span class="line">  <span class="type">int</span> <span class="title function_">defense</span><span class="params">()</span>;</span><br><span class="line">  <span class="type">int</span> <span class="title function_">hp</span><span class="params">()</span>;</span><br><span class="line">  <span class="type">int</span> <span class="title function_">mp</span><span class="params">()</span>;</span><br><span class="line">  String <span class="title function_">description</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WeaponEquip</span> <span class="keyword">implements</span> <span class="title class_">Equip</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> EquipType <span class="title function_">getType</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> EquipType.WEAPON;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">attack</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">speed</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">defense</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hp</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">mp</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">description</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ğŸ—¡&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®ç°å…¶è£…é¥°å™¨ï¼Œå¯ä»¥ä¸º<code>interface</code>æˆ–<code>abstract</code>ï¼Œ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">EquipDecorator</span> <span class="keyword">implements</span> <span class="title class_">Equip</span> &#123;</span><br><span class="line">  <span class="keyword">protected</span> Equip equip;</span><br><span class="line">  <span class="keyword">protected</span> <span class="title function_">EquipDecorator</span><span class="params">(Equip equip)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.equip = equip;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">attack</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> equip.attack();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">speed</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> equip.speed();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">defense</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> equip.defense();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hp</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> equip.hp();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">mp</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> equip.mp();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">description</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> equip.description();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æŒ‰ç…§å®šä¹‰ï¼Œ<strong>è£…é¥°å™¨æ¨¡å¼(decorator pattern)</strong> åœ¨ä¸æ”¹å˜å·²æœ‰ç±»çš„å‰æä¸‹ï¼Œå¯¹å…¶å®ç°å¢å¼ºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BlueGemEquipDecorator</span> <span class="keyword">extends</span> <span class="title class_">EquipDecorator</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">BlueGemEquipDecorator</span><span class="params">(Equip equip)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(equip);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">mp</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> equip.mp() + <span class="number">10</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>å¼€é—­åŸåˆ™ï¼š ä¸ä¿®æ”¹å·²æœ‰çš„ç±»ã€‚</li>
<li>ç»„åˆä¼˜äºç»§æ‰¿ï¼šæ›´çµæ´»ï¼Œå¯ä»¥æ— é™å åŠ </li>
<li>è¿è¡Œæ—¶å¯å˜ï¼š å¯ä»¥åœ¨è¿è¡Œæ—¶æ·»åŠ æˆ–åˆ é™¤åŠŸèƒ½</li>
<li>é«˜å†…èšä½è€¦åˆï¼š æ¯ä¸ªè£…é¥°å™¨åªå…³æ³¨è‡ªå·±çš„å¢å¼ºé€»è¾‘</li>
</ul>
<h3 id="è£…é¥°å™¨æ¨¡å¼ä¸ä»£ç†æ¨¡å¼çš„åŒºåˆ«"><a class="header-anchor" href="#è£…é¥°å™¨æ¨¡å¼ä¸ä»£ç†æ¨¡å¼çš„åŒºåˆ«">Â¶</a>è£…é¥°å™¨æ¨¡å¼ä¸ä»£ç†æ¨¡å¼çš„åŒºåˆ«</h3>
<ol>
<li>ç›®çš„ä¸åŒï¼š è£…é¥°å™¨æ¨¡å¼æ˜¯ä½œ <strong>å¢å¼ºåŠŸèƒ½</strong>ï¼›ä»£ç†æ¨¡å¼åˆ™æ˜¯å®ç° <strong>æ§åˆ¶è®¿é—®</strong>ã€‚</li>
<li>å®ç°æ–¹å¼ç›¸åŒï¼š éƒ½æ˜¯é€šè¿‡ç»„åˆ+æ¥å£ä¸€è‡´æ€§æ–¹å¼ï¼Œéƒ½ç»§æ‰¿äº†ç›®æ ‡çš„æ¥å£ã€‚</li>
<li>å…³æ³¨ç‚¹ä¸åŒï¼š è£…é¥°å™¨æ¨¡å¼æ˜¯â€œæ·»åŠ èŒè´£â€ï¼›ä»£ç†æ¨¡å¼æ˜¯â€œå°è£…è®¿é—®â€œã€‚</li>
<li>æ˜¯å¦é€æ˜ï¼š å‰è€…é€æ˜å¹¶å¢å¼ºï¼›åè€…æ§åˆ¶è®¿é—®å‡å°‘é€æ˜åº¦</li>
</ol>
</div></article><div id="base-discus"><div id="disqus_thread"></div><script>var disqus_shortname = 'barudisshu-github-io';
var disqus_identifier = '2025/05/10/pattern/basic/structural/Decorator/';
var disqus_title = 'è£…é¥°å™¨æ¨¡å¼(Decorator Pattern)';
var disqus_url = 'https://galudisu.info/2025/05/10/pattern/basic/structural/Decorator/';
(function () {
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async>  </script></div></div></div><footer class="base-footer"><div class="footer-wrapper"><span>Â©2016 - 2025 <a href="https://galudisu.info">barudisshu</a>, unless otherwise noted.</span></div></footer><div class="dom-ready">
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>

<link rel="stylesheet" href="//cdn.bootcss.com/pace/1.0.2/themes/green/pace-theme-flash.min.css">

<script src="/js/base.js"></script>

<script src="/js/rabbit-lyrics.js"></script>
</div></body></html>