<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><title>ä»£ç†æ¨¡å¼(Proxy Pattern)</title>
<link rel="stylesheet" href="/css/layout.css">
<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="/css/vendors/rabbit-lyrics.css">
<link rel="shortcut icon" href="/img/favicon.ico"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ç®€å•æ˜“æ‡‚ã®ç°ä»£é­”æ³•" type="application/atom+xml">
</head><body><header class="base-menu"><div class="menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a class="menu-link" href="/">ç®€å•æ˜“æ‡‚ã®ç°ä»£é­”æ³•</a></li><li class="menu-item"><a class="menu-link" href="/archives/">Archives</a></li><li class="menu-item"><a class="menu-link" target="_blank" rel="noopener" href="http://weibo.com/u/2360401155">Weibo</a></li><li class="menu-item"><a class="menu-link" href="/about">About</a></li><li class="menu-item"><a class="menu-link" href="/atom.xml">Rss</a></li></ul></nav></div></header><header class="base-mobile-menu"><div class="mobile-menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a class="menu-link" href="/">ç®€å•æ˜“æ‡‚ã®ç°ä»£é­”æ³•</a></li><li class="menu-item"><a class="menu-link" href="/archives/">Archives</a></li><li class="menu-item"><a class="menu-link" target="_blank" rel="noopener" href="http://weibo.com/u/2360401155">Weibo</a></li><li class="menu-item"><a class="menu-link" href="/about">About</a></li><li class="menu-item"><a class="menu-link" href="/atom.xml">Rss</a></li></ul></nav><div class="toggle-menu" id="mobile-menu-toggle"><span class="menu-bar"></span><span class="menu-bar"> </span><span class="menu-bar"></span></div></div></header><div class="base-content"><div class="base-content-main"><article class="article-main"><h1 class="article-title">ä»£ç†æ¨¡å¼(Proxy Pattern)</h1><div class="article-meta"><p class="meta-item meta-time"><span class="meta-item-title"></span><i class="icon-calendar"> </i>2025-05-10</p><p class="meta-item meta-tag"><span class="meta-item-title"></span><i class="icon-tags"> </i><a class="tag-link" href="/tags/structural/">structural<span class="tag">, </span></a><a class="tag-link" href="/tags/proxy/">proxy</a></p></div><div class="article-content"><blockquote>
<p>ä¸€ä¸ªç±»ä»£è¡¨å¦ä¸€ä¸ªç±»çš„åŠŸèƒ½ã€‚åœ¨ä»£ç†æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºå…·æœ‰ç°æœ‰å¯¹è±¡çš„å¯¹è±¡ï¼Œä»¥ä¾¿å‘å¤–ç•Œæä¾›åŠŸèƒ½æ¥å£ã€‚å¯ä»¥ç†è§£ä¸ºå†…å­˜ä¸­æ²¡æœ‰è¿™ä¸ªå¯¹è±¡å°±åˆ›å»ºï¼Œæœ‰å°±ç›´æ¥è¿”å›è¿™ä¸ªå¯¹è±¡ã€‚</p>
</blockquote>
<img src="/assert/puml/ad121bfbedb1b584aa4e204d4c03c0baebf11c5faf26fbcaff2fab9db54314ab.svg"/>
<span id="more"></span>
<p><strong>ä»£ç†æ¨¡å¼(Proxy Pattern)</strong> åœ¨é¢å‘å¯¹è±¡ç³»ç»Ÿä¸­ï¼Œæœ‰äº›å¯¹è±¡ç”±äºæŸäº›åŸå› (æ¯”å¦‚å¯¹è±¡åˆ›å»ºå¼€é”€å¾ˆå¤§ï¼ŒæŸäº›æ“ä½œéœ€è¦å®‰å…¨æ§åˆ¶)ï¼Œç›´æ¥è®¿é—®ä¼šç»™ä½¿ç”¨è€…æˆ–ç³»ç»Ÿç»“æ„å¸¦æ¥å¾ˆå¤šéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è®¿é—®æ­¤å¯¹è±¡æ—¶åŠ ä¸Šä¸€ä¸ªè¯¥å¯¹è±¡çš„è®¿é—®å±‚ã€‚</p>
<blockquote>
<p>âš ï¸ <strong>æ³¨æ„</strong><br>
ä»£ç†æ¨¡å¼å’Œå§”æ´¾æ¨¡å¼æ¯”è¾ƒå®¹æ˜“æ··æ·†ï¼š</p>
<p>ä»£ç†æ¨¡å¼æ˜¯ç»“æ„æ¨¡å¼ã€å§”æ‰˜æ¨¡å¼æ˜¯è¡Œä¸ºæ¨¡å¼ã€‚</p>
<ul>
<li><strong>ä»£ç†</strong> = åŒ…è£¹ + æ§åˆ¶ï¼š åƒå¿«é€’å‘˜ï¼Œå¸®ä½ æ‹¿åŒ…è£¹ï¼Œé¡ºä¾¿æ£€æŸ¥ä¸€ä¸‹ã€‚</li>
<li><strong>å§”æ‰˜</strong> = åŒ…è£¹ + è½¬å‘ï¼š åƒé‚®å±€æŸœå°ï¼Œä½ äº¤ç»™ä»–ï¼Œä»–è½¬æ‰‹å°±äº¤ç»™å¿«é€’å…¬å¸ã€‚</li>
<li></li>
</ul>
<p>å¿«é€’é€è´§ä¸Šé—¨æ˜¯ä»£ç†ï¼Œä»–è¦å¯¹åŒ…è£¹è´Ÿè´£ï¼Œå¹¶ä¸”è¦ç¡®å®šé€ç»™ä½ ï¼›ä½ æ™šä¸Šè¦åŠ ç­ä¸æ–¹ä¾¿ï¼Œè®©å®¶äººå¸®ä½ å»å–å¿«é€’æ˜¯å§”æ‰˜ï¼Œå®¶äººæ‹¿äº†å°±ä¸¢é‚£æ”¾ç€ï¼Œä¹Ÿå¯èƒ½å®¶äººéƒ½ä¸ä¸€å®šå»æ‹¿ã€‚</p>
</blockquote>
<h3 id="åŠŸèƒ½è§’åº¦åˆ†ç±»"><a class="header-anchor" href="#åŠŸèƒ½è§’åº¦åˆ†ç±»">Â¶</a>åŠŸèƒ½è§’åº¦åˆ†ç±»</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>ç±»å‹</strong></th>
<th style="text-align:left"><strong>åœºæ™¯</strong></th>
<th style="text-align:left"><strong>ç¤ºä¾‹</strong></th>
<th style="text-align:left"><strong>ç‰¹ç‚¹</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">è¿œç¨‹ä»£ç†(Remote Proxy)</td>
<td style="text-align:left">è®¿é—®ä¸åŒåœ°å€ç©ºé—´çš„å¯¹è±¡ã€è¿œç¨‹æœåŠ¡é€šä¿¡</td>
<td style="text-align:left">RMIã€gRPCã€</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">è™šæ‹Ÿä»£ç†(Virtual Proxy)</td>
<td style="text-align:left">åˆ›å»ºçœŸå®å¯¹è±¡çš„æˆæœ¬è¾ƒé«˜æ—¶ï¼Œå»¶è¿ŸåŠ è½½(Lazy Load)<br/> åªæœ‰åœ¨çœŸæ­£éœ€è¦æ—¶æ‰åˆ›å»ºç›®æ ‡å¯¹è±¡</td>
<td style="text-align:left">å›¾ç‰‡åŠ è½½<br/>å¤§æ–‡ä»¶è¯»å–</td>
<td style="text-align:left">å‡å°‘èµ„æºæµªè´¹<br/>æå‡ç›¸åº”é€Ÿåº¦</td>
</tr>
<tr>
<td style="text-align:left">ä¿æŠ¤ä»£ç†(Protection Proxy)</td>
<td style="text-align:left">æƒé™æ§åˆ¶</td>
<td style="text-align:left">é‰´æƒ</td>
<td style="text-align:left">å¢å¼ºå®‰å…¨æ€§<br/>ç»†é¢—ç²’åº¦æ§åˆ¶</td>
</tr>
</tbody>
</table>
<h3 id="æ ¹æ®å®ç°æŠ€æœ¯åˆ†ç±»-Javaå¸¸è§"><a class="header-anchor" href="#æ ¹æ®å®ç°æŠ€æœ¯åˆ†ç±»-Javaå¸¸è§">Â¶</a>æ ¹æ®å®ç°æŠ€æœ¯åˆ†ç±»(Javaå¸¸è§)</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>ç±»å‹</strong></th>
<th style="text-align:left"><strong>æè¿°</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">é™æ€ä»£ç†(Static Proxy)</td>
<td style="text-align:left">æ‰‹åŠ¨ç¼–å†™ä»£ç†ç±»ï¼Œç¼–è¯‘æ—¶ç¡®å®š</td>
</tr>
<tr>
<td style="text-align:left">åŠ¨æ€ä»£ç†(Dynamic Proxy)</td>
<td style="text-align:left">è¿è¡Œæ—¶ç”Ÿæˆä»£ç†ç±»ï¼Œä½¿ç”¨<code>java.lang.reflect.Proxy</code></td>
</tr>
<tr>
<td style="text-align:left">CGLIBä»£ç†</td>
<td style="text-align:left">åŸºäºå­—èŠ‚ç›å¢å¼ºæŠ€æœ¯ï¼Œé€‚ç”¨äºæ²¡æœ‰æ¥å£çš„ç±»</td>
</tr>
</tbody>
</table>
<h3 id="ä»£ç†å®ç°æ–¹æ³•"><a class="header-anchor" href="#ä»£ç†å®ç°æ–¹æ³•">Â¶</a>ä»£ç†å®ç°æ–¹æ³•</h3>
<ul>
<li>é™æ€ä»£ç†</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Subject</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">request</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RealSubject</span> <span class="keyword">implements</span> <span class="title class_">Subject</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">request</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Proxy</span> <span class="keyword">implements</span> <span class="title class_">Subject</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> Subject realSubject;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">request</span><span class="params">()</span> &#123;</span><br><span class="line">    realSubject.request();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>åŠ¨æ€ä»£ç†</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Proxy</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  pubilc Object <span class="title function_">invoke</span><span class="params">(Method method, Object[] args, Object proxy)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> method.invoke(target, args);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>CBLIBä»£ç†(å­—èŠ‚å¢å¼º)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Proxy</span> <span class="keyword">implements</span> <span class="title class_">MethodInterceptor</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> Object <span class="title function_">intercept</span><span class="params">(Object obj, Method method, MethodProxy proxy)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> proxy.invokeSuper(obj, args);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">Enhancer</span> <span class="variable">enhancer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Enhancer</span>();</span><br><span class="line">enhancer.setSuperclass(RealSubject.class);</span><br><span class="line">enhancer.setCallback(<span class="keyword">new</span> <span class="title class_">Proxy</span>());</span><br><span class="line"><span class="type">RealSubject</span> <span class="variable">proxy</span> <span class="operator">=</span> enhancer.create();</span><br><span class="line">proxy.request();</span><br></pre></td></tr></table></figure>
<p><strong>å·®å¼‚å¯¹åˆ«</strong>ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>ç±»å‹</strong></th>
<th style="text-align:left"><strong>æ˜¯å¦éœ€è¦æ¥å£</strong></th>
<th style="text-align:left"><strong>æ˜¯å¦æ‰‹åŠ¨å†™ä»£ç†ç±»</strong></th>
<th style="text-align:left"><strong>æŠ€æœ¯åŸºç¡€</strong></th>
<th style="text-align:left"><strong>åº”ç”¨åœºæ™¯</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">é™æ€ä»£ç†</td>
<td style="text-align:left">æ˜¯</td>
<td style="text-align:left">æ˜¯</td>
<td style="text-align:left">æ¥å£/æŠ½è±¡ç±»</td>
<td style="text-align:left">ç®€å•å°è£…ã€å­¦ä¹ </td>
</tr>
<tr>
<td style="text-align:left">JDKåŠ¨æ€ä»£ç†</td>
<td style="text-align:left">æ˜¯</td>
<td style="text-align:left">å¦</td>
<td style="text-align:left">åå°„+<code>Proxy</code></td>
<td style="text-align:left">AOPã€Spring(å¯é€‰)</td>
</tr>
<tr>
<td style="text-align:left">CGLIBä»£ç†</td>
<td style="text-align:left">å¦</td>
<td style="text-align:left">å¦</td>
<td style="text-align:left">ASMå­—èŠ‚ç›å¢å¼º</td>
<td style="text-align:left">æ— æ¥å£ä»£ç†ã€Spring(é»˜è®¤)</td>
</tr>
</tbody>
</table>
<h2 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“">Â¶</a>æ€»ç»“</h2>
<blockquote>
<p>ä»£ç†æ¨¡å¼ä»<strong>åŠŸèƒ½è§’åº¦</strong>å¯ä»¥åˆ†ä¸ºï¼š è¿œç¨‹ä»£ç†ã€è™šæ‹Ÿä»£ç†ã€ä¿æŠ¤ä»£ç†ï¼›ä»<strong>å®ç°æŠ€æœ¯è§’åº¦</strong>å¯åˆ†ä¸ºï¼š é™æ€ä»£ç†ã€åŠ¨æ€ä»£ç†(JDK)ã€CGLIBä»£ç†ã€‚</p>
</blockquote>
</div></article><nav class="article-nav"><div class="article-nav-prev">ğŸ”™<a href="/2025/05/10/pattern/basic/behavioral/TemplateMethod/">æ¨¡æ¿æ–¹æ³•æ¨¡å¼(Template Method Pattern)</a></div><div class="article-nav-next">ğŸ”œ<a href="/2025/05/10/pattern/basic/structural/Flyweight/">äº«å…ƒæ¨¡å¼(Flyweight Pattern)</a></div></nav><div id="base-discus"><div id="disqus_thread"></div><script>var disqus_shortname = 'barudisshu-github-io';
var disqus_identifier = '2025/05/10/pattern/basic/structural/Proxy/';
var disqus_title = 'ä»£ç†æ¨¡å¼(Proxy Pattern)';
var disqus_url = 'https://galudisu.info/2025/05/10/pattern/basic/structural/Proxy/';
(function () {
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async>  </script></div></div></div><footer class="base-footer"><div class="footer-wrapper"><span>Â©2016 - 2025 <a href="https://galudisu.info">barudisshu</a>, unless otherwise noted.</span></div></footer><div class="dom-ready">
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>

<link rel="stylesheet" href="//cdn.bootcss.com/pace/1.0.2/themes/green/pace-theme-flash.min.css">

<script src="/js/base.js"></script>

<script src="/js/rabbit-lyrics.js"></script>
</div></body></html>