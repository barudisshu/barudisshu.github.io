<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><title>基于遗传算法实现排课系统</title>
<link rel="stylesheet" href="/css/layout.css">
<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="/css/vendors/rabbit-lyrics.css">
<link rel="shortcut icon" href="/img/favicon.ico"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="简单易懂の现代魔法" type="application/atom+xml">
</head><body><header class="base-menu"><div class="menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a class="menu-link" href="/">简单易懂の现代魔法</a></li><li class="menu-item"><a class="menu-link" href="/maths/">Maths</a></li><li class="menu-item"><a class="menu-link" href="/projects/">Projects</a></li><li class="menu-item"><a class="menu-link" href="/archives/">Archives</a></li><li class="menu-item"><a class="menu-link" target="_blank" rel="noopener" href="http://weibo.com/u/2360401155">Weibo</a></li><li class="menu-item"><a class="menu-link" href="/about">About</a></li><li class="menu-item"><a class="menu-link" href="/atom.xml">Rss</a></li></ul></nav></div></header><header class="base-mobile-menu"><div class="mobile-menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a class="menu-link" href="/">简单易懂の现代魔法</a></li><li class="menu-item"><a class="menu-link" href="/maths/">Maths</a></li><li class="menu-item"><a class="menu-link" href="/projects/">Projects</a></li><li class="menu-item"><a class="menu-link" href="/archives/">Archives</a></li><li class="menu-item"><a class="menu-link" target="_blank" rel="noopener" href="http://weibo.com/u/2360401155">Weibo</a></li><li class="menu-item"><a class="menu-link" href="/about">About</a></li><li class="menu-item"><a class="menu-link" href="/atom.xml">Rss</a></li></ul></nav><div class="toggle-menu" id="mobile-menu-toggle"><span class="menu-bar"></span><span class="menu-bar"> </span><span class="menu-bar"></span></div></div></header><div class="base-content"><div class="base-content-main"><article class="article-main"><h1 class="article-title">基于遗传算法实现排课系统</h1><div class="article-meta"><p class="meta-item meta-time"><span class="meta-item-title"></span><i class="icon-calendar"> </i>2018-07-24</p><p class="meta-item meta-tag"><span class="meta-item-title"></span><i class="icon-tag"> </i><a class="tag-link" href="/tags/ga-ml-scala/">ga, ml, scala</a></p></div><div class="article-content"><p>遗传算法属于NP完备问题，不确定问题需要大量离散的数据进行线性处理。</p>
<span id="more"></span>

<div style="float:left">
<img src="/img/algorithm/ga/DNA-helix.jpg" alt="DNA">
</div>
<div style="float:right">
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=489694&auto=1&height=66"></iframe></div>
<div class="clearfix"></div>


<p><code>遗传算法(genetic algorithm)</code>是受Charles Darwin自然进化理论启发的搜索启发式算法。该算法反映了自然选择的过程，选择最合适的个体进行繁殖，以产生下一代后代。</p>
<p><img src="/img/algorithm/ga/1_BYDJpa6M2rzWNSurvspf8Q.png" alt="DNA"></p>
<h2 id="Notion-of-Natural-Selection"><a class="header-anchor" href="#Notion-of-Natural-Selection">¶</a>Notion of Natural Selection</h2>
<p>自然选择的过程，开始于种群中最适个体的选择。它们产生子代，子代继承父代的特性。如果父代有最适值，子代将有比父代更好机会生存。该选择过程将迭代进行，直到最适值种群个体出现。</p>
<p>分析该问题，可以从DDD方面描述，从种群进化和优胜劣汰方面，我们需要专业术语进行描述。我们考虑遗传进化是多个解决方案对一个抽象问题的描述。</p>
<p>遗传算法考虑5个阶段</p>
<ol>
<li>初始化种群(population)</li>
<li>适值函数(fitness)</li>
<li>蒙特卡罗选举(selection)</li>
<li>交叉(crossover)</li>
<li>变异(mutate)</li>
</ol>
<h2 id="Initial-Population"><a class="header-anchor" href="#Initial-Population">¶</a>Initial Population</h2>
<p>一个个体(Individual)是一系列<strong>基因</strong> 的集合，基因组成染色体(<code>Chromosome</code>)的解决方案。</p>
<p>在遗传算法中，一系列基因用字符(char)表示，术语称为<code>alphabet</code>，字母表或基因池。通常用二进制表示(1或0)。如下看到的染色体基因编码：</p>
<p><img src="/img/algorithm/ga/1_vIrsxg12DSltpdWoO561yA.png" alt="1_vIrsxg12DSltpdWoO561yA.png"></p>
<h2 id="Fitness-Function"><a class="header-anchor" href="#Fitness-Function">¶</a>Fitness Function</h2>
<p>适值函数决定了一个个体的适应能力(一个个体与其它个体的竞争能力)。每个个体都拥有自身的<code>适值分数(fitness score)</code>。个体被选中作为繁衍基于它自身的<code>适值分数</code>。</p>
<h2 id="Selection"><a class="header-anchor" href="#Selection">¶</a>Selection</h2>
<p>选择阶段就是选择最适个体，并将它们的基因传递给下一代。</p>
<p>根据它们的适值分数(fitness score)选择一对个体(父代)。适值数高的，将有更高的机会被选择进行繁衍。</p>
<h2 id="Crossover"><a class="header-anchor" href="#Crossover">¶</a>Crossover</h2>
<p>交叉在遗传算法中是最有成效的阶段。对于每一对被匹配到的父代，交叉点(crossover point)在基因中被随机选取。</p>
<p>例如，从第3个位置开始：</p>
<p><img src="/img/algorithm/ga/1_Wi6ou9jyMHdxrF2dgczz7g.png" alt="1_Wi6ou9jyMHdxrF2dgczz7g.png"></p>
<p>子代的创建，来源于父代基因的交换</p>
<p><img src="/img/algorithm/ga/1_eQxFezBtdfdLxHsvSvBNGQ.png" alt="1_eQxFezBtdfdLxHsvSvBNGQ.png"></p>
<p>新生子代被添加到种群中。子代的产生，都是按照批次出现，不会出现年龄的概念，也不考虑种群数量增多的情况。</p>
<h2 id="Mutation"><a class="header-anchor" href="#Mutation">¶</a>Mutation</h2>
<p>在某些新生代中，它们某些基因可能以一种非常低的概率发生<code>变异(mutation)</code>。这意味着新生代的基因可能会出现<code>反转(flipped)</code>。</p>
<p><img src="/img/algorithm/ga/1_CGt_UhRqCjIDb7dqycmOAg.png" alt="1_CGt_UhRqCjIDb7dqycmOAg.png"></p>
<p>基因突变是为了保持种群内的多样性和防止过早收敛。一般有两种情况考虑基因突变的情况：</p>
<ol>
<li>当种群进化到一定阶段出现无解(种群所有个体基因全部相同，交叉后子代基因和父代基因没有变化；但是所有个体都不满足条件，种群无法再次进化)</li>
<li>过早收敛，得不到一个最优解。特别是多个维度中，收敛出现偏向某一个维度。</li>
</ol>
<h2 id="Termination"><a class="header-anchor" href="#Termination">¶</a>Termination</h2>
<p>终止条件是种群收敛(新生子代和前一代没有明显不同)。这表示遗传算法得出的解已经满足我们的问题。</p>
<h2 id="Psuedocode"><a class="header-anchor" href="#Psuedocode">¶</a>Psuedocode</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">START</span><br><span class="line">Generate the initial population</span><br><span class="line">Compute fitness</span><br><span class="line">REPEAT</span><br><span class="line">    Selection</span><br><span class="line">    Crossover</span><br><span class="line">    Mutation</span><br><span class="line">    Compute fitness</span><br><span class="line">UNTIL population has converged</span><br><span class="line">STOP</span><br></pre></td></tr></table></figure>
<h2 id="GA"><a class="header-anchor" href="#GA">¶</a>GA</h2>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.typesafe.scalalogging.<span class="type">LazyLogging</span></span><br><span class="line"><span class="keyword">import</span> org.slf4j.<span class="type">Logger</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> scala.annotation.tailrec</span><br><span class="line"><span class="keyword">import</span> scala.collection.immutable.<span class="type">Stream</span>.consWrapper</span><br><span class="line"><span class="keyword">import</span> scala.language._</span><br><span class="line"><span class="keyword">import</span> scala.util.<span class="type">Random</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">GeneticLayout</span> <span class="keyword">extends</span> <span class="title">App</span> <span class="keyword">with</span> <span class="title">LazyLogging</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 目标</span></span><br><span class="line">  <span class="keyword">val</span> target = <span class="string">&quot;101010&quot;</span></span><br><span class="line">  <span class="comment">// 基因池</span></span><br><span class="line">  <span class="keyword">val</span> genePool = <span class="type">Array</span>[<span class="type">Char</span>](&#x27;<span class="number">1</span>&#x27;,&#x27;<span class="number">0</span>&#x27;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">implicit</span> <span class="keyword">val</span> _: <span class="type">Logger</span> = logger.underlying</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 统计相等的个数</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">fitness</span></span>(src: <span class="type">String</span>, tgt: <span class="type">String</span>): <span class="type">Double</span> = src.zip(tgt).count &#123; <span class="keyword">case</span> (s, t) =&gt; s == t &#125;</span><br><span class="line">  <span class="comment">// 冲突消除 todo:</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">conflictClear</span></span>(agents: <span class="type">Seq</span>[<span class="type">String</span>]): <span class="type">Seq</span>[<span class="type">String</span>] = agents</span><br><span class="line"></span><br><span class="line">  <span class="keyword">val</span> testBench = <span class="keyword">new</span> <span class="type">GeneticExploration</span>[<span class="type">Char</span>, <span class="type">String</span>](<span class="number">0.5</span>, <span class="number">0.01</span>, <span class="number">10</span>, genePool, cs =&gt; <span class="keyword">new</span> <span class="type">String</span>(cs.toArray), conflictClear, fitness)</span><br><span class="line">  <span class="keyword">val</span> (p, g) = testBench.evolution(testBench.newPool(<span class="number">10</span>, target.length), target)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @param cross crossover probability 交叉概率</span></span><br><span class="line"><span class="comment">  * @param mutation 变异概率</span></span><br><span class="line"><span class="comment">  * @param population 种群数量</span></span><br><span class="line"><span class="comment">  * @param genePool 基因池</span></span><br><span class="line"><span class="comment">  * @param specimenBuilder 个体构造器</span></span><br><span class="line"><span class="comment">  * @param conflictClear   冲突消除 Rm为硬约束条件；Rn为软约束条件；Rx为解保证</span></span><br><span class="line"><span class="comment">  * @param fitnessF 适值函数</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GeneticExploration</span>[<span class="type">Gene</span>, <span class="type">Specimen</span>](<span class="params">val cross: <span class="type">Double</span>,</span></span></span><br><span class="line"><span class="params"><span class="class">                                         val mutation: <span class="type">Double</span>,</span></span></span><br><span class="line"><span class="params"><span class="class">                                         val population: <span class="type">Int</span>,</span></span></span><br><span class="line"><span class="params"><span class="class">                                         genePool: <span class="type">Array</span>[<span class="type">Gene</span>],</span></span></span><br><span class="line"><span class="params"><span class="class">                                         specimenBuilder: <span class="type">Iterable</span>[<span class="type">Gene</span>] =&gt; <span class="type">Specimen</span>,</span></span></span><br><span class="line"><span class="params"><span class="class">                                         conflictClear: <span class="type">Seq</span>[<span class="type">Specimen</span>] =&gt; <span class="type">Seq</span>[<span class="type">Specimen</span>],</span></span></span><br><span class="line"><span class="params"><span class="class">                                         fitnessF: (<span class="type">Specimen</span>, <span class="type">Specimen</span></span>) <span class="title">=&gt;</span> <span class="title">Double</span>)(<span class="params">implicit ev$1: <span class="type">Specimen</span> =&gt; <span class="type">Iterable</span>[<span class="type">Gene</span>], logger: <span class="type">Logger</span></span>) </span>&#123;</span><br><span class="line">  <span class="class"><span class="keyword">type</span> <span class="title">Pool</span> </span>= <span class="type">Seq</span>[<span class="type">Specimen</span>]</span><br><span class="line">  <span class="class"><span class="keyword">type</span> <span class="title">MatePool</span> </span>= <span class="type">Seq</span>[(<span class="type">Specimen</span>, <span class="type">Double</span>)]</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">randomGenes</span></span>: <span class="type">Stream</span>[<span class="type">Gene</span>] = genePool(<span class="type">Random</span>.nextInt(genePool.length)) #:: randomGenes</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">newSpecimen</span></span>(len: <span class="type">Int</span>): <span class="type">Specimen</span> = specimenBuilder(randomGenes.take(len))</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">newPool</span></span>(size: <span class="type">Int</span>, len: <span class="type">Int</span>): <span class="type">Pool</span> = (<span class="number">1</span> to size).map(_ =&gt; newSpecimen(len))</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">matePool</span></span>(pool: <span class="type">Pool</span>, tgt: <span class="type">Specimen</span>): <span class="type">MatePool</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> fitnesses: <span class="type">Seq</span>[<span class="type">Double</span>] = pool.map(fitnessF(_, tgt))</span><br><span class="line">    pool.zip(renormalize(fitnesses))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** 每个个体被选中的概率 */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">renormalize</span></span>(vector: <span class="type">Iterable</span>[<span class="type">Double</span>]): <span class="type">Iterable</span>[<span class="type">Double</span>] = &#123;</span><br><span class="line">    <span class="keyword">val</span> sum = vector.sum</span><br><span class="line">    vector.map(_ / sum)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** 蒙特卡罗选举，伪随机生成个体 */</span></span><br><span class="line">  <span class="meta">@tailrec</span> <span class="keyword">final</span> <span class="function"><span class="keyword">def</span> <span class="title">monteCarloSelection</span></span>(matePool: <span class="type">MatePool</span>): <span class="type">Specimen</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> (specimen, fitness) = matePool(<span class="type">Random</span>.nextInt(matePool.length))</span><br><span class="line">    <span class="comment">// 子代适值大于父代适值？Y 替换 N 保持</span></span><br><span class="line">    <span class="keyword">if</span> (fitness &gt; <span class="type">Random</span>.nextFloat()) specimen <span class="keyword">else</span> monteCarloSelection(matePool)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** 产生新生代 */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">popReproduction</span></span>(matePool: <span class="type">MatePool</span>): <span class="type">Pool</span> =</span><br><span class="line">    (<span class="number">1</span> to population)</span><br><span class="line">      .par</span><br><span class="line">      .map(_ =&gt; crossover(monteCarloSelection(matePool), monteCarloSelection(matePool)))</span><br><span class="line">      .map(mutate)</span><br><span class="line">      ./:(<span class="type">Seq</span>[<span class="type">Specimen</span>]())(conflictDetection)</span><br><span class="line">      .seq</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** 进行交叉操作，交叉概率 Pc */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">crossover</span></span>(a: <span class="type">Specimen</span>, b: <span class="type">Specimen</span>): <span class="type">Specimen</span> = specimenBuilder(a.zip(b).map(gene =&gt; <span class="keyword">if</span> (<span class="type">Random</span>.nextFloat &gt; cross) gene._1 <span class="keyword">else</span> gene._2))</span><br><span class="line">  <span class="comment">/** 进行变异操作，变异概率 Pm */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">mutate</span></span>(s: <span class="type">Specimen</span>): <span class="type">Specimen</span> = specimenBuilder(s.map(gene =&gt; <span class="keyword">if</span> (mutation &gt; <span class="type">Random</span>.nextFloat) randomGenes.head <span class="keyword">else</span> gene))</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 新生成的种群需要做 &#x27;&#x27;&#x27;冲突检测与消除操作&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment">    * 例如：</span></span><br><span class="line"><span class="comment">    * 001,001   =&gt;  (a,α)</span></span><br><span class="line"><span class="comment">    * 001,010   =&gt;  (a,β)</span></span><br><span class="line"><span class="comment">    * 010,110   =&gt;  (b,ζ)</span></span><br><span class="line"><span class="comment">    * 随机检测发现 &#x27;&#x27;&#x27;(a,α)&#x27;&#x27;&#x27; 和 &#x27;&#x27;&#x27;(a,β)&#x27;&#x27;&#x27;冲突。随机获取冲突之外的任意值 &#x27;&#x27;&#x27;(b,ζ)&#x27;&#x27;&#x27;，替换为：</span></span><br><span class="line"><span class="comment">    * 001,001   =&gt;  (a,α)</span></span><br><span class="line"><span class="comment">    * 010,010   =&gt;  (b,β)</span></span><br><span class="line"><span class="comment">    * 001,110   =&gt;  (a,ζ)</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * 依次循环，直到cursor等于种群大小。确保每次进化种群个体不重复。方便快速收敛</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">conflictDetection</span></span>(z: <span class="type">Pool</span>, b: <span class="type">Specimen</span>): <span class="type">Pool</span> = &#123;</span><br><span class="line">    <span class="meta">@tailrec</span> <span class="function"><span class="keyword">def</span> <span class="title">_conflictRif</span></span>(e: <span class="type">Specimen</span>): <span class="type">Specimen</span> =</span><br><span class="line">      <span class="keyword">if</span> (!z.contains(e)) e</span><br><span class="line">      <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">val</span> x = mutate(e)</span><br><span class="line">        <span class="keyword">if</span> (z.contains(x)) _conflictRif(e)</span><br><span class="line">        <span class="keyword">else</span> x</span><br><span class="line">      &#125;</span><br><span class="line">    conflictClear(z :+ _conflictRif(b))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** 遗传进化操作，将适值较高的个体选择出来，并将其优秀的基因传递给下一代 */</span></span><br><span class="line">  <span class="meta">@tailrec</span> <span class="keyword">final</span> <span class="function"><span class="keyword">def</span> <span class="title">evolution</span></span>(pool: <span class="type">Pool</span>, target: <span class="type">Specimen</span>, generation: <span class="type">Int</span> = <span class="number">0</span>): (<span class="type">Pool</span>, <span class="type">Int</span>) = &#123;</span><br><span class="line">    <span class="keyword">val</span> newGeneration = popReproduction(matePool(pool, target))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ===========================================</span></span><br><span class="line">    logger.debug(<span class="string">s&quot;第<span class="subst">$&#123;Console.RED&#125;</span>[&#123;&#125;]<span class="subst">$&#123;Console.RESET&#125;</span>代 向 第<span class="subst">$&#123;Console.RED&#125;</span>[&#123;&#125;]<span class="subst">$&#123;Console.RESET&#125;</span>代进化: &quot;</span>, generation, generation + <span class="number">1</span>)</span><br><span class="line">    logger.debug(<span class="string">&quot;&quot;</span>)</span><br><span class="line">    pool.zip(newGeneration).collect&#123; <span class="keyword">case</span> (s, t) =&gt;</span><br><span class="line">      <span class="keyword">if</span> (t.equals(target))</span><br><span class="line">        logger.debug(<span class="string">s&quot;<span class="subst">$&#123;s.mkString&#125;</span> -&gt; <span class="subst">$&#123;Console.BLACK_B&#125;</span><span class="subst">$&#123;Console.GREEN&#125;</span><span class="subst">$t</span><span class="subst">$&#123;Console.RESET&#125;</span>&quot;</span>)</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        logger.debug(<span class="string">s&quot;<span class="subst">$&#123;s.mkString&#125;</span> -&gt; <span class="subst">$&#123;t.mkString&#125;</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ===========================================</span></span><br><span class="line">    <span class="keyword">if</span> (newGeneration.contains(target)) (newGeneration, generation)</span><br><span class="line">    <span class="keyword">else</span> evolution(newGeneration, target, generation + <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/img/algorithm/ga/gatest.png" alt="测试结果"></p>
<h2 id="遗传算法实现自动排课"><a class="header-anchor" href="#遗传算法实现自动排课">¶</a>遗传算法实现自动排课</h2>
<p>点击<a target="_blank" rel="noopener" href="https://github.com/barudisshu/syllabus">这里</a>获取源码。</p>
</div></article><nav class="article-nav"><div class="article-nav-prev"><a href="/2018/09/14/youtrack/youtrack-install/">YouTrack 快速安装</a></div><div class="article-nav-next"><a href="/2018/07/16/mysql/mysql-master-slave-config/">实践MySQL主从复制(Master-Slave)的操作流程！</a></div></nav><div id="base-discus"><div id="disqus_thread"></div><script>var disqus_shortname = 'barudisshu-github-io';
var disqus_identifier = '2018/07/24/algorithm/ga/genetic-algorithm/';
var disqus_title = '基于遗传算法实现排课系统';
var disqus_url = 'https://galudisu.info/2018/07/24/algorithm/ga/genetic-algorithm/';
(function () {
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async>  </script></div></div></div><footer class="base-footer"><div class="footer-wrapper"><span>©2016 - 2025 <a href="https://galudisu.info">barudisshu</a>, unless otherwise noted.</span></div></footer><div class="dom-ready">
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>

<link rel="stylesheet" href="//cdn.bootcss.com/pace/1.0.2/themes/green/pace-theme-flash.min.css">

<script src="/js/base.js"></script>

<script src="/js/rabbit-lyrics.js"></script>
</div></body></html>