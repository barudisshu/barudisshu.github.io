<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><title>How to set up React, webpack 4, and Babel 7</title>
<link rel="stylesheet" href="/css/layout.css">
<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="/css/vendors/rabbit-lyrics.css">
<link rel="shortcut icon" href="/img/favicon.ico"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="简单易懂の现代魔法" type="application/atom+xml">
</head><body><header class="base-menu"><div class="menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a class="menu-link" href="/">简单易懂の现代魔法</a></li><li class="menu-item"><a class="menu-link" href="/archives/">Archives</a></li><li class="menu-item"><a class="menu-link" target="_blank" rel="noopener" href="http://weibo.com/u/2360401155">Weibo</a></li><li class="menu-item"><a class="menu-link" href="/about">About</a></li><li class="menu-item"><a class="menu-link" href="/atom.xml">Rss</a></li></ul></nav></div></header><header class="base-mobile-menu"><div class="mobile-menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a class="menu-link" href="/">简单易懂の现代魔法</a></li><li class="menu-item"><a class="menu-link" href="/archives/">Archives</a></li><li class="menu-item"><a class="menu-link" target="_blank" rel="noopener" href="http://weibo.com/u/2360401155">Weibo</a></li><li class="menu-item"><a class="menu-link" href="/about">About</a></li><li class="menu-item"><a class="menu-link" href="/atom.xml">Rss</a></li></ul></nav><div class="toggle-menu" id="mobile-menu-toggle"><span class="menu-bar"></span><span class="menu-bar"> </span><span class="menu-bar"></span></div></div></header><div class="base-content"><div class="base-content-main"><article class="article-main"><h1 class="article-title">How to set up React, webpack 4, and Babel 7</h1><div class="article-meta"><p class="meta-item meta-time"><span class="meta-item-title"></span><i class="icon-calendar"> </i>2018-11-19</p><p class="meta-item meta-tag"><span class="meta-item-title"></span><i class="icon-tag"> </i><a class="tag-link" href="/tags/react/">react</a></p></div><div class="article-content"><p><strong>React</strong> 主要用于单页面应用程序。</p>
<p>Y然而，你可以将React库集成到任何使用 <strong>webpack</strong>和<strong>Babel</strong>构建的网站中。</p>
<p><img src="/img/react/webpack4-react-babel.png" alt="react webpack babel"></p>
<span id="more"></span>
<h2 id="How-to-set-up-React-Webpack-and-Babel-What-you-will-learn"><a class="header-anchor" href="#How-to-set-up-React-Webpack-and-Babel-What-you-will-learn">¶</a>How to set up React, Webpack, and Babel: What you will learn</h2>
<ol>
<li>如何安装和配置webpack</li>
<li>如何安装和配置Babel</li>
<li>如何安装React</li>
<li>如何按照<code>Container / Presentational</code>组件的原则创建两个React组件</li>
<li>如何将生成的包包含到HTML页面</li>
<li>如何安装和配置Webpack Dev Server</li>
</ol>
<p>React不仅限于SPA应用。可以将库集成到任何现有网站中。</p>
<p>可以通过CDN或模块包引入React。</p>
<p>对于我的大多数项目，我都使用Webpack：将React和Webpack结合起来很容易。</p>
<p>您也可以按下下面几分钟的教程与Webpack4工作。</p>
<h2 id="How-to-set-up-React-Webpack-and-Babel-Setting-up-the-project"><a class="header-anchor" href="#How-to-set-up-React-Webpack-and-Babel-Setting-up-the-project">¶</a>How to set up React, Webpack, and Babel: Setting up the project</h2>
<p>首先为项目创建一个目录：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir webpack-react-tutorial &amp;&amp; cd webpack-react-tutorial</span><br></pre></td></tr></table></figure>
<p>创建一个用于保存代码的最小目录结构：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p src</span><br></pre></td></tr></table></figure>
<p>通过运行来启动项目：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure>
<p>就是这么简单，项目建立完成！</p>
<h2 id="How-to-set-up-React-Webpack-and-Babel-Setting-up-webpack"><a class="header-anchor" href="#How-to-set-up-React-Webpack-and-Babel-Setting-up-webpack">¶</a>How to set up React, Webpack, and Babel: Setting up webpack</h2>
<p><strong>Webpack</strong> 是现代Web开发的支柱之一。这是一个非常强大的工具。</p>
<p>了解如何使用webpack是使用React的基础。</p>
<p>webpack提取原始的React组件，用于生成(几乎)每个浏览器都能运行的JavaScript代码。</p>
<p>让我们通过运行以下命令来安装它：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack --save-dev</span><br></pre></td></tr></table></figure>
<p>你还需要webpack-cli，将其加入：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack-cli --save-dev</span><br></pre></td></tr></table></figure>
<p>接下来将<code>webpack</code>命令加入到<code>package.json</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">	&quot;build&quot;: &quot;webpack --mode production&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里，不需要为webpack定义配置文件。</p>
<p>较旧的webpack版本会自动查找配置文件。</p>
<p>自版本4开始，你可以直接开发。</p>
<p>下一小节，我们将安装和配置Babel以便转换我们的代码。</p>
<h2 id="How-to-set-up-React-Webpack-and-Babel-Setting-up-Babel"><a class="header-anchor" href="#How-to-set-up-React-Webpack-and-Babel-Setting-up-Babel">¶</a>How to set up React, Webpack, and Babel: Setting up Babel</h2>
<p>React components(组件)大多是用JavaScript ES6编写的。</p>
<p>由于浏览器无法理解React组件，因此需要进行某种转换。</p>
<p>Webpack不知道如何进行转换，但它具有loaders(加载器)的概念：将它们视为转换器。</p>
<p>Webpack loaders(加载器)将某些内容作为输入并生成其他内容作为输出。</p>
<p>babel-loader是Webpack加载器，负责接收ES6代码并使其可以让所选择的浏览器理解。</p>
<p>很明显 babel-load使用Babel。并且Babel必须配置为使用一组预设：</p>
<p>babel-preset-env用于将JavaScript ES6代码编译为ES5(请注意，babel-preset-es2015现已弃用)</p>
<p>babel-preset-react用于将JSX和其它东西编译到JavaScript</p>
<p>让我们用以下命令引入依赖关系：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i babel-loader babel-core babel-preset-env babel-preset-react --save-dev</span><br></pre></td></tr></table></figure>
<p>别忘了配置Babel！在项目文件夹中创建一个名为<code>.babelrc</code>的新文件：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;presets&quot;: [&quot;env&quot;, &quot;react&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此时我们已准备好定义最小的webpack配置。</p>
<p>创建一个名为<code>webpack.config.js</code>的文件，写入以下内容：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">	  &#123;</span><br><span class="line">	    <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">		<span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">		<span class="attr">use</span>: &#123;</span><br><span class="line">		  <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span></span><br><span class="line">		&#125;</span><br><span class="line">      &#125;</span><br><span class="line">	]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>配置非常简单。</p>
<p>对于每个扩展名为<code>.js</code>的文件，webpack都会通过babel-loader来管理代码，将ES6转换为ES5.</p>
<p>有了这个，我们就可以编写我们的React组件了。</p>
<p>让我们来看看下一节。</p>
<h2 id="How-to-set-up-React-webpack-and-Babel-writing-React-components"><a class="header-anchor" href="#How-to-set-up-React-webpack-and-Babel-writing-React-components">¶</a>How to set up React, webpack, and Babel: writing React components</h2>
<p>我喜欢按照容器(Container)组件/展示(Presentational)组件的原则编写我的React组件。</p>
<p>我建议看看Dan Abramov的 <a target="_blank" rel="noopener" href="https://medium.com/@learnreact/container-components-c0e67432e005">container components</a> 和 <a target="_blank" rel="noopener" href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0">smart and dumb components</a>，以了解更多信息。</p>
<p>简而言之，容器组件/展示组件原则是React组件的模式。</p>
<p>容器组件是承载所有逻辑的容器组件：用于处理state(状态)更改，内部组件state(状态)等的功能。</p>
<p>相反，展示组件仅用于显示所需的HTML标记。展示组件通常是普通的 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions">箭头函数</a>，并从容器组件接受数据作为 <a target="_blank" rel="noopener" href="https://reactjs.org/docs/components-and-props.html">props(属性)</a>。</p>
<p>你将在以下示例中看到它们的样子。</p>
<p>对于这片文章的范围，我想构建一个带有单个文本输入的超级简单的React表单。</p>
<p>在接触任何代码之前，让我们通过运行以下命令来引入React：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i react react-dom --save-dev</span><br></pre></td></tr></table></figure>
<p>然后创建一个用于组织组件的最小目录结构：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p src/js/components/&#123;container,presentational&#125;</span><br></pre></td></tr></table></figure>
<p>接下来让我们创建一个容器组件：</p>
<ul>
<li>有自己的state(状态)</li>
<li>渲染HTML表单</li>
</ul>
<p>在<code>src/js/components/container/</code>中创建组件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch src/js/components/container/ForContainer.js</span><br></pre></td></tr></table></figure>
<p>该组件将如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FormContainer</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;article-form&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">FormContainer</span>;</span><br></pre></td></tr></table></figure>
<p>该组件刺客没什么内容和交互。它只是一个包装组件的骨架。</p>
<p>事实上，如果一个容器组件不包含展示子组件的话，那么这个容器组件几乎是无用的。</p>
<p>我们来解决这个问题。</p>
<p>在<code>src/js/components/presentational/</code>中创建一个新组件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch src/js/components/presentational/Input.js</span><br></pre></td></tr></table></figure>
<p>我们的第一个表示性的React组件将是文本输入框。我们知道HTML input具有以下属性：</p>
<ul>
<li>type</li>
<li>class</li>
<li>id</li>
<li>value</li>
<li>required</li>
</ul>
<p>所有这些都将成为容器组件传递给其展示子组件的props(属性)。</p>
<p>由于Input保持自己的state(状态)，我们必须确保React会处理它。HTML input成为一个React中的受控组件。</p>
<p>说到props(属性)，最好使用Prop Types记录你的React组件。</p>
<p>通过运行以下命令来安装prop-types包：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i prop-types --save-dev</span><br></pre></td></tr></table></figure>
<p>回到React，HTML Input展示组件如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">PropTypes</span> <span class="keyword">from</span> <span class="string">&quot;prop-types&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Input</span> = (<span class="params">&#123; label, text, type, id, value, handleChange &#125;</span>) =&gt; (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">htmlFor</span>=<span class="string">&#123;label&#125;</span>&gt;</span>&#123;text&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">type</span>=<span class="string">&#123;type&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">className</span>=<span class="string">&quot;form-control&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">id</span>=<span class="string">&#123;id&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">value</span>=<span class="string">&#123;value&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onChange</span>=<span class="string">&#123;handleChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">required</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line"><span class="title class_">Input</span>.<span class="property">propTypes</span> = &#123;</span><br><span class="line">  <span class="attr">label</span>: <span class="title class_">PropTypes</span>.<span class="property">string</span>.<span class="property">isRequired</span>,</span><br><span class="line">  <span class="attr">text</span>: <span class="title class_">PropTypes</span>.<span class="property">string</span>.<span class="property">isRequired</span>,</span><br><span class="line">  <span class="attr">type</span>: <span class="title class_">PropTypes</span>.<span class="property">string</span>.<span class="property">isRequired</span>,</span><br><span class="line">  <span class="attr">id</span>: <span class="title class_">PropTypes</span>.<span class="property">string</span>.<span class="property">isRequired</span>,</span><br><span class="line">  <span class="attr">value</span>: <span class="title class_">PropTypes</span>.<span class="property">string</span>.<span class="property">isRequired</span>,</span><br><span class="line">  <span class="attr">handleChange</span>: <span class="title class_">PropTypes</span>.<span class="property">func</span>.<span class="property">isRequired</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Input</span>;</span><br></pre></td></tr></table></figure>
<p>此时，我们就可以更新容器组件，以包含文本输入框，即 Input 展示组件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Input</span> <span class="keyword">from</span> <span class="string">&quot;../presentational/Input&quot;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FormContainer</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">      <span class="attr">seo_title</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">handleChange</span> = <span class="variable language_">this</span>.<span class="property">handleChange</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">handleChange</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; [event.<span class="property">target</span>.<span class="property">id</span>]: event.<span class="property">target</span>.<span class="property">value</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; seo_title &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;article-form&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">text</span>=<span class="string">&quot;SEO title&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">label</span>=<span class="string">&quot;seo_title&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">id</span>=<span class="string">&quot;seo_title&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;seo_title&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">handleChange</span>=<span class="string">&#123;this.handleChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">FormContainer</span>;</span><br></pre></td></tr></table></figure>
<p>是时候把所有这些东西联系起来了。</p>
<p>Webpack期望 entry point(入口点)为 <code>./src/index.js</code></p>
<p>创建 <code>./src/index.js</code>，并使用<code>import</code>指令将容器组件引入其中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">FormContainer</span> <span class="keyword">from</span> <span class="string">&quot;./js/components/container/FormContainer&quot;</span>;</span><br></pre></td></tr></table></figure>
<p>有了这个，我们就可以通过运行以下命令来创建我们的包了：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>
<p>给Webpack一秒钟，看看bundle(包)就生产了！</p>
<p>bundle(包)将被放入 <code>./dist/main.js</code>。</p>
<p>现在让我们通过将bundle(包)包含在HTML页面中来实现我们的React实战。</p>
<p>如何使用webpack 4和 Babel 构建 React 应用：HTML webpack插件 (html-webpack-plugin，html-loader)</p>
<p>要显示我们的 React 表单，我们必须告诉 webpack生产一个HTML页面。生产的 bundle(包)将放在 <code>&lt;script&gt;&lt;/script&gt;</code>标签内。</p>
<p>webpack需要两个额外的组件来处理HTML： html-webpack-plugin 和 html-loader。</p>
<p>通过以下命令添加依赖项：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i html-webpack-plugin html-loader --save-dev</span><br></pre></td></tr></table></figure>
<p>然后更新webpack配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebPackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.html$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;html-loader&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebPackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">template</span>: <span class="string">&quot;./src/index.html&quot;</span>,</span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;./index.html&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>接下来<code>./src/index.html</code>中创建一个HTML文件(可以随意使用你喜欢的CSS库)：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>How to set up React, Webpack, and Babel<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row mt-5&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-4 offset-md-1&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>Create a new article<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;create-article-form&quot;</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- form --&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>还剩下最后一件事！我们必须告诉我们React组件将自己渲染到 <code>&lt;div id=&quot;create-article-form&quot;&gt;&lt;/div&gt;</code>标签中。</p>
<p>打开<code>./src/js/components/container/FormContainer.js</code>并在文件底板添加以下内容：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> wrapper = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;create-article-form&quot;</span>);</span><br><span class="line">wrapper ? <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">FormContainer</span> /&gt;</span></span>, wrapper) : <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>
<p>关闭并保存文件。</p>
<p>现在再次运行构建：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>
<p>并查看 <code>./dist</code> 文件夹。 你应该看到生成的HTML。</p>
<p>使用webpack，无需在HTML文件中包含你的JavaScript：bundle(包)将自动注入页面。</p>
<p>在浏览器中打开<code>./dist/index.html</code>：你应该可以看到React表单了。</p>
<h2 id="How-to-set-up-React-webpack-and-Babel-webpack-dev-server"><a class="header-anchor" href="#How-to-set-up-React-webpack-and-Babel-webpack-dev-server">¶</a>How to set up React, webpack, and Babel: webpack dev server</h2>
<p>每次更改文件时，你应该不希望每次都需要键入 <code>npm run build</code>来重新构建项目。</p>
<p>只需3行配置即可启动并运行开发服务器。</p>
<p>配置后，webpack将在浏览器中启动你的应用程序。</p>
<p>此外，每次在修改后保存文件时，webpack dev server都会自动刷新浏览器的窗口。</p>
<p>要设置webpack dev server，请先通过以下命令安装包：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack-dev-server --save-dev</span><br></pre></td></tr></table></figure>
<p>打开 <code>package.json</code>添加启动脚本：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack-dev-server --open --mode development&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>保存并关闭文件。</p>
<p>现在执行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm start</span><br></pre></td></tr></table></figure>
<p>webpack dev server会为每个更新的文件自动刷新浏览器窗口。</p>
<p><img src="/img/react/react-webpack-babel-webpack-dev-server.png" alt="webpack dev server"></p>
<h2 id="How-to-set-up-React-webpack-and-Babel-wrapping-up"><a class="header-anchor" href="#How-to-set-up-React-webpack-and-Babel-wrapping-up">¶</a>How to set up React, webpack, and Babel: wrapping up</h2>
<p>React主要用于创建单页面应用程序。但它也可以适用于任何网站。</p>
<p>通过组合webpack 和 Babel，可以将一堆 React组件转换为适合分发的 bundle(包).</p>
</div></article><nav class="article-nav"><div class="article-nav-prev"><a href="/2018/11/19/react/react-redux-tutorial-beginners/">React Redux Tutorial for Beginners - The Definitive Guide(2018)</a></div><div class="article-nav-next"><a href="/2018/10/31/mongo/deploying-mongodb-shared-cluster-on-centos-7/">How to Deploy a MongoDB Sharded Cluster on CentOS 7</a></div></nav><div id="base-discus"><div id="disqus_thread"></div><script>var disqus_shortname = 'barudisshu-github-io';
var disqus_identifier = '2018/11/19/react/react-webpack-babel/';
var disqus_title = 'How to set up React, webpack 4, and Babel 7';
var disqus_url = 'https://galudisu.info/2018/11/19/react/react-webpack-babel/';
(function () {
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async>  </script></div></div></div><footer class="base-footer"><div class="footer-wrapper"><span>©2016 - 2025 <a href="https://galudisu.info">barudisshu</a>, unless otherwise noted.</span></div></footer><div class="dom-ready">
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>

<link rel="stylesheet" href="//cdn.bootcss.com/pace/1.0.2/themes/green/pace-theme-flash.min.css">

<script src="/js/base.js"></script>

<script src="/js/rabbit-lyrics.js"></script>
</div></body></html>