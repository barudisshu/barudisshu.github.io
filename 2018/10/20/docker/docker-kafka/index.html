<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><title>åŸºäºdockerç¯å¢ƒä¸‹çš„zookeeperå’Œkafkaéƒ¨ç½²</title>
<link rel="stylesheet" href="/css/layout.css">
<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="/css/vendors/rabbit-lyrics.css">
<link rel="shortcut icon" href="/img/favicon.ico"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ç®€å•æ˜“æ‡‚ã®ç°ä»£é­”æ³•" type="application/atom+xml">
</head><body><header class="base-menu"><div class="menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a class="menu-link" href="/">ç®€å•æ˜“æ‡‚ã®ç°ä»£é­”æ³•</a></li><li class="menu-item"><a class="menu-link" href="/archives/">Archives</a></li><li class="menu-item"><a class="menu-link" target="_blank" rel="noopener" href="http://weibo.com/u/2360401155">Weibo</a></li><li class="menu-item"><a class="menu-link" href="/about">About</a></li><li class="menu-item"><a class="menu-link" href="/atom.xml">Rss</a></li></ul></nav></div></header><header class="base-mobile-menu"><div class="mobile-menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a class="menu-link" href="/">ç®€å•æ˜“æ‡‚ã®ç°ä»£é­”æ³•</a></li><li class="menu-item"><a class="menu-link" href="/archives/">Archives</a></li><li class="menu-item"><a class="menu-link" target="_blank" rel="noopener" href="http://weibo.com/u/2360401155">Weibo</a></li><li class="menu-item"><a class="menu-link" href="/about">About</a></li><li class="menu-item"><a class="menu-link" href="/atom.xml">Rss</a></li></ul></nav><div class="toggle-menu" id="mobile-menu-toggle"><span class="menu-bar"></span><span class="menu-bar"> </span><span class="menu-bar"></span></div></div></header><div class="base-content"><div class="base-content-main"><article class="article-main"><h1 class="article-title">åŸºäºdockerç¯å¢ƒä¸‹çš„zookeeperå’Œkafkaéƒ¨ç½²</h1><div class="article-meta"><p class="meta-item meta-time"><span class="meta-item-title"></span><i class="icon-calendar"> </i>2018-10-20</p><p class="meta-item meta-tag"><span class="meta-item-title"></span><i class="icon-tag"> </i><a class="tag-link" href="/tags/docker/">docker</a></p></div><div class="article-content"><h2 id="Kafka-ç®€å•ä»‹ç»"><a class="header-anchor" href="#Kafka-ç®€å•ä»‹ç»">Â¶</a>Kafka ç®€å•ä»‹ç»</h2>
<p><code>kafka</code>æ˜¯ <em>LinkedIn</em> å¼€æºçš„ä¸€ç§é«˜ååé‡çš„åˆ†å¸ƒå¼å‘å¸ƒè®¢é˜…æ¶ˆæ¯ç³»ç»Ÿï¼Œkafkaçš„è¯ç”Ÿå°±æ˜¯ä¸ºäº†å¤„ç†æµ·é‡æ—¥å¿—æ•°æ®ï¼Œæ‰€ä»¥kafkaå¤„ç†æ¶ˆæ¯çš„æ•ˆç‡éå¸¸é«˜ï¼Œå³ä½¿æ˜¯éå¸¸æ™®é€šçš„ç¡¬ä»¶ä¹Ÿå¯ä»¥æ”¯æŒæ¯ç§’æ•°ç™¾ä¸‡çš„æ¶ˆæ¯ã€‚</p>
<p><code>kafka</code>å¤©ç„¶æ”¯æŒé›†ç¾¤è´Ÿè½½å‡è¡¡ï¼Œä½¿ç”¨ <em>zookeeper</em> è¿›è¡Œåˆ†å¸ƒå¼åè°ƒç®¡ç†ã€‚ä¸æ”¯æŒäº‹åŠ¡ï¼Œæœ‰ä¸€å®šæ¦‚ç‡ä¸¢å¤±æ¶ˆæ¯ã€‚</p>
<p><code>kafka</code>çš„ç‰¹ç‚¹ï¼Œå†³å®šäº†ä½¿ç”¨åœºæ™¯ï¼šæ—¥å¿—ä¸­é—´ä»¶ã€‚</p>
<span id="more"></span>
<h2 id="ä¸‹è½½dockeré•œåƒ"><a class="header-anchor" href="#ä¸‹è½½dockeré•œåƒ">Â¶</a>ä¸‹è½½dockeré•œåƒ</h2>
<ul>
<li>zookeeper: <code>docker pull zookeeper:latest</code></li>
<li>kafka: <code>docker pull wurstmeister/kafka:latest</code></li>
</ul>
<h2 id="åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨"><a class="header-anchor" href="#åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨">Â¶</a>åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨</h2>
<p>å…ˆå¯åŠ¨zookeeper:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name zookeeper --publish 2181:2181 -v /etc/localtime:/etc/localtime zookeeper:latest</span><br></pre></td></tr></table></figure>
<p>zookeeperå¯åŠ¨å®Œæˆåå†å¯åŠ¨kafka:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name kafka -p 9092:9092 \</span><br><span class="line">--link zookeeper \</span><br><span class="line">--env KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181 \</span><br><span class="line">--env KAFKA_ADVERTIESED_HOST_NAME=&#123;your_host_ip&#125; \</span><br><span class="line">--env KAFKA_ADVERTISED_PORT=9092 \</span><br><span class="line">--volume /etc/localtime:/etc/localtime \</span><br><span class="line">wurstmeister/kafka:latest</span><br></pre></td></tr></table></figure>
<h2 id="å‘kafkaå‘é€æµ‹è¯•æ¶ˆæ¯"><a class="header-anchor" href="#å‘kafkaå‘é€æµ‹è¯•æ¶ˆæ¯">Â¶</a>å‘kafkaå‘é€æµ‹è¯•æ¶ˆæ¯</h2>
<p>è¿è¡Œ<code>docker ps</code>ï¼Œæ‰¾åˆ°kafkaçš„ <em>CONTAINER ID</em>ï¼Œè¿è¡Œ <code>docker exec -it $&#123;kafka_id&#125; /bin/bash</code>ï¼Œè¿›å…¥kafkaå®¹å™¨ã€‚</p>
<p>è¿›å…¥kafkaé»˜è®¤ç›®å½•ï¼Œ <code>/opt/kafka</code>ï¼Œè¿è¡Œ<code>bin/kafka-topics.sh --create --zookeeper zookeeper:2181 --replication-factor 1 --partitions 1 --topic test</code>ï¼Œåˆ›å»ºä¸€ä¸ª <em>topic</em> åç§°ä¸º testã€‚</p>
<p>è¿è¡Œ<code>bin/kafka-topics.sh --list --zookeeper zookeeper:2181</code>æŸ¥çœ‹å½“å‰çš„ <em>topic</em> åˆ—è¡¨ã€‚</p>
<p>è¿è¡Œä¸€ä¸ªæ¶ˆæ¯ç”Ÿäº§è€…ï¼Œåˆ¶å®š <em>topic</em> ä¸ºåˆšåˆšåˆ›å»ºçš„ <em>test</em>ï¼Œ<code>bin/kafka-console-producer.sh --broker-list localhost:9092 --topic test</code>ï¼Œè¾“å…¥ä¸€äº›æµ‹è¯•æ¶ˆæ¯ã€‚</p>
<p>è¿è¡Œä¸€ä¸ªæ¶ˆæ¯æ¶ˆè´¹è€…ï¼ŒåŒæ ·æŒ‡å®š <em>topic</em> ä¸º <em>test</em>ï¼Œ<code>bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test --from-begining</code>ï¼Œå¯ä»¥æ¥æ”¶åˆ°ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯ã€‚</p>
<h2 id="æœ€å"><a class="header-anchor" href="#æœ€å">Â¶</a>æœ€å</h2>
<p><strong>kafka</strong> ç¯å¢ƒå·²ç»æ­å»ºå®Œæˆï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦å¯¹ä¹‹å‰çš„å·¥ç¨‹è¿›è¡Œæ”¹é€ ï¼Œä½¿ç”¨log4j2çš„kafka appenderæŠŠæ—¥å¿—ç»Ÿä¸€è¾“å‡ºåˆ° <strong>kafka</strong> æ—¥å¿—ä¸­é—´ä»¶ã€‚</p>
<p>æ—¥å¿—å¯¼å…¥ <strong>kafka</strong> ä¹‹åï¼Œæ¥ä¸‹æ¥çš„å¤„ç†å°±æ¯”è¾ƒçµæ´»äº†ï¼Œå¯ä»¥ç”¨ä¸åŒåŠŸèƒ½çš„æ¶ˆè´¹è€…è®¢é˜…æ„Ÿå…´è¶£çš„ topicï¼Œè¿›è¡Œæ—¥å¿—åˆ†æã€‚ä¾‹å¦‚ï¼šä½¿ç”¨ kafka ä½œä¸º storm çš„æ•°æ®æ¥æº spoutï¼Œè¿›è¡Œæµå¼å¤„ç†ï¼›è®¢é˜… kafka ä¸­éœ€è¦åšç¦»çº¿ç»Ÿè®¡å¤„ç†çš„ topicï¼ŒæŠŠæ•°æ®ä¿å­˜åˆ°æ•°æ®åº“ï¼Œä¸€èˆ¬æ˜¯ mongodb æˆ– hbase è¿™ç§æ•°æ®ç»“æ„æ¾æ•£çš„ nosql æ•°æ®åº“ï¼›åˆæˆ–è€…å¯ä»¥ä½¿ç”¨ flume æˆ– logstash è¿™ç§ç®¡é“å·¥å…·ï¼ŒæŠŠæ•°æ®å¯¼å…¥åˆ°å…¶ä»–çš„ç³»ç»Ÿï¼Œæ¯”å¦‚ elasticsearchã€ solr ç­‰ã€‚<br>
<strong>kafka</strong> ä½œä¸ºæœ€å¸¸ç”¨çš„æ—¥å¿—ä¸­é—´ä»¶ï¼Œå¯ä»¥æŠŠåˆ†æ•£çš„æ—¥å¿—é›†ä¸­åˆ°ä¸€å¤„ï¼Œå¹¶åšç¼“å†²å¤„ç†ï¼Œå†å’Œå…¶ä»–å¼€æºå·¥å…·è¿›è¡Œé›†æˆï¼Œå¯¹æ•°æ®åšè¿›ä¸€æ­¥å¤„ç†ï¼Œæ˜¯æ—¥å¿—ç»Ÿè®¡ç³»ç»Ÿçš„åŸºç¡€ç»„ä»¶ã€‚</p>
</div></article><nav class="article-nav"><div class="article-nav-prev">ğŸ”™<a href="/2018/10/20/docker/docker-keycloak/">åŸºäºdockerå®‰è£…é…ç½®keycloak</a></div><div class="article-nav-next">ğŸ”œ<a href="/2018/09/27/gitlab/gitlab-ce-zh/">Docker å®‰è£…æ±‰åŒ–ç‰ˆGitlab</a></div></nav><div id="base-discus"><div id="disqus_thread"></div><script>var disqus_shortname = 'barudisshu-github-io';
var disqus_identifier = '2018/10/20/docker/docker-kafka/';
var disqus_title = 'åŸºäºdockerç¯å¢ƒä¸‹çš„zookeeperå’Œkafkaéƒ¨ç½²';
var disqus_url = 'https://galudisu.info/2018/10/20/docker/docker-kafka/';
(function () {
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async>  </script></div></div></div><footer class="base-footer"><div class="footer-wrapper"><span>Â©2016 - 2025 <a href="https://galudisu.info">barudisshu</a>, unless otherwise noted.</span></div></footer><div class="dom-ready">
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>

<link rel="stylesheet" href="//cdn.bootcss.com/pace/1.0.2/themes/green/pace-theme-flash.min.css">

<script src="/js/base.js"></script>

<script src="/js/rabbit-lyrics.js"></script>
</div></body></html>