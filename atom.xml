<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>简单易懂の现代魔法</title>
  
  
  <link href="https://galudisu.info/atom.xml" rel="self"/>
  
  <link href="https://galudisu.info/"/>
  <updated>2025-05-11T16:14:26.356Z</updated>
  <id>https://galudisu.info/</id>
  
  <author>
    <name>barudisshu</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>策略模式(Strategy Pattern)</title>
    <link href="https://galudisu.info/2025/05/10/pattern/basic/behavioral/Strategy/"/>
    <id>https://galudisu.info/2025/05/10/pattern/basic/behavioral/Strategy/</id>
    <published>2025-05-10T12:25:00.000Z</published>
    <updated>2025-05-11T16:14:26.356Z</updated>
    
    <content type="html"><![CDATA[<span id="more"></span>]]></content>
    
    
      
      
    <summary type="html">&lt;span id=&quot;more&quot;&gt;&lt;/span&gt;
</summary>
      
    
    
    <content src="https://galudisu.info/%3Cspan%20id=%22more%22%3E%3C/span%3E" type="image"/>
    
    
    
    <category term="behavioral" scheme="https://galudisu.info/tags/behavioral/"/>
    
    <category term="strategy" scheme="https://galudisu.info/tags/strategy/"/>
    
  </entry>
  
  <entry>
    <title>代理模式(Proxy Pattern)</title>
    <link href="https://galudisu.info/2025/05/10/pattern/basic/structural/Proxy/"/>
    <id>https://galudisu.info/2025/05/10/pattern/basic/structural/Proxy/</id>
    <published>2025-05-10T10:25:06.000Z</published>
    <updated>2025-05-12T16:22:30.095Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>一个类代表另一个类的功能。在代理模式中，我们创建具有现有对象的对象，以便向外界提供功能接口。可以理解为内存中没有这个对象就创建，有就直接返回这个对象。</p></blockquote><img src="/assert/puml/ad121bfbedb1b584aa4e204d4c03c0baebf11c5faf26fbcaff2fab9db54314ab.svg"/><span id="more"></span><p><strong>代理模式(Proxy Pattern)</strong> 在面向对象系统中，有些对象由于某些原因(比如对象创建开销很大，某些操作需要安全控制)，直接访问会给使用者或系统结构带来很多麻烦，我们可以在访问此对象时加上一个该对象的访问层。</p><blockquote><p>⚠️ <strong>注意</strong><br>代理模式和委派模式比较容易混淆：</p><p>代理模式是结构模式、委托模式是行为模式。</p><ul><li><strong>代理</strong> = 包裹 + 控制： 像快递员，帮你拿包裹，顺便检查一下。</li><li><strong>委托</strong> = 包裹 + 转发： 像邮局柜台，你交给他，他转手就交给快递公司。</li><li></li></ul><p>快递送货上门是代理，他要对包裹负责，并且要确定送给你；你晚上要加班不方便，让家人帮你去取快递是委托，家人拿了就丢那放着，也可能家人都不一定去拿。</p></blockquote><h3 id="功能角度分类"><a class="header-anchor" href="#功能角度分类">¶</a>功能角度分类</h3><table><thead><tr><th style="text-align:left"><strong>类型</strong></th><th style="text-align:left"><strong>场景</strong></th><th style="text-align:left"><strong>示例</strong></th><th style="text-align:left"><strong>特点</strong></th></tr></thead><tbody><tr><td style="text-align:left">远程代理(Remote Proxy)</td><td style="text-align:left">访问不同地址空间的对象、远程服务通信</td><td style="text-align:left">RMI、gRPC、</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">虚拟代理(Virtual Proxy)</td><td style="text-align:left">创建真实对象的成本较高时，延迟加载(Lazy Load)<br/> 只有在真正需要时才创建目标对象</td><td style="text-align:left">图片加载<br/>大文件读取</td><td style="text-align:left">减少资源浪费<br/>提升相应速度</td></tr><tr><td style="text-align:left">保护代理(Protection Proxy)</td><td style="text-align:left">权限控制</td><td style="text-align:left">鉴权</td><td style="text-align:left">增强安全性<br/>细颗粒度控制</td></tr></tbody></table><h3 id="根据实现技术分类-Java常见"><a class="header-anchor" href="#根据实现技术分类-Java常见">¶</a>根据实现技术分类(Java常见)</h3><table><thead><tr><th style="text-align:left"><strong>类型</strong></th><th style="text-align:left"><strong>描述</strong></th></tr></thead><tbody><tr><td style="text-align:left">静态代理(Static Proxy)</td><td style="text-align:left">手动编写代理类，编译时确定</td></tr><tr><td style="text-align:left">动态代理(Dynamic Proxy)</td><td style="text-align:left">运行时生成代理类，使用<code>java.lang.reflect.Proxy</code></td></tr><tr><td style="text-align:left">CGLIB代理</td><td style="text-align:left">基于字节玛增强技术，适用于没有接口的类</td></tr></tbody></table><h3 id="代理实现方法"><a class="header-anchor" href="#代理实现方法">¶</a>代理实现方法</h3><ul><li>静态代理</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Subject</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">request</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RealSubject</span> <span class="keyword">implements</span> <span class="title class_">Subject</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">request</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Proxy</span> <span class="keyword">implements</span> <span class="title class_">Subject</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> Subject realSubject;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">request</span><span class="params">()</span> &#123;</span><br><span class="line">    realSubject.request();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>动态代理</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Proxy</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  pubilc Object <span class="title function_">invoke</span><span class="params">(Method method, Object[] args, Object proxy)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> method.invoke(target, args);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>CBLIB代理(字节增强)</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Proxy</span> <span class="keyword">implements</span> <span class="title class_">MethodInterceptor</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> Object <span class="title function_">intercept</span><span class="params">(Object obj, Method method, MethodProxy proxy)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> proxy.invokeSuper(obj, args);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">Enhancer</span> <span class="variable">enhancer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Enhancer</span>();</span><br><span class="line">enhancer.setSuperclass(RealSubject.class);</span><br><span class="line">enhancer.setCallback(<span class="keyword">new</span> <span class="title class_">Proxy</span>());</span><br><span class="line"><span class="type">RealSubject</span> <span class="variable">proxy</span> <span class="operator">=</span> enhancer.create();</span><br><span class="line">proxy.request();</span><br></pre></td></tr></table></figure><p><strong>差异对别</strong>：</p><table><thead><tr><th style="text-align:left"><strong>类型</strong></th><th style="text-align:left"><strong>是否需要接口</strong></th><th style="text-align:left"><strong>是否手动写代理类</strong></th><th style="text-align:left"><strong>技术基础</strong></th><th style="text-align:left"><strong>应用场景</strong></th></tr></thead><tbody><tr><td style="text-align:left">静态代理</td><td style="text-align:left">是</td><td style="text-align:left">是</td><td style="text-align:left">接口/抽象类</td><td style="text-align:left">简单封装、学习</td></tr><tr><td style="text-align:left">JDK动态代理</td><td style="text-align:left">是</td><td style="text-align:left">否</td><td style="text-align:left">反射+<code>Proxy</code></td><td style="text-align:left">AOP、Spring(可选)</td></tr><tr><td style="text-align:left">CGLIB代理</td><td style="text-align:left">否</td><td style="text-align:left">否</td><td style="text-align:left">ASM字节玛增强</td><td style="text-align:left">无接口代理、Spring(默认)</td></tr></tbody></table><h2 id="总结"><a class="header-anchor" href="#总结">¶</a>总结</h2><blockquote><p>代理模式从<strong>功能角度</strong>可以分为： 远程代理、虚拟代理、保护代理；从<strong>实现技术角度</strong>可分为： 静态代理、动态代理(JDK)、CGLIB代理。</p></blockquote>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;一个类代表另一个类的功能。在代理模式中，我们创建具有现有对象的对象，以便向外界提供功能接口。可以理解为内存中没有这个对象就创建，有就直接返回这个对象。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;img src=&quot;/assert/puml/ad121bfbedb1b584aa4e204d4c03c0baebf11c5faf26fbcaff2fab9db54314ab.svg&quot;/&gt;</summary>
    
    
    <content src="https://galudisu.info/%3Cblockquote%3E%3Cp%3E%E4%B8%80%E4%B8%AA%E7%B1%BB%E4%BB%A3%E8%A1%A8%E5%8F%A6%E4%B8%80%E4%B8%AA%E7%B1%BB%E7%9A%84%E5%8A%9F%E8%83%BD%E3%80%82%E5%9C%A8%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%AD%EF%BC%8C%E6%88%91%E4%BB%AC%E5%88%9B%E5%BB%BA%E5%85%B7%E6%9C%89%E7%8E%B0%E6%9C%89%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E4%BB%A5%E4%BE%BF%E5%90%91%E5%A4%96%E7%95%8C%E6%8F%90%E4%BE%9B%E5%8A%9F%E8%83%BD%E6%8E%A5%E5%8F%A3%E3%80%82%E5%8F%AF%E4%BB%A5%E7%90%86%E8%A7%A3%E4%B8%BA%E5%86%85%E5%AD%98%E4%B8%AD%E6%B2%A1%E6%9C%89%E8%BF%99%E4%B8%AA%E5%AF%B9%E8%B1%A1%E5%B0%B1%E5%88%9B%E5%BB%BA%EF%BC%8C%E6%9C%89%E5%B0%B1%E7%9B%B4%E6%8E%A5%E8%BF%94%E5%9B%9E%E8%BF%99%E4%B8%AA%E5%AF%B9%E8%B1%A1%E3%80%82%3C/p%3E%3C/blockquote%3E%3Cimg%20src=%22/assert/puml/ad121bfbedb1b584aa4e204d4c03c0baebf11c5faf26fbcaff2fab9db54314ab.svg%22/%3E%3Cspan%20id=%22more%22%3E%3C/span%3E%3Cp%3E%3Cstrong%3E%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F(Proxy%20Pattern)%3C/strong%3E%20%E5%9C%A8%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%B3%BB%E7%BB%9F%E4%B8%AD%EF%BC%8C%E6%9C%89%E4%BA%9B%E5%AF%B9%E8%B1%A1%E7%94%B1%E4%BA%8E%E6%9F%90%E4%BA%9B%E5%8E%9F%E5%9B%A0(%E6%AF%94%E5%A6%82%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E5%BC%80%E9%94%80%E5%BE%88%E5%A4%A7%EF%BC%8C%E6%9F%90%E4%BA%9B%E6%93%8D%E4%BD%9C%E9%9C%80%E8%A6%81%E5%AE%89%E5%85%A8%E6%8E%A7%E5%88%B6)%EF%BC%8C%E7%9B%B4%E6%8E%A5%E8%AE%BF%E9%97%AE%E4%BC%9A%E7%BB%99%E4%BD%BF%E7%94%A8%E8%80%85%E6%88%96%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%B8%A6%E6%9D%A5%E5%BE%88%E5%A4%9A%E9%BA%BB%E7%83%A6%EF%BC%8C%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E5%9C%A8%E8%AE%BF%E9%97%AE%E6%AD%A4%E5%AF%B9%E8%B1%A1%E6%97%B6%E5%8A%A0%E4%B8%8A%E4%B8%80%E4%B8%AA%E8%AF%A5%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%AE%BF%E9%97%AE%E5%B1%82%E3%80%82%3C/p%3E%3Cblockquote%3E%3Cp%3E%E2%9A%A0%EF%B8%8F%20%3Cstrong%3E%E6%B3%A8%E6%84%8F%3C/strong%3E%3Cbr%3E%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E5%92%8C%E5%A7%94%E6%B4%BE%E6%A8%A1%E5%BC%8F%E6%AF%94%E8%BE%83%E5%AE%B9%E6%98%93%E6%B7%B7%E6%B7%86%EF%BC%9A%3C/p%3E%3Cp%3E%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E6%98%AF%E7%BB%93%E6%9E%84%E6%A8%A1%E5%BC%8F%E3%80%81%E5%A7%94%E6%89%98%E6%A8%A1%E5%BC%8F%E6%98%AF%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F%E3%80%82%3C/p%3E%3Cul%3E%3Cli%3E%3Cstrong%3E%E4%BB%A3%E7%90%86%3C/strong%3E%20=%20%E5%8C%85%E8%A3%B9%20+%20%E6%8E%A7%E5%88%B6%EF%BC%9A%20%E5%83%8F%E5%BF%AB%E9%80%92%E5%91%98%EF%BC%8C%E5%B8%AE%E4%BD%A0%E6%8B%BF%E5%8C%85%E8%A3%B9%EF%BC%8C%E9%A1%BA%E4%BE%BF%E6%A3%80%E6%9F%A5%E4%B8%80%E4%B8%8B%E3%80%82%3C/li%3E%3Cli%3E%3Cstrong%3E%E5%A7%94%E6%89%98%3C/strong%3E%20=%20%E5%8C%85%E8%A3%B9%20+%20%E8%BD%AC%E5%8F%91%EF%BC%9A%20%E5%83%8F%E9%82%AE%E5%B1%80%E6%9F%9C%E5%8F%B0%EF%BC%8C%E4%BD%A0%E4%BA%A4%E7%BB%99%E4%BB%96%EF%BC%8C%E4%BB%96%E8%BD%AC%E6%89%8B%E5%B0%B1%E4%BA%A4%E7%BB%99%E5%BF%AB%E9%80%92%E5%85%AC%E5%8F%B8%E3%80%82%3C/li%3E%3Cli%3E%3C/li%3E%3C/ul%3E%3Cp%3E%E5%BF%AB%E9%80%92%E9%80%81%E8%B4%A7%E4%B8%8A%E9%97%A8%E6%98%AF%E4%BB%A3%E7%90%86%EF%BC%8C%E4%BB%96%E8%A6%81%E5%AF%B9%E5%8C%85%E8%A3%B9%E8%B4%9F%E8%B4%A3%EF%BC%8C%E5%B9%B6%E4%B8%94%E8%A6%81%E7%A1%AE%E5%AE%9A%E9%80%81%E7%BB%99%E4%BD%A0%EF%BC%9B%E4%BD%A0%E6%99%9A%E4%B8%8A%E8%A6%81%E5%8A%A0%E7%8F%AD%E4%B8%8D%E6%96%B9%E4%BE%BF%EF%BC%8C%E8%AE%A9%E5%AE%B6%E4%BA%BA%E5%B8%AE%E4%BD%A0%E5%8E%BB%E5%8F%96%E5%BF%AB%E9%80%92%E6%98%AF%E5%A7%94%E6%89%98%EF%BC%8C%E5%AE%B6%E4%BA%BA%E6%8B%BF%E4%BA%86%E5%B0%B1%E4%B8%A2%E9%82%A3%E6%94%BE%E7%9D%80%EF%BC%8C%E4%B9%9F%E5%8F%AF%E8%83%BD%E5%AE%B6%E4%BA%BA%E9%83%BD%E4%B8%8D%E4%B8%80%E5%AE%9A%E5%8E%BB%E6%8B%BF%E3%80%82%3C/p%3E%3C/blockquote%3E%3Ch3%20id=%22%E5%8A%9F%E8%83%BD%E8%A7%92%E5%BA%A6%E5%88%86%E7%B1%BB%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E5%8A%9F%E8%83%BD%E8%A7%92%E5%BA%A6%E5%88%86%E7%B1%BB%22%3E%C2%B6%3C/a%3E%E5%8A%9F%E8%83%BD%E8%A7%92%E5%BA%A6%E5%88%86%E7%B1%BB%3C/h3%3E%3Ctable%3E%3Cthead%3E%3Ctr%3E%3Cth%20style=%22text-align:left%22%3E%3Cstrong%3E%E7%B1%BB%E5%9E%8B%3C/strong%3E%3C/th%3E%3Cth%20style=%22text-align:left%22%3E%3Cstrong%3E%E5%9C%BA%E6%99%AF%3C/strong%3E%3C/th%3E%3Cth%20style=%22text-align:left%22%3E%3Cstrong%3E%E7%A4%BA%E4%BE%8B%3C/strong%3E%3C/th%3E%3Cth%20style=%22text-align:left%22%3E%3Cstrong%3E%E7%89%B9%E7%82%B9%3C/strong%3E%3C/th%3E%3C/tr%3E%3C/thead%3E%3Ctbody%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%90%86(Remote%20Proxy)%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E8%AE%BF%E9%97%AE%E4%B8%8D%E5%90%8C%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4%E7%9A%84%E5%AF%B9%E8%B1%A1%E3%80%81%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E9%80%9A%E4%BF%A1%3C/td%3E%3Ctd%20style=%22text-align:left%22%3ERMI%E3%80%81gRPC%E3%80%81%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%E8%99%9A%E6%8B%9F%E4%BB%A3%E7%90%86(Virtual%20Proxy)%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E5%88%9B%E5%BB%BA%E7%9C%9F%E5%AE%9E%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%88%90%E6%9C%AC%E8%BE%83%E9%AB%98%E6%97%B6%EF%BC%8C%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD(Lazy%20Load)%3Cbr/%3E%20%E5%8F%AA%E6%9C%89%E5%9C%A8%E7%9C%9F%E6%AD%A3%E9%9C%80%E8%A6%81%E6%97%B6%E6%89%8D%E5%88%9B%E5%BB%BA%E7%9B%AE%E6%A0%87%E5%AF%B9%E8%B1%A1%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%3Cbr/%3E%E5%A4%A7%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E5%87%8F%E5%B0%91%E8%B5%84%E6%BA%90%E6%B5%AA%E8%B4%B9%3Cbr/%3E%E6%8F%90%E5%8D%87%E7%9B%B8%E5%BA%94%E9%80%9F%E5%BA%A6%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%E4%BF%9D%E6%8A%A4%E4%BB%A3%E7%90%86(Protection%20Proxy)%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E9%89%B4%E6%9D%83%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E5%A2%9E%E5%BC%BA%E5%AE%89%E5%85%A8%E6%80%A7%3Cbr/%3E%E7%BB%86%E9%A2%97%E7%B2%92%E5%BA%A6%E6%8E%A7%E5%88%B6%3C/td%3E%3C/tr%3E%3C/tbody%3E%3C/table%3E%3Ch3%20id=%22%E6%A0%B9%E6%8D%AE%E5%AE%9E%E7%8E%B0%E6%8A%80%E6%9C%AF%E5%88%86%E7%B1%BB-Java%E5%B8%B8%E8%A7%81%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E6%A0%B9%E6%8D%AE%E5%AE%9E%E7%8E%B0%E6%8A%80%E6%9C%AF%E5%88%86%E7%B1%BB-Java%E5%B8%B8%E8%A7%81%22%3E%C2%B6%3C/a%3E%E6%A0%B9%E6%8D%AE%E5%AE%9E%E7%8E%B0%E6%8A%80%E6%9C%AF%E5%88%86%E7%B1%BB(Java%E5%B8%B8%E8%A7%81)%3C/h3%3E%3Ctable%3E%3Cthead%3E%3Ctr%3E%3Cth%20style=%22text-align:left%22%3E%3Cstrong%3E%E7%B1%BB%E5%9E%8B%3C/strong%3E%3C/th%3E%3Cth%20style=%22text-align:left%22%3E%3Cstrong%3E%E6%8F%8F%E8%BF%B0%3C/strong%3E%3C/th%3E%3C/tr%3E%3C/thead%3E%3Ctbody%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86(Static%20Proxy)%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E6%89%8B%E5%8A%A8%E7%BC%96%E5%86%99%E4%BB%A3%E7%90%86%E7%B1%BB%EF%BC%8C%E7%BC%96%E8%AF%91%E6%97%B6%E7%A1%AE%E5%AE%9A%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86(Dynamic%20Proxy)%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E8%BF%90%E8%A1%8C%E6%97%B6%E7%94%9F%E6%88%90%E4%BB%A3%E7%90%86%E7%B1%BB%EF%BC%8C%E4%BD%BF%E7%94%A8%3Ccode%3Ejava.lang.reflect.Proxy%3C/code%3E%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3ECGLIB%E4%BB%A3%E7%90%86%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E5%9F%BA%E4%BA%8E%E5%AD%97%E8%8A%82%E7%8E%9B%E5%A2%9E%E5%BC%BA%E6%8A%80%E6%9C%AF%EF%BC%8C%E9%80%82%E7%94%A8%E4%BA%8E%E6%B2%A1%E6%9C%89%E6%8E%A5%E5%8F%A3%E7%9A%84%E7%B1%BB%3C/td%3E%3C/tr%3E%3C/tbody%3E%3C/table%3E%3Ch3%20id=%22%E4%BB%A3%E7%90%86%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E4%BB%A3%E7%90%86%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95%22%3E%C2%B6%3C/a%3E%E4%BB%A3%E7%90%86%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95%3C/h3%3E%3Cul%3E%3Cli%3E%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86%3C/li%3E%3C/ul%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Einterface%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESubject%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Erequest%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ERealSubject%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESubject%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Erequest%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProxy%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESubject%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20Subject%20realSubject;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Erequest%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20realSubject.request();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cul%3E%3Cli%3E%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%3C/li%3E%3C/ul%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProxy%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EInvocationHandler%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20pubilc%20Object%20%3Cspan%20class=%22title%20function_%22%3Einvoke%3C/span%3E%3Cspan%20class=%22params%22%3E(Method%20method,%20Object[]%20args,%20Object%20proxy)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20method.invoke(target,%20args);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cul%3E%3Cli%3ECBLIB%E4%BB%A3%E7%90%86(%E5%AD%97%E8%8A%82%E5%A2%9E%E5%BC%BA)%3C/li%3E%3C/ul%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProxy%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EMethodInterceptor%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20Object%20%3Cspan%20class=%22title%20function_%22%3Eintercept%3C/span%3E%3Cspan%20class=%22params%22%3E(Object%20obj,%20Method%20method,%20MethodProxy%20proxy)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20proxy.invokeSuper(obj,%20args);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22type%22%3EEnhancer%3C/span%3E%20%3Cspan%20class=%22variable%22%3Eenhancer%3C/span%3E%20%3Cspan%20class=%22operator%22%3E=%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EEnhancer%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Eenhancer.setSuperclass(RealSubject.class);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Eenhancer.setCallback(%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProxy%3C/span%3E());%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22type%22%3ERealSubject%3C/span%3E%20%3Cspan%20class=%22variable%22%3Eproxy%3C/span%3E%20%3Cspan%20class=%22operator%22%3E=%3C/span%3E%20enhancer.create();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Eproxy.request();%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Cstrong%3E%E5%B7%AE%E5%BC%82%E5%AF%B9%E5%88%AB%3C/strong%3E%EF%BC%9A%3C/p%3E%3Ctable%3E%3Cthead%3E%3Ctr%3E%3Cth%20style=%22text-align:left%22%3E%3Cstrong%3E%E7%B1%BB%E5%9E%8B%3C/strong%3E%3C/th%3E%3Cth%20style=%22text-align:left%22%3E%3Cstrong%3E%E6%98%AF%E5%90%A6%E9%9C%80%E8%A6%81%E6%8E%A5%E5%8F%A3%3C/strong%3E%3C/th%3E%3Cth%20style=%22text-align:left%22%3E%3Cstrong%3E%E6%98%AF%E5%90%A6%E6%89%8B%E5%8A%A8%E5%86%99%E4%BB%A3%E7%90%86%E7%B1%BB%3C/strong%3E%3C/th%3E%3Cth%20style=%22text-align:left%22%3E%3Cstrong%3E%E6%8A%80%E6%9C%AF%E5%9F%BA%E7%A1%80%3C/strong%3E%3C/th%3E%3Cth%20style=%22text-align:left%22%3E%3Cstrong%3E%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%3C/strong%3E%3C/th%3E%3C/tr%3E%3C/thead%3E%3Ctbody%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E6%98%AF%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E6%98%AF%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E6%8E%A5%E5%8F%A3/%E6%8A%BD%E8%B1%A1%E7%B1%BB%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E7%AE%80%E5%8D%95%E5%B0%81%E8%A3%85%E3%80%81%E5%AD%A6%E4%B9%A0%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3EJDK%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E6%98%AF%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E5%90%A6%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E5%8F%8D%E5%B0%84+%3Ccode%3EProxy%3C/code%3E%3C/td%3E%3Ctd%20style=%22text-align:left%22%3EAOP%E3%80%81Spring(%E5%8F%AF%E9%80%89)%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3ECGLIB%E4%BB%A3%E7%90%86%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E5%90%A6%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E5%90%A6%3C/td%3E%3Ctd%20style=%22text-align:left%22%3EASM%E5%AD%97%E8%8A%82%E7%8E%9B%E5%A2%9E%E5%BC%BA%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E6%97%A0%E6%8E%A5%E5%8F%A3%E4%BB%A3%E7%90%86%E3%80%81Spring(%E9%BB%98%E8%AE%A4)%3C/td%3E%3C/tr%3E%3C/tbody%3E%3C/table%3E%3Ch2%20id=%22%E6%80%BB%E7%BB%93%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E6%80%BB%E7%BB%93%22%3E%C2%B6%3C/a%3E%E6%80%BB%E7%BB%93%3C/h2%3E%3Cblockquote%3E%3Cp%3E%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E4%BB%8E%3Cstrong%3E%E5%8A%9F%E8%83%BD%E8%A7%92%E5%BA%A6%3C/strong%3E%E5%8F%AF%E4%BB%A5%E5%88%86%E4%B8%BA%EF%BC%9A%20%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%90%86%E3%80%81%E8%99%9A%E6%8B%9F%E4%BB%A3%E7%90%86%E3%80%81%E4%BF%9D%E6%8A%A4%E4%BB%A3%E7%90%86%EF%BC%9B%E4%BB%8E%3Cstrong%3E%E5%AE%9E%E7%8E%B0%E6%8A%80%E6%9C%AF%E8%A7%92%E5%BA%A6%3C/strong%3E%E5%8F%AF%E5%88%86%E4%B8%BA%EF%BC%9A%20%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86%E3%80%81%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86(JDK)%E3%80%81CGLIB%E4%BB%A3%E7%90%86%E3%80%82%3C/p%3E%3C/blockquote%3E" type="image"/>
    
    
    
    <category term="structural" scheme="https://galudisu.info/tags/structural/"/>
    
    <category term="proxy" scheme="https://galudisu.info/tags/proxy/"/>
    
  </entry>
  
  <entry>
    <title>享元模式(Flyweight Pattern)</title>
    <link href="https://galudisu.info/2025/05/10/pattern/basic/structural/Flyweight/"/>
    <id>https://galudisu.info/2025/05/10/pattern/basic/structural/Flyweight/</id>
    <published>2025-05-10T10:25:05.000Z</published>
    <updated>2025-05-12T15:13:45.009Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>通过共享对象来减少内存使用和提高性能</strong>，适用于大量相似对象需要被创建的场景。</p></blockquote><img src="/assert/puml/223ef670f7cc2ef7938ca57234ee6043412fa8e8ab27eea26fb5f16281b746ba.svg"/><span id="more"></span><h3 id="概念定义"><a class="header-anchor" href="#概念定义">¶</a>概念定义</h3><p><strong>享元模式(Flyweight Pattern)</strong> 的核心是为了解决大量对象存在时，可能造成内存溢出，我们把其中共同的部分抽象出来，如果有相同的业务请求，直接返回内存已有的对象，避免重新创建。</p><h3 id="核心结构"><a class="header-anchor" href="#核心结构">¶</a>核心结构</h3><table><thead><tr><th style="text-align:left"><strong>角色</strong></th><th style="text-align:left"><strong>职责</strong></th></tr></thead><tbody><tr><td style="text-align:left"><code>Flyweight(抽象享元类)</code></td><td style="text-align:left">定义公共接口或抽象类，用于管理内部状态。</td></tr><tr><td style="text-align:left"><code>ConcreteFlyweight(具体享元类)</code></td><td style="text-align:left">实现Flyweight接口，存储内部状态</td></tr><tr><td style="text-align:left"><code>UnsharedConcreteFlyweight(非共享具体享元类)</code></td><td style="text-align:left">不可共享的对象(Option)</td></tr><tr><td style="text-align:left"><code>FlyweightFactory(享元工厂)</code></td><td style="text-align:left">负责创建和管理享元对象，确保对象复用</td></tr></tbody></table><h3 id="示例：围棋棋子渲染系统"><a class="header-anchor" href="#示例：围棋棋子渲染系统">¶</a>示例：围棋棋子渲染系统</h3><p>假设我们开发一个围棋游戏，棋盘上有几百个棋子，它们有相同的形状但不同的颜色和位置。</p><img src="/assert/puml/fc18fe8be046fe2f8e863d706da18448679378a9490a1933d5f89f41bd405231.svg"/><p>伪代码如下，</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Piece</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">render</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WhitePiece</span> <span class="keyword">implements</span> <span class="title class_">Piece</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">render</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span>; <span class="comment">// 绘制白色棋子</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BlackPiece</span> <span class="keyword">implements</span> <span class="title class_">Piece</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">render</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span>; <span class="comment">// 绘制黑色棋子</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PieceFactory</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Map&lt;String, Piece&gt; pieces = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Piece <span class="title function_">getPiece</span><span class="params">(String type)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!pieces.containsKey(type)) &#123;</span><br><span class="line">      <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;white&quot;</span>:</span><br><span class="line">          pieces.put(type, <span class="keyword">new</span> <span class="title class_">WhitePiece</span>());  <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;black&quot;</span>:</span><br><span class="line">          pieces.put(type, <span class="keyword">new</span> <span class="title class_">BlackPiece</span>());</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">          <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Invalid piece type: &quot;</span> + type);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pieces.get(type);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><i class="conum" data-value="1"></i> 这种暂存的享元模式实际上在开发中非常常见，并且会有意无意中用到。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">    <span class="type">var</span> <span class="variable">black</span> <span class="operator">=</span> PieceFactory.getPiece(<span class="string">&quot;black&quot;</span>);</span><br><span class="line">    black.render(i%<span class="number">10</span>, i/<span class="number">10</span>);</span><br><span class="line">    <span class="type">var</span> <span class="variable">white</span> <span class="operator">=</span> PieceFactory.getPiece(<span class="string">&quot;white&quot;</span>);</span><br><span class="line">    white.render(i%<span class="number">10</span>, i/<span class="number">10</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>如果不使用享元模式，100黑子+100白子=创建200个对象。</li><li>使用享元后： 只创建2个对象(一个黑子、一个白子)，重复调用<code>render(x, y)</code>即可。</li></ul><h3 id="实际应用场景"><a class="header-anchor" href="#实际应用场景">¶</a>实际应用场景</h3><table><thead><tr><th style="text-align:left">应用</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left">文本编辑器</td><td style="text-align:left">字符样式共享(字体、大小、颜色)，位置作为外部 状态</td></tr><tr><td style="text-align:left">游戏开发</td><td style="text-align:left">子弹、敌人、道具等大量重复实体对象(早期像素游戏)</td></tr><tr><td style="text-align:left">图形界面库</td><td style="text-align:left">按钮、图标、字体等图形资源缓存</td></tr><tr><td style="text-align:left">数据库连接池</td><td style="text-align:left">复用数据库连接对象</td></tr></tbody></table><h2 id="总结"><a class="header-anchor" href="#总结">¶</a>总结</h2><blockquote><p>享元模式的核心思想是“共享不变、分离变化”，适用于大量相似对象的复用场景。</p></blockquote>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;通过共享对象来减少内存使用和提高性能&lt;/strong&gt;，适用于大量相似对象需要被创建的场景。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;img src=&quot;/assert/puml/223ef670f7cc2ef7938ca57234ee6043412fa8e8ab27eea26fb5f16281b746ba.svg&quot;/&gt;</summary>
    
    
    <content src="https://galudisu.info/%3Cblockquote%3E%3Cp%3E%3Cstrong%3E%E9%80%9A%E8%BF%87%E5%85%B1%E4%BA%AB%E5%AF%B9%E8%B1%A1%E6%9D%A5%E5%87%8F%E5%B0%91%E5%86%85%E5%AD%98%E4%BD%BF%E7%94%A8%E5%92%8C%E6%8F%90%E9%AB%98%E6%80%A7%E8%83%BD%3C/strong%3E%EF%BC%8C%E9%80%82%E7%94%A8%E4%BA%8E%E5%A4%A7%E9%87%8F%E7%9B%B8%E4%BC%BC%E5%AF%B9%E8%B1%A1%E9%9C%80%E8%A6%81%E8%A2%AB%E5%88%9B%E5%BB%BA%E7%9A%84%E5%9C%BA%E6%99%AF%E3%80%82%3C/p%3E%3C/blockquote%3E%3Cimg%20src=%22/assert/puml/223ef670f7cc2ef7938ca57234ee6043412fa8e8ab27eea26fb5f16281b746ba.svg%22/%3E%3Cspan%20id=%22more%22%3E%3C/span%3E%3Ch3%20id=%22%E6%A6%82%E5%BF%B5%E5%AE%9A%E4%B9%89%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E6%A6%82%E5%BF%B5%E5%AE%9A%E4%B9%89%22%3E%C2%B6%3C/a%3E%E6%A6%82%E5%BF%B5%E5%AE%9A%E4%B9%89%3C/h3%3E%3Cp%3E%3Cstrong%3E%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F(Flyweight%20Pattern)%3C/strong%3E%20%E7%9A%84%E6%A0%B8%E5%BF%83%E6%98%AF%E4%B8%BA%E4%BA%86%E8%A7%A3%E5%86%B3%E5%A4%A7%E9%87%8F%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%9C%A8%E6%97%B6%EF%BC%8C%E5%8F%AF%E8%83%BD%E9%80%A0%E6%88%90%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA%EF%BC%8C%E6%88%91%E4%BB%AC%E6%8A%8A%E5%85%B6%E4%B8%AD%E5%85%B1%E5%90%8C%E7%9A%84%E9%83%A8%E5%88%86%E6%8A%BD%E8%B1%A1%E5%87%BA%E6%9D%A5%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%9C%89%E7%9B%B8%E5%90%8C%E7%9A%84%E4%B8%9A%E5%8A%A1%E8%AF%B7%E6%B1%82%EF%BC%8C%E7%9B%B4%E6%8E%A5%E8%BF%94%E5%9B%9E%E5%86%85%E5%AD%98%E5%B7%B2%E6%9C%89%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E9%81%BF%E5%85%8D%E9%87%8D%E6%96%B0%E5%88%9B%E5%BB%BA%E3%80%82%3C/p%3E%3Ch3%20id=%22%E6%A0%B8%E5%BF%83%E7%BB%93%E6%9E%84%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E6%A0%B8%E5%BF%83%E7%BB%93%E6%9E%84%22%3E%C2%B6%3C/a%3E%E6%A0%B8%E5%BF%83%E7%BB%93%E6%9E%84%3C/h3%3E%3Ctable%3E%3Cthead%3E%3Ctr%3E%3Cth%20style=%22text-align:left%22%3E%3Cstrong%3E%E8%A7%92%E8%89%B2%3C/strong%3E%3C/th%3E%3Cth%20style=%22text-align:left%22%3E%3Cstrong%3E%E8%81%8C%E8%B4%A3%3C/strong%3E%3C/th%3E%3C/tr%3E%3C/thead%3E%3Ctbody%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3EFlyweight(%E6%8A%BD%E8%B1%A1%E4%BA%AB%E5%85%83%E7%B1%BB)%3C/code%3E%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E5%AE%9A%E4%B9%89%E5%85%AC%E5%85%B1%E6%8E%A5%E5%8F%A3%E6%88%96%E6%8A%BD%E8%B1%A1%E7%B1%BB%EF%BC%8C%E7%94%A8%E4%BA%8E%E7%AE%A1%E7%90%86%E5%86%85%E9%83%A8%E7%8A%B6%E6%80%81%E3%80%82%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3EConcreteFlyweight(%E5%85%B7%E4%BD%93%E4%BA%AB%E5%85%83%E7%B1%BB)%3C/code%3E%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E5%AE%9E%E7%8E%B0Flyweight%E6%8E%A5%E5%8F%A3%EF%BC%8C%E5%AD%98%E5%82%A8%E5%86%85%E9%83%A8%E7%8A%B6%E6%80%81%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3EUnsharedConcreteFlyweight(%E9%9D%9E%E5%85%B1%E4%BA%AB%E5%85%B7%E4%BD%93%E4%BA%AB%E5%85%83%E7%B1%BB)%3C/code%3E%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E4%B8%8D%E5%8F%AF%E5%85%B1%E4%BA%AB%E7%9A%84%E5%AF%B9%E8%B1%A1(Option)%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3EFlyweightFactory(%E4%BA%AB%E5%85%83%E5%B7%A5%E5%8E%82)%3C/code%3E%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E8%B4%9F%E8%B4%A3%E5%88%9B%E5%BB%BA%E5%92%8C%E7%AE%A1%E7%90%86%E4%BA%AB%E5%85%83%E5%AF%B9%E8%B1%A1%EF%BC%8C%E7%A1%AE%E4%BF%9D%E5%AF%B9%E8%B1%A1%E5%A4%8D%E7%94%A8%3C/td%3E%3C/tr%3E%3C/tbody%3E%3C/table%3E%3Ch3%20id=%22%E7%A4%BA%E4%BE%8B%EF%BC%9A%E5%9B%B4%E6%A3%8B%E6%A3%8B%E5%AD%90%E6%B8%B2%E6%9F%93%E7%B3%BB%E7%BB%9F%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E7%A4%BA%E4%BE%8B%EF%BC%9A%E5%9B%B4%E6%A3%8B%E6%A3%8B%E5%AD%90%E6%B8%B2%E6%9F%93%E7%B3%BB%E7%BB%9F%22%3E%C2%B6%3C/a%3E%E7%A4%BA%E4%BE%8B%EF%BC%9A%E5%9B%B4%E6%A3%8B%E6%A3%8B%E5%AD%90%E6%B8%B2%E6%9F%93%E7%B3%BB%E7%BB%9F%3C/h3%3E%3Cp%3E%E5%81%87%E8%AE%BE%E6%88%91%E4%BB%AC%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AA%E5%9B%B4%E6%A3%8B%E6%B8%B8%E6%88%8F%EF%BC%8C%E6%A3%8B%E7%9B%98%E4%B8%8A%E6%9C%89%E5%87%A0%E7%99%BE%E4%B8%AA%E6%A3%8B%E5%AD%90%EF%BC%8C%E5%AE%83%E4%BB%AC%E6%9C%89%E7%9B%B8%E5%90%8C%E7%9A%84%E5%BD%A2%E7%8A%B6%E4%BD%86%E4%B8%8D%E5%90%8C%E7%9A%84%E9%A2%9C%E8%89%B2%E5%92%8C%E4%BD%8D%E7%BD%AE%E3%80%82%3C/p%3E%3Cimg%20src=%22/assert/puml/fc18fe8be046fe2f8e863d706da18448679378a9490a1933d5f89f41bd405231.svg%22/%3E%3Cp%3E%E4%BC%AA%E4%BB%A3%E7%A0%81%E5%A6%82%E4%B8%8B%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E18%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E19%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E21%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E22%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E23%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E24%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E25%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E26%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E27%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E28%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E29%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E30%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E31%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Einterface%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EPiece%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Erender%3C/span%3E%3Cspan%20class=%22params%22%3E(%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20x,%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20y)%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EWhitePiece%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EPiece%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Erender%3C/span%3E%3Cspan%20class=%22params%22%3E(%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20x,%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20y)%3C/span%3E;%20%3Cspan%20class=%22comment%22%3E/%20%E7%BB%98%E5%88%B6%E7%99%BD%E8%89%B2%E6%A3%8B%E5%AD%90%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EBlackPiece%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EPiece%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Erender%3C/span%3E%3Cspan%20class=%22params%22%3E(%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20x,%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20y)%3C/span%3E;%20%3Cspan%20class=%22comment%22%3E/%20%E7%BB%98%E5%88%B6%E9%BB%91%E8%89%B2%E6%A3%8B%E5%AD%90%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EPieceFactory%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Efinal%3C/span%3E%20Map&amp;lt;String,%20Piece&amp;gt;%20pieces%20=%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EHashMap%3C/span%3E&amp;lt;&amp;gt;();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20Piece%20%3Cspan%20class=%22title%20function_%22%3EgetPiece%3C/span%3E%3Cspan%20class=%22params%22%3E(String%20type)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20(!pieces.containsKey(type))%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%3Cspan%20class=%22keyword%22%3Eswitch%3C/span%3E%20(type)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22keyword%22%3Ecase%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;quot;white&amp;quot;%3C/span%3E:%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20pieces.put(type,%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EWhitePiece%3C/span%3E());%20%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22keyword%22%3Ebreak%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22keyword%22%3Ecase%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;quot;black&amp;quot;%3C/span%3E:%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20pieces.put(type,%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EBlackPiece%3C/span%3E());%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22keyword%22%3Ebreak%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22keyword%22%3Edefault%3C/span%3E:%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22keyword%22%3Ethrow%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EIllegalArgumentException%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;Invalid%20piece%20type:%20&amp;quot;%3C/span%3E%20+%20type);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20pieces.get(type);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%20%E8%BF%99%E7%A7%8D%E6%9A%82%E5%AD%98%E7%9A%84%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F%E5%AE%9E%E9%99%85%E4%B8%8A%E5%9C%A8%E5%BC%80%E5%8F%91%E4%B8%AD%E9%9D%9E%E5%B8%B8%E5%B8%B8%E8%A7%81%EF%BC%8C%E5%B9%B6%E4%B8%94%E4%BC%9A%E6%9C%89%E6%84%8F%E6%97%A0%E6%84%8F%E4%B8%AD%E7%94%A8%E5%88%B0%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Emain%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20(%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22operator%22%3E=%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E;%20i%20&amp;lt;%20%3Cspan%20class=%22number%22%3E100%3C/span%3E;%20i++)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22type%22%3Evar%3C/span%3E%20%3Cspan%20class=%22variable%22%3Eblack%3C/span%3E%20%3Cspan%20class=%22operator%22%3E=%3C/span%3E%20PieceFactory.getPiece(%3Cspan%20class=%22string%22%3E&amp;quot;black&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20black.render(i%%3Cspan%20class=%22number%22%3E10%3C/span%3E,%20i/%3Cspan%20class=%22number%22%3E10%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22type%22%3Evar%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ewhite%3C/span%3E%20%3Cspan%20class=%22operator%22%3E=%3C/span%3E%20PieceFactory.getPiece(%3Cspan%20class=%22string%22%3E&amp;quot;white&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20white.render(i%%3Cspan%20class=%22number%22%3E10%3C/span%3E,%20i/%3Cspan%20class=%22number%22%3E10%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cul%3E%3Cli%3E%E5%A6%82%E6%9E%9C%E4%B8%8D%E4%BD%BF%E7%94%A8%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F%EF%BC%8C100%E9%BB%91%E5%AD%90+100%E7%99%BD%E5%AD%90=%E5%88%9B%E5%BB%BA200%E4%B8%AA%E5%AF%B9%E8%B1%A1%E3%80%82%3C/li%3E%3Cli%3E%E4%BD%BF%E7%94%A8%E4%BA%AB%E5%85%83%E5%90%8E%EF%BC%9A%20%E5%8F%AA%E5%88%9B%E5%BB%BA2%E4%B8%AA%E5%AF%B9%E8%B1%A1(%E4%B8%80%E4%B8%AA%E9%BB%91%E5%AD%90%E3%80%81%E4%B8%80%E4%B8%AA%E7%99%BD%E5%AD%90)%EF%BC%8C%E9%87%8D%E5%A4%8D%E8%B0%83%E7%94%A8%3Ccode%3Erender(x,%20y)%3C/code%3E%E5%8D%B3%E5%8F%AF%E3%80%82%3C/li%3E%3C/ul%3E%3Ch3%20id=%22%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%22%3E%C2%B6%3C/a%3E%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%3C/h3%3E%3Ctable%3E%3Cthead%3E%3Ctr%3E%3Cth%20style=%22text-align:left%22%3E%E5%BA%94%E7%94%A8%3C/th%3E%3Cth%20style=%22text-align:left%22%3E%E6%8F%8F%E8%BF%B0%3C/th%3E%3C/tr%3E%3C/thead%3E%3Ctbody%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E5%AD%97%E7%AC%A6%E6%A0%B7%E5%BC%8F%E5%85%B1%E4%BA%AB(%E5%AD%97%E4%BD%93%E3%80%81%E5%A4%A7%E5%B0%8F%E3%80%81%E9%A2%9C%E8%89%B2)%EF%BC%8C%E4%BD%8D%E7%BD%AE%E4%BD%9C%E4%B8%BA%E5%A4%96%E9%83%A8%20%E7%8A%B6%E6%80%81%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E5%AD%90%E5%BC%B9%E3%80%81%E6%95%8C%E4%BA%BA%E3%80%81%E9%81%93%E5%85%B7%E7%AD%89%E5%A4%A7%E9%87%8F%E9%87%8D%E5%A4%8D%E5%AE%9E%E4%BD%93%E5%AF%B9%E8%B1%A1(%E6%97%A9%E6%9C%9F%E5%83%8F%E7%B4%A0%E6%B8%B8%E6%88%8F)%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2%E5%BA%93%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E6%8C%89%E9%92%AE%E3%80%81%E5%9B%BE%E6%A0%87%E3%80%81%E5%AD%97%E4%BD%93%E7%AD%89%E5%9B%BE%E5%BD%A2%E8%B5%84%E6%BA%90%E7%BC%93%E5%AD%98%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%E5%A4%8D%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E5%AF%B9%E8%B1%A1%3C/td%3E%3C/tr%3E%3C/tbody%3E%3C/table%3E%3Ch2%20id=%22%E6%80%BB%E7%BB%93%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E6%80%BB%E7%BB%93%22%3E%C2%B6%3C/a%3E%E6%80%BB%E7%BB%93%3C/h2%3E%3Cblockquote%3E%3Cp%3E%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%A0%B8%E5%BF%83%E6%80%9D%E6%83%B3%E6%98%AF%E2%80%9C%E5%85%B1%E4%BA%AB%E4%B8%8D%E5%8F%98%E3%80%81%E5%88%86%E7%A6%BB%E5%8F%98%E5%8C%96%E2%80%9D%EF%BC%8C%E9%80%82%E7%94%A8%E4%BA%8E%E5%A4%A7%E9%87%8F%E7%9B%B8%E4%BC%BC%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%A4%8D%E7%94%A8%E5%9C%BA%E6%99%AF%E3%80%82%3C/p%3E%3C/blockquote%3E" type="image"/>
    
    
    
    <category term="structural" scheme="https://galudisu.info/tags/structural/"/>
    
    <category term="flyweight" scheme="https://galudisu.info/tags/flyweight/"/>
    
  </entry>
  
  <entry>
    <title>外观模式(Facade Pattern)</title>
    <link href="https://galudisu.info/2025/05/10/pattern/basic/structural/Facade/"/>
    <id>https://galudisu.info/2025/05/10/pattern/basic/structural/Facade/</id>
    <published>2025-05-10T10:25:04.000Z</published>
    <updated>2025-05-12T14:38:27.810Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>提供了一个统一的接口，用来访问子系统中的一群接口，外观定义了一个高层的接口，让子系统更容易使用。<strong>其实就是为了方便客户的使用，把一群操作，封装成一个方法</strong>。</p></blockquote><img src="/assert/puml/fcabf988403ace7972cf5031702aca934b86568740864ad48f49021f7aa7fcce.svg"/><span id="more"></span><p>外观模式，就是“method”层面上的组合模式，上个章节的<a href="/2025/05/10/pattern/basic/structural/Composite">组合模式</a>是多个类，而外观模式就是多个方法。</p><h3 id="场景描述"><a class="header-anchor" href="#场景描述">¶</a>场景描述</h3><p>你有一个家庭影院系统，包含以下设备：</p><ul><li>影碟机(DVD Player)</li><li>投影仪(Projector)</li><li>音响(Sound System)</li><li>灯光(Lights)</li></ul><p>每次想要看电影时，你需要手动做以下操作：</p><ol><li>关灯</li><li>打开投影仪</li><li>启动音响</li><li>播放DVD</li></ol><p>看完电影后又要一次关闭这些设备。</p><img src="/assert/puml/27983651be2688e8b78c367be911e4ce0f6a3a26a4d97369d9a809bca3607b3d.svg"/><p>这个过程非常繁琐，而<strong>外观模式</strong>可以封装这些复杂逻辑，对外提供一个简单接口，</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HomeTheaterFacade</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">watchMovie</span><span class="params">(String movie)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Get ready to watch a movie...&quot;</span>);</span><br><span class="line">    lights.dim(<span class="number">10</span>);</span><br><span class="line">    projector.on();</span><br><span class="line">    projector.setInput(dvdPlayer);</span><br><span class="line">    amplifier.on();</span><br><span class="line">    amplifier.setVolume(<span class="number">75</span>);</span><br><span class="line">    amplifier.setInput(dvdPlayer);</span><br><span class="line">    dvdPlayer.on();</span><br><span class="line">    dvdPlayer.play(movie);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">endMovie</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Shutting movie theater down...&quot;</span>);</span><br><span class="line">    dvdPlayer.stop();</span><br><span class="line">    dvdPlayer.off();</span><br><span class="line">    amplifier.off();</span><br><span class="line">    projector.off();</span><br><span class="line">    lights.off();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我只需要“一键”观影即可。</p><h2 id="总结"><a class="header-anchor" href="#总结">¶</a>总结</h2><p><strong>优点</strong>：</p><ul><li>简化接口，不需要了解每个子系统的细节</li><li>解耦，客户端只依赖外观类，不与具体子系统耦合</li><li>提高维护性，子系统的变化，只需要修改外观类，不影响客户端</li></ul><p><strong>其它常见应用示例</strong></p><ol><li>编译器/解析器，将词法分析、语法分析、语义分析处理封装成一个<code>Compiler</code>外观</li><li>支付系统中对接多个支付渠道(微信、支付宝、银联),统一调用接口</li></ol>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;提供了一个统一的接口，用来访问子系统中的一群接口，外观定义了一个高层的接口，让子系统更容易使用。&lt;strong&gt;其实就是为了方便客户的使用，把一群操作，封装成一个方法&lt;/strong&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;img src=&quot;/assert/puml/fcabf988403ace7972cf5031702aca934b86568740864ad48f49021f7aa7fcce.svg&quot;/&gt;</summary>
    
    
    <content src="https://galudisu.info/%3Cblockquote%3E%3Cp%3E%E6%8F%90%E4%BE%9B%E4%BA%86%E4%B8%80%E4%B8%AA%E7%BB%9F%E4%B8%80%E7%9A%84%E6%8E%A5%E5%8F%A3%EF%BC%8C%E7%94%A8%E6%9D%A5%E8%AE%BF%E9%97%AE%E5%AD%90%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E4%B8%80%E7%BE%A4%E6%8E%A5%E5%8F%A3%EF%BC%8C%E5%A4%96%E8%A7%82%E5%AE%9A%E4%B9%89%E4%BA%86%E4%B8%80%E4%B8%AA%E9%AB%98%E5%B1%82%E7%9A%84%E6%8E%A5%E5%8F%A3%EF%BC%8C%E8%AE%A9%E5%AD%90%E7%B3%BB%E7%BB%9F%E6%9B%B4%E5%AE%B9%E6%98%93%E4%BD%BF%E7%94%A8%E3%80%82%3Cstrong%3E%E5%85%B6%E5%AE%9E%E5%B0%B1%E6%98%AF%E4%B8%BA%E4%BA%86%E6%96%B9%E4%BE%BF%E5%AE%A2%E6%88%B7%E7%9A%84%E4%BD%BF%E7%94%A8%EF%BC%8C%E6%8A%8A%E4%B8%80%E7%BE%A4%E6%93%8D%E4%BD%9C%EF%BC%8C%E5%B0%81%E8%A3%85%E6%88%90%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%3C/strong%3E%E3%80%82%3C/p%3E%3C/blockquote%3E%3Cimg%20src=%22/assert/puml/fcabf988403ace7972cf5031702aca934b86568740864ad48f49021f7aa7fcce.svg%22/%3E%3Cspan%20id=%22more%22%3E%3C/span%3E%3Cp%3E%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F%EF%BC%8C%E5%B0%B1%E6%98%AF%E2%80%9Cmethod%E2%80%9D%E5%B1%82%E9%9D%A2%E4%B8%8A%E7%9A%84%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F%EF%BC%8C%E4%B8%8A%E4%B8%AA%E7%AB%A0%E8%8A%82%E7%9A%84%3Ca%20href=%22/2025/05/10/pattern/basic/structural/Composite%22%3E%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F%3C/a%3E%E6%98%AF%E5%A4%9A%E4%B8%AA%E7%B1%BB%EF%BC%8C%E8%80%8C%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F%E5%B0%B1%E6%98%AF%E5%A4%9A%E4%B8%AA%E6%96%B9%E6%B3%95%E3%80%82%3C/p%3E%3Ch3%20id=%22%E5%9C%BA%E6%99%AF%E6%8F%8F%E8%BF%B0%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E5%9C%BA%E6%99%AF%E6%8F%8F%E8%BF%B0%22%3E%C2%B6%3C/a%3E%E5%9C%BA%E6%99%AF%E6%8F%8F%E8%BF%B0%3C/h3%3E%3Cp%3E%E4%BD%A0%E6%9C%89%E4%B8%80%E4%B8%AA%E5%AE%B6%E5%BA%AD%E5%BD%B1%E9%99%A2%E7%B3%BB%E7%BB%9F%EF%BC%8C%E5%8C%85%E5%90%AB%E4%BB%A5%E4%B8%8B%E8%AE%BE%E5%A4%87%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%E5%BD%B1%E7%A2%9F%E6%9C%BA(DVD%20Player)%3C/li%3E%3Cli%3E%E6%8A%95%E5%BD%B1%E4%BB%AA(Projector)%3C/li%3E%3Cli%3E%E9%9F%B3%E5%93%8D(Sound%20System)%3C/li%3E%3Cli%3E%E7%81%AF%E5%85%89(Lights)%3C/li%3E%3C/ul%3E%3Cp%3E%E6%AF%8F%E6%AC%A1%E6%83%B3%E8%A6%81%E7%9C%8B%E7%94%B5%E5%BD%B1%E6%97%B6%EF%BC%8C%E4%BD%A0%E9%9C%80%E8%A6%81%E6%89%8B%E5%8A%A8%E5%81%9A%E4%BB%A5%E4%B8%8B%E6%93%8D%E4%BD%9C%EF%BC%9A%3C/p%3E%3Col%3E%3Cli%3E%E5%85%B3%E7%81%AF%3C/li%3E%3Cli%3E%E6%89%93%E5%BC%80%E6%8A%95%E5%BD%B1%E4%BB%AA%3C/li%3E%3Cli%3E%E5%90%AF%E5%8A%A8%E9%9F%B3%E5%93%8D%3C/li%3E%3Cli%3E%E6%92%AD%E6%94%BEDVD%3C/li%3E%3C/ol%3E%3Cp%3E%E7%9C%8B%E5%AE%8C%E7%94%B5%E5%BD%B1%E5%90%8E%E5%8F%88%E8%A6%81%E4%B8%80%E6%AC%A1%E5%85%B3%E9%97%AD%E8%BF%99%E4%BA%9B%E8%AE%BE%E5%A4%87%E3%80%82%3C/p%3E%3Cimg%20src=%22/assert/puml/27983651be2688e8b78c367be911e4ce0f6a3a26a4d97369d9a809bca3607b3d.svg%22/%3E%3Cp%3E%E8%BF%99%E4%B8%AA%E8%BF%87%E7%A8%8B%E9%9D%9E%E5%B8%B8%E7%B9%81%E7%90%90%EF%BC%8C%E8%80%8C%3Cstrong%3E%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F%3C/strong%3E%E5%8F%AF%E4%BB%A5%E5%B0%81%E8%A3%85%E8%BF%99%E4%BA%9B%E5%A4%8D%E6%9D%82%E9%80%BB%E8%BE%91%EF%BC%8C%E5%AF%B9%E5%A4%96%E6%8F%90%E4%BE%9B%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E6%8E%A5%E5%8F%A3%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E18%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E19%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E21%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E22%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E23%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EHomeTheaterFacade%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20...%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EwatchMovie%3C/span%3E%3Cspan%20class=%22params%22%3E(String%20movie)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20System.out.println(%3Cspan%20class=%22string%22%3E&amp;quot;Get%20ready%20to%20watch%20a%20movie...&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20lights.dim(%3Cspan%20class=%22number%22%3E10%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20projector.on();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20projector.setInput(dvdPlayer);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20amplifier.on();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20amplifier.setVolume(%3Cspan%20class=%22number%22%3E75%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20amplifier.setInput(dvdPlayer);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20dvdPlayer.on();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20dvdPlayer.play(movie);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EendMovie%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20System.out.println(%3Cspan%20class=%22string%22%3E&amp;quot;Shutting%20movie%20theater%20down...&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20dvdPlayer.stop();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20dvdPlayer.off();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20amplifier.off();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20projector.off();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20lights.off();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E6%88%91%E5%8F%AA%E9%9C%80%E8%A6%81%E2%80%9C%E4%B8%80%E9%94%AE%E2%80%9D%E8%A7%82%E5%BD%B1%E5%8D%B3%E5%8F%AF%E3%80%82%3C/p%3E%3Ch2%20id=%22%E6%80%BB%E7%BB%93%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E6%80%BB%E7%BB%93%22%3E%C2%B6%3C/a%3E%E6%80%BB%E7%BB%93%3C/h2%3E%3Cp%3E%3Cstrong%3E%E4%BC%98%E7%82%B9%3C/strong%3E%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%E7%AE%80%E5%8C%96%E6%8E%A5%E5%8F%A3%EF%BC%8C%E4%B8%8D%E9%9C%80%E8%A6%81%E4%BA%86%E8%A7%A3%E6%AF%8F%E4%B8%AA%E5%AD%90%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%BB%86%E8%8A%82%3C/li%3E%3Cli%3E%E8%A7%A3%E8%80%A6%EF%BC%8C%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%8F%AA%E4%BE%9D%E8%B5%96%E5%A4%96%E8%A7%82%E7%B1%BB%EF%BC%8C%E4%B8%8D%E4%B8%8E%E5%85%B7%E4%BD%93%E5%AD%90%E7%B3%BB%E7%BB%9F%E8%80%A6%E5%90%88%3C/li%3E%3Cli%3E%E6%8F%90%E9%AB%98%E7%BB%B4%E6%8A%A4%E6%80%A7%EF%BC%8C%E5%AD%90%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8F%98%E5%8C%96%EF%BC%8C%E5%8F%AA%E9%9C%80%E8%A6%81%E4%BF%AE%E6%94%B9%E5%A4%96%E8%A7%82%E7%B1%BB%EF%BC%8C%E4%B8%8D%E5%BD%B1%E5%93%8D%E5%AE%A2%E6%88%B7%E7%AB%AF%3C/li%3E%3C/ul%3E%3Cp%3E%3Cstrong%3E%E5%85%B6%E5%AE%83%E5%B8%B8%E8%A7%81%E5%BA%94%E7%94%A8%E7%A4%BA%E4%BE%8B%3C/strong%3E%3C/p%3E%3Col%3E%3Cli%3E%E7%BC%96%E8%AF%91%E5%99%A8/%E8%A7%A3%E6%9E%90%E5%99%A8%EF%BC%8C%E5%B0%86%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90%E3%80%81%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%E3%80%81%E8%AF%AD%E4%B9%89%E5%88%86%E6%9E%90%E5%A4%84%E7%90%86%E5%B0%81%E8%A3%85%E6%88%90%E4%B8%80%E4%B8%AA%3Ccode%3ECompiler%3C/code%3E%E5%A4%96%E8%A7%82%3C/li%3E%3Cli%3E%E6%94%AF%E4%BB%98%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%AF%B9%E6%8E%A5%E5%A4%9A%E4%B8%AA%E6%94%AF%E4%BB%98%E6%B8%A0%E9%81%93(%E5%BE%AE%E4%BF%A1%E3%80%81%E6%94%AF%E4%BB%98%E5%AE%9D%E3%80%81%E9%93%B6%E8%81%94),%E7%BB%9F%E4%B8%80%E8%B0%83%E7%94%A8%E6%8E%A5%E5%8F%A3%3C/li%3E%3C/ol%3E" type="image"/>
    
    
    
    <category term="structural" scheme="https://galudisu.info/tags/structural/"/>
    
    <category term="facade" scheme="https://galudisu.info/tags/facade/"/>
    
  </entry>
  
  <entry>
    <title>组合模式(Composite Pattern)</title>
    <link href="https://galudisu.info/2025/05/10/pattern/basic/structural/Composite/"/>
    <id>https://galudisu.info/2025/05/10/pattern/basic/structural/Composite/</id>
    <published>2025-05-10T10:25:03.000Z</published>
    <updated>2025-05-12T12:10:42.877Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>又叫部分整体模式，是用于把一组相似的对象当作一个单一的对象。组合模式依据<strong>树形结构</strong>来组合对象，用来表示”整体-部分“层次。这种模式使得客户端可以统一处理单个对象和组合对象，而无需关心它们的具体实现。</p></blockquote><img src="/assert/puml/22f0c50b3b853734516cc232fff2b8220df083e4655e5faa0b28d330d9081478.svg"/><span id="more"></span><h3 id="核心角色"><a class="header-anchor" href="#核心角色">¶</a>核心角色</h3><table><thead><tr><th><strong>角色</strong></th><th><strong>职责</strong></th></tr></thead><tbody><tr><td>Component</td><td>定义所有叶子和组合的公共接口，通常是抽象类或接口</td></tr><tr><td>Leaf</td><td>表示没有子节点的对象，实现基本操作</td></tr><tr><td>Composite</td><td>包含子组件的对象，实现容器行为，如添加、删除子组件等</td></tr></tbody></table><h3 id="适用场景"><a class="header-anchor" href="#适用场景">¶</a>适用场景</h3><ul><li>需要表示“整体-部分”关系的结构(如文件系统目录与文件、学校组织、管理层级)</li><li>希望客户端 <em>以一致方式处理单个对象和组合对象</em>。</li><li>结构具有层级性，并且可能动态变化。</li></ul><h3 id="真实案例"><a class="header-anchor" href="#真实案例">¶</a>真实案例</h3><p>对于某OA系统，中秋节安排了统一假期，但某些部门中秋节必须轮班，但可以节后进行调休申请。另外针对个别人员，比如电工、安防等个别对象需要派一到两个人留守，在节前申报了坚守岗位的名单后，office boy在OA系统上通过拖拽的方式，统一调整的内部员工的假期。</p><img src="/assert/puml/b7c3e9305ac1a7fbd7630176145966f8add3faf0604b9d280b45f1184c618df0.svg"/><p>设计如下：</p><table><thead><tr><th><strong>角色</strong></th><th><strong>实例</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>Component</td><td>AttendanceComponent</td><td>考勤</td></tr><tr><td>Leaf</td><td>EmployeeLeaf</td><td>员工个人的考勤</td></tr><tr><td>Composite</td><td>DepartmentComposite</td><td>整个部门的考勤</td></tr></tbody></table><p>组合模式(Composite Pattern)和企业级设计模式的“对象-关系”映射相对应，但这里只讨论代码层面的映射关系，设计如下</p><img src="/assert/puml/d9edde97f8418133667e001cd4e9f485cdd0389d979df1b0ef8352bcba66507d.svg"/><p>其中要求<code>DepartmentComposite</code>将描述为一种树结构，下面是部分代码实现，</p><p>Component接口，</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AttendanceComponent</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">punchIn</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">punchOut</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 当日工时</span></span><br><span class="line">  <span class="type">long</span> <span class="title function_">getAttendance</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Leaf叶子节点，</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeLeaf</span> <span class="keyword">implements</span> <span class="title class_">AttendanceComponent</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="type">long</span> <span class="variable">attendance</span> <span class="operator">=</span> <span class="number">0L</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> OffsetDateTime punchInTime;</span><br><span class="line">  <span class="keyword">private</span> OffsetDateTime punchOutTime;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">punchIn</span><span class="params">()</span> &#123;</span><br><span class="line">    punchInTime = OffsetDateTime.now();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">punchOut</span><span class="params">()</span> &#123;</span><br><span class="line">    punchOutTime = OffsetDateTime.now();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getAttendance</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (attendance == <span class="number">0</span> &amp;&amp; (punchOutTime != <span class="literal">null</span> &amp;&amp; punchInTime != <span class="literal">null</span>)) &#123;</span><br><span class="line">      attendance = Duration.between(punchInTime, punchOutTime).toMinutes();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> attendance;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Composite组合类，</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DepartmentComposite</span> <span class="keyword">implements</span> <span class="title class_">AttendanceComponent</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> Set&lt;AttendanceComponent&gt; components = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">punchIn</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (AttendanceComponent component : components) &#123;</span><br><span class="line">      component.punchIn();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">punchOut</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (AttendanceComponent component : components) &#123;</span><br><span class="line">      component.punchOut();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getAttendance</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> components.stream().mapToLong(AttendanceComponent::getAttendance).sum();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(AttendanceComponent component)</span> &#123;</span><br><span class="line">    components.add(component);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(AttendanceComponent component)</span> &#123;</span><br><span class="line">    components.remove(component);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="总结"><a class="header-anchor" href="#总结">¶</a>总结</h2><p><strong>组合模式(Composite Pattern)</strong> 通过继承保持了单一职责原则，通过集合操作实现了“整体-部分”的一致性操作。</p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;又叫部分整体模式，是用于把一组相似的对象当作一个单一的对象。组合模式依据&lt;strong&gt;树形结构&lt;/strong&gt;来组合对象，用来表示”整体-部分“层次。这种模式使得客户端可以统一处理单个对象和组合对象，而无需关心它们的具体实现。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;img src=&quot;/assert/puml/22f0c50b3b853734516cc232fff2b8220df083e4655e5faa0b28d330d9081478.svg&quot;/&gt;</summary>
    
    
    <content src="https://galudisu.info/%3Cblockquote%3E%3Cp%3E%E5%8F%88%E5%8F%AB%E9%83%A8%E5%88%86%E6%95%B4%E4%BD%93%E6%A8%A1%E5%BC%8F%EF%BC%8C%E6%98%AF%E7%94%A8%E4%BA%8E%E6%8A%8A%E4%B8%80%E7%BB%84%E7%9B%B8%E4%BC%BC%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%BD%93%E4%BD%9C%E4%B8%80%E4%B8%AA%E5%8D%95%E4%B8%80%E7%9A%84%E5%AF%B9%E8%B1%A1%E3%80%82%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F%E4%BE%9D%E6%8D%AE%3Cstrong%3E%E6%A0%91%E5%BD%A2%E7%BB%93%E6%9E%84%3C/strong%3E%E6%9D%A5%E7%BB%84%E5%90%88%E5%AF%B9%E8%B1%A1%EF%BC%8C%E7%94%A8%E6%9D%A5%E8%A1%A8%E7%A4%BA%E2%80%9D%E6%95%B4%E4%BD%93-%E9%83%A8%E5%88%86%E2%80%9C%E5%B1%82%E6%AC%A1%E3%80%82%E8%BF%99%E7%A7%8D%E6%A8%A1%E5%BC%8F%E4%BD%BF%E5%BE%97%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%8F%AF%E4%BB%A5%E7%BB%9F%E4%B8%80%E5%A4%84%E7%90%86%E5%8D%95%E4%B8%AA%E5%AF%B9%E8%B1%A1%E5%92%8C%E7%BB%84%E5%90%88%E5%AF%B9%E8%B1%A1%EF%BC%8C%E8%80%8C%E6%97%A0%E9%9C%80%E5%85%B3%E5%BF%83%E5%AE%83%E4%BB%AC%E7%9A%84%E5%85%B7%E4%BD%93%E5%AE%9E%E7%8E%B0%E3%80%82%3C/p%3E%3C/blockquote%3E%3Cimg%20src=%22/assert/puml/22f0c50b3b853734516cc232fff2b8220df083e4655e5faa0b28d330d9081478.svg%22/%3E%3Cspan%20id=%22more%22%3E%3C/span%3E%3Ch3%20id=%22%E6%A0%B8%E5%BF%83%E8%A7%92%E8%89%B2%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E6%A0%B8%E5%BF%83%E8%A7%92%E8%89%B2%22%3E%C2%B6%3C/a%3E%E6%A0%B8%E5%BF%83%E8%A7%92%E8%89%B2%3C/h3%3E%3Ctable%3E%3Cthead%3E%3Ctr%3E%3Cth%3E%3Cstrong%3E%E8%A7%92%E8%89%B2%3C/strong%3E%3C/th%3E%3Cth%3E%3Cstrong%3E%E8%81%8C%E8%B4%A3%3C/strong%3E%3C/th%3E%3C/tr%3E%3C/thead%3E%3Ctbody%3E%3Ctr%3E%3Ctd%3EComponent%3C/td%3E%3Ctd%3E%E5%AE%9A%E4%B9%89%E6%89%80%E6%9C%89%E5%8F%B6%E5%AD%90%E5%92%8C%E7%BB%84%E5%90%88%E7%9A%84%E5%85%AC%E5%85%B1%E6%8E%A5%E5%8F%A3%EF%BC%8C%E9%80%9A%E5%B8%B8%E6%98%AF%E6%8A%BD%E8%B1%A1%E7%B1%BB%E6%88%96%E6%8E%A5%E5%8F%A3%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3ELeaf%3C/td%3E%3Ctd%3E%E8%A1%A8%E7%A4%BA%E6%B2%A1%E6%9C%89%E5%AD%90%E8%8A%82%E7%82%B9%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%AE%9E%E7%8E%B0%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3EComposite%3C/td%3E%3Ctd%3E%E5%8C%85%E5%90%AB%E5%AD%90%E7%BB%84%E4%BB%B6%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%AE%9E%E7%8E%B0%E5%AE%B9%E5%99%A8%E8%A1%8C%E4%B8%BA%EF%BC%8C%E5%A6%82%E6%B7%BB%E5%8A%A0%E3%80%81%E5%88%A0%E9%99%A4%E5%AD%90%E7%BB%84%E4%BB%B6%E7%AD%89%3C/td%3E%3C/tr%3E%3C/tbody%3E%3C/table%3E%3Ch3%20id=%22%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF%22%3E%C2%B6%3C/a%3E%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF%3C/h3%3E%3Cul%3E%3Cli%3E%E9%9C%80%E8%A6%81%E8%A1%A8%E7%A4%BA%E2%80%9C%E6%95%B4%E4%BD%93-%E9%83%A8%E5%88%86%E2%80%9D%E5%85%B3%E7%B3%BB%E7%9A%84%E7%BB%93%E6%9E%84(%E5%A6%82%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9B%AE%E5%BD%95%E4%B8%8E%E6%96%87%E4%BB%B6%E3%80%81%E5%AD%A6%E6%A0%A1%E7%BB%84%E7%BB%87%E3%80%81%E7%AE%A1%E7%90%86%E5%B1%82%E7%BA%A7)%3C/li%3E%3Cli%3E%E5%B8%8C%E6%9C%9B%E5%AE%A2%E6%88%B7%E7%AB%AF%20%3Cem%3E%E4%BB%A5%E4%B8%80%E8%87%B4%E6%96%B9%E5%BC%8F%E5%A4%84%E7%90%86%E5%8D%95%E4%B8%AA%E5%AF%B9%E8%B1%A1%E5%92%8C%E7%BB%84%E5%90%88%E5%AF%B9%E8%B1%A1%3C/em%3E%E3%80%82%3C/li%3E%3Cli%3E%E7%BB%93%E6%9E%84%E5%85%B7%E6%9C%89%E5%B1%82%E7%BA%A7%E6%80%A7%EF%BC%8C%E5%B9%B6%E4%B8%94%E5%8F%AF%E8%83%BD%E5%8A%A8%E6%80%81%E5%8F%98%E5%8C%96%E3%80%82%3C/li%3E%3C/ul%3E%3Ch3%20id=%22%E7%9C%9F%E5%AE%9E%E6%A1%88%E4%BE%8B%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E7%9C%9F%E5%AE%9E%E6%A1%88%E4%BE%8B%22%3E%C2%B6%3C/a%3E%E7%9C%9F%E5%AE%9E%E6%A1%88%E4%BE%8B%3C/h3%3E%3Cp%3E%E5%AF%B9%E4%BA%8E%E6%9F%90OA%E7%B3%BB%E7%BB%9F%EF%BC%8C%E4%B8%AD%E7%A7%8B%E8%8A%82%E5%AE%89%E6%8E%92%E4%BA%86%E7%BB%9F%E4%B8%80%E5%81%87%E6%9C%9F%EF%BC%8C%E4%BD%86%E6%9F%90%E4%BA%9B%E9%83%A8%E9%97%A8%E4%B8%AD%E7%A7%8B%E8%8A%82%E5%BF%85%E9%A1%BB%E8%BD%AE%E7%8F%AD%EF%BC%8C%E4%BD%86%E5%8F%AF%E4%BB%A5%E8%8A%82%E5%90%8E%E8%BF%9B%E8%A1%8C%E8%B0%83%E4%BC%91%E7%94%B3%E8%AF%B7%E3%80%82%E5%8F%A6%E5%A4%96%E9%92%88%E5%AF%B9%E4%B8%AA%E5%88%AB%E4%BA%BA%E5%91%98%EF%BC%8C%E6%AF%94%E5%A6%82%E7%94%B5%E5%B7%A5%E3%80%81%E5%AE%89%E9%98%B2%E7%AD%89%E4%B8%AA%E5%88%AB%E5%AF%B9%E8%B1%A1%E9%9C%80%E8%A6%81%E6%B4%BE%E4%B8%80%E5%88%B0%E4%B8%A4%E4%B8%AA%E4%BA%BA%E7%95%99%E5%AE%88%EF%BC%8C%E5%9C%A8%E8%8A%82%E5%89%8D%E7%94%B3%E6%8A%A5%E4%BA%86%E5%9D%9A%E5%AE%88%E5%B2%97%E4%BD%8D%E7%9A%84%E5%90%8D%E5%8D%95%E5%90%8E%EF%BC%8Coffice%20boy%E5%9C%A8OA%E7%B3%BB%E7%BB%9F%E4%B8%8A%E9%80%9A%E8%BF%87%E6%8B%96%E6%8B%BD%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%8C%E7%BB%9F%E4%B8%80%E8%B0%83%E6%95%B4%E7%9A%84%E5%86%85%E9%83%A8%E5%91%98%E5%B7%A5%E7%9A%84%E5%81%87%E6%9C%9F%E3%80%82%3C/p%3E%3Cimg%20src=%22/assert/puml/b7c3e9305ac1a7fbd7630176145966f8add3faf0604b9d280b45f1184c618df0.svg%22/%3E%3Cp%3E%E8%AE%BE%E8%AE%A1%E5%A6%82%E4%B8%8B%EF%BC%9A%3C/p%3E%3Ctable%3E%3Cthead%3E%3Ctr%3E%3Cth%3E%3Cstrong%3E%E8%A7%92%E8%89%B2%3C/strong%3E%3C/th%3E%3Cth%3E%3Cstrong%3E%E5%AE%9E%E4%BE%8B%3C/strong%3E%3C/th%3E%3Cth%3E%3Cstrong%3E%E6%8F%8F%E8%BF%B0%3C/strong%3E%3C/th%3E%3C/tr%3E%3C/thead%3E%3Ctbody%3E%3Ctr%3E%3Ctd%3EComponent%3C/td%3E%3Ctd%3EAttendanceComponent%3C/td%3E%3Ctd%3E%E8%80%83%E5%8B%A4%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3ELeaf%3C/td%3E%3Ctd%3EEmployeeLeaf%3C/td%3E%3Ctd%3E%E5%91%98%E5%B7%A5%E4%B8%AA%E4%BA%BA%E7%9A%84%E8%80%83%E5%8B%A4%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3EComposite%3C/td%3E%3Ctd%3EDepartmentComposite%3C/td%3E%3Ctd%3E%E6%95%B4%E4%B8%AA%E9%83%A8%E9%97%A8%E7%9A%84%E8%80%83%E5%8B%A4%3C/td%3E%3C/tr%3E%3C/tbody%3E%3C/table%3E%3Cp%3E%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F(Composite%20Pattern)%E5%92%8C%E4%BC%81%E4%B8%9A%E7%BA%A7%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%9A%84%E2%80%9C%E5%AF%B9%E8%B1%A1-%E5%85%B3%E7%B3%BB%E2%80%9D%E6%98%A0%E5%B0%84%E7%9B%B8%E5%AF%B9%E5%BA%94%EF%BC%8C%E4%BD%86%E8%BF%99%E9%87%8C%E5%8F%AA%E8%AE%A8%E8%AE%BA%E4%BB%A3%E7%A0%81%E5%B1%82%E9%9D%A2%E7%9A%84%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB%EF%BC%8C%E8%AE%BE%E8%AE%A1%E5%A6%82%E4%B8%8B%3C/p%3E%3Cimg%20src=%22/assert/puml/d9edde97f8418133667e001cd4e9f485cdd0389d979df1b0ef8352bcba66507d.svg%22/%3E%3Cp%3E%E5%85%B6%E4%B8%AD%E8%A6%81%E6%B1%82%3Ccode%3EDepartmentComposite%3C/code%3E%E5%B0%86%E6%8F%8F%E8%BF%B0%E4%B8%BA%E4%B8%80%E7%A7%8D%E6%A0%91%E7%BB%93%E6%9E%84%EF%BC%8C%E4%B8%8B%E9%9D%A2%E6%98%AF%E9%83%A8%E5%88%86%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0%EF%BC%8C%3C/p%3E%3Cp%3EComponent%E6%8E%A5%E5%8F%A3%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Einterface%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EAttendanceComponent%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EpunchIn%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EpunchOut%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22comment%22%3E/%20%E5%BD%93%E6%97%A5%E5%B7%A5%E6%97%B6%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22type%22%3Elong%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EgetAttendance%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3ELeaf%E5%8F%B6%E5%AD%90%E8%8A%82%E7%82%B9%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E18%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E19%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E21%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E22%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E23%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E24%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E25%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E26%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EEmployeeLeaf%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EAttendanceComponent%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20%3Cspan%20class=%22type%22%3Elong%3C/span%3E%20%3Cspan%20class=%22variable%22%3Eattendance%3C/span%3E%20%3Cspan%20class=%22operator%22%3E=%3C/span%3E%20%3Cspan%20class=%22number%22%3E0L%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20OffsetDateTime%20punchInTime;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20OffsetDateTime%20punchOutTime;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EpunchIn%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20punchInTime%20=%20OffsetDateTime.now();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EpunchOut%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20punchOutTime%20=%20OffsetDateTime.now();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22type%22%3Elong%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EgetAttendance%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20(attendance%20==%20%3Cspan%20class=%22number%22%3E0%3C/span%3E%20&amp;amp;&amp;amp;%20(punchOutTime%20!=%20%3Cspan%20class=%22literal%22%3Enull%3C/span%3E%20&amp;amp;&amp;amp;%20punchInTime%20!=%20%3Cspan%20class=%22literal%22%3Enull%3C/span%3E))%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20attendance%20=%20Duration.between(punchInTime,%20punchOutTime).toMinutes();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20attendance;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3EComposite%E7%BB%84%E5%90%88%E7%B1%BB%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E18%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E19%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E21%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E22%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E23%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E24%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E25%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E26%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E27%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E28%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E29%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E30%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E31%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EDepartmentComposite%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EAttendanceComponent%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Efinal%3C/span%3E%20Set&amp;lt;AttendanceComponent&amp;gt;%20components%20=%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EHashSet%3C/span%3E&amp;lt;&amp;gt;();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EpunchIn%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20(AttendanceComponent%20component%20:%20components)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20component.punchIn();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EpunchOut%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20(AttendanceComponent%20component%20:%20components)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20component.punchOut();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22type%22%3Elong%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EgetAttendance%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20components.stream().mapToLong(AttendanceComponent::getAttendance).sum();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Eadd%3C/span%3E%3Cspan%20class=%22params%22%3E(AttendanceComponent%20component)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20components.add(component);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Eremove%3C/span%3E%3Cspan%20class=%22params%22%3E(AttendanceComponent%20component)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20components.remove(component);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Ch2%20id=%22%E6%80%BB%E7%BB%93%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E6%80%BB%E7%BB%93%22%3E%C2%B6%3C/a%3E%E6%80%BB%E7%BB%93%3C/h2%3E%3Cp%3E%3Cstrong%3E%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F(Composite%20Pattern)%3C/strong%3E%20%E9%80%9A%E8%BF%87%E7%BB%A7%E6%89%BF%E4%BF%9D%E6%8C%81%E4%BA%86%E5%8D%95%E4%B8%80%E8%81%8C%E8%B4%A3%E5%8E%9F%E5%88%99%EF%BC%8C%E9%80%9A%E8%BF%87%E9%9B%86%E5%90%88%E6%93%8D%E4%BD%9C%E5%AE%9E%E7%8E%B0%E4%BA%86%E2%80%9C%E6%95%B4%E4%BD%93-%E9%83%A8%E5%88%86%E2%80%9D%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7%E6%93%8D%E4%BD%9C%E3%80%82%3C/p%3E" type="image"/>
    
    
    
    <category term="structural" scheme="https://galudisu.info/tags/structural/"/>
    
    <category term="composite" scheme="https://galudisu.info/tags/composite/"/>
    
  </entry>
  
  <entry>
    <title>装饰器模式(Decorator Pattern)</title>
    <link href="https://galudisu.info/2025/05/10/pattern/basic/structural/Decorator/"/>
    <id>https://galudisu.info/2025/05/10/pattern/basic/structural/Decorator/</id>
    <published>2025-05-10T10:25:02.000Z</published>
    <updated>2025-05-11T16:16:24.567Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>若要扩展功能，装饰者提供了比集成更有弹性的替代方案，动态地将责任附加到对象上。</p></blockquote><img src="/assert/puml/02307d672ba01e2fed96d1b7c332747bc72a41cded1a754f25826829437fce6f.svg"/><span id="more"></span><h3 id="核心结构"><a class="header-anchor" href="#核心结构">¶</a>核心结构</h3><p><strong>装饰器模式(Decorator Pattern)</strong> 的核心在于在不修改已有实现的前提下，对其进行增强。这里体现了一个原则：<strong>类应该对扩展开放，对修改关闭</strong>。</p><h3 id="应用场景"><a class="header-anchor" href="#应用场景">¶</a>应用场景</h3><ul><li>当需要在不修改原有对象的前提下为其添加新功能时。</li><li>当子类扩展不切实际时(比如需要多个可选功能组合的情况)。</li><li>在Java IO流中大量使用了装饰器模式，例如<code>BufferedInputStream(InputStream)</code>就是对输入流的一种装饰。</li></ul><h3 id="需求"><a class="header-anchor" href="#需求">¶</a>需求</h3><p>设计游戏的装备系统，要求可以计算出每种装备在镶嵌了各种宝石后的攻击力和描述：</p><ul><li>按照要求，构建如下UML类图，其中包含装备超类<code>Equip</code>、装饰超类<code>EquipDecorator</code>、游戏属性角色如下：</li></ul><table><thead><tr><th><strong>装备</strong></th><th>红宝石(hp+)</th><th>蓝宝石(mp+)</th><th>绿宝石(sp+)</th><th>黄宝石(ak+)</th><th>紫宝石(df+)</th></tr></thead><tbody><tr><td>帽子🧢</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>上衣👔</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>护甲🧥</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>裤子👖</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>鞋子👢</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>武器🗡</td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><p>根据属性栏，设计装备属性，有攻击、敏捷、防御、hp/mp值。其中红宝石+hp，蓝宝石+mp，绿宝石+敏捷，黄宝石+攻击力，紫宝石+防御力。</p><img src="/assert/puml/581374393200909de2218f08bbc1a1f3d60f03d252d409881b8a370d3dd77b5b.svg"/><p>装饰器可以多层嵌套，例如获取得到的宝石都用在武器的加点上，</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Equip</span> <span class="variable">levelUpWeapon</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RedGem</span>(<span class="keyword">new</span> <span class="title class_">BlueGem</span>(<span class="keyword">new</span> <span class="title class_">YellowGem</span>(<span class="keyword">new</span> <span class="title class_">GreenGem</span>(<span class="keyword">new</span> <span class="title class_">WwaponEquip</span>()))));</span><br><span class="line"><span class="comment">// 创建剑士并穿戴该氪金武器</span></span><br><span class="line"><span class="type">Swordman</span> <span class="variable">swordman</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Swordman</span>();</span><br><span class="line">swordman.equip(levelUpWeapon);</span><br><span class="line"></span><br><span class="line">System.out.println(swordman);</span><br><span class="line"></span><br><span class="line">Swordman&#123;</span><br><span class="line">  attack=<span class="number">12</span>, </span><br><span class="line">  defense=<span class="number">0</span>, </span><br><span class="line">  speed=<span class="number">5</span>, </span><br><span class="line">  hp=<span class="number">5</span>, </span><br><span class="line">  mp=<span class="number">10</span>, </span><br><span class="line">  equipment=已装备有：🗡</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>下面是示例代码的部分实现：</p><p>被装饰的类以及其超类，</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Equip</span> &#123;</span><br><span class="line">  EquipType <span class="title function_">getType</span><span class="params">()</span>;</span><br><span class="line">  <span class="type">int</span> <span class="title function_">attack</span><span class="params">()</span>;</span><br><span class="line">  <span class="type">int</span> <span class="title function_">speed</span><span class="params">()</span>;</span><br><span class="line">  <span class="type">int</span> <span class="title function_">defense</span><span class="params">()</span>;</span><br><span class="line">  <span class="type">int</span> <span class="title function_">hp</span><span class="params">()</span>;</span><br><span class="line">  <span class="type">int</span> <span class="title function_">mp</span><span class="params">()</span>;</span><br><span class="line">  String <span class="title function_">description</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WeaponEquip</span> <span class="keyword">implements</span> <span class="title class_">Equip</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> EquipType <span class="title function_">getType</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> EquipType.WEAPON;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">attack</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">speed</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">defense</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hp</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">mp</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">description</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;🗡&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>实现其装饰器，可以为<code>interface</code>或<code>abstract</code>，</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">EquipDecorator</span> <span class="keyword">implements</span> <span class="title class_">Equip</span> &#123;</span><br><span class="line">  <span class="keyword">protected</span> Equip equip;</span><br><span class="line">  <span class="keyword">protected</span> <span class="title function_">EquipDecorator</span><span class="params">(Equip equip)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.equip = equip;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">attack</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> equip.attack();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">speed</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> equip.speed();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">defense</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> equip.defense();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hp</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> equip.hp();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">mp</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> equip.mp();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">description</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> equip.description();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>按照定义，<strong>装饰器模式(decorator pattern)</strong> 在不改变已有类的前提下，对其实现增强。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BlueGemEquipDecorator</span> <span class="keyword">extends</span> <span class="title class_">EquipDecorator</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">BlueGemEquipDecorator</span><span class="params">(Equip equip)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(equip);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">mp</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> equip.mp() + <span class="number">10</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>优点</strong>：</p><ul><li>开闭原则： 不修改已有的类。</li><li>组合优于继承：更灵活，可以无限叠加</li><li>运行时可变： 可以在运行时添加或删除功能</li><li>高内聚低耦合： 每个装饰器只关注自己的增强逻辑</li></ul><h3 id="装饰器模式与代理模式的区别"><a class="header-anchor" href="#装饰器模式与代理模式的区别">¶</a>装饰器模式与代理模式的区别</h3><ol><li>目的不同： 装饰器模式是作 <strong>增强功能</strong>；代理模式则是实现 <strong>控制访问</strong>。</li><li>实现方式相同： 都是通过组合+接口一致性方式，都继承了目标的接口。</li><li>关注点不同： 装饰器模式是“添加职责”；代理模式是“封装访问“。</li><li>是否透明： 前者透明并增强；后者控制访问减少透明度</li></ol>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;若要扩展功能，装饰者提供了比集成更有弹性的替代方案，动态地将责任附加到对象上。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;img src=&quot;/assert/puml/02307d672ba01e2fed96d1b7c332747bc72a41cded1a754f25826829437fce6f.svg&quot;/&gt;</summary>
    
    
    <content src="https://galudisu.info/%3Cblockquote%3E%3Cp%3E%E8%8B%A5%E8%A6%81%E6%89%A9%E5%B1%95%E5%8A%9F%E8%83%BD%EF%BC%8C%E8%A3%85%E9%A5%B0%E8%80%85%E6%8F%90%E4%BE%9B%E4%BA%86%E6%AF%94%E9%9B%86%E6%88%90%E6%9B%B4%E6%9C%89%E5%BC%B9%E6%80%A7%E7%9A%84%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88%EF%BC%8C%E5%8A%A8%E6%80%81%E5%9C%B0%E5%B0%86%E8%B4%A3%E4%BB%BB%E9%99%84%E5%8A%A0%E5%88%B0%E5%AF%B9%E8%B1%A1%E4%B8%8A%E3%80%82%3C/p%3E%3C/blockquote%3E%3Cimg%20src=%22/assert/puml/02307d672ba01e2fed96d1b7c332747bc72a41cded1a754f25826829437fce6f.svg%22/%3E%3Cspan%20id=%22more%22%3E%3C/span%3E%3Ch3%20id=%22%E6%A0%B8%E5%BF%83%E7%BB%93%E6%9E%84%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E6%A0%B8%E5%BF%83%E7%BB%93%E6%9E%84%22%3E%C2%B6%3C/a%3E%E6%A0%B8%E5%BF%83%E7%BB%93%E6%9E%84%3C/h3%3E%3Cp%3E%3Cstrong%3E%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F(Decorator%20Pattern)%3C/strong%3E%20%E7%9A%84%E6%A0%B8%E5%BF%83%E5%9C%A8%E4%BA%8E%E5%9C%A8%E4%B8%8D%E4%BF%AE%E6%94%B9%E5%B7%B2%E6%9C%89%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%89%8D%E6%8F%90%E4%B8%8B%EF%BC%8C%E5%AF%B9%E5%85%B6%E8%BF%9B%E8%A1%8C%E5%A2%9E%E5%BC%BA%E3%80%82%E8%BF%99%E9%87%8C%E4%BD%93%E7%8E%B0%E4%BA%86%E4%B8%80%E4%B8%AA%E5%8E%9F%E5%88%99%EF%BC%9A%3Cstrong%3E%E7%B1%BB%E5%BA%94%E8%AF%A5%E5%AF%B9%E6%89%A9%E5%B1%95%E5%BC%80%E6%94%BE%EF%BC%8C%E5%AF%B9%E4%BF%AE%E6%94%B9%E5%85%B3%E9%97%AD%3C/strong%3E%E3%80%82%3C/p%3E%3Ch3%20id=%22%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%22%3E%C2%B6%3C/a%3E%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%3C/h3%3E%3Cul%3E%3Cli%3E%E5%BD%93%E9%9C%80%E8%A6%81%E5%9C%A8%E4%B8%8D%E4%BF%AE%E6%94%B9%E5%8E%9F%E6%9C%89%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%89%8D%E6%8F%90%E4%B8%8B%E4%B8%BA%E5%85%B6%E6%B7%BB%E5%8A%A0%E6%96%B0%E5%8A%9F%E8%83%BD%E6%97%B6%E3%80%82%3C/li%3E%3Cli%3E%E5%BD%93%E5%AD%90%E7%B1%BB%E6%89%A9%E5%B1%95%E4%B8%8D%E5%88%87%E5%AE%9E%E9%99%85%E6%97%B6(%E6%AF%94%E5%A6%82%E9%9C%80%E8%A6%81%E5%A4%9A%E4%B8%AA%E5%8F%AF%E9%80%89%E5%8A%9F%E8%83%BD%E7%BB%84%E5%90%88%E7%9A%84%E6%83%85%E5%86%B5)%E3%80%82%3C/li%3E%3Cli%3E%E5%9C%A8Java%20IO%E6%B5%81%E4%B8%AD%E5%A4%A7%E9%87%8F%E4%BD%BF%E7%94%A8%E4%BA%86%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F%EF%BC%8C%E4%BE%8B%E5%A6%82%3Ccode%3EBufferedInputStream(InputStream)%3C/code%3E%E5%B0%B1%E6%98%AF%E5%AF%B9%E8%BE%93%E5%85%A5%E6%B5%81%E7%9A%84%E4%B8%80%E7%A7%8D%E8%A3%85%E9%A5%B0%E3%80%82%3C/li%3E%3C/ul%3E%3Ch3%20id=%22%E9%9C%80%E6%B1%82%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E9%9C%80%E6%B1%82%22%3E%C2%B6%3C/a%3E%E9%9C%80%E6%B1%82%3C/h3%3E%3Cp%3E%E8%AE%BE%E8%AE%A1%E6%B8%B8%E6%88%8F%E7%9A%84%E8%A3%85%E5%A4%87%E7%B3%BB%E7%BB%9F%EF%BC%8C%E8%A6%81%E6%B1%82%E5%8F%AF%E4%BB%A5%E8%AE%A1%E7%AE%97%E5%87%BA%E6%AF%8F%E7%A7%8D%E8%A3%85%E5%A4%87%E5%9C%A8%E9%95%B6%E5%B5%8C%E4%BA%86%E5%90%84%E7%A7%8D%E5%AE%9D%E7%9F%B3%E5%90%8E%E7%9A%84%E6%94%BB%E5%87%BB%E5%8A%9B%E5%92%8C%E6%8F%8F%E8%BF%B0%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%E6%8C%89%E7%85%A7%E8%A6%81%E6%B1%82%EF%BC%8C%E6%9E%84%E5%BB%BA%E5%A6%82%E4%B8%8BUML%E7%B1%BB%E5%9B%BE%EF%BC%8C%E5%85%B6%E4%B8%AD%E5%8C%85%E5%90%AB%E8%A3%85%E5%A4%87%E8%B6%85%E7%B1%BB%3Ccode%3EEquip%3C/code%3E%E3%80%81%E8%A3%85%E9%A5%B0%E8%B6%85%E7%B1%BB%3Ccode%3EEquipDecorator%3C/code%3E%E3%80%81%E6%B8%B8%E6%88%8F%E5%B1%9E%E6%80%A7%E8%A7%92%E8%89%B2%E5%A6%82%E4%B8%8B%EF%BC%9A%3C/li%3E%3C/ul%3E%3Ctable%3E%3Cthead%3E%3Ctr%3E%3Cth%3E%3Cstrong%3E%E8%A3%85%E5%A4%87%3C/strong%3E%3C/th%3E%3Cth%3E%E7%BA%A2%E5%AE%9D%E7%9F%B3(hp+)%3C/th%3E%3Cth%3E%E8%93%9D%E5%AE%9D%E7%9F%B3(mp+)%3C/th%3E%3Cth%3E%E7%BB%BF%E5%AE%9D%E7%9F%B3(sp+)%3C/th%3E%3Cth%3E%E9%BB%84%E5%AE%9D%E7%9F%B3(ak+)%3C/th%3E%3Cth%3E%E7%B4%AB%E5%AE%9D%E7%9F%B3(df+)%3C/th%3E%3C/tr%3E%3C/thead%3E%3Ctbody%3E%3Ctr%3E%3Ctd%3E%E5%B8%BD%E5%AD%90%F0%9F%A7%A2%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3E%E4%B8%8A%E8%A1%A3%F0%9F%91%94%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3E%E6%8A%A4%E7%94%B2%F0%9F%A7%A5%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3E%E8%A3%A4%E5%AD%90%F0%9F%91%96%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3E%E9%9E%8B%E5%AD%90%F0%9F%91%A2%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3E%E6%AD%A6%E5%99%A8%F0%9F%97%A1%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3Ctd%3E%3C/td%3E%3C/tr%3E%3C/tbody%3E%3C/table%3E%3Cp%3E%E6%A0%B9%E6%8D%AE%E5%B1%9E%E6%80%A7%E6%A0%8F%EF%BC%8C%E8%AE%BE%E8%AE%A1%E8%A3%85%E5%A4%87%E5%B1%9E%E6%80%A7%EF%BC%8C%E6%9C%89%E6%94%BB%E5%87%BB%E3%80%81%E6%95%8F%E6%8D%B7%E3%80%81%E9%98%B2%E5%BE%A1%E3%80%81hp/mp%E5%80%BC%E3%80%82%E5%85%B6%E4%B8%AD%E7%BA%A2%E5%AE%9D%E7%9F%B3+hp%EF%BC%8C%E8%93%9D%E5%AE%9D%E7%9F%B3+mp%EF%BC%8C%E7%BB%BF%E5%AE%9D%E7%9F%B3+%E6%95%8F%E6%8D%B7%EF%BC%8C%E9%BB%84%E5%AE%9D%E7%9F%B3+%E6%94%BB%E5%87%BB%E5%8A%9B%EF%BC%8C%E7%B4%AB%E5%AE%9D%E7%9F%B3+%E9%98%B2%E5%BE%A1%E5%8A%9B%E3%80%82%3C/p%3E%3Cimg%20src=%22/assert/puml/581374393200909de2218f08bbc1a1f3d60f03d252d409881b8a370d3dd77b5b.svg%22/%3E%3Cp%3E%E8%A3%85%E9%A5%B0%E5%99%A8%E5%8F%AF%E4%BB%A5%E5%A4%9A%E5%B1%82%E5%B5%8C%E5%A5%97%EF%BC%8C%E4%BE%8B%E5%A6%82%E8%8E%B7%E5%8F%96%E5%BE%97%E5%88%B0%E7%9A%84%E5%AE%9D%E7%9F%B3%E9%83%BD%E7%94%A8%E5%9C%A8%E6%AD%A6%E5%99%A8%E7%9A%84%E5%8A%A0%E7%82%B9%E4%B8%8A%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22type%22%3EEquip%3C/span%3E%20%3Cspan%20class=%22variable%22%3ElevelUpWeapon%3C/span%3E%20%3Cspan%20class=%22operator%22%3E=%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ERedGem%3C/span%3E(%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EBlueGem%3C/span%3E(%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EYellowGem%3C/span%3E(%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EGreenGem%3C/span%3E(%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EWwaponEquip%3C/span%3E()))));%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22comment%22%3E/%20%E5%88%9B%E5%BB%BA%E5%89%91%E5%A3%AB%E5%B9%B6%E7%A9%BF%E6%88%B4%E8%AF%A5%E6%B0%AA%E9%87%91%E6%AD%A6%E5%99%A8%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22type%22%3ESwordman%3C/span%3E%20%3Cspan%20class=%22variable%22%3Eswordman%3C/span%3E%20%3Cspan%20class=%22operator%22%3E=%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESwordman%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Eswordman.equip(levelUpWeapon);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3ESystem.out.println(swordman);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3ESwordman&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20attack=%3Cspan%20class=%22number%22%3E12%3C/span%3E,%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20defense=%3Cspan%20class=%22number%22%3E0%3C/span%3E,%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20speed=%3Cspan%20class=%22number%22%3E5%3C/span%3E,%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20hp=%3Cspan%20class=%22number%22%3E5%3C/span%3E,%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20mp=%3Cspan%20class=%22number%22%3E10%3C/span%3E,%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20equipment=%E5%B7%B2%E8%A3%85%E5%A4%87%E6%9C%89%EF%BC%9A%F0%9F%97%A1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E4%B8%8B%E9%9D%A2%E6%98%AF%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%E7%9A%84%E9%83%A8%E5%88%86%E5%AE%9E%E7%8E%B0%EF%BC%9A%3C/p%3E%3Cp%3E%E8%A2%AB%E8%A3%85%E9%A5%B0%E7%9A%84%E7%B1%BB%E4%BB%A5%E5%8F%8A%E5%85%B6%E8%B6%85%E7%B1%BB%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E18%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E19%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E21%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E22%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E23%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E24%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E25%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E26%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E27%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E28%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E29%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E30%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E31%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E32%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E33%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E34%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E35%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E36%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E37%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E38%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E39%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E40%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Einterface%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EEquip%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20EquipType%20%3Cspan%20class=%22title%20function_%22%3EgetType%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Eattack%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Espeed%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Edefense%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ehp%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Emp%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20String%20%3Cspan%20class=%22title%20function_%22%3Edescription%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EWeaponEquip%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EEquip%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20EquipType%20%3Cspan%20class=%22title%20function_%22%3EgetType%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20EquipType.WEAPON;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Eattack%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Espeed%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Edefense%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ehp%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Emp%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20String%20%3Cspan%20class=%22title%20function_%22%3Edescription%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;quot;%F0%9F%97%A1&amp;quot;%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%AE%9E%E7%8E%B0%E5%85%B6%E8%A3%85%E9%A5%B0%E5%99%A8%EF%BC%8C%E5%8F%AF%E4%BB%A5%E4%B8%BA%3Ccode%3Einterface%3C/code%3E%E6%88%96%3Ccode%3Eabstract%3C/code%3E%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E18%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E19%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E21%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E22%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E23%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E24%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E25%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E26%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E27%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E28%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E29%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E30%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eabstract%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EEquipDecorator%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EEquip%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprotected%3C/span%3E%20Equip%20equip;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprotected%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EEquipDecorator%3C/span%3E%3Cspan%20class=%22params%22%3E(Equip%20equip)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Ethis%3C/span%3E.equip%20=%20equip;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Eattack%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20equip.attack();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Espeed%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20equip.speed();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Edefense%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20equip.defense();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ehp%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20equip.hp();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Emp%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20equip.mp();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20String%20%3Cspan%20class=%22title%20function_%22%3Edescription%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20equip.description();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E6%8C%89%E7%85%A7%E5%AE%9A%E4%B9%89%EF%BC%8C%3Cstrong%3E%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F(decorator%20pattern)%3C/strong%3E%20%E5%9C%A8%E4%B8%8D%E6%94%B9%E5%8F%98%E5%B7%B2%E6%9C%89%E7%B1%BB%E7%9A%84%E5%89%8D%E6%8F%90%E4%B8%8B%EF%BC%8C%E5%AF%B9%E5%85%B6%E5%AE%9E%E7%8E%B0%E5%A2%9E%E5%BC%BA%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EBlueGemEquipDecorator%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eextends%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EEquipDecorator%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EBlueGemEquipDecorator%3C/span%3E%3Cspan%20class=%22params%22%3E(Equip%20equip)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Esuper%3C/span%3E(equip);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Emp%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20equip.mp()%20+%20%3Cspan%20class=%22number%22%3E10%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Cstrong%3E%E4%BC%98%E7%82%B9%3C/strong%3E%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99%EF%BC%9A%20%E4%B8%8D%E4%BF%AE%E6%94%B9%E5%B7%B2%E6%9C%89%E7%9A%84%E7%B1%BB%E3%80%82%3C/li%3E%3Cli%3E%E7%BB%84%E5%90%88%E4%BC%98%E4%BA%8E%E7%BB%A7%E6%89%BF%EF%BC%9A%E6%9B%B4%E7%81%B5%E6%B4%BB%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%97%A0%E9%99%90%E5%8F%A0%E5%8A%A0%3C/li%3E%3Cli%3E%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8F%AF%E5%8F%98%EF%BC%9A%20%E5%8F%AF%E4%BB%A5%E5%9C%A8%E8%BF%90%E8%A1%8C%E6%97%B6%E6%B7%BB%E5%8A%A0%E6%88%96%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD%3C/li%3E%3Cli%3E%E9%AB%98%E5%86%85%E8%81%9A%E4%BD%8E%E8%80%A6%E5%90%88%EF%BC%9A%20%E6%AF%8F%E4%B8%AA%E8%A3%85%E9%A5%B0%E5%99%A8%E5%8F%AA%E5%85%B3%E6%B3%A8%E8%87%AA%E5%B7%B1%E7%9A%84%E5%A2%9E%E5%BC%BA%E9%80%BB%E8%BE%91%3C/li%3E%3C/ul%3E%3Ch3%20id=%22%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F%E4%B8%8E%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F%E4%B8%8E%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB%22%3E%C2%B6%3C/a%3E%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F%E4%B8%8E%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB%3C/h3%3E%3Col%3E%3Cli%3E%E7%9B%AE%E7%9A%84%E4%B8%8D%E5%90%8C%EF%BC%9A%20%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F%E6%98%AF%E4%BD%9C%20%3Cstrong%3E%E5%A2%9E%E5%BC%BA%E5%8A%9F%E8%83%BD%3C/strong%3E%EF%BC%9B%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E5%88%99%E6%98%AF%E5%AE%9E%E7%8E%B0%20%3Cstrong%3E%E6%8E%A7%E5%88%B6%E8%AE%BF%E9%97%AE%3C/strong%3E%E3%80%82%3C/li%3E%3Cli%3E%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%E7%9B%B8%E5%90%8C%EF%BC%9A%20%E9%83%BD%E6%98%AF%E9%80%9A%E8%BF%87%E7%BB%84%E5%90%88+%E6%8E%A5%E5%8F%A3%E4%B8%80%E8%87%B4%E6%80%A7%E6%96%B9%E5%BC%8F%EF%BC%8C%E9%83%BD%E7%BB%A7%E6%89%BF%E4%BA%86%E7%9B%AE%E6%A0%87%E7%9A%84%E6%8E%A5%E5%8F%A3%E3%80%82%3C/li%3E%3Cli%3E%E5%85%B3%E6%B3%A8%E7%82%B9%E4%B8%8D%E5%90%8C%EF%BC%9A%20%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F%E6%98%AF%E2%80%9C%E6%B7%BB%E5%8A%A0%E8%81%8C%E8%B4%A3%E2%80%9D%EF%BC%9B%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E6%98%AF%E2%80%9C%E5%B0%81%E8%A3%85%E8%AE%BF%E9%97%AE%E2%80%9C%E3%80%82%3C/li%3E%3Cli%3E%E6%98%AF%E5%90%A6%E9%80%8F%E6%98%8E%EF%BC%9A%20%E5%89%8D%E8%80%85%E9%80%8F%E6%98%8E%E5%B9%B6%E5%A2%9E%E5%BC%BA%EF%BC%9B%E5%90%8E%E8%80%85%E6%8E%A7%E5%88%B6%E8%AE%BF%E9%97%AE%E5%87%8F%E5%B0%91%E9%80%8F%E6%98%8E%E5%BA%A6%3C/li%3E%3C/ol%3E" type="image"/>
    
    
    
    <category term="structural" scheme="https://galudisu.info/tags/structural/"/>
    
    <category term="decorator" scheme="https://galudisu.info/tags/decorator/"/>
    
  </entry>
  
  <entry>
    <title>桥接模式(Bridge Pattern)</title>
    <link href="https://galudisu.info/2025/05/10/pattern/basic/structural/Bridge/"/>
    <id>https://galudisu.info/2025/05/10/pattern/basic/structural/Bridge/</id>
    <published>2025-05-10T10:25:01.000Z</published>
    <updated>2025-05-11T16:16:24.580Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>桥接(Bridge)是<strong>用于把抽象化与实现化解耦</strong>，使得二者可以独立变化。</p></blockquote><img src="/assert/puml/1c7fc28bdf3d3ce828d3a8e69309891daa6330aac3660ea3088ed78c46f2b8c6.svg"/><span id="more"></span><h3 id="适用场景"><a class="header-anchor" href="#适用场景">¶</a>适用场景</h3><p>有多种可能变化的情况下，用继承会造成类爆炸问题，扩展起来不灵活。例如一个类存在两个维度，一个维度可以扩展为2个维度，一个维度可以扩展为3个维度，排列组合后就是2x3个实例。</p><p>以画图为例，要实现一个画图工具，假设可以画圆和矩形，也可以给其进行颜色填充。按照定义，抽象和实现必须分开，</p><ul><li><strong>抽象维度</strong>： 图形(圆、矩形、正方形)</li><li><strong>实现维度</strong>： 颜色(红、绿、蓝)</li></ul><img src="/assert/puml/9b2f07da92406fbd677399c71c6721fd7eb526cf336b4cf135bf322b116c6e4b.svg"/><p>定义不同的颜色，</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Color</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">fill</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Red</span> <span class="keyword">implements</span> <span class="title class_">Color</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fill</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;fillin red&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Blue</span> <span class="keyword">implements</span> <span class="title class_">Color</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fill</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;fillin blue&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Green</span> <span class="keyword">implements</span> <span class="title class_">Color</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fill</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;fillin green&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>定义桥接类，</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">  <span class="keyword">protected</span> Color color;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">protected</span> <span class="title function_">Shape</span><span class="params">(Color color)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.color = color;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">()</span>;  <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><i class="conum" data-value="1"></i> 分离实现</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Circle</span> <span class="keyword">extends</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Circle</span><span class="params">(Color color)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(color);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Circle -&gt;&quot;</span>);</span><br><span class="line">    color.fill();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Rectangle</span> <span class="keyword">extends</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Rectangle</span><span class="params">(Color color)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(color);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Rectangle -&gt;&quot;</span>);</span><br><span class="line">    color.fill();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Square</span> <span class="keyword">extends</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Square</span><span class="params">(Color color)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(color);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Square -&gt;&quot;</span>);</span><br><span class="line">    color.fill();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>按需所取，</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Shape</span> <span class="variable">redCircle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Circle</span>(<span class="keyword">new</span> <span class="title class_">Red</span>());</span><br><span class="line">    <span class="type">Shape</span> <span class="variable">blueRectangle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Rectangle</span>(<span class="keyword">new</span> <span class="title class_">Blue</span>());</span><br><span class="line">    <span class="type">Shape</span> <span class="variable">greenSquare</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Square</span>(<span class="keyword">new</span> <span class="title class_">Green</span>());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="总结"><a class="header-anchor" href="#总结">¶</a>总结</h2><p>桥接模式的核心特征是<strong>两个独立变化的维度</strong></p><blockquote><p>🔵<strong>抽象部分(Abstraction)</strong> 和 🔵<strong>实现部分(Implementor)</strong> 可以各自独立扩展，互不干扰。</p></blockquote><table><thead><tr><th>维度</th><th>描述</th></tr></thead><tbody><tr><td>抽象部分</td><td>定义高层操作，通常是一个类或接口，它包含对实现部分的引用</td></tr><tr><td>实现部分</td><td>定义地层行为，通常是接口或抽象类，用于被多个抽象类组合使用</td></tr></tbody></table><p>口诀：</p><blockquote><p>“一个类里由一个接口变量，并且这个接口决定了它的底层实现”</p></blockquote>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;桥接(Bridge)是&lt;strong&gt;用于把抽象化与实现化解耦&lt;/strong&gt;，使得二者可以独立变化。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;img src=&quot;/assert/puml/1c7fc28bdf3d3ce828d3a8e69309891daa6330aac3660ea3088ed78c46f2b8c6.svg&quot;/&gt;</summary>
    
    
    <content src="https://galudisu.info/%3Cblockquote%3E%3Cp%3E%E6%A1%A5%E6%8E%A5(Bridge)%E6%98%AF%3Cstrong%3E%E7%94%A8%E4%BA%8E%E6%8A%8A%E6%8A%BD%E8%B1%A1%E5%8C%96%E4%B8%8E%E5%AE%9E%E7%8E%B0%E5%8C%96%E8%A7%A3%E8%80%A6%3C/strong%3E%EF%BC%8C%E4%BD%BF%E5%BE%97%E4%BA%8C%E8%80%85%E5%8F%AF%E4%BB%A5%E7%8B%AC%E7%AB%8B%E5%8F%98%E5%8C%96%E3%80%82%3C/p%3E%3C/blockquote%3E%3Cimg%20src=%22/assert/puml/1c7fc28bdf3d3ce828d3a8e69309891daa6330aac3660ea3088ed78c46f2b8c6.svg%22/%3E%3Cspan%20id=%22more%22%3E%3C/span%3E%3Ch3%20id=%22%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF%22%3E%C2%B6%3C/a%3E%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF%3C/h3%3E%3Cp%3E%E6%9C%89%E5%A4%9A%E7%A7%8D%E5%8F%AF%E8%83%BD%E5%8F%98%E5%8C%96%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8C%E7%94%A8%E7%BB%A7%E6%89%BF%E4%BC%9A%E9%80%A0%E6%88%90%E7%B1%BB%E7%88%86%E7%82%B8%E9%97%AE%E9%A2%98%EF%BC%8C%E6%89%A9%E5%B1%95%E8%B5%B7%E6%9D%A5%E4%B8%8D%E7%81%B5%E6%B4%BB%E3%80%82%E4%BE%8B%E5%A6%82%E4%B8%80%E4%B8%AA%E7%B1%BB%E5%AD%98%E5%9C%A8%E4%B8%A4%E4%B8%AA%E7%BB%B4%E5%BA%A6%EF%BC%8C%E4%B8%80%E4%B8%AA%E7%BB%B4%E5%BA%A6%E5%8F%AF%E4%BB%A5%E6%89%A9%E5%B1%95%E4%B8%BA2%E4%B8%AA%E7%BB%B4%E5%BA%A6%EF%BC%8C%E4%B8%80%E4%B8%AA%E7%BB%B4%E5%BA%A6%E5%8F%AF%E4%BB%A5%E6%89%A9%E5%B1%95%E4%B8%BA3%E4%B8%AA%E7%BB%B4%E5%BA%A6%EF%BC%8C%E6%8E%92%E5%88%97%E7%BB%84%E5%90%88%E5%90%8E%E5%B0%B1%E6%98%AF2x3%E4%B8%AA%E5%AE%9E%E4%BE%8B%E3%80%82%3C/p%3E%3Cp%3E%E4%BB%A5%E7%94%BB%E5%9B%BE%E4%B8%BA%E4%BE%8B%EF%BC%8C%E8%A6%81%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%94%BB%E5%9B%BE%E5%B7%A5%E5%85%B7%EF%BC%8C%E5%81%87%E8%AE%BE%E5%8F%AF%E4%BB%A5%E7%94%BB%E5%9C%86%E5%92%8C%E7%9F%A9%E5%BD%A2%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E7%BB%99%E5%85%B6%E8%BF%9B%E8%A1%8C%E9%A2%9C%E8%89%B2%E5%A1%AB%E5%85%85%E3%80%82%E6%8C%89%E7%85%A7%E5%AE%9A%E4%B9%89%EF%BC%8C%E6%8A%BD%E8%B1%A1%E5%92%8C%E5%AE%9E%E7%8E%B0%E5%BF%85%E9%A1%BB%E5%88%86%E5%BC%80%EF%BC%8C%3C/p%3E%3Cul%3E%3Cli%3E%3Cstrong%3E%E6%8A%BD%E8%B1%A1%E7%BB%B4%E5%BA%A6%3C/strong%3E%EF%BC%9A%20%E5%9B%BE%E5%BD%A2(%E5%9C%86%E3%80%81%E7%9F%A9%E5%BD%A2%E3%80%81%E6%AD%A3%E6%96%B9%E5%BD%A2)%3C/li%3E%3Cli%3E%3Cstrong%3E%E5%AE%9E%E7%8E%B0%E7%BB%B4%E5%BA%A6%3C/strong%3E%EF%BC%9A%20%E9%A2%9C%E8%89%B2(%E7%BA%A2%E3%80%81%E7%BB%BF%E3%80%81%E8%93%9D)%3C/li%3E%3C/ul%3E%3Cimg%20src=%22/assert/puml/9b2f07da92406fbd677399c71c6721fd7eb526cf336b4cf135bf322b116c6e4b.svg%22/%3E%3Cp%3E%E5%AE%9A%E4%B9%89%E4%B8%8D%E5%90%8C%E7%9A%84%E9%A2%9C%E8%89%B2%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E18%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E19%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E21%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Einterface%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EColor%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Efill%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ERed%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EColor%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Efill%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20System.out.println(%3Cspan%20class=%22string%22%3E&amp;quot;fillin%20red&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EBlue%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EColor%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Efill%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20System.out.println(%3Cspan%20class=%22string%22%3E&amp;quot;fillin%20blue&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EGreen%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EColor%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Efill%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20System.out.println(%3Cspan%20class=%22string%22%3E&amp;quot;fillin%20green&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%AE%9A%E4%B9%89%E6%A1%A5%E6%8E%A5%E7%B1%BB%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eabstract%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EShape%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprotected%3C/span%3E%20Color%20color;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprotected%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EShape%3C/span%3E%3Cspan%20class=%22params%22%3E(Color%20color)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Ethis%3C/span%3E.color%20=%20color;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eabstract%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Edraw%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%20%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%20%E5%88%86%E7%A6%BB%E5%AE%9E%E7%8E%B0%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E18%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E19%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E21%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E22%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E23%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E24%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E25%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E26%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E27%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E28%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E29%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E30%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ECircle%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eextends%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EShape%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3ECircle%3C/span%3E%3Cspan%20class=%22params%22%3E(Color%20color)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Esuper%3C/span%3E(color);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Edraw%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20System.out.println(%3Cspan%20class=%22string%22%3E&amp;quot;Circle%20-&amp;gt;&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20color.fill();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ERectangle%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eextends%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EShape%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3ERectangle%3C/span%3E%3Cspan%20class=%22params%22%3E(Color%20color)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Esuper%3C/span%3E(color);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Edraw%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20System.out.println(%3Cspan%20class=%22string%22%3E&amp;quot;Rectangle%20-&amp;gt;&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20color.fill();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESquare%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eextends%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EShape%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3ESquare%3C/span%3E%3Cspan%20class=%22params%22%3E(Color%20color)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Esuper%3C/span%3E(color);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Edraw%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20System.out.println(%3Cspan%20class=%22string%22%3E&amp;quot;Square%20-&amp;gt;&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20color.fill();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E6%8C%89%E9%9C%80%E6%89%80%E5%8F%96%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EClient%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Emain%3C/span%3E%3Cspan%20class=%22params%22%3E(String[]%20args)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22type%22%3EShape%3C/span%3E%20%3Cspan%20class=%22variable%22%3EredCircle%3C/span%3E%20%3Cspan%20class=%22operator%22%3E=%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ECircle%3C/span%3E(%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ERed%3C/span%3E());%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22type%22%3EShape%3C/span%3E%20%3Cspan%20class=%22variable%22%3EblueRectangle%3C/span%3E%20%3Cspan%20class=%22operator%22%3E=%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ERectangle%3C/span%3E(%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EBlue%3C/span%3E());%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22type%22%3EShape%3C/span%3E%20%3Cspan%20class=%22variable%22%3EgreenSquare%3C/span%3E%20%3Cspan%20class=%22operator%22%3E=%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESquare%3C/span%3E(%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EGreen%3C/span%3E());%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Ch2%20id=%22%E6%80%BB%E7%BB%93%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E6%80%BB%E7%BB%93%22%3E%C2%B6%3C/a%3E%E6%80%BB%E7%BB%93%3C/h2%3E%3Cp%3E%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%A0%B8%E5%BF%83%E7%89%B9%E5%BE%81%E6%98%AF%3Cstrong%3E%E4%B8%A4%E4%B8%AA%E7%8B%AC%E7%AB%8B%E5%8F%98%E5%8C%96%E7%9A%84%E7%BB%B4%E5%BA%A6%3C/strong%3E%3C/p%3E%3Cblockquote%3E%3Cp%3E%F0%9F%94%B5%3Cstrong%3E%E6%8A%BD%E8%B1%A1%E9%83%A8%E5%88%86(Abstraction)%3C/strong%3E%20%E5%92%8C%20%F0%9F%94%B5%3Cstrong%3E%E5%AE%9E%E7%8E%B0%E9%83%A8%E5%88%86(Implementor)%3C/strong%3E%20%E5%8F%AF%E4%BB%A5%E5%90%84%E8%87%AA%E7%8B%AC%E7%AB%8B%E6%89%A9%E5%B1%95%EF%BC%8C%E4%BA%92%E4%B8%8D%E5%B9%B2%E6%89%B0%E3%80%82%3C/p%3E%3C/blockquote%3E%3Ctable%3E%3Cthead%3E%3Ctr%3E%3Cth%3E%E7%BB%B4%E5%BA%A6%3C/th%3E%3Cth%3E%E6%8F%8F%E8%BF%B0%3C/th%3E%3C/tr%3E%3C/thead%3E%3Ctbody%3E%3Ctr%3E%3Ctd%3E%E6%8A%BD%E8%B1%A1%E9%83%A8%E5%88%86%3C/td%3E%3Ctd%3E%E5%AE%9A%E4%B9%89%E9%AB%98%E5%B1%82%E6%93%8D%E4%BD%9C%EF%BC%8C%E9%80%9A%E5%B8%B8%E6%98%AF%E4%B8%80%E4%B8%AA%E7%B1%BB%E6%88%96%E6%8E%A5%E5%8F%A3%EF%BC%8C%E5%AE%83%E5%8C%85%E5%90%AB%E5%AF%B9%E5%AE%9E%E7%8E%B0%E9%83%A8%E5%88%86%E7%9A%84%E5%BC%95%E7%94%A8%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3E%E5%AE%9E%E7%8E%B0%E9%83%A8%E5%88%86%3C/td%3E%3Ctd%3E%E5%AE%9A%E4%B9%89%E5%9C%B0%E5%B1%82%E8%A1%8C%E4%B8%BA%EF%BC%8C%E9%80%9A%E5%B8%B8%E6%98%AF%E6%8E%A5%E5%8F%A3%E6%88%96%E6%8A%BD%E8%B1%A1%E7%B1%BB%EF%BC%8C%E7%94%A8%E4%BA%8E%E8%A2%AB%E5%A4%9A%E4%B8%AA%E6%8A%BD%E8%B1%A1%E7%B1%BB%E7%BB%84%E5%90%88%E4%BD%BF%E7%94%A8%3C/td%3E%3C/tr%3E%3C/tbody%3E%3C/table%3E%3Cp%3E%E5%8F%A3%E8%AF%80%EF%BC%9A%3C/p%3E%3Cblockquote%3E%3Cp%3E%E2%80%9C%E4%B8%80%E4%B8%AA%E7%B1%BB%E9%87%8C%E7%94%B1%E4%B8%80%E4%B8%AA%E6%8E%A5%E5%8F%A3%E5%8F%98%E9%87%8F%EF%BC%8C%E5%B9%B6%E4%B8%94%E8%BF%99%E4%B8%AA%E6%8E%A5%E5%8F%A3%E5%86%B3%E5%AE%9A%E4%BA%86%E5%AE%83%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%E2%80%9D%3C/p%3E%3C/blockquote%3E" type="image"/>
    
    
    
    <category term="structural" scheme="https://galudisu.info/tags/structural/"/>
    
    <category term="bridge" scheme="https://galudisu.info/tags/bridge/"/>
    
  </entry>
  
  <entry>
    <title>适配器模式(Adapter Pattern)</title>
    <link href="https://galudisu.info/2025/05/10/pattern/basic/structural/Adapter/"/>
    <id>https://galudisu.info/2025/05/10/pattern/basic/structural/Adapter/</id>
    <published>2025-05-10T10:25:00.000Z</published>
    <updated>2025-05-11T16:16:24.567Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>将一个类的接口转换成客户期望的另一个接口，适配器<strong>让原本接口不兼容的类可以相互合作</strong>。</p></blockquote><img src="/assert/puml/2a6bbd20a8b38a99f1740f1e7b862f2c4b63171866066a1456c7427c71f071cb.svg"/><span id="more"></span><h3 id="核心作用"><a class="header-anchor" href="#核心作用">¶</a>核心作用</h3><ul><li><strong>兼容性</strong>： 使得原本由于接口部匹配而无法一起工作的类能够协同工作。</li><li><strong>复用性</strong>： 允许复用已有的类，即使它们不符合当前系统的统一结构标准。</li><li><strong>解耦性</strong>： 避免修改已有代码的前提下实现新功能对接。</li></ul><h3 id="适用场景"><a class="header-anchor" href="#适用场景">¶</a>适用场景</h3><ol><li>系统需要使用一些已有类，但这些类的接口不符合系统要求</li><li>希望复用一些旧的组件或第三方库，但它们的接口与当前系统不一致</li><li>在不修改原有代码的基础上进行接口适配</li></ol><h3 id="模式结构"><a class="header-anchor" href="#模式结构">¶</a>模式结构</h3><table><thead><tr><th><strong>角色</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>Target</td><td>客户端使用的接口，是期望的目标接口</td></tr><tr><td>Adaptee</td><td>已有的类，其接口与目标接口不兼容</td></tr><tr><td>Adapter</td><td>实现目标接口，并持有<code>Adaptee</code>对象，通过组合/继承的方式完成适配</td></tr></tbody></table><h3 id="示例"><a class="header-anchor" href="#示例">¶</a>示例</h3><p>最容易理解该模式的莫过于我们常用的电源适配器(adapter)，手机充电器一般都是5v左右，中国家用交流电压220v，日本100v，手机充电器代工方富士康需要生产一个适配器(降压器)来对手机进行充电，不然会过热起火。</p><table><thead><tr><th><strong>角色</strong></th><th><strong>实例</strong></th><th><strong>作用</strong></th></tr></thead><tbody><tr><td>Target</td><td>一部手机Mobile</td><td>给手机充电</td></tr><tr><td>Adaptee</td><td>220v的交流电</td><td>用交流电给手机充电，但电压不兼容</td></tr><tr><td>Adapter</td><td>手机充电器</td><td>富士康需要制作可提供5电压的充电器</td></tr><tr><td>ConcreteAdapter1</td><td>220v -&gt; 5v充电器</td><td>大陆用充电器</td></tr><tr><td>ConcreteAdapter2</td><td>100v -&gt; 5v充电器</td><td>日本美国标准用充电器</td></tr><tr><td>ConcreteAdapter3</td><td>230v -&gt; 5v充电器</td><td>欧洲标准用充电器</td></tr></tbody></table><p>示例代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PowerTarget</span> &#123;  <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">charge</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChinaAdaptee</span> &#123; <span class="comment">// <i class="conum" data-value="2"></i></span></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">v220Charge</span><span class="params">(PowerTarget target)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EuropeAdaptee</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">v230Charge</span><span class="params">(PowerTarget target)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JapanAdaptee</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">v100Charge</span><span class="params">(PowerTarget target)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MobileAdapter</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">powerOn</span><span class="params">(PowerTarget target)</span>; <span class="comment">// <i class="conum" data-value="3"></i></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChinaMobileAdapter</span> <span class="keyword">implements</span> <span class="title class_">MobileAdapter</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> ChinaAdaptee adaptee;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">ChinaMobileAdapter</span><span class="params">(ChinaAdaptee adaptee)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.adaptee = adaptee;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">powerOn</span><span class="params">(PowerTarget target)</span> &#123;</span><br><span class="line">    adaptee.v220Charget(target);  <span class="comment">// <i class="conum" data-value="4"></i></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EuropeMobileAdapter</span> <span class="keyword">implements</span> <span class="title class_">MobileAdapter</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> EuropeAdaptee adaptee;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">EuropeMobileAdapter</span><span class="params">(EuropeAdaptee adaptee)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.adaptee = adaptee;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">powerOn</span><span class="params">(PowerTarget target)</span> &#123;</span><br><span class="line">    adaptee.v230Charget(target);  <span class="comment">// <i class="conum" data-value="5"></i></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JapanMobileAdapter</span> <span class="keyword">implements</span> <span class="title class_">MobileAdapter</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> JapanAdaptee adaptee;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">JapanMobileAdapter</span><span class="params">(JapanAdaptee adaptee)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.adaptee = adaptee;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">powerOn</span><span class="params">(PowerTarget target)</span> &#123;</span><br><span class="line">    adaptee.v100Charget(target);  <span class="comment">// <i class="conum" data-value="5"></i></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><i class="conum" data-value="1"></i> 目标接口，这里为给手机充电<br><i class="conum" data-value="2"></i> 被适配器<br><i class="conum" data-value="3"></i> 适配器<br><i class="conum" data-value="4"></i> 用220v的交流电，给目标手机充电<br><i class="conum" data-value="5"></i> 用230v的交流电，给目标手机充电<br><i class="conum" data-value="6"></i> 用100v的交流电，给目标手机充电</p><h3 id="适配器模式-工厂模式"><a class="header-anchor" href="#适配器模式-工厂模式">¶</a>适配器模式+工厂模式</h3><p>上面的例子中明显不符合“开闭原则”的，往往需要配合<a href="/2025/05/10/pattern/basic/creational/Factory/">工厂模式(Factory Pattern)</a>一起使用，即可以用<a href="/2025/05/10/pattern/basic/creational/Factory/#%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F-Factory-Method-Pattern">工厂方法</a>，也可以用<a href="/2025/05/10/pattern/basic/creational/Factory/#%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82-Abstract-Factory-Pattern">抽象工厂</a>。依具体情况而定：</p><p>下面是一种改进办法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PowerTarget</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">charge</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MobileAdaptee</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">charge</span><span class="params">(PowerTarget target)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChinaAdaptee</span> <span class="keyword">implements</span> <span class="title class_">MobileAdaptee</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">charge</span><span class="params">(PowerTarget target)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EuropeAdaptee</span> <span class="keyword">implements</span> <span class="title class_">MobileAdaptee</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">charge</span><span class="params">(PowerTarget target)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JapanAdaptee</span> <span class="keyword">implements</span> <span class="title class_">MobileAdaptee</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">charge</span><span class="params">(PowerTarget target)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">MobileAdapter</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> MobileAdaptee adaptee;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">MobileAdapter</span><span class="params">(MobileAdaptee adaptee)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.adaptee = adaptee;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">powerOn</span><span class="params">(PowerTarget target)</span>;    <span class="comment">// <i class="conum" data-value="1"></i> </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChinaMobileAdapter</span> <span class="keyword">extends</span> <span class="title class_">MobileAdapter</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">ChinaMobileAdapter</span><span class="params">(ChinaAdaptee adaptee)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(adaptee);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">powerOn</span><span class="params">(PowerTarget target)</span> &#123;</span><br><span class="line">    adaptee.v220Charge(target);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EuropeMobileAdapter</span> <span class="keyword">extends</span> <span class="title class_">MobileAdapter</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">EuropeMobileAdapter</span><span class="params">(EuropeAdaptee adaptee)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(adaptee);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">powerOn</span><span class="params">(PowerTarget target)</span> &#123;</span><br><span class="line">    adaptee.v230Charge(target);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JapanMobileAdapter</span> <span class="keyword">extends</span> <span class="title class_">MobileAdapter</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">JapanMobileAdapter</span><span class="params">(JapanAdaptee adaptee)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(adaptee);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">powerOn</span><span class="params">(PowerTarget target)</span> &#123;</span><br><span class="line">    adaptee.v100Charge(target);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><i class="conum" data-value="1"></i> 如果不希望扩展，可以直接使用<code>switch</code>进行模式匹配变更为<a href="/2025/05/10/pattern/basic/creational/Factory/#%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F-Simple-Factory-Pattern">简单工厂</a>.</p><h3 id="适配器模式-策略模式"><a class="header-anchor" href="#适配器模式-策略模式">¶</a>适配器模式+策略模式</h3><p><a href="/2025/05/10/pattern/basic/behavioral/Strategy/">策略模式</a>中通常会结合适配器进行动态的上下文逻辑切换。例如：</p><ul><li>不同支付渠道(微信、支付宝、Paypal)通过统一接口调用，但内部使用各自适配器。</li><li>文件导入导出： CSV、Excel、JSON使用统一格式，但地层使用不同解析库。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PaymentStrategy</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">(<span class="type">double</span> amount)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WeChatPayAdapter</span> <span class="keyword">implements</span> <span class="title class_">PamentStrategy</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> WeChatPay weChatPay;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line">    weChatPay.charge(amount);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="适配器-外观模式"><a class="header-anchor" href="#适配器-外观模式">¶</a>适配器+外观模式</h3><p>外观模式就是为一组实现提供了“一键”处理，结合适配器模式可以隐藏<code>adapter</code>自身的复杂性。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NotificationFacade</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> SmsAdapter smsAdapter;</span><br><span class="line">  <span class="keyword">private</span> EmailAdapter emailAdapter;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendNotification</span><span class="params">(String type, String message)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&quot;sms&quot;</span>.equals(type)) &#123;</span><br><span class="line">      smsAdapter.send(message);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;email&quot;</span>.equals(type)) &#123;</span><br><span class="line">      emailAdapter.send(message);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>和上面的简单工厂不同，外观模式的实现是确定的，所以不会违反“开闭原则”。</p><h3 id="适配器-模板方法"><a class="header-anchor" href="#适配器-模板方法">¶</a>适配器+模板方法</h3><p>场景：</p><p>在固定流程中嵌入适配器逻辑，完成特定步骤的适配工作。适用于独立开发流程，避免相互干扰，提高开发效率。</p><p>示例：</p><ul><li>数据处理流程中的数据源适配(数据库、文件、API)，每种数据源都需适配成统一格式。</li><li>报表生成框架中适配不同数据来源。</li></ul><h3 id="与装饰模式的区别"><a class="header-anchor" href="#与装饰模式的区别">¶</a>与装饰模式的区别</h3><p>适配器模式和装饰器模式的结构非常相似，都是通过持有已有对象的一种实现：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Owner</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> Internal internal;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Owner</span><span class="params">(Internal in)</span> &#123;</span><br><span class="line">     ....</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但其核心目标不同：</p><table><thead><tr><th>模式</th><th>目的</th></tr></thead><tbody><tr><td><code>Adapter</code></td><td>将一个类的接口转换成客户端期望的另一个兼容接口，解决<strong>接口不兼容问题</strong>。</td></tr><tr><td><code>Decorator</code></td><td>动态地给对象添加职责或功能，提供比继承更灵活的扩展方式。</td></tr></tbody></table><ul><li>区别口诀</li></ul><ul><li><code>Adapter</code>是“改头换面”，为了兼容；</li><li><code>Decorator</code>是“锦上添花”，实现增强。</li></ul>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;将一个类的接口转换成客户期望的另一个接口，适配器&lt;strong&gt;让原本接口不兼容的类可以相互合作&lt;/strong&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;img src=&quot;/assert/puml/2a6bbd20a8b38a99f1740f1e7b862f2c4b63171866066a1456c7427c71f071cb.svg&quot;/&gt;</summary>
    
    
    <content src="https://galudisu.info/%3Cblockquote%3E%3Cp%3E%E5%B0%86%E4%B8%80%E4%B8%AA%E7%B1%BB%E7%9A%84%E6%8E%A5%E5%8F%A3%E8%BD%AC%E6%8D%A2%E6%88%90%E5%AE%A2%E6%88%B7%E6%9C%9F%E6%9C%9B%E7%9A%84%E5%8F%A6%E4%B8%80%E4%B8%AA%E6%8E%A5%E5%8F%A3%EF%BC%8C%E9%80%82%E9%85%8D%E5%99%A8%3Cstrong%3E%E8%AE%A9%E5%8E%9F%E6%9C%AC%E6%8E%A5%E5%8F%A3%E4%B8%8D%E5%85%BC%E5%AE%B9%E7%9A%84%E7%B1%BB%E5%8F%AF%E4%BB%A5%E7%9B%B8%E4%BA%92%E5%90%88%E4%BD%9C%3C/strong%3E%E3%80%82%3C/p%3E%3C/blockquote%3E%3Cimg%20src=%22/assert/puml/2a6bbd20a8b38a99f1740f1e7b862f2c4b63171866066a1456c7427c71f071cb.svg%22/%3E%3Cspan%20id=%22more%22%3E%3C/span%3E%3Ch3%20id=%22%E6%A0%B8%E5%BF%83%E4%BD%9C%E7%94%A8%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E6%A0%B8%E5%BF%83%E4%BD%9C%E7%94%A8%22%3E%C2%B6%3C/a%3E%E6%A0%B8%E5%BF%83%E4%BD%9C%E7%94%A8%3C/h3%3E%3Cul%3E%3Cli%3E%3Cstrong%3E%E5%85%BC%E5%AE%B9%E6%80%A7%3C/strong%3E%EF%BC%9A%20%E4%BD%BF%E5%BE%97%E5%8E%9F%E6%9C%AC%E7%94%B1%E4%BA%8E%E6%8E%A5%E5%8F%A3%E9%83%A8%E5%8C%B9%E9%85%8D%E8%80%8C%E6%97%A0%E6%B3%95%E4%B8%80%E8%B5%B7%E5%B7%A5%E4%BD%9C%E7%9A%84%E7%B1%BB%E8%83%BD%E5%A4%9F%E5%8D%8F%E5%90%8C%E5%B7%A5%E4%BD%9C%E3%80%82%3C/li%3E%3Cli%3E%3Cstrong%3E%E5%A4%8D%E7%94%A8%E6%80%A7%3C/strong%3E%EF%BC%9A%20%E5%85%81%E8%AE%B8%E5%A4%8D%E7%94%A8%E5%B7%B2%E6%9C%89%E7%9A%84%E7%B1%BB%EF%BC%8C%E5%8D%B3%E4%BD%BF%E5%AE%83%E4%BB%AC%E4%B8%8D%E7%AC%A6%E5%90%88%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%BB%9F%E4%B8%80%E7%BB%93%E6%9E%84%E6%A0%87%E5%87%86%E3%80%82%3C/li%3E%3Cli%3E%3Cstrong%3E%E8%A7%A3%E8%80%A6%E6%80%A7%3C/strong%3E%EF%BC%9A%20%E9%81%BF%E5%85%8D%E4%BF%AE%E6%94%B9%E5%B7%B2%E6%9C%89%E4%BB%A3%E7%A0%81%E7%9A%84%E5%89%8D%E6%8F%90%E4%B8%8B%E5%AE%9E%E7%8E%B0%E6%96%B0%E5%8A%9F%E8%83%BD%E5%AF%B9%E6%8E%A5%E3%80%82%3C/li%3E%3C/ul%3E%3Ch3%20id=%22%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF%22%3E%C2%B6%3C/a%3E%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF%3C/h3%3E%3Col%3E%3Cli%3E%E7%B3%BB%E7%BB%9F%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8%E4%B8%80%E4%BA%9B%E5%B7%B2%E6%9C%89%E7%B1%BB%EF%BC%8C%E4%BD%86%E8%BF%99%E4%BA%9B%E7%B1%BB%E7%9A%84%E6%8E%A5%E5%8F%A3%E4%B8%8D%E7%AC%A6%E5%90%88%E7%B3%BB%E7%BB%9F%E8%A6%81%E6%B1%82%3C/li%3E%3Cli%3E%E5%B8%8C%E6%9C%9B%E5%A4%8D%E7%94%A8%E4%B8%80%E4%BA%9B%E6%97%A7%E7%9A%84%E7%BB%84%E4%BB%B6%E6%88%96%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%EF%BC%8C%E4%BD%86%E5%AE%83%E4%BB%AC%E7%9A%84%E6%8E%A5%E5%8F%A3%E4%B8%8E%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F%E4%B8%8D%E4%B8%80%E8%87%B4%3C/li%3E%3Cli%3E%E5%9C%A8%E4%B8%8D%E4%BF%AE%E6%94%B9%E5%8E%9F%E6%9C%89%E4%BB%A3%E7%A0%81%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E8%BF%9B%E8%A1%8C%E6%8E%A5%E5%8F%A3%E9%80%82%E9%85%8D%3C/li%3E%3C/ol%3E%3Ch3%20id=%22%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84%22%3E%C2%B6%3C/a%3E%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84%3C/h3%3E%3Ctable%3E%3Cthead%3E%3Ctr%3E%3Cth%3E%3Cstrong%3E%E8%A7%92%E8%89%B2%3C/strong%3E%3C/th%3E%3Cth%3E%3Cstrong%3E%E6%8F%8F%E8%BF%B0%3C/strong%3E%3C/th%3E%3C/tr%3E%3C/thead%3E%3Ctbody%3E%3Ctr%3E%3Ctd%3ETarget%3C/td%3E%3Ctd%3E%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BD%BF%E7%94%A8%E7%9A%84%E6%8E%A5%E5%8F%A3%EF%BC%8C%E6%98%AF%E6%9C%9F%E6%9C%9B%E7%9A%84%E7%9B%AE%E6%A0%87%E6%8E%A5%E5%8F%A3%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3EAdaptee%3C/td%3E%3Ctd%3E%E5%B7%B2%E6%9C%89%E7%9A%84%E7%B1%BB%EF%BC%8C%E5%85%B6%E6%8E%A5%E5%8F%A3%E4%B8%8E%E7%9B%AE%E6%A0%87%E6%8E%A5%E5%8F%A3%E4%B8%8D%E5%85%BC%E5%AE%B9%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3EAdapter%3C/td%3E%3Ctd%3E%E5%AE%9E%E7%8E%B0%E7%9B%AE%E6%A0%87%E6%8E%A5%E5%8F%A3%EF%BC%8C%E5%B9%B6%E6%8C%81%E6%9C%89%3Ccode%3EAdaptee%3C/code%3E%E5%AF%B9%E8%B1%A1%EF%BC%8C%E9%80%9A%E8%BF%87%E7%BB%84%E5%90%88/%E7%BB%A7%E6%89%BF%E7%9A%84%E6%96%B9%E5%BC%8F%E5%AE%8C%E6%88%90%E9%80%82%E9%85%8D%3C/td%3E%3C/tr%3E%3C/tbody%3E%3C/table%3E%3Ch3%20id=%22%E7%A4%BA%E4%BE%8B%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E7%A4%BA%E4%BE%8B%22%3E%C2%B6%3C/a%3E%E7%A4%BA%E4%BE%8B%3C/h3%3E%3Cp%3E%E6%9C%80%E5%AE%B9%E6%98%93%E7%90%86%E8%A7%A3%E8%AF%A5%E6%A8%A1%E5%BC%8F%E7%9A%84%E8%8E%AB%E8%BF%87%E4%BA%8E%E6%88%91%E4%BB%AC%E5%B8%B8%E7%94%A8%E7%9A%84%E7%94%B5%E6%BA%90%E9%80%82%E9%85%8D%E5%99%A8(adapter)%EF%BC%8C%E6%89%8B%E6%9C%BA%E5%85%85%E7%94%B5%E5%99%A8%E4%B8%80%E8%88%AC%E9%83%BD%E6%98%AF5v%E5%B7%A6%E5%8F%B3%EF%BC%8C%E4%B8%AD%E5%9B%BD%E5%AE%B6%E7%94%A8%E4%BA%A4%E6%B5%81%E7%94%B5%E5%8E%8B220v%EF%BC%8C%E6%97%A5%E6%9C%AC100v%EF%BC%8C%E6%89%8B%E6%9C%BA%E5%85%85%E7%94%B5%E5%99%A8%E4%BB%A3%E5%B7%A5%E6%96%B9%E5%AF%8C%E5%A3%AB%E5%BA%B7%E9%9C%80%E8%A6%81%E7%94%9F%E4%BA%A7%E4%B8%80%E4%B8%AA%E9%80%82%E9%85%8D%E5%99%A8(%E9%99%8D%E5%8E%8B%E5%99%A8)%E6%9D%A5%E5%AF%B9%E6%89%8B%E6%9C%BA%E8%BF%9B%E8%A1%8C%E5%85%85%E7%94%B5%EF%BC%8C%E4%B8%8D%E7%84%B6%E4%BC%9A%E8%BF%87%E7%83%AD%E8%B5%B7%E7%81%AB%E3%80%82%3C/p%3E%3Ctable%3E%3Cthead%3E%3Ctr%3E%3Cth%3E%3Cstrong%3E%E8%A7%92%E8%89%B2%3C/strong%3E%3C/th%3E%3Cth%3E%3Cstrong%3E%E5%AE%9E%E4%BE%8B%3C/strong%3E%3C/th%3E%3Cth%3E%3Cstrong%3E%E4%BD%9C%E7%94%A8%3C/strong%3E%3C/th%3E%3C/tr%3E%3C/thead%3E%3Ctbody%3E%3Ctr%3E%3Ctd%3ETarget%3C/td%3E%3Ctd%3E%E4%B8%80%E9%83%A8%E6%89%8B%E6%9C%BAMobile%3C/td%3E%3Ctd%3E%E7%BB%99%E6%89%8B%E6%9C%BA%E5%85%85%E7%94%B5%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3EAdaptee%3C/td%3E%3Ctd%3E220v%E7%9A%84%E4%BA%A4%E6%B5%81%E7%94%B5%3C/td%3E%3Ctd%3E%E7%94%A8%E4%BA%A4%E6%B5%81%E7%94%B5%E7%BB%99%E6%89%8B%E6%9C%BA%E5%85%85%E7%94%B5%EF%BC%8C%E4%BD%86%E7%94%B5%E5%8E%8B%E4%B8%8D%E5%85%BC%E5%AE%B9%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3EAdapter%3C/td%3E%3Ctd%3E%E6%89%8B%E6%9C%BA%E5%85%85%E7%94%B5%E5%99%A8%3C/td%3E%3Ctd%3E%E5%AF%8C%E5%A3%AB%E5%BA%B7%E9%9C%80%E8%A6%81%E5%88%B6%E4%BD%9C%E5%8F%AF%E6%8F%90%E4%BE%9B5%E7%94%B5%E5%8E%8B%E7%9A%84%E5%85%85%E7%94%B5%E5%99%A8%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3EConcreteAdapter1%3C/td%3E%3Ctd%3E220v%20-&amp;gt;%205v%E5%85%85%E7%94%B5%E5%99%A8%3C/td%3E%3Ctd%3E%E5%A4%A7%E9%99%86%E7%94%A8%E5%85%85%E7%94%B5%E5%99%A8%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3EConcreteAdapter2%3C/td%3E%3Ctd%3E100v%20-&amp;gt;%205v%E5%85%85%E7%94%B5%E5%99%A8%3C/td%3E%3Ctd%3E%E6%97%A5%E6%9C%AC%E7%BE%8E%E5%9B%BD%E6%A0%87%E5%87%86%E7%94%A8%E5%85%85%E7%94%B5%E5%99%A8%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3EConcreteAdapter3%3C/td%3E%3Ctd%3E230v%20-&amp;gt;%205v%E5%85%85%E7%94%B5%E5%99%A8%3C/td%3E%3Ctd%3E%E6%AC%A7%E6%B4%B2%E6%A0%87%E5%87%86%E7%94%A8%E5%85%85%E7%94%B5%E5%99%A8%3C/td%3E%3C/tr%3E%3C/tbody%3E%3C/table%3E%3Cp%3E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%E5%A6%82%E4%B8%8B%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E18%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E19%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E21%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E22%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E23%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E24%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E25%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E26%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E27%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E28%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E29%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E30%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E31%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E32%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E33%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E34%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E35%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E36%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E37%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E38%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E39%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E40%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E41%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E42%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E43%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E44%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E45%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E46%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E47%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E48%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E49%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E50%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E51%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E52%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E53%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E54%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E55%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E56%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E57%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E58%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Einterface%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EPowerTarget%3C/span%3E%20&amp;#123;%20%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Echarge%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EChinaAdaptee%3C/span%3E%20&amp;#123;%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%222%22%3E%3C/i%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ev220Charge%3C/span%3E%3Cspan%20class=%22params%22%3E(PowerTarget%20target)%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EEuropeAdaptee%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ev230Charge%3C/span%3E%3Cspan%20class=%22params%22%3E(PowerTarget%20target)%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EJapanAdaptee%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ev100Charge%3C/span%3E%3Cspan%20class=%22params%22%3E(PowerTarget%20target)%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Einterface%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EMobileAdapter%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EpowerOn%3C/span%3E%3Cspan%20class=%22params%22%3E(PowerTarget%20target)%3C/span%3E;%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%223%22%3E%3C/i%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EChinaMobileAdapter%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EMobileAdapter%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20ChinaAdaptee%20adaptee;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EChinaMobileAdapter%3C/span%3E%3Cspan%20class=%22params%22%3E(ChinaAdaptee%20adaptee)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Ethis%3C/span%3E.adaptee%20=%20adaptee;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EpowerOn%3C/span%3E%3Cspan%20class=%22params%22%3E(PowerTarget%20target)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20adaptee.v220Charget(target);%20%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%224%22%3E%3C/i%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EEuropeMobileAdapter%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EMobileAdapter%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20EuropeAdaptee%20adaptee;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EEuropeMobileAdapter%3C/span%3E%3Cspan%20class=%22params%22%3E(EuropeAdaptee%20adaptee)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Ethis%3C/span%3E.adaptee%20=%20adaptee;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EpowerOn%3C/span%3E%3Cspan%20class=%22params%22%3E(PowerTarget%20target)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20adaptee.v230Charget(target);%20%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%225%22%3E%3C/i%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EJapanMobileAdapter%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EMobileAdapter%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20JapanAdaptee%20adaptee;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EJapanMobileAdapter%3C/span%3E%3Cspan%20class=%22params%22%3E(JapanAdaptee%20adaptee)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Ethis%3C/span%3E.adaptee%20=%20adaptee;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EpowerOn%3C/span%3E%3Cspan%20class=%22params%22%3E(PowerTarget%20target)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20adaptee.v100Charget(target);%20%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%225%22%3E%3C/i%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%20%E7%9B%AE%E6%A0%87%E6%8E%A5%E5%8F%A3%EF%BC%8C%E8%BF%99%E9%87%8C%E4%B8%BA%E7%BB%99%E6%89%8B%E6%9C%BA%E5%85%85%E7%94%B5%3Cbr%3E%3Ci%20class=%22conum%22%20data-value=%222%22%3E%3C/i%3E%20%E8%A2%AB%E9%80%82%E9%85%8D%E5%99%A8%3Cbr%3E%3Ci%20class=%22conum%22%20data-value=%223%22%3E%3C/i%3E%20%E9%80%82%E9%85%8D%E5%99%A8%3Cbr%3E%3Ci%20class=%22conum%22%20data-value=%224%22%3E%3C/i%3E%20%E7%94%A8220v%E7%9A%84%E4%BA%A4%E6%B5%81%E7%94%B5%EF%BC%8C%E7%BB%99%E7%9B%AE%E6%A0%87%E6%89%8B%E6%9C%BA%E5%85%85%E7%94%B5%3Cbr%3E%3Ci%20class=%22conum%22%20data-value=%225%22%3E%3C/i%3E%20%E7%94%A8230v%E7%9A%84%E4%BA%A4%E6%B5%81%E7%94%B5%EF%BC%8C%E7%BB%99%E7%9B%AE%E6%A0%87%E6%89%8B%E6%9C%BA%E5%85%85%E7%94%B5%3Cbr%3E%3Ci%20class=%22conum%22%20data-value=%226%22%3E%3C/i%3E%20%E7%94%A8100v%E7%9A%84%E4%BA%A4%E6%B5%81%E7%94%B5%EF%BC%8C%E7%BB%99%E7%9B%AE%E6%A0%87%E6%89%8B%E6%9C%BA%E5%85%85%E7%94%B5%3C/p%3E%3Ch3%20id=%22%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%22%3E%C2%B6%3C/a%3E%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F+%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%3C/h3%3E%3Cp%3E%E4%B8%8A%E9%9D%A2%E7%9A%84%E4%BE%8B%E5%AD%90%E4%B8%AD%E6%98%8E%E6%98%BE%E4%B8%8D%E7%AC%A6%E5%90%88%E2%80%9C%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99%E2%80%9D%E7%9A%84%EF%BC%8C%E5%BE%80%E5%BE%80%E9%9C%80%E8%A6%81%E9%85%8D%E5%90%88%3Ca%20href=%22/2025/05/10/pattern/basic/creational/Factory/%22%3E%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F(Factory%20Pattern)%3C/a%3E%E4%B8%80%E8%B5%B7%E4%BD%BF%E7%94%A8%EF%BC%8C%E5%8D%B3%E5%8F%AF%E4%BB%A5%E7%94%A8%3Ca%20href=%22/2025/05/10/pattern/basic/creational/Factory/#%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F-Factory-Method-Pattern%22%3E%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%3C/a%3E%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E7%94%A8%3Ca%20href=%22/2025/05/10/pattern/basic/creational/Factory/#%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82-Abstract-Factory-Pattern%22%3E%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%3C/a%3E%E3%80%82%E4%BE%9D%E5%85%B7%E4%BD%93%E6%83%85%E5%86%B5%E8%80%8C%E5%AE%9A%EF%BC%9A%3C/p%3E%3Cp%3E%E4%B8%8B%E9%9D%A2%E6%98%AF%E4%B8%80%E7%A7%8D%E6%94%B9%E8%BF%9B%E5%8A%9E%E6%B3%95%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E18%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E19%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E21%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E22%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E23%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E24%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E25%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E26%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E27%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E28%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E29%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E30%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E31%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E32%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E33%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E34%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E35%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E36%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E37%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E38%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E39%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E40%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E41%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E42%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E43%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E44%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E45%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E46%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E47%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E48%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E49%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E50%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E51%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E52%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E53%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E54%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E55%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E56%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E57%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E58%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E59%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E60%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E61%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E62%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E63%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Einterface%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EPowerTarget%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Echarge%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Einterface%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EMobileAdaptee%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Echarge%3C/span%3E%3Cspan%20class=%22params%22%3E(PowerTarget%20target)%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EChinaAdaptee%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EMobileAdaptee%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Echarge%3C/span%3E%3Cspan%20class=%22params%22%3E(PowerTarget%20target)%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EEuropeAdaptee%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EMobileAdaptee%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Echarge%3C/span%3E%3Cspan%20class=%22params%22%3E(PowerTarget%20target)%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EJapanAdaptee%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EMobileAdaptee%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Echarge%3C/span%3E%3Cspan%20class=%22params%22%3E(PowerTarget%20target)%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eabstract%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EMobileAdapter%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20MobileAdaptee%20adaptee;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EMobileAdapter%3C/span%3E%3Cspan%20class=%22params%22%3E(MobileAdaptee%20adaptee)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Ethis%3C/span%3E.adaptee%20=%20adaptee;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eabstract%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EpowerOn%3C/span%3E%3Cspan%20class=%22params%22%3E(PowerTarget%20target)%3C/span%3E;%20%20%20%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%20%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EChinaMobileAdapter%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eextends%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EMobileAdapter%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EChinaMobileAdapter%3C/span%3E%3Cspan%20class=%22params%22%3E(ChinaAdaptee%20adaptee)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Esuper%3C/span%3E(adaptee);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EpowerOn%3C/span%3E%3Cspan%20class=%22params%22%3E(PowerTarget%20target)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20adaptee.v220Charge(target);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EEuropeMobileAdapter%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eextends%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EMobileAdapter%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EEuropeMobileAdapter%3C/span%3E%3Cspan%20class=%22params%22%3E(EuropeAdaptee%20adaptee)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Esuper%3C/span%3E(adaptee);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EpowerOn%3C/span%3E%3Cspan%20class=%22params%22%3E(PowerTarget%20target)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20adaptee.v230Charge(target);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EJapanMobileAdapter%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eextends%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EMobileAdapter%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EJapanMobileAdapter%3C/span%3E%3Cspan%20class=%22params%22%3E(JapanAdaptee%20adaptee)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Esuper%3C/span%3E(adaptee);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EpowerOn%3C/span%3E%3Cspan%20class=%22params%22%3E(PowerTarget%20target)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20adaptee.v100Charge(target);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%20%E5%A6%82%E6%9E%9C%E4%B8%8D%E5%B8%8C%E6%9C%9B%E6%89%A9%E5%B1%95%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8%3Ccode%3Eswitch%3C/code%3E%E8%BF%9B%E8%A1%8C%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D%E5%8F%98%E6%9B%B4%E4%B8%BA%3Ca%20href=%22/2025/05/10/pattern/basic/creational/Factory/#%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F-Simple-Factory-Pattern%22%3E%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%3C/a%3E.%3C/p%3E%3Ch3%20id=%22%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F%22%3E%C2%B6%3C/a%3E%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F+%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F%3C/h3%3E%3Cp%3E%3Ca%20href=%22/2025/05/10/pattern/basic/behavioral/Strategy/%22%3E%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F%3C/a%3E%E4%B8%AD%E9%80%9A%E5%B8%B8%E4%BC%9A%E7%BB%93%E5%90%88%E9%80%82%E9%85%8D%E5%99%A8%E8%BF%9B%E8%A1%8C%E5%8A%A8%E6%80%81%E7%9A%84%E4%B8%8A%E4%B8%8B%E6%96%87%E9%80%BB%E8%BE%91%E5%88%87%E6%8D%A2%E3%80%82%E4%BE%8B%E5%A6%82%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%E4%B8%8D%E5%90%8C%E6%94%AF%E4%BB%98%E6%B8%A0%E9%81%93(%E5%BE%AE%E4%BF%A1%E3%80%81%E6%94%AF%E4%BB%98%E5%AE%9D%E3%80%81Paypal)%E9%80%9A%E8%BF%87%E7%BB%9F%E4%B8%80%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8%EF%BC%8C%E4%BD%86%E5%86%85%E9%83%A8%E4%BD%BF%E7%94%A8%E5%90%84%E8%87%AA%E9%80%82%E9%85%8D%E5%99%A8%E3%80%82%3C/li%3E%3Cli%3E%E6%96%87%E4%BB%B6%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA%EF%BC%9A%20CSV%E3%80%81Excel%E3%80%81JSON%E4%BD%BF%E7%94%A8%E7%BB%9F%E4%B8%80%E6%A0%BC%E5%BC%8F%EF%BC%8C%E4%BD%86%E5%9C%B0%E5%B1%82%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%90%8C%E8%A7%A3%E6%9E%90%E5%BA%93%E3%80%82%3C/li%3E%3C/ul%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Einterface%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EPaymentStrategy%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Epay%3C/span%3E%3Cspan%20class=%22params%22%3E(%3Cspan%20class=%22type%22%3Edouble%3C/span%3E%20amount)%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EWeChatPayAdapter%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EPamentStrategy%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20WeChatPay%20weChatPay;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Epay%3C/span%3E%3Cspan%20class=%22params%22%3E(%3Cspan%20class=%22type%22%3Edouble%3C/span%3E%20amount)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20weChatPay.charge(amount);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Ch3%20id=%22%E9%80%82%E9%85%8D%E5%99%A8-%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E9%80%82%E9%85%8D%E5%99%A8-%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F%22%3E%C2%B6%3C/a%3E%E9%80%82%E9%85%8D%E5%99%A8+%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F%3C/h3%3E%3Cp%3E%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F%E5%B0%B1%E6%98%AF%E4%B8%BA%E4%B8%80%E7%BB%84%E5%AE%9E%E7%8E%B0%E6%8F%90%E4%BE%9B%E4%BA%86%E2%80%9C%E4%B8%80%E9%94%AE%E2%80%9D%E5%A4%84%E7%90%86%EF%BC%8C%E7%BB%93%E5%90%88%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F%E5%8F%AF%E4%BB%A5%E9%9A%90%E8%97%8F%3Ccode%3Eadapter%3C/code%3E%E8%87%AA%E8%BA%AB%E7%9A%84%E5%A4%8D%E6%9D%82%E6%80%A7%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ENotificationFacade%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20SmsAdapter%20smsAdapter;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20EmailAdapter%20emailAdapter;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EsendNotification%3C/span%3E%3Cspan%20class=%22params%22%3E(String%20type,%20String%20message)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20(%3Cspan%20class=%22string%22%3E&amp;quot;sms&amp;quot;%3C/span%3E.equals(type))%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20smsAdapter.send(message);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%20%3Cspan%20class=%22keyword%22%3Eelse%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20(%3Cspan%20class=%22string%22%3E&amp;quot;email&amp;quot;%3C/span%3E.equals(type))%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20emailAdapter.send(message);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%92%8C%E4%B8%8A%E9%9D%A2%E7%9A%84%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E4%B8%8D%E5%90%8C%EF%BC%8C%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%98%AF%E7%A1%AE%E5%AE%9A%E7%9A%84%EF%BC%8C%E6%89%80%E4%BB%A5%E4%B8%8D%E4%BC%9A%E8%BF%9D%E5%8F%8D%E2%80%9C%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99%E2%80%9D%E3%80%82%3C/p%3E%3Ch3%20id=%22%E9%80%82%E9%85%8D%E5%99%A8-%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E9%80%82%E9%85%8D%E5%99%A8-%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%22%3E%C2%B6%3C/a%3E%E9%80%82%E9%85%8D%E5%99%A8+%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%3C/h3%3E%3Cp%3E%E5%9C%BA%E6%99%AF%EF%BC%9A%3C/p%3E%3Cp%3E%E5%9C%A8%E5%9B%BA%E5%AE%9A%E6%B5%81%E7%A8%8B%E4%B8%AD%E5%B5%8C%E5%85%A5%E9%80%82%E9%85%8D%E5%99%A8%E9%80%BB%E8%BE%91%EF%BC%8C%E5%AE%8C%E6%88%90%E7%89%B9%E5%AE%9A%E6%AD%A5%E9%AA%A4%E7%9A%84%E9%80%82%E9%85%8D%E5%B7%A5%E4%BD%9C%E3%80%82%E9%80%82%E7%94%A8%E4%BA%8E%E7%8B%AC%E7%AB%8B%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B%EF%BC%8C%E9%81%BF%E5%85%8D%E7%9B%B8%E4%BA%92%E5%B9%B2%E6%89%B0%EF%BC%8C%E6%8F%90%E9%AB%98%E5%BC%80%E5%8F%91%E6%95%88%E7%8E%87%E3%80%82%3C/p%3E%3Cp%3E%E7%A4%BA%E4%BE%8B%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E6%BA%90%E9%80%82%E9%85%8D(%E6%95%B0%E6%8D%AE%E5%BA%93%E3%80%81%E6%96%87%E4%BB%B6%E3%80%81API)%EF%BC%8C%E6%AF%8F%E7%A7%8D%E6%95%B0%E6%8D%AE%E6%BA%90%E9%83%BD%E9%9C%80%E9%80%82%E9%85%8D%E6%88%90%E7%BB%9F%E4%B8%80%E6%A0%BC%E5%BC%8F%E3%80%82%3C/li%3E%3Cli%3E%E6%8A%A5%E8%A1%A8%E7%94%9F%E6%88%90%E6%A1%86%E6%9E%B6%E4%B8%AD%E9%80%82%E9%85%8D%E4%B8%8D%E5%90%8C%E6%95%B0%E6%8D%AE%E6%9D%A5%E6%BA%90%E3%80%82%3C/li%3E%3C/ul%3E%3Ch3%20id=%22%E4%B8%8E%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E4%B8%8E%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB%22%3E%C2%B6%3C/a%3E%E4%B8%8E%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB%3C/h3%3E%3Cp%3E%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F%E5%92%8C%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F%E7%9A%84%E7%BB%93%E6%9E%84%E9%9D%9E%E5%B8%B8%E7%9B%B8%E4%BC%BC%EF%BC%8C%E9%83%BD%E6%98%AF%E9%80%9A%E8%BF%87%E6%8C%81%E6%9C%89%E5%B7%B2%E6%9C%89%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%B8%80%E7%A7%8D%E5%AE%9E%E7%8E%B0%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EOwner%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Efinal%3C/span%3E%20Internal%20internal;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EOwner%3C/span%3E%3Cspan%20class=%22params%22%3E(Internal%20in)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20....%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20...%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E4%BD%86%E5%85%B6%E6%A0%B8%E5%BF%83%E7%9B%AE%E6%A0%87%E4%B8%8D%E5%90%8C%EF%BC%9A%3C/p%3E%3Ctable%3E%3Cthead%3E%3Ctr%3E%3Cth%3E%E6%A8%A1%E5%BC%8F%3C/th%3E%3Cth%3E%E7%9B%AE%E7%9A%84%3C/th%3E%3C/tr%3E%3C/thead%3E%3Ctbody%3E%3Ctr%3E%3Ctd%3E%3Ccode%3EAdapter%3C/code%3E%3C/td%3E%3Ctd%3E%E5%B0%86%E4%B8%80%E4%B8%AA%E7%B1%BB%E7%9A%84%E6%8E%A5%E5%8F%A3%E8%BD%AC%E6%8D%A2%E6%88%90%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%9C%9F%E6%9C%9B%E7%9A%84%E5%8F%A6%E4%B8%80%E4%B8%AA%E5%85%BC%E5%AE%B9%E6%8E%A5%E5%8F%A3%EF%BC%8C%E8%A7%A3%E5%86%B3%3Cstrong%3E%E6%8E%A5%E5%8F%A3%E4%B8%8D%E5%85%BC%E5%AE%B9%E9%97%AE%E9%A2%98%3C/strong%3E%E3%80%82%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3E%3Ccode%3EDecorator%3C/code%3E%3C/td%3E%3Ctd%3E%E5%8A%A8%E6%80%81%E5%9C%B0%E7%BB%99%E5%AF%B9%E8%B1%A1%E6%B7%BB%E5%8A%A0%E8%81%8C%E8%B4%A3%E6%88%96%E5%8A%9F%E8%83%BD%EF%BC%8C%E6%8F%90%E4%BE%9B%E6%AF%94%E7%BB%A7%E6%89%BF%E6%9B%B4%E7%81%B5%E6%B4%BB%E7%9A%84%E6%89%A9%E5%B1%95%E6%96%B9%E5%BC%8F%E3%80%82%3C/td%3E%3C/tr%3E%3C/tbody%3E%3C/table%3E%3Cul%3E%3Cli%3E%E5%8C%BA%E5%88%AB%E5%8F%A3%E8%AF%80%3C/li%3E%3C/ul%3E%3Cul%3E%3Cli%3E%3Ccode%3EAdapter%3C/code%3E%E6%98%AF%E2%80%9C%E6%94%B9%E5%A4%B4%E6%8D%A2%E9%9D%A2%E2%80%9D%EF%BC%8C%E4%B8%BA%E4%BA%86%E5%85%BC%E5%AE%B9%EF%BC%9B%3C/li%3E%3Cli%3E%3Ccode%3EDecorator%3C/code%3E%E6%98%AF%E2%80%9C%E9%94%A6%E4%B8%8A%E6%B7%BB%E8%8A%B1%E2%80%9D%EF%BC%8C%E5%AE%9E%E7%8E%B0%E5%A2%9E%E5%BC%BA%E3%80%82%3C/li%3E%3C/ul%3E" type="image"/>
    
    
    
    <category term="structural" scheme="https://galudisu.info/tags/structural/"/>
    
    <category term="adapter" scheme="https://galudisu.info/tags/adapter/"/>
    
  </entry>
  
  <entry>
    <title>原型模式(Prototype Pattern)</title>
    <link href="https://galudisu.info/2025/05/10/pattern/basic/creational/Prototype/"/>
    <id>https://galudisu.info/2025/05/10/pattern/basic/creational/Prototype/</id>
    <published>2025-05-10T09:25:04.000Z</published>
    <updated>2025-05-11T16:16:24.584Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>原型模式是用于创建重复的对象，同时又能保证性能。这种类型的设计模式属于创建模式，它通过复制现在对象来创建新对象，而不是通过实例化类的方式。</p></blockquote><img src="/assert/puml/56e0fda471b4c19d729f8e314c854ce221edf16b30c3f2e801c18a72a04e4175.svg"/><span id="more"></span><h3 id="核心思想"><a class="header-anchor" href="#核心思想">¶</a>核心思想</h3><ul><li><strong>克隆一个已有对象</strong>，而不是从头创建。</li><li>被克隆的对象称为“原型(Prototype)”。</li></ul><h3 id="示例"><a class="header-anchor" href="#示例">¶</a>示例</h3><p>在Java中，可以通过实现<code>Cloneable</code>接口并重写<code>Object</code>类中的<code>clone()</code>方法来实现原型模式。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Prototype</span> <span class="keyword">implements</span> <span class="title class_">Cloneable</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> String field;  <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Prototype</span><span class="params">(String field)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.field = field;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> Prototype <span class="title function_">clone</span><span class="params">()</span> &#123;  <span class="comment">// <i class="conum" data-value="2"></i></span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> (Prototype) <span class="built_in">super</span>.close();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (CloneNotSupportedException e) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e):</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><i class="conum" data-value="1"></i> 将被拷贝的属性。<br><i class="conum" data-value="2"></i> “饼印”。</p><p>优点：</p><ol><li><strong>提升性能</strong>： 避免了构造函数的开销，直接拷贝内存中的二进制流。</li><li><strong>简化对象创建</strong>： 无需关心对象的具体类型，只需要调用克隆方法即可。</li><li><strong>动态配置</strong>： 运行时可以动态加载和复制对象。</li></ol><p>适用场景：</p><ol><li>对象的创建过程复杂或耗时。</li><li>需要多个相似对象，并且它们之间差异较小。</li><li>系统需要独立于对象的创建与组合方式。</li></ol><h3 id="浅拷贝与深拷贝"><a class="header-anchor" href="#浅拷贝与深拷贝">¶</a>浅拷贝与深拷贝</h3><ul><li><strong>浅拷贝</strong>： 只复制基本数据类型，引用类型仅复制引用地址。</li><li><strong>深拷贝</strong>： 递归复制所有层级的对象。</li></ul><p>实现深拷贝的方法有两种</p><ol><li><p>手动复制每个字段</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> Prototype <span class="title function_">clone</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Prototype</span>(<span class="built_in">this</span>.field); <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><i class="conum" data-value="1"></i> 创建对象，而非调用<code>super.clone();</code></p></li><li><p>序列化反序列化(适用于可序列化的对象)</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> &lt;T <span class="keyword">extends</span> <span class="title class_">Serializable</span>&gt; T <span class="title function_">deepCopy</span><span class="params">(T object)</span> &#123;</span><br><span class="line"> <span class="keyword">try</span> (<span class="type">ByteArrayOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>(); <span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(bos)) &#123;</span><br><span class="line">   oos.writeObject(object);</span><br><span class="line">   <span class="keyword">try</span> (<span class="type">ByteArrayInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayInputStream</span>(bos.toByteArray()); <span class="type">ObjectInputStream</span> <span class="variable">ois</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(bis)) &#123;</span><br><span class="line">     <span class="keyword">return</span> (T) ois.readObjet();</span><br><span class="line">   &#125;</span><br><span class="line"> &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">   <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><h2 id="总结"><a class="header-anchor" href="#总结">¶</a>总结</h2><table><thead><tr><th><strong>特性</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>模式类型</td><td>创建模式</td></tr><tr><td>核心机制</td><td>克隆已存在对象</td></tr><tr><td>主要优点</td><td>提高性能、简化创建流程</td></tr><tr><td>关键接口/类</td><td><code>Cloneable,Object.clone()</code></td></tr><tr><td>适用场景</td><td>对象创建复杂、需要多个相似对象</td></tr></tbody></table>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;原型模式是用于创建重复的对象，同时又能保证性能。这种类型的设计模式属于创建模式，它通过复制现在对象来创建新对象，而不是通过实例化类的方式。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;img src=&quot;/assert/puml/56e0fda471b4c19d729f8e314c854ce221edf16b30c3f2e801c18a72a04e4175.svg&quot;/&gt;</summary>
    
    
    <content src="https://galudisu.info/%3Cblockquote%3E%3Cp%3E%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F%E6%98%AF%E7%94%A8%E4%BA%8E%E5%88%9B%E5%BB%BA%E9%87%8D%E5%A4%8D%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%90%8C%E6%97%B6%E5%8F%88%E8%83%BD%E4%BF%9D%E8%AF%81%E6%80%A7%E8%83%BD%E3%80%82%E8%BF%99%E7%A7%8D%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%B1%9E%E4%BA%8E%E5%88%9B%E5%BB%BA%E6%A8%A1%E5%BC%8F%EF%BC%8C%E5%AE%83%E9%80%9A%E8%BF%87%E5%A4%8D%E5%88%B6%E7%8E%B0%E5%9C%A8%E5%AF%B9%E8%B1%A1%E6%9D%A5%E5%88%9B%E5%BB%BA%E6%96%B0%E5%AF%B9%E8%B1%A1%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AF%E9%80%9A%E8%BF%87%E5%AE%9E%E4%BE%8B%E5%8C%96%E7%B1%BB%E7%9A%84%E6%96%B9%E5%BC%8F%E3%80%82%3C/p%3E%3C/blockquote%3E%3Cimg%20src=%22/assert/puml/56e0fda471b4c19d729f8e314c854ce221edf16b30c3f2e801c18a72a04e4175.svg%22/%3E%3Cspan%20id=%22more%22%3E%3C/span%3E%3Ch3%20id=%22%E6%A0%B8%E5%BF%83%E6%80%9D%E6%83%B3%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E6%A0%B8%E5%BF%83%E6%80%9D%E6%83%B3%22%3E%C2%B6%3C/a%3E%E6%A0%B8%E5%BF%83%E6%80%9D%E6%83%B3%3C/h3%3E%3Cul%3E%3Cli%3E%3Cstrong%3E%E5%85%8B%E9%9A%86%E4%B8%80%E4%B8%AA%E5%B7%B2%E6%9C%89%E5%AF%B9%E8%B1%A1%3C/strong%3E%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AF%E4%BB%8E%E5%A4%B4%E5%88%9B%E5%BB%BA%E3%80%82%3C/li%3E%3Cli%3E%E8%A2%AB%E5%85%8B%E9%9A%86%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%A7%B0%E4%B8%BA%E2%80%9C%E5%8E%9F%E5%9E%8B(Prototype)%E2%80%9D%E3%80%82%3C/li%3E%3C/ul%3E%3Ch3%20id=%22%E7%A4%BA%E4%BE%8B%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E7%A4%BA%E4%BE%8B%22%3E%C2%B6%3C/a%3E%E7%A4%BA%E4%BE%8B%3C/h3%3E%3Cp%3E%E5%9C%A8Java%E4%B8%AD%EF%BC%8C%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E5%AE%9E%E7%8E%B0%3Ccode%3ECloneable%3C/code%3E%E6%8E%A5%E5%8F%A3%E5%B9%B6%E9%87%8D%E5%86%99%3Ccode%3EObject%3C/code%3E%E7%B1%BB%E4%B8%AD%E7%9A%84%3Ccode%3Eclone()%3C/code%3E%E6%96%B9%E6%B3%95%E6%9D%A5%E5%AE%9E%E7%8E%B0%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EPrototype%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ECloneable%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20String%20field;%20%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EPrototype%3C/span%3E%3Cspan%20class=%22params%22%3E(String%20field)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Ethis%3C/span%3E.field%20=%20field;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprotected%3C/span%3E%20Prototype%20%3Cspan%20class=%22title%20function_%22%3Eclone%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%20%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%222%22%3E%3C/i%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Etry%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20(Prototype)%20%3Cspan%20class=%22built_in%22%3Esuper%3C/span%3E.close();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%20%3Cspan%20class=%22keyword%22%3Ecatch%3C/span%3E%20(CloneNotSupportedException%20e)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%3Cspan%20class=%22keyword%22%3Ethrow%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ERuntimeException%3C/span%3E(e):%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%20%E5%B0%86%E8%A2%AB%E6%8B%B7%E8%B4%9D%E7%9A%84%E5%B1%9E%E6%80%A7%E3%80%82%3Cbr%3E%3Ci%20class=%22conum%22%20data-value=%222%22%3E%3C/i%3E%20%E2%80%9C%E9%A5%BC%E5%8D%B0%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E4%BC%98%E7%82%B9%EF%BC%9A%3C/p%3E%3Col%3E%3Cli%3E%3Cstrong%3E%E6%8F%90%E5%8D%87%E6%80%A7%E8%83%BD%3C/strong%3E%EF%BC%9A%20%E9%81%BF%E5%85%8D%E4%BA%86%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%9A%84%E5%BC%80%E9%94%80%EF%BC%8C%E7%9B%B4%E6%8E%A5%E6%8B%B7%E8%B4%9D%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%B5%81%E3%80%82%3C/li%3E%3Cli%3E%3Cstrong%3E%E7%AE%80%E5%8C%96%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%3C/strong%3E%EF%BC%9A%20%E6%97%A0%E9%9C%80%E5%85%B3%E5%BF%83%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%85%B7%E4%BD%93%E7%B1%BB%E5%9E%8B%EF%BC%8C%E5%8F%AA%E9%9C%80%E8%A6%81%E8%B0%83%E7%94%A8%E5%85%8B%E9%9A%86%E6%96%B9%E6%B3%95%E5%8D%B3%E5%8F%AF%E3%80%82%3C/li%3E%3Cli%3E%3Cstrong%3E%E5%8A%A8%E6%80%81%E9%85%8D%E7%BD%AE%3C/strong%3E%EF%BC%9A%20%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8F%AF%E4%BB%A5%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD%E5%92%8C%E5%A4%8D%E5%88%B6%E5%AF%B9%E8%B1%A1%E3%80%82%3C/li%3E%3C/ol%3E%3Cp%3E%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9A%3C/p%3E%3Col%3E%3Cli%3E%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA%E8%BF%87%E7%A8%8B%E5%A4%8D%E6%9D%82%E6%88%96%E8%80%97%E6%97%B6%E3%80%82%3C/li%3E%3Cli%3E%E9%9C%80%E8%A6%81%E5%A4%9A%E4%B8%AA%E7%9B%B8%E4%BC%BC%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%B9%B6%E4%B8%94%E5%AE%83%E4%BB%AC%E4%B9%8B%E9%97%B4%E5%B7%AE%E5%BC%82%E8%BE%83%E5%B0%8F%E3%80%82%3C/li%3E%3Cli%3E%E7%B3%BB%E7%BB%9F%E9%9C%80%E8%A6%81%E7%8B%AC%E7%AB%8B%E4%BA%8E%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8E%E7%BB%84%E5%90%88%E6%96%B9%E5%BC%8F%E3%80%82%3C/li%3E%3C/ol%3E%3Ch3%20id=%22%E6%B5%85%E6%8B%B7%E8%B4%9D%E4%B8%8E%E6%B7%B1%E6%8B%B7%E8%B4%9D%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E6%B5%85%E6%8B%B7%E8%B4%9D%E4%B8%8E%E6%B7%B1%E6%8B%B7%E8%B4%9D%22%3E%C2%B6%3C/a%3E%E6%B5%85%E6%8B%B7%E8%B4%9D%E4%B8%8E%E6%B7%B1%E6%8B%B7%E8%B4%9D%3C/h3%3E%3Cul%3E%3Cli%3E%3Cstrong%3E%E6%B5%85%E6%8B%B7%E8%B4%9D%3C/strong%3E%EF%BC%9A%20%E5%8F%AA%E5%A4%8D%E5%88%B6%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%8C%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E4%BB%85%E5%A4%8D%E5%88%B6%E5%BC%95%E7%94%A8%E5%9C%B0%E5%9D%80%E3%80%82%3C/li%3E%3Cli%3E%3Cstrong%3E%E6%B7%B1%E6%8B%B7%E8%B4%9D%3C/strong%3E%EF%BC%9A%20%E9%80%92%E5%BD%92%E5%A4%8D%E5%88%B6%E6%89%80%E6%9C%89%E5%B1%82%E7%BA%A7%E7%9A%84%E5%AF%B9%E8%B1%A1%E3%80%82%3C/li%3E%3C/ul%3E%3Cp%3E%E5%AE%9E%E7%8E%B0%E6%B7%B1%E6%8B%B7%E8%B4%9D%E7%9A%84%E6%96%B9%E6%B3%95%E6%9C%89%E4%B8%A4%E7%A7%8D%3C/p%3E%3Col%3E%3Cli%3E%3Cp%3E%E6%89%8B%E5%8A%A8%E5%A4%8D%E5%88%B6%E6%AF%8F%E4%B8%AA%E5%AD%97%E6%AE%B5%3C/p%3E%20%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22meta%22%3E@Override%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eprotected%3C/span%3E%20Prototype%20%3Cspan%20class=%22title%20function_%22%3Eclone%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EPrototype%3C/span%3E(%3Cspan%20class=%22built_in%22%3Ethis%3C/span%3E.field);%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%EF%BC%8C%E8%80%8C%E9%9D%9E%E8%B0%83%E7%94%A8%3Ccode%3Esuper.clone();%3C/code%3E%3C/p%3E%3C/li%3E%3Cli%3E%3Cp%3E%E5%BA%8F%E5%88%97%E5%8C%96%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96(%E9%80%82%E7%94%A8%E4%BA%8E%E5%8F%AF%E5%BA%8F%E5%88%97%E5%8C%96%E7%9A%84%E5%AF%B9%E8%B1%A1)%3C/p%3E%20%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20&amp;lt;T%20%3Cspan%20class=%22keyword%22%3Eextends%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESerializable%3C/span%3E&amp;gt;%20T%20%3Cspan%20class=%22title%20function_%22%3EdeepCopy%3C/span%3E%3Cspan%20class=%22params%22%3E(T%20object)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%3Cspan%20class=%22keyword%22%3Etry%3C/span%3E%20(%3Cspan%20class=%22type%22%3EByteArrayOutputStream%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ebos%3C/span%3E%20%3Cspan%20class=%22operator%22%3E=%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EByteArrayOutputStream%3C/span%3E();%20%3Cspan%20class=%22type%22%3EObjectOutputStream%3C/span%3E%20%3Cspan%20class=%22variable%22%3Eoos%3C/span%3E%20%3Cspan%20class=%22operator%22%3E=%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EObjectOutputStream%3C/span%3E(bos))%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20oos.writeObject(object);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%3Cspan%20class=%22keyword%22%3Etry%3C/span%3E%20(%3Cspan%20class=%22type%22%3EByteArrayInputStream%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ebis%3C/span%3E%20%3Cspan%20class=%22operator%22%3E=%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EByteArrayInputStream%3C/span%3E(bos.toByteArray());%20%3Cspan%20class=%22type%22%3EObjectInputStream%3C/span%3E%20%3Cspan%20class=%22variable%22%3Eois%3C/span%3E%20%3Cspan%20class=%22operator%22%3E=%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EObjectInputStream%3C/span%3E(bis))%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20(T)%20ois.readObjet();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20&amp;#125;%20%3Cspan%20class=%22keyword%22%3Ecatch%3C/span%3E%20(Exception%20e)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%3Cspan%20class=%22keyword%22%3Ethrow%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ERuntimeException%3C/span%3E(e);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3C/li%3E%3C/ol%3E%3Ch2%20id=%22%E6%80%BB%E7%BB%93%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E6%80%BB%E7%BB%93%22%3E%C2%B6%3C/a%3E%E6%80%BB%E7%BB%93%3C/h2%3E%3Ctable%3E%3Cthead%3E%3Ctr%3E%3Cth%3E%3Cstrong%3E%E7%89%B9%E6%80%A7%3C/strong%3E%3C/th%3E%3Cth%3E%3Cstrong%3E%E6%8F%8F%E8%BF%B0%3C/strong%3E%3C/th%3E%3C/tr%3E%3C/thead%3E%3Ctbody%3E%3Ctr%3E%3Ctd%3E%E6%A8%A1%E5%BC%8F%E7%B1%BB%E5%9E%8B%3C/td%3E%3Ctd%3E%E5%88%9B%E5%BB%BA%E6%A8%A1%E5%BC%8F%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3E%E6%A0%B8%E5%BF%83%E6%9C%BA%E5%88%B6%3C/td%3E%3Ctd%3E%E5%85%8B%E9%9A%86%E5%B7%B2%E5%AD%98%E5%9C%A8%E5%AF%B9%E8%B1%A1%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3E%E4%B8%BB%E8%A6%81%E4%BC%98%E7%82%B9%3C/td%3E%3Ctd%3E%E6%8F%90%E9%AB%98%E6%80%A7%E8%83%BD%E3%80%81%E7%AE%80%E5%8C%96%E5%88%9B%E5%BB%BA%E6%B5%81%E7%A8%8B%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3E%E5%85%B3%E9%94%AE%E6%8E%A5%E5%8F%A3/%E7%B1%BB%3C/td%3E%3Ctd%3E%3Ccode%3ECloneable,Object.clone()%3C/code%3E%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3E%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF%3C/td%3E%3Ctd%3E%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E5%A4%8D%E6%9D%82%E3%80%81%E9%9C%80%E8%A6%81%E5%A4%9A%E4%B8%AA%E7%9B%B8%E4%BC%BC%E5%AF%B9%E8%B1%A1%3C/td%3E%3C/tr%3E%3C/tbody%3E%3C/table%3E" type="image"/>
    
    
    
    <category term="creational" scheme="https://galudisu.info/tags/creational/"/>
    
    <category term="prototype" scheme="https://galudisu.info/tags/prototype/"/>
    
  </entry>
  
  <entry>
    <title>工厂模式(Factory Pattern)</title>
    <link href="https://galudisu.info/2025/05/10/pattern/basic/creational/Factory/"/>
    <id>https://galudisu.info/2025/05/10/pattern/basic/creational/Factory/</id>
    <published>2025-05-10T09:25:03.000Z</published>
    <updated>2025-05-11T16:16:24.574Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>顾名思义，一个可以生产很多“类”的类（工厂）。</p></blockquote><span id="more"></span><p>工厂模式几乎是所有面向对象开发中都会用到的一种设计模式，譬如Spring框架基于IoC(控制反转)容器的框架，大量依赖于工厂模式来管理对象的创建和生命周期。</p><p>工厂模式家族包含以下一些模式。</p><h3 id="静态工厂模式-Static-Factory-Pattern"><a class="header-anchor" href="#静态工厂模式-Static-Factory-Pattern">¶</a>静态工厂模式(Static Factory Pattern)</h3><p>一种简化版的工厂模式，通过<strong>包含静态方法的类</strong>来创建对象，客户端通过调用该静态方法并传入参数来获取所需的实例。</p><p>[] 静态工厂模式不是GoF的23中设计模式之一，但属于一种常见的编成实践。其核心是：</p><ul><li>提供一个静态工厂方法(static factory method)</li><li>方法根据参数或逻辑返回不同的实现类实例</li><li>客户端不需要使用<code>new</code>关键字直接创建对象</li></ul><p>由于静态工厂模式不符合开闭原则，因此不能被继承，无法实现多态。往往只能用于<code>创建单一固定类型的类</code>，或者说是<code>final</code>的类，下面是一个例子：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SocketFactory</span> &#123;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> ServerSocket <span class="title function_">createServerSocket</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Socket <span class="title function_">createSocket</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Socket</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Socket <span class="title function_">createSocket</span><span class="params">(<span class="type">boolean</span> keepAlive)</span> &#123;</span><br><span class="line">    <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>();</span><br><span class="line">    socket.setKeepAlive(keepAlive);</span><br><span class="line">    <span class="keyword">return</span> socket;</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>基于它的定义，静态工厂更多的用作辅助类来使用，Java标准库中广泛使用了静态工厂方法，有：</p><ol><li><code>java.util.Collections#unmodifiableList(List&lt;T&gt; list)</code></li><li><code>java.util.Arrays#asList(T... a)</code></li><li><code>java.util.Optional#of(T value)</code></li><li><code>java.time.LocalDate#now()</code></li><li><code>java.nio.file.Paths.get(...)</code></li></ol><p>静态工厂适用于框架内部本身希望统一对象的构建过程，同时不希望在外部进行扩展的类。</p><h3 id="简单工厂模式-Simple-Factory-Pattern"><a class="header-anchor" href="#简单工厂模式-Simple-Factory-Pattern">¶</a>简单工厂模式(Simple Factory Pattern)</h3><blockquote><p>通过一个工厂类统一创建不同类型的对象，客户端无需指导具体类名，只需传入参数即可。</p></blockquote><img src="/assert/puml/e9a1a676420c7acc78e8e778d2e8239e40e9607cc3499cdb9f3db72348bec6e7.svg"/><p>简单工厂也是违反了“开闭原则”，新增的产品类需要修改工厂类。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">use</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProductA</span> <span class="keyword">implements</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">use</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Using Product A&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProductB</span> <span class="keyword">implements</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">use</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Using Product B&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SimpleFactory</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> Product <span class="title function_">createProduct</span><span class="params">(String type)</span> &#123;  <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">switch</span>(type) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&quot;A&quot;</span> -&gt; <span class="keyword">new</span> <span class="title class_">ProductA</span>();</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&quot;B&quot;</span> -&gt; <span class="keyword">new</span> <span class="title class_">ProductB</span>();</span><br><span class="line">      <span class="keyword">default</span> -&gt; <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperation</span>(<span class="string">&quot;Unsupported Product Type&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><i class="conum" data-value="1"></i> 违反“开闭原则”，每次新增产品时，都需要修改工厂类。</p><h3 id="工厂方法模式-Factory-Method-Pattern"><a class="header-anchor" href="#工厂方法模式-Factory-Method-Pattern">¶</a>工厂方法模式(Factory Method Pattern)</h3><blockquote><p>每个工厂只生产一种产品，新增产品只需扩展不需要修改，符合开闭原则。</p></blockquote><p>定义一个创建对象的接口，但由子类决定要实例化哪个类。工厂方法模式把类的实例化过程推迟到子类。</p><p>对比UML可以发现，工厂方法就是在原来的简单工厂模式的前提下，将原来的<code>SimpleFactory</code>提升为<code>interface</code>或<code>abstract</code><br>，延迟到具体的工厂类进行构建。这种实现满足了“开闭原则”。</p><img src="/assert/puml/0f9ce3ebea350ac0f85301868582ae20b6d4776c0abee6f046652a3aaf1855f7.svg"/><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">use</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProductA</span> <span class="keyword">implements</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">use</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Using Product A&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProductB</span> <span class="keyword">implements</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">use</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Using Product B&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Factory</span> &#123;  <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">  Product <span class="title function_">createProduct</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FactoryA</span> implement Factory &#123;</span><br><span class="line">  <span class="keyword">public</span> Product <span class="title function_">createProduct</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ProductA</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FactoryB</span> implement Factory &#123;</span><br><span class="line">  <span class="keyword">public</span> Product <span class="title function_">createProduct</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ProductB</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><i class="conum" data-value="1"></i> 工厂方法，由子类来决定类的实例化。</p><h3 id="抽象工厂-Abstract-Factory-Pattern"><a class="header-anchor" href="#抽象工厂-Abstract-Factory-Pattern">¶</a>抽象工厂(Abstract Factory Pattern)</h3><blockquote><p>提供一个接口，用于创建一组相关的或依赖对象的家族，适用于多平台、多配置系统(如跨平台UI控件库)。</p></blockquote><p>抽象工厂模式在基于原来的工厂方法模式的前提下，由单一类型，扩展为可以创建多种产品类型。</p><img src="/assert/puml/9ce8d50719d1b6bf842c934e097d1efafd7cefbf38af24e0076826bb3205ed77.svg"/><p>具体实现类，</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ProductA</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">featureA</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProductA1</span> implement ProductA &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">featureA</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Feature of Product A1&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProductA2</span> implement ProductA &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">featureA</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Feature of Product A2&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ProductB</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">featureB</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProductB1</span> implement ProductB &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">featureB</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Feature of Product B1&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProductB2</span> implement ProductB &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">featureB</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Feature of Product B2&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AbstractFactory</span> &#123;  <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">  ProductA <span class="title function_">createProductA</span><span class="params">()</span>;</span><br><span class="line">  ProductB <span class="title function_">createProductB</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Factory1</span> <span class="keyword">implements</span> <span class="title class_">AbstractFactory</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> ProductA <span class="title function_">createProductA</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ProductA1</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> ProductB <span class="title function_">createProductB</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ProductB1</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Factory2</span> <span class="keyword">implements</span> <span class="title class_">AbstractFactory</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> ProductA <span class="title function_">createProductA</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ProductA2</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> ProductB <span class="title function_">createProductB</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ProductB2</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><i class="conum" data-value="1"></i> 抽象工厂，由单一类型，扩展为支持多种类型。</p><h2 id="总结"><a class="header-anchor" href="#总结">¶</a>总结</h2><table><thead><tr><th>模式名称</th><th>创建对象数量</th><th>是否符合开闭原则</th><th>使用场景</th></tr></thead><tbody><tr><td>简单工厂模式</td><td>单一类型</td><td>否</td><td>简单对象创建，不频繁变更</td></tr><tr><td>工厂方法模式</td><td>单一类型</td><td>是</td><td>需要灵活扩展产品类型</td></tr><tr><td>抽象工厂模式</td><td>多种类型</td><td>是</td><td>创建多个相关或依赖对象的家族</td></tr></tbody></table>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;顾名思义，一个可以生产很多“类”的类（工厂）。&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    <content src="https://galudisu.info/%3Cblockquote%3E%3Cp%3E%E9%A1%BE%E5%90%8D%E6%80%9D%E4%B9%89%EF%BC%8C%E4%B8%80%E4%B8%AA%E5%8F%AF%E4%BB%A5%E7%94%9F%E4%BA%A7%E5%BE%88%E5%A4%9A%E2%80%9C%E7%B1%BB%E2%80%9D%E7%9A%84%E7%B1%BB%EF%BC%88%E5%B7%A5%E5%8E%82%EF%BC%89%E3%80%82%3C/p%3E%3C/blockquote%3E%3Cspan%20id=%22more%22%3E%3C/span%3E%3Cp%3E%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E5%87%A0%E4%B9%8E%E6%98%AF%E6%89%80%E6%9C%89%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%BC%80%E5%8F%91%E4%B8%AD%E9%83%BD%E4%BC%9A%E7%94%A8%E5%88%B0%E7%9A%84%E4%B8%80%E7%A7%8D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%8C%E8%AD%AC%E5%A6%82Spring%E6%A1%86%E6%9E%B6%E5%9F%BA%E4%BA%8EIoC(%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC)%E5%AE%B9%E5%99%A8%E7%9A%84%E6%A1%86%E6%9E%B6%EF%BC%8C%E5%A4%A7%E9%87%8F%E4%BE%9D%E8%B5%96%E4%BA%8E%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E6%9D%A5%E7%AE%A1%E7%90%86%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E3%80%82%3C/p%3E%3Cp%3E%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E5%AE%B6%E6%97%8F%E5%8C%85%E5%90%AB%E4%BB%A5%E4%B8%8B%E4%B8%80%E4%BA%9B%E6%A8%A1%E5%BC%8F%E3%80%82%3C/p%3E%3Ch3%20id=%22%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F-Static-Factory-Pattern%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F-Static-Factory-Pattern%22%3E%C2%B6%3C/a%3E%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F(Static%20Factory%20Pattern)%3C/h3%3E%3Cp%3E%E4%B8%80%E7%A7%8D%E7%AE%80%E5%8C%96%E7%89%88%E7%9A%84%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%EF%BC%8C%E9%80%9A%E8%BF%87%3Cstrong%3E%E5%8C%85%E5%90%AB%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95%E7%9A%84%E7%B1%BB%3C/strong%3E%E6%9D%A5%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%80%9A%E8%BF%87%E8%B0%83%E7%94%A8%E8%AF%A5%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95%E5%B9%B6%E4%BC%A0%E5%85%A5%E5%8F%82%E6%95%B0%E6%9D%A5%E8%8E%B7%E5%8F%96%E6%89%80%E9%9C%80%E7%9A%84%E5%AE%9E%E4%BE%8B%E3%80%82%3C/p%3E%3Cp%3E[]%20%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E4%B8%8D%E6%98%AFGoF%E7%9A%8423%E4%B8%AD%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E4%B8%80%EF%BC%8C%E4%BD%86%E5%B1%9E%E4%BA%8E%E4%B8%80%E7%A7%8D%E5%B8%B8%E8%A7%81%E7%9A%84%E7%BC%96%E6%88%90%E5%AE%9E%E8%B7%B5%E3%80%82%E5%85%B6%E6%A0%B8%E5%BF%83%E6%98%AF%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%E6%8F%90%E4%BE%9B%E4%B8%80%E4%B8%AA%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95(static%20factory%20method)%3C/li%3E%3Cli%3E%E6%96%B9%E6%B3%95%E6%A0%B9%E6%8D%AE%E5%8F%82%E6%95%B0%E6%88%96%E9%80%BB%E8%BE%91%E8%BF%94%E5%9B%9E%E4%B8%8D%E5%90%8C%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%B1%BB%E5%AE%9E%E4%BE%8B%3C/li%3E%3Cli%3E%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B8%8D%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8%3Ccode%3Enew%3C/code%3E%E5%85%B3%E9%94%AE%E5%AD%97%E7%9B%B4%E6%8E%A5%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%3C/li%3E%3C/ul%3E%3Cp%3E%E7%94%B1%E4%BA%8E%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E4%B8%8D%E7%AC%A6%E5%90%88%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99%EF%BC%8C%E5%9B%A0%E6%AD%A4%E4%B8%8D%E8%83%BD%E8%A2%AB%E7%BB%A7%E6%89%BF%EF%BC%8C%E6%97%A0%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%A4%9A%E6%80%81%E3%80%82%E5%BE%80%E5%BE%80%E5%8F%AA%E8%83%BD%E7%94%A8%E4%BA%8E%3Ccode%3E%E5%88%9B%E5%BB%BA%E5%8D%95%E4%B8%80%E5%9B%BA%E5%AE%9A%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%B1%BB%3C/code%3E%EF%BC%8C%E6%88%96%E8%80%85%E8%AF%B4%E6%98%AF%3Ccode%3Efinal%3C/code%3E%E7%9A%84%E7%B1%BB%EF%BC%8C%E4%B8%8B%E9%9D%A2%E6%98%AF%E4%B8%80%E4%B8%AA%E4%BE%8B%E5%AD%90%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESocketFactory%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20ServerSocket%20%3Cspan%20class=%22title%20function_%22%3EcreateServerSocket%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EServerSocket%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20Socket%20%3Cspan%20class=%22title%20function_%22%3EcreateSocket%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESocket%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20Socket%20%3Cspan%20class=%22title%20function_%22%3EcreateSocket%3C/span%3E%3Cspan%20class=%22params%22%3E(%3Cspan%20class=%22type%22%3Eboolean%3C/span%3E%20keepAlive)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22type%22%3ESocket%3C/span%3E%20%3Cspan%20class=%22variable%22%3Esocket%3C/span%3E%20%3Cspan%20class=%22operator%22%3E=%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESocket%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20socket.setKeepAlive(keepAlive);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20socket;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20...%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%9F%BA%E4%BA%8E%E5%AE%83%E7%9A%84%E5%AE%9A%E4%B9%89%EF%BC%8C%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E6%9B%B4%E5%A4%9A%E7%9A%84%E7%94%A8%E4%BD%9C%E8%BE%85%E5%8A%A9%E7%B1%BB%E6%9D%A5%E4%BD%BF%E7%94%A8%EF%BC%8CJava%E6%A0%87%E5%87%86%E5%BA%93%E4%B8%AD%E5%B9%BF%E6%B3%9B%E4%BD%BF%E7%94%A8%E4%BA%86%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%EF%BC%8C%E6%9C%89%EF%BC%9A%3C/p%3E%3Col%3E%3Cli%3E%3Ccode%3Ejava.util.Collections#unmodifiableList(List&amp;lt;T&amp;gt;%20list)%3C/code%3E%3C/li%3E%3Cli%3E%3Ccode%3Ejava.util.Arrays#asList(T...%20a)%3C/code%3E%3C/li%3E%3Cli%3E%3Ccode%3Ejava.util.Optional#of(T%20value)%3C/code%3E%3C/li%3E%3Cli%3E%3Ccode%3Ejava.time.LocalDate#now()%3C/code%3E%3C/li%3E%3Cli%3E%3Ccode%3Ejava.nio.file.Paths.get(...)%3C/code%3E%3C/li%3E%3C/ol%3E%3Cp%3E%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E9%80%82%E7%94%A8%E4%BA%8E%E6%A1%86%E6%9E%B6%E5%86%85%E9%83%A8%E6%9C%AC%E8%BA%AB%E5%B8%8C%E6%9C%9B%E7%BB%9F%E4%B8%80%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%9E%84%E5%BB%BA%E8%BF%87%E7%A8%8B%EF%BC%8C%E5%90%8C%E6%97%B6%E4%B8%8D%E5%B8%8C%E6%9C%9B%E5%9C%A8%E5%A4%96%E9%83%A8%E8%BF%9B%E8%A1%8C%E6%89%A9%E5%B1%95%E7%9A%84%E7%B1%BB%E3%80%82%3C/p%3E%3Ch3%20id=%22%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F-Simple-Factory-Pattern%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F-Simple-Factory-Pattern%22%3E%C2%B6%3C/a%3E%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F(Simple%20Factory%20Pattern)%3C/h3%3E%3Cblockquote%3E%3Cp%3E%E9%80%9A%E8%BF%87%E4%B8%80%E4%B8%AA%E5%B7%A5%E5%8E%82%E7%B1%BB%E7%BB%9F%E4%B8%80%E5%88%9B%E5%BB%BA%E4%B8%8D%E5%90%8C%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%97%A0%E9%9C%80%E6%8C%87%E5%AF%BC%E5%85%B7%E4%BD%93%E7%B1%BB%E5%90%8D%EF%BC%8C%E5%8F%AA%E9%9C%80%E4%BC%A0%E5%85%A5%E5%8F%82%E6%95%B0%E5%8D%B3%E5%8F%AF%E3%80%82%3C/p%3E%3C/blockquote%3E%3Cimg%20src=%22/assert/puml/e9a1a676420c7acc78e8e778d2e8239e40e9607cc3499cdb9f3db72348bec6e7.svg%22/%3E%3Cp%3E%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E4%B9%9F%E6%98%AF%E8%BF%9D%E5%8F%8D%E4%BA%86%E2%80%9C%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99%E2%80%9D%EF%BC%8C%E6%96%B0%E5%A2%9E%E7%9A%84%E4%BA%A7%E5%93%81%E7%B1%BB%E9%9C%80%E8%A6%81%E4%BF%AE%E6%94%B9%E5%B7%A5%E5%8E%82%E7%B1%BB%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E18%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E19%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E21%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E22%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E23%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E24%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E25%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E26%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E27%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Einterface%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProduct%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Euse%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProductA%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProduct%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Euse%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20System.out.println(%3Cspan%20class=%22string%22%3E&amp;quot;Using%20Product%20A&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProductB%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProduct%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Euse%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20System.out.println(%3Cspan%20class=%22string%22%3E&amp;quot;Using%20Product%20B&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESimpleFactory%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20Product%20%3Cspan%20class=%22title%20function_%22%3EcreateProduct%3C/span%3E%3Cspan%20class=%22params%22%3E(String%20type)%3C/span%3E%20&amp;#123;%20%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eswitch%3C/span%3E(type)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%3Cspan%20class=%22keyword%22%3Ecase%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;quot;A&amp;quot;%3C/span%3E%20-&amp;gt;%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProductA%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%3Cspan%20class=%22keyword%22%3Ecase%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;quot;B&amp;quot;%3C/span%3E%20-&amp;gt;%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProductB%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%3Cspan%20class=%22keyword%22%3Edefault%3C/span%3E%20-&amp;gt;%20%3Cspan%20class=%22keyword%22%3Ethrow%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EUnsupportedOperation%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;Unsupported%20Product%20Type&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%20%E8%BF%9D%E5%8F%8D%E2%80%9C%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99%E2%80%9D%EF%BC%8C%E6%AF%8F%E6%AC%A1%E6%96%B0%E5%A2%9E%E4%BA%A7%E5%93%81%E6%97%B6%EF%BC%8C%E9%83%BD%E9%9C%80%E8%A6%81%E4%BF%AE%E6%94%B9%E5%B7%A5%E5%8E%82%E7%B1%BB%E3%80%82%3C/p%3E%3Ch3%20id=%22%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F-Factory-Method-Pattern%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F-Factory-Method-Pattern%22%3E%C2%B6%3C/a%3E%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F(Factory%20Method%20Pattern)%3C/h3%3E%3Cblockquote%3E%3Cp%3E%E6%AF%8F%E4%B8%AA%E5%B7%A5%E5%8E%82%E5%8F%AA%E7%94%9F%E4%BA%A7%E4%B8%80%E7%A7%8D%E4%BA%A7%E5%93%81%EF%BC%8C%E6%96%B0%E5%A2%9E%E4%BA%A7%E5%93%81%E5%8F%AA%E9%9C%80%E6%89%A9%E5%B1%95%E4%B8%8D%E9%9C%80%E8%A6%81%E4%BF%AE%E6%94%B9%EF%BC%8C%E7%AC%A6%E5%90%88%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99%E3%80%82%3C/p%3E%3C/blockquote%3E%3Cp%3E%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%8E%A5%E5%8F%A3%EF%BC%8C%E4%BD%86%E7%94%B1%E5%AD%90%E7%B1%BB%E5%86%B3%E5%AE%9A%E8%A6%81%E5%AE%9E%E4%BE%8B%E5%8C%96%E5%93%AA%E4%B8%AA%E7%B1%BB%E3%80%82%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F%E6%8A%8A%E7%B1%BB%E7%9A%84%E5%AE%9E%E4%BE%8B%E5%8C%96%E8%BF%87%E7%A8%8B%E6%8E%A8%E8%BF%9F%E5%88%B0%E5%AD%90%E7%B1%BB%E3%80%82%3C/p%3E%3Cp%3E%E5%AF%B9%E6%AF%94UML%E5%8F%AF%E4%BB%A5%E5%8F%91%E7%8E%B0%EF%BC%8C%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E5%B0%B1%E6%98%AF%E5%9C%A8%E5%8E%9F%E6%9D%A5%E7%9A%84%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%89%8D%E6%8F%90%E4%B8%8B%EF%BC%8C%E5%B0%86%E5%8E%9F%E6%9D%A5%E7%9A%84%3Ccode%3ESimpleFactory%3C/code%3E%E6%8F%90%E5%8D%87%E4%B8%BA%3Ccode%3Einterface%3C/code%3E%E6%88%96%3Ccode%3Eabstract%3C/code%3E%3Cbr%3E%EF%BC%8C%E5%BB%B6%E8%BF%9F%E5%88%B0%E5%85%B7%E4%BD%93%E7%9A%84%E5%B7%A5%E5%8E%82%E7%B1%BB%E8%BF%9B%E8%A1%8C%E6%9E%84%E5%BB%BA%E3%80%82%E8%BF%99%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%BB%A1%E8%B6%B3%E4%BA%86%E2%80%9C%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99%E2%80%9D%E3%80%82%3C/p%3E%3Cimg%20src=%22/assert/puml/0f9ce3ebea350ac0f85301868582ae20b6d4776c0abee6f046652a3aaf1855f7.svg%22/%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E18%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E19%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E21%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E22%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E23%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E24%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E25%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E26%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E27%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E28%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E29%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E30%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Einterface%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProduct%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Euse%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProductA%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProduct%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Euse%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20System.out.println(%3Cspan%20class=%22string%22%3E&amp;quot;Using%20Product%20A&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProductB%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProduct%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Euse%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20System.out.println(%3Cspan%20class=%22string%22%3E&amp;quot;Using%20Product%20B&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Einterface%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EFactory%3C/span%3E%20&amp;#123;%20%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20Product%20%3Cspan%20class=%22title%20function_%22%3EcreateProduct%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EFactoryA%3C/span%3E%20implement%20Factory%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20Product%20%3Cspan%20class=%22title%20function_%22%3EcreateProduct%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProductA%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EFactoryB%3C/span%3E%20implement%20Factory%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20Product%20%3Cspan%20class=%22title%20function_%22%3EcreateProduct%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProductB%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%20%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%EF%BC%8C%E7%94%B1%E5%AD%90%E7%B1%BB%E6%9D%A5%E5%86%B3%E5%AE%9A%E7%B1%BB%E7%9A%84%E5%AE%9E%E4%BE%8B%E5%8C%96%E3%80%82%3C/p%3E%3Ch3%20id=%22%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82-Abstract-Factory-Pattern%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82-Abstract-Factory-Pattern%22%3E%C2%B6%3C/a%3E%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82(Abstract%20Factory%20Pattern)%3C/h3%3E%3Cblockquote%3E%3Cp%3E%E6%8F%90%E4%BE%9B%E4%B8%80%E4%B8%AA%E6%8E%A5%E5%8F%A3%EF%BC%8C%E7%94%A8%E4%BA%8E%E5%88%9B%E5%BB%BA%E4%B8%80%E7%BB%84%E7%9B%B8%E5%85%B3%E7%9A%84%E6%88%96%E4%BE%9D%E8%B5%96%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B6%E6%97%8F%EF%BC%8C%E9%80%82%E7%94%A8%E4%BA%8E%E5%A4%9A%E5%B9%B3%E5%8F%B0%E3%80%81%E5%A4%9A%E9%85%8D%E7%BD%AE%E7%B3%BB%E7%BB%9F(%E5%A6%82%E8%B7%A8%E5%B9%B3%E5%8F%B0UI%E6%8E%A7%E4%BB%B6%E5%BA%93)%E3%80%82%3C/p%3E%3C/blockquote%3E%3Cp%3E%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E5%9C%A8%E5%9F%BA%E4%BA%8E%E5%8E%9F%E6%9D%A5%E7%9A%84%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%89%8D%E6%8F%90%E4%B8%8B%EF%BC%8C%E7%94%B1%E5%8D%95%E4%B8%80%E7%B1%BB%E5%9E%8B%EF%BC%8C%E6%89%A9%E5%B1%95%E4%B8%BA%E5%8F%AF%E4%BB%A5%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%A7%8D%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B%E3%80%82%3C/p%3E%3Cimg%20src=%22/assert/puml/9ce8d50719d1b6bf842c934e097d1efafd7cefbf38af24e0076826bb3205ed77.svg%22/%3E%3Cp%3E%E5%85%B7%E4%BD%93%E5%AE%9E%E7%8E%B0%E7%B1%BB%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E18%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E19%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E21%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E22%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E23%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E24%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E25%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E26%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E27%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E28%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E29%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E30%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E31%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E32%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E33%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E34%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E35%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E36%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E37%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E38%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E39%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E40%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E41%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E42%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E43%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E44%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E45%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E46%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E47%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E48%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E49%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E50%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Einterface%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProductA%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EfeatureA%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProductA1%3C/span%3E%20implement%20ProductA%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EfeatureA%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20System.out.println(%3Cspan%20class=%22string%22%3E&amp;quot;Feature%20of%20Product%20A1&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProductA2%3C/span%3E%20implement%20ProductA%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EfeatureA%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20System.out.println(%3Cspan%20class=%22string%22%3E&amp;quot;Feature%20of%20Product%20A2&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Einterface%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProductB%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EfeatureB%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProductB1%3C/span%3E%20implement%20ProductB%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EfeatureB%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20System.out.println(%3Cspan%20class=%22string%22%3E&amp;quot;Feature%20of%20Product%20B1&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProductB2%3C/span%3E%20implement%20ProductB%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EfeatureB%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20System.out.println(%3Cspan%20class=%22string%22%3E&amp;quot;Feature%20of%20Product%20B2&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Einterface%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EAbstractFactory%3C/span%3E%20&amp;#123;%20%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20ProductA%20%3Cspan%20class=%22title%20function_%22%3EcreateProductA%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20ProductB%20%3Cspan%20class=%22title%20function_%22%3EcreateProductB%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EFactory1%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EAbstractFactory%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20ProductA%20%3Cspan%20class=%22title%20function_%22%3EcreateProductA%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProductA1%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20ProductB%20%3Cspan%20class=%22title%20function_%22%3EcreateProductB%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProductB1%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EFactory2%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EAbstractFactory%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20ProductA%20%3Cspan%20class=%22title%20function_%22%3EcreateProductA%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProductA2%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20ProductB%20%3Cspan%20class=%22title%20function_%22%3EcreateProductB%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EProductB2%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%20%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%EF%BC%8C%E7%94%B1%E5%8D%95%E4%B8%80%E7%B1%BB%E5%9E%8B%EF%BC%8C%E6%89%A9%E5%B1%95%E4%B8%BA%E6%94%AF%E6%8C%81%E5%A4%9A%E7%A7%8D%E7%B1%BB%E5%9E%8B%E3%80%82%3C/p%3E%3Ch2%20id=%22%E6%80%BB%E7%BB%93%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E6%80%BB%E7%BB%93%22%3E%C2%B6%3C/a%3E%E6%80%BB%E7%BB%93%3C/h2%3E%3Ctable%3E%3Cthead%3E%3Ctr%3E%3Cth%3E%E6%A8%A1%E5%BC%8F%E5%90%8D%E7%A7%B0%3C/th%3E%3Cth%3E%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E6%95%B0%E9%87%8F%3C/th%3E%3Cth%3E%E6%98%AF%E5%90%A6%E7%AC%A6%E5%90%88%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99%3C/th%3E%3Cth%3E%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%3C/th%3E%3C/tr%3E%3C/thead%3E%3Ctbody%3E%3Ctr%3E%3Ctd%3E%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%3C/td%3E%3Ctd%3E%E5%8D%95%E4%B8%80%E7%B1%BB%E5%9E%8B%3C/td%3E%3Ctd%3E%E5%90%A6%3C/td%3E%3Ctd%3E%E7%AE%80%E5%8D%95%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%EF%BC%8C%E4%B8%8D%E9%A2%91%E7%B9%81%E5%8F%98%E6%9B%B4%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3E%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F%3C/td%3E%3Ctd%3E%E5%8D%95%E4%B8%80%E7%B1%BB%E5%9E%8B%3C/td%3E%3Ctd%3E%E6%98%AF%3C/td%3E%3Ctd%3E%E9%9C%80%E8%A6%81%E7%81%B5%E6%B4%BB%E6%89%A9%E5%B1%95%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3E%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%3C/td%3E%3Ctd%3E%E5%A4%9A%E7%A7%8D%E7%B1%BB%E5%9E%8B%3C/td%3E%3Ctd%3E%E6%98%AF%3C/td%3E%3Ctd%3E%E5%88%9B%E5%BB%BA%E5%A4%9A%E4%B8%AA%E7%9B%B8%E5%85%B3%E6%88%96%E4%BE%9D%E8%B5%96%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AE%B6%E6%97%8F%3C/td%3E%3C/tr%3E%3C/tbody%3E%3C/table%3E" type="image"/>
    
    
    
    <category term="creational" scheme="https://galudisu.info/tags/creational/"/>
    
    <category term="factory" scheme="https://galudisu.info/tags/factory/"/>
    
  </entry>
  
  <entry>
    <title>建造者模式(Builder Pattern)</title>
    <link href="https://galudisu.info/2025/05/10/pattern/basic/creational/Builder/"/>
    <id>https://galudisu.info/2025/05/10/pattern/basic/creational/Builder/</id>
    <published>2025-05-10T09:25:02.000Z</published>
    <updated>2025-05-11T16:14:49.928Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>建造者模式(Builder Pattern)是对象的创建模式。建造者模式可以<strong>将一个产品的内部表象(internal representation)与产品的生产过程分割开来</strong>，从而可以使一个建造过程生成具有不同的内部表象的产品对象。</p></blockquote><img src="/assert/puml/16277389e52de69365a573b8faf018f38c3755f67a5bba551fd0b6b08ce05e94.svg"/><span id="more"></span><h3 id="概念"><a class="header-anchor" href="#概念">¶</a>概念</h3><p>将一个复杂对象的构建与其表象分离，使得同样的构建过程可以创建不同的表示。</p><ul><li>适用场景：<ul><li>构建的对象具有复杂的内部结构。</li><li>对象的构建过程需要多个步骤，并且这些步骤可能变化。</li><li>希望解耦构建过程与具体实现。</li></ul></li></ul><h3 id="模式结构"><a class="header-anchor" href="#模式结构">¶</a>模式结构</h3><p>建造者模式通常包含以下角色：</p><ul><li>Product: 要构建的复杂对象</li><li>Builder: 定义构建产品的各个步骤的接口（如<code>buildPartA()</code>,<code>buildPartB()</code>等），也可以是一个抽象类或接口。</li><li>ConcreteBuilder: 实现Builder接口，具体完成各部分的构建，并提供一个获取产品的方法。</li><li>Director： 负责调用构建者中的步骤来构建产品，不关心具体实现，只控制流程。</li><li>Client: 最终客户端。</li></ul><p>示例代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">House</span> &#123;  <span class="comment">// Product 类</span></span><br><span class="line">  <span class="keyword">private</span> String foundation;</span><br><span class="line">  <span class="keyword">private</span> String walls;</span><br><span class="line">  <span class="keyword">private</span> String roof;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFoundation</span><span class="params">(String foundation)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.foundation = foundation;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setWalls</span><span class="params">(String walls)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.walls = walls;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRoof</span><span class="params">(String roof)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.roof = roof;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Foundation: &quot;</span> + foundation);</span><br><span class="line">    System.out.println(<span class="string">&quot;Walls: &quot;</span> + walls);</span><br><span class="line">    System.out.println(<span class="string">&quot;Roof: &quot;</span> + roof);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">HouseBuilder</span> &#123;  <span class="comment">// Builder</span></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">buildFoundation</span><span class="params">()</span>;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">buildWalls</span><span class="params">()</span>;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">buildRoof</span><span class="params">()</span>;</span><br><span class="line">  House <span class="title function_">getHouse</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConcreteHouseBuilder</span> <span class="keyword">implements</span> <span class="title class_">HouseBuilder</span> &#123;  <span class="comment">// ConcreteBuilder</span></span><br><span class="line">  <span class="keyword">private</span> <span class="type">House</span> <span class="variable">house</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">House</span>();</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buildFoundation</span><span class="params">()</span> &#123;</span><br><span class="line">    house.setFoundation(<span class="string">&quot;Built with bricks&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buildWalls</span><span class="params">()</span> &#123;</span><br><span class="line">    house.setWalls(<span class="string">&quot;Reinforced concrete walls&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buildRoof</span><span class="params">()</span> &#123;</span><br><span class="line">    house.setRoof(<span class="string">&quot;Tile roof&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> House <span class="title function_">getHouse</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> house;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HouseDirector</span> &#123;  <span class="comment">// Director</span></span><br><span class="line">  <span class="keyword">private</span> HouseBuilder builder;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">HouseDirector</span><span class="params">(HouseBuilder builder)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.builder = builder;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">constructHouse</span><span class="params">()</span> &#123;</span><br><span class="line">    builder.buildFoundation();</span><br><span class="line">    builder.buildWalls();</span><br><span class="line">    builder.buildRoof();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;  <span class="comment">// Client</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// 创建建造者</span></span><br><span class="line">    <span class="type">HouseBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConcreteHouseBuilder</span>();</span><br><span class="line">    <span class="comment">// 创建指挥者并传入建造者</span></span><br><span class="line">    <span class="type">HouseDirector</span> <span class="variable">director</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HouseDirector</span>(builder);</span><br><span class="line">    <span class="comment">// 指挥者开始构建</span></span><br><span class="line">    director.constructHouse();</span><br><span class="line">    <span class="comment">// 获取最终产品</span></span><br><span class="line">    <span class="type">House</span> <span class="variable">house</span> <span class="operator">=</span> builder.getHouse();</span><br><span class="line">    house.show();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>优点</strong>： 分离构建逻辑和表示；多样化输出；控制构建过程<br><strong>缺点</strong>： 不适合简单对象，如果对象构造过程简单，使用该模式反而增加复杂度；需要定义多个类，增加了系统的类数量，增加了理解成本。</p><h3 id="场景举例"><a class="header-anchor" href="#场景举例">¶</a>场景举例</h3><ul><li>构建不同配置的计算机(cpu、内存、硬盘等)</li><li>生成不同风格的文档(PDF、HTML、Word)</li><li>组装汽车的不同型号(发动机、轮子、颜色等)</li><li>游戏中的角色的定制(武器、服装、技能等)</li></ul><h3 id="和Lombok插件的区别"><a class="header-anchor" href="#和Lombok插件的区别">¶</a>和Lombok插件的区别</h3><ol><li>Lombok的<code>@Builder</code>并不完全等同于GoF的建造者模式。</li><li>它缺少<code>Director</code>角色，也不支持多个<code>ConcreteBuilder</code>实现。</li><li>如需要对构建过程作复杂的控制(如分布构建、条件判断、模板化流程)，仍需要手动实现建造者模式。</li><li>Lombok的<code>@Builder</code>只对简单对象的私有属性进行构建。</li></ol>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;建造者模式(Builder Pattern)是对象的创建模式。建造者模式可以&lt;strong&gt;将一个产品的内部表象(internal representation)与产品的生产过程分割开来&lt;/strong&gt;，从而可以使一个建造过程生成具有不同的内部表象的产品对象。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;img src=&quot;/assert/puml/16277389e52de69365a573b8faf018f38c3755f67a5bba551fd0b6b08ce05e94.svg&quot;/&gt;</summary>
    
    
    <content src="https://galudisu.info/%3Cblockquote%3E%3Cp%3E%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F(Builder%20Pattern)%E6%98%AF%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA%E6%A8%A1%E5%BC%8F%E3%80%82%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F%E5%8F%AF%E4%BB%A5%3Cstrong%3E%E5%B0%86%E4%B8%80%E4%B8%AA%E4%BA%A7%E5%93%81%E7%9A%84%E5%86%85%E9%83%A8%E8%A1%A8%E8%B1%A1(internal%20representation)%E4%B8%8E%E4%BA%A7%E5%93%81%E7%9A%84%E7%94%9F%E4%BA%A7%E8%BF%87%E7%A8%8B%E5%88%86%E5%89%B2%E5%BC%80%E6%9D%A5%3C/strong%3E%EF%BC%8C%E4%BB%8E%E8%80%8C%E5%8F%AF%E4%BB%A5%E4%BD%BF%E4%B8%80%E4%B8%AA%E5%BB%BA%E9%80%A0%E8%BF%87%E7%A8%8B%E7%94%9F%E6%88%90%E5%85%B7%E6%9C%89%E4%B8%8D%E5%90%8C%E7%9A%84%E5%86%85%E9%83%A8%E8%A1%A8%E8%B1%A1%E7%9A%84%E4%BA%A7%E5%93%81%E5%AF%B9%E8%B1%A1%E3%80%82%3C/p%3E%3C/blockquote%3E%3Cimg%20src=%22/assert/puml/16277389e52de69365a573b8faf018f38c3755f67a5bba551fd0b6b08ce05e94.svg%22/%3E%3Cspan%20id=%22more%22%3E%3C/span%3E%3Ch3%20id=%22%E6%A6%82%E5%BF%B5%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E6%A6%82%E5%BF%B5%22%3E%C2%B6%3C/a%3E%E6%A6%82%E5%BF%B5%3C/h3%3E%3Cp%3E%E5%B0%86%E4%B8%80%E4%B8%AA%E5%A4%8D%E6%9D%82%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%9E%84%E5%BB%BA%E4%B8%8E%E5%85%B6%E8%A1%A8%E8%B1%A1%E5%88%86%E7%A6%BB%EF%BC%8C%E4%BD%BF%E5%BE%97%E5%90%8C%E6%A0%B7%E7%9A%84%E6%9E%84%E5%BB%BA%E8%BF%87%E7%A8%8B%E5%8F%AF%E4%BB%A5%E5%88%9B%E5%BB%BA%E4%B8%8D%E5%90%8C%E7%9A%84%E8%A1%A8%E7%A4%BA%E3%80%82%3C/p%3E%3Cul%3E%3Cli%3E%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9A%3Cul%3E%3Cli%3E%E6%9E%84%E5%BB%BA%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%85%B7%E6%9C%89%E5%A4%8D%E6%9D%82%E7%9A%84%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84%E3%80%82%3C/li%3E%3Cli%3E%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%9E%84%E5%BB%BA%E8%BF%87%E7%A8%8B%E9%9C%80%E8%A6%81%E5%A4%9A%E4%B8%AA%E6%AD%A5%E9%AA%A4%EF%BC%8C%E5%B9%B6%E4%B8%94%E8%BF%99%E4%BA%9B%E6%AD%A5%E9%AA%A4%E5%8F%AF%E8%83%BD%E5%8F%98%E5%8C%96%E3%80%82%3C/li%3E%3Cli%3E%E5%B8%8C%E6%9C%9B%E8%A7%A3%E8%80%A6%E6%9E%84%E5%BB%BA%E8%BF%87%E7%A8%8B%E4%B8%8E%E5%85%B7%E4%BD%93%E5%AE%9E%E7%8E%B0%E3%80%82%3C/li%3E%3C/ul%3E%3C/li%3E%3C/ul%3E%3Ch3%20id=%22%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84%22%3E%C2%B6%3C/a%3E%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84%3C/h3%3E%3Cp%3E%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F%E9%80%9A%E5%B8%B8%E5%8C%85%E5%90%AB%E4%BB%A5%E4%B8%8B%E8%A7%92%E8%89%B2%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3EProduct:%20%E8%A6%81%E6%9E%84%E5%BB%BA%E7%9A%84%E5%A4%8D%E6%9D%82%E5%AF%B9%E8%B1%A1%3C/li%3E%3Cli%3EBuilder:%20%E5%AE%9A%E4%B9%89%E6%9E%84%E5%BB%BA%E4%BA%A7%E5%93%81%E7%9A%84%E5%90%84%E4%B8%AA%E6%AD%A5%E9%AA%A4%E7%9A%84%E6%8E%A5%E5%8F%A3%EF%BC%88%E5%A6%82%3Ccode%3EbuildPartA()%3C/code%3E,%3Ccode%3EbuildPartB()%3C/code%3E%E7%AD%89%EF%BC%89%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E6%98%AF%E4%B8%80%E4%B8%AA%E6%8A%BD%E8%B1%A1%E7%B1%BB%E6%88%96%E6%8E%A5%E5%8F%A3%E3%80%82%3C/li%3E%3Cli%3EConcreteBuilder:%20%E5%AE%9E%E7%8E%B0Builder%E6%8E%A5%E5%8F%A3%EF%BC%8C%E5%85%B7%E4%BD%93%E5%AE%8C%E6%88%90%E5%90%84%E9%83%A8%E5%88%86%E7%9A%84%E6%9E%84%E5%BB%BA%EF%BC%8C%E5%B9%B6%E6%8F%90%E4%BE%9B%E4%B8%80%E4%B8%AA%E8%8E%B7%E5%8F%96%E4%BA%A7%E5%93%81%E7%9A%84%E6%96%B9%E6%B3%95%E3%80%82%3C/li%3E%3Cli%3EDirector%EF%BC%9A%20%E8%B4%9F%E8%B4%A3%E8%B0%83%E7%94%A8%E6%9E%84%E5%BB%BA%E8%80%85%E4%B8%AD%E7%9A%84%E6%AD%A5%E9%AA%A4%E6%9D%A5%E6%9E%84%E5%BB%BA%E4%BA%A7%E5%93%81%EF%BC%8C%E4%B8%8D%E5%85%B3%E5%BF%83%E5%85%B7%E4%BD%93%E5%AE%9E%E7%8E%B0%EF%BC%8C%E5%8F%AA%E6%8E%A7%E5%88%B6%E6%B5%81%E7%A8%8B%E3%80%82%3C/li%3E%3Cli%3EClient:%20%E6%9C%80%E7%BB%88%E5%AE%A2%E6%88%B7%E7%AB%AF%E3%80%82%3C/li%3E%3C/ul%3E%3Cp%3E%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E18%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E19%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E21%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E22%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E23%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E24%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E25%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E26%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E27%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E28%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E29%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E30%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E31%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E32%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E33%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E34%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E35%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E36%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E37%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E38%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E39%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E40%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E41%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E42%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E43%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E44%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E45%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E46%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E47%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E48%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E49%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E50%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E51%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E52%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E53%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E54%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E55%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E56%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E57%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E58%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E59%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E60%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E61%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E62%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E63%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E64%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E65%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E66%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E67%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E68%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EHouse%3C/span%3E%20&amp;#123;%20%20%3Cspan%20class=%22comment%22%3E/%20Product%20%E7%B1%BB%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20String%20foundation;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20String%20walls;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20String%20roof;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EsetFoundation%3C/span%3E%3Cspan%20class=%22params%22%3E(String%20foundation)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Ethis%3C/span%3E.foundation%20=%20foundation;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EsetWalls%3C/span%3E%3Cspan%20class=%22params%22%3E(String%20walls)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Ethis%3C/span%3E.walls%20=%20walls;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EsetRoof%3C/span%3E%3Cspan%20class=%22params%22%3E(String%20roof)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Ethis%3C/span%3E.roof%20=%20roof;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Eshow%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20System.out.println(%3Cspan%20class=%22string%22%3E&amp;quot;Foundation:%20&amp;quot;%3C/span%3E%20+%20foundation);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20System.out.println(%3Cspan%20class=%22string%22%3E&amp;quot;Walls:%20&amp;quot;%3C/span%3E%20+%20walls);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20System.out.println(%3Cspan%20class=%22string%22%3E&amp;quot;Roof:%20&amp;quot;%3C/span%3E%20+%20roof);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Einterface%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EHouseBuilder%3C/span%3E%20&amp;#123;%20%20%3Cspan%20class=%22comment%22%3E/%20Builder%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EbuildFoundation%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EbuildWalls%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EbuildRoof%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20House%20%3Cspan%20class=%22title%20function_%22%3EgetHouse%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EConcreteHouseBuilder%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eimplements%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EHouseBuilder%3C/span%3E%20&amp;#123;%20%20%3Cspan%20class=%22comment%22%3E/%20ConcreteBuilder%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20%3Cspan%20class=%22type%22%3EHouse%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ehouse%3C/span%3E%20%3Cspan%20class=%22operator%22%3E=%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EHouse%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EbuildFoundation%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20house.setFoundation(%3Cspan%20class=%22string%22%3E&amp;quot;Built%20with%20bricks&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EbuildWalls%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20house.setWalls(%3Cspan%20class=%22string%22%3E&amp;quot;Reinforced%20concrete%20walls&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EbuildRoof%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20house.setRoof(%3Cspan%20class=%22string%22%3E&amp;quot;Tile%20roof&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20House%20%3Cspan%20class=%22title%20function_%22%3EgetHouse%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20house;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EHouseDirector%3C/span%3E%20&amp;#123;%20%20%3Cspan%20class=%22comment%22%3E/%20Director%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20HouseBuilder%20builder;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EHouseDirector%3C/span%3E%3Cspan%20class=%22params%22%3E(HouseBuilder%20builder)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Ethis%3C/span%3E.builder%20=%20builder;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3EconstructHouse%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20builder.buildFoundation();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20builder.buildWalls();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20builder.buildRoof();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EClient%3C/span%3E%20&amp;#123;%20%20%3Cspan%20class=%22comment%22%3E/%20Client%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Evoid%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Emain%3C/span%3E%3Cspan%20class=%22params%22%3E(String[]%20args)%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22comment%22%3E/%20%E5%88%9B%E5%BB%BA%E5%BB%BA%E9%80%A0%E8%80%85%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22type%22%3EHouseBuilder%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ebuilder%3C/span%3E%20%3Cspan%20class=%22operator%22%3E=%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EConcreteHouseBuilder%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22comment%22%3E/%20%E5%88%9B%E5%BB%BA%E6%8C%87%E6%8C%A5%E8%80%85%E5%B9%B6%E4%BC%A0%E5%85%A5%E5%BB%BA%E9%80%A0%E8%80%85%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22type%22%3EHouseDirector%3C/span%3E%20%3Cspan%20class=%22variable%22%3Edirector%3C/span%3E%20%3Cspan%20class=%22operator%22%3E=%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EHouseDirector%3C/span%3E(builder);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22comment%22%3E/%20%E6%8C%87%E6%8C%A5%E8%80%85%E5%BC%80%E5%A7%8B%E6%9E%84%E5%BB%BA%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20director.constructHouse();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22comment%22%3E/%20%E8%8E%B7%E5%8F%96%E6%9C%80%E7%BB%88%E4%BA%A7%E5%93%81%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22type%22%3EHouse%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ehouse%3C/span%3E%20%3Cspan%20class=%22operator%22%3E=%3C/span%3E%20builder.getHouse();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20house.show();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Cstrong%3E%E4%BC%98%E7%82%B9%3C/strong%3E%EF%BC%9A%20%E5%88%86%E7%A6%BB%E6%9E%84%E5%BB%BA%E9%80%BB%E8%BE%91%E5%92%8C%E8%A1%A8%E7%A4%BA%EF%BC%9B%E5%A4%9A%E6%A0%B7%E5%8C%96%E8%BE%93%E5%87%BA%EF%BC%9B%E6%8E%A7%E5%88%B6%E6%9E%84%E5%BB%BA%E8%BF%87%E7%A8%8B%3Cbr%3E%3Cstrong%3E%E7%BC%BA%E7%82%B9%3C/strong%3E%EF%BC%9A%20%E4%B8%8D%E9%80%82%E5%90%88%E7%AE%80%E5%8D%95%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%AF%B9%E8%B1%A1%E6%9E%84%E9%80%A0%E8%BF%87%E7%A8%8B%E7%AE%80%E5%8D%95%EF%BC%8C%E4%BD%BF%E7%94%A8%E8%AF%A5%E6%A8%A1%E5%BC%8F%E5%8F%8D%E8%80%8C%E5%A2%9E%E5%8A%A0%E5%A4%8D%E6%9D%82%E5%BA%A6%EF%BC%9B%E9%9C%80%E8%A6%81%E5%AE%9A%E4%B9%89%E5%A4%9A%E4%B8%AA%E7%B1%BB%EF%BC%8C%E5%A2%9E%E5%8A%A0%E4%BA%86%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%B1%BB%E6%95%B0%E9%87%8F%EF%BC%8C%E5%A2%9E%E5%8A%A0%E4%BA%86%E7%90%86%E8%A7%A3%E6%88%90%E6%9C%AC%E3%80%82%3C/p%3E%3Ch3%20id=%22%E5%9C%BA%E6%99%AF%E4%B8%BE%E4%BE%8B%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E5%9C%BA%E6%99%AF%E4%B8%BE%E4%BE%8B%22%3E%C2%B6%3C/a%3E%E5%9C%BA%E6%99%AF%E4%B8%BE%E4%BE%8B%3C/h3%3E%3Cul%3E%3Cli%3E%E6%9E%84%E5%BB%BA%E4%B8%8D%E5%90%8C%E9%85%8D%E7%BD%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E6%9C%BA(cpu%E3%80%81%E5%86%85%E5%AD%98%E3%80%81%E7%A1%AC%E7%9B%98%E7%AD%89)%3C/li%3E%3Cli%3E%E7%94%9F%E6%88%90%E4%B8%8D%E5%90%8C%E9%A3%8E%E6%A0%BC%E7%9A%84%E6%96%87%E6%A1%A3(PDF%E3%80%81HTML%E3%80%81Word)%3C/li%3E%3Cli%3E%E7%BB%84%E8%A3%85%E6%B1%BD%E8%BD%A6%E7%9A%84%E4%B8%8D%E5%90%8C%E5%9E%8B%E5%8F%B7(%E5%8F%91%E5%8A%A8%E6%9C%BA%E3%80%81%E8%BD%AE%E5%AD%90%E3%80%81%E9%A2%9C%E8%89%B2%E7%AD%89)%3C/li%3E%3Cli%3E%E6%B8%B8%E6%88%8F%E4%B8%AD%E7%9A%84%E8%A7%92%E8%89%B2%E7%9A%84%E5%AE%9A%E5%88%B6(%E6%AD%A6%E5%99%A8%E3%80%81%E6%9C%8D%E8%A3%85%E3%80%81%E6%8A%80%E8%83%BD%E7%AD%89)%3C/li%3E%3C/ul%3E%3Ch3%20id=%22%E5%92%8CLombok%E6%8F%92%E4%BB%B6%E7%9A%84%E5%8C%BA%E5%88%AB%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E5%92%8CLombok%E6%8F%92%E4%BB%B6%E7%9A%84%E5%8C%BA%E5%88%AB%22%3E%C2%B6%3C/a%3E%E5%92%8CLombok%E6%8F%92%E4%BB%B6%E7%9A%84%E5%8C%BA%E5%88%AB%3C/h3%3E%3Col%3E%3Cli%3ELombok%E7%9A%84%3Ccode%3E@Builder%3C/code%3E%E5%B9%B6%E4%B8%8D%E5%AE%8C%E5%85%A8%E7%AD%89%E5%90%8C%E4%BA%8EGoF%E7%9A%84%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F%E3%80%82%3C/li%3E%3Cli%3E%E5%AE%83%E7%BC%BA%E5%B0%91%3Ccode%3EDirector%3C/code%3E%E8%A7%92%E8%89%B2%EF%BC%8C%E4%B9%9F%E4%B8%8D%E6%94%AF%E6%8C%81%E5%A4%9A%E4%B8%AA%3Ccode%3EConcreteBuilder%3C/code%3E%E5%AE%9E%E7%8E%B0%E3%80%82%3C/li%3E%3Cli%3E%E5%A6%82%E9%9C%80%E8%A6%81%E5%AF%B9%E6%9E%84%E5%BB%BA%E8%BF%87%E7%A8%8B%E4%BD%9C%E5%A4%8D%E6%9D%82%E7%9A%84%E6%8E%A7%E5%88%B6(%E5%A6%82%E5%88%86%E5%B8%83%E6%9E%84%E5%BB%BA%E3%80%81%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%E3%80%81%E6%A8%A1%E6%9D%BF%E5%8C%96%E6%B5%81%E7%A8%8B)%EF%BC%8C%E4%BB%8D%E9%9C%80%E8%A6%81%E6%89%8B%E5%8A%A8%E5%AE%9E%E7%8E%B0%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F%E3%80%82%3C/li%3E%3Cli%3ELombok%E7%9A%84%3Ccode%3E@Builder%3C/code%3E%E5%8F%AA%E5%AF%B9%E7%AE%80%E5%8D%95%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%A7%81%E6%9C%89%E5%B1%9E%E6%80%A7%E8%BF%9B%E8%A1%8C%E6%9E%84%E5%BB%BA%E3%80%82%3C/li%3E%3C/ol%3E" type="image"/>
    
    
    
    <category term="creational" scheme="https://galudisu.info/tags/creational/"/>
    
    <category term="builder" scheme="https://galudisu.info/tags/builder/"/>
    
  </entry>
  
  <entry>
    <title>单例模式(Singleton Pattern)</title>
    <link href="https://galudisu.info/2025/05/10/pattern/basic/creational/Singleton/"/>
    <id>https://galudisu.info/2025/05/10/pattern/basic/creational/Singleton/</id>
    <published>2025-05-10T09:25:01.000Z</published>
    <updated>2025-05-11T16:16:24.564Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>单例模式主要是为了避免因为创建了多个实例造成资源的浪费，且多个实例由于多次调用容易导致结果出现错误，使用单例模式能够保证整个应用中有且只有一个实例。</p></blockquote><img src="/assert/puml/359337590fefc13016479eafc3964310fc75e006e0e1b4327142069cdb1181e8.svg"/><span id="more"></span><ul><li>定义： 只需要三步就可以保证对象的唯一性<ul><li>私有化构造函数</li><li>类内创建对象</li><li>对外提供一个可以让其他程序获取该对象的方法</li></ul></li></ul><p>常常被用作工具类(-Util/-Helper)。</p><h3 id="饿汉式"><a class="header-anchor" href="#饿汉式">¶</a>饿汉式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Singleton</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> INSTANCE;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>优点</strong>：从它的实现中我们可以看到，这种方式的实现比较简单，在类加载的时候就完成了实例化，避免了线程的同步问题。</p><p><strong>缺点</strong>：由于在类加载的时候就实例化了，所以没有达到Lazy Loading(懒加载)的效果，也就是说可能我没有用到这个实例，但是它也会加载，会造成内存的浪费。</p><h3 id="懒汉"><a class="header-anchor" href="#懒汉">¶</a>懒汉</h3><p>创建一个懒汉模式的单例，延迟实例的创建。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance; <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123; <span class="comment">// <i class="conum" data-value="2"></i></span></span><br><span class="line">      instance = <span class="keyword">new</span> <span class="title class_">singleton</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><i class="conum" data-value="1"></i> 单例模式的懒汉模式.</p><p><i class="conum" data-value="2"></i> 这里的线程是不安全的，可能得到两个不同的实例。</p><p>修复线程安全问题，改进版本1：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;  <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">    <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">      instance = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><i class="conum" data-value="1"></i> 懒汉式线程安全，通过<code>synchronized</code>关键字控制，但效率低，因为<code>synchronized</code>会🔓住该对象。</p><p><strong>缺点</strong>： 效率太低了，每个线程在想获得类的实例时候，执行<code>getInstance()</code>方法都要进行同步操作，而其实这个方法只执行一次实例化就够了。</p><p>改进版本2：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">synchronized</span> (Singleton.class) &#123;  <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">        instance = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><i class="conum" data-value="1"></i> 线程不安全，不可用。虽然加了🔓，但注意这里锁的是该类，不是对象实例。等到第一个线程执行完<code>instance = new Singleton()</code>跳出这个🔓时，另一个进入<code>if</code>语句的线程同样会实例化另外一个Singleton对象。</p><p>改进版本3： 双重校验🔓，新版jvm不再推荐</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">MUTEX</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">synchronized</span> (MUTEX) &#123; <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">          instance = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><i class="conum" data-value="1"></i> 双重校验锁(Double-checked locking)，不再推荐使用，参考<a href="https://cwe.mitre.org/data/definitions/609">cwe-609</a>。</p><p>改进版本4： <strong>内部类</strong>写法【推荐】。也是其他jvm衍生语言的语法糖，譬如kotlin/scala/groovy的<code>object</code>数据类型。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> SingletonHolder.INSTANCE;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">SingletonHolder</span> &#123;  <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Singleton</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><i class="conum" data-value="1"></i> 内部类会被延迟构建。</p><p><strong>优点</strong>: 避免了线程不安全的出现，延迟加载，效率高。</p><p>改进版本5： <strong>枚举</strong>【推荐】。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">  INSTANCE;  <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><i class="conum" data-value="1"></i> 借助JDK1.5中添加的枚举来实现单例模式。不仅能避免多线程同步问题，而且还能防止反序列化重新创建新的对象。</p><p>改进版本6： <strong>原子类</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> AtomicReference&lt;Singleton&gt; INSTANCE = <span class="keyword">new</span> <span class="title class_">AtomicReference</span>&lt;&gt;();</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;  <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">    <span class="keyword">if</span> (INSTANCE.get() == <span class="literal">null</span>) &#123;</span><br><span class="line">      INSTANCE.compareAndSet(<span class="literal">null</span>, <span class="keyword">new</span> <span class="title class_">Singleton</span>());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> INSTANCE.get();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><i class="conum" data-value="1"></i> 不太常见的实现方式，更多的是用作表示状态。对实例有一定的容忍度。无🔓设计，由CAS自旋等待。</p><p>改进版本7： <strong>锁核原子类</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> AtomicReference&lt;Singleton&gt; INSTANCE = <span class="keyword">new</span> <span class="title class_">AtomicReference</span>&lt;&gt;();</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (INSTANCE.get() == <span class="literal">null</span>) &#123;  <span class="comment">// <i class="conum" data-value="1"></i></span></span><br><span class="line">      INSTANCE.compareAndSet(<span class="literal">null</span>, <span class="keyword">new</span> <span class="title class_">Singleton</span>());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> INSTANCE.get();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><i class="conum" data-value="1"></i> 不具有容忍度的单例实现，一定要对象实例的存在才往下执行。</p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;单例模式主要是为了避免因为创建了多个实例造成资源的浪费，且多个实例由于多次调用容易导致结果出现错误，使用单例模式能够保证整个应用中有且只有一个实例。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;img src=&quot;/assert/puml/359337590fefc13016479eafc3964310fc75e006e0e1b4327142069cdb1181e8.svg&quot;/&gt;</summary>
    
    
    <content src="https://galudisu.info/%3Cblockquote%3E%3Cp%3E%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E4%B8%BB%E8%A6%81%E6%98%AF%E4%B8%BA%E4%BA%86%E9%81%BF%E5%85%8D%E5%9B%A0%E4%B8%BA%E5%88%9B%E5%BB%BA%E4%BA%86%E5%A4%9A%E4%B8%AA%E5%AE%9E%E4%BE%8B%E9%80%A0%E6%88%90%E8%B5%84%E6%BA%90%E7%9A%84%E6%B5%AA%E8%B4%B9%EF%BC%8C%E4%B8%94%E5%A4%9A%E4%B8%AA%E5%AE%9E%E4%BE%8B%E7%94%B1%E4%BA%8E%E5%A4%9A%E6%AC%A1%E8%B0%83%E7%94%A8%E5%AE%B9%E6%98%93%E5%AF%BC%E8%87%B4%E7%BB%93%E6%9E%9C%E5%87%BA%E7%8E%B0%E9%94%99%E8%AF%AF%EF%BC%8C%E4%BD%BF%E7%94%A8%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E8%83%BD%E5%A4%9F%E4%BF%9D%E8%AF%81%E6%95%B4%E4%B8%AA%E5%BA%94%E7%94%A8%E4%B8%AD%E6%9C%89%E4%B8%94%E5%8F%AA%E6%9C%89%E4%B8%80%E4%B8%AA%E5%AE%9E%E4%BE%8B%E3%80%82%3C/p%3E%3C/blockquote%3E%3Cimg%20src=%22/assert/puml/359337590fefc13016479eafc3964310fc75e006e0e1b4327142069cdb1181e8.svg%22/%3E%3Cspan%20id=%22more%22%3E%3C/span%3E%3Cul%3E%3Cli%3E%E5%AE%9A%E4%B9%89%EF%BC%9A%20%E5%8F%AA%E9%9C%80%E8%A6%81%E4%B8%89%E6%AD%A5%E5%B0%B1%E5%8F%AF%E4%BB%A5%E4%BF%9D%E8%AF%81%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%94%AF%E4%B8%80%E6%80%A7%3Cul%3E%3Cli%3E%E7%A7%81%E6%9C%89%E5%8C%96%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%3C/li%3E%3Cli%3E%E7%B1%BB%E5%86%85%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%3C/li%3E%3Cli%3E%E5%AF%B9%E5%A4%96%E6%8F%90%E4%BE%9B%E4%B8%80%E4%B8%AA%E5%8F%AF%E4%BB%A5%E8%AE%A9%E5%85%B6%E4%BB%96%E7%A8%8B%E5%BA%8F%E8%8E%B7%E5%8F%96%E8%AF%A5%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B9%E6%B3%95%3C/li%3E%3C/ul%3E%3C/li%3E%3C/ul%3E%3Cp%3E%E5%B8%B8%E5%B8%B8%E8%A2%AB%E7%94%A8%E4%BD%9C%E5%B7%A5%E5%85%B7%E7%B1%BB(-Util/-Helper)%E3%80%82%3C/p%3E%3Ch3%20id=%22%E9%A5%BF%E6%B1%89%E5%BC%8F%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E9%A5%BF%E6%B1%89%E5%BC%8F%22%3E%C2%B6%3C/a%3E%E9%A5%BF%E6%B1%89%E5%BC%8F%3C/h3%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESingleton%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3ESingleton%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Efinal%3C/span%3E%20%3Cspan%20class=%22type%22%3ESingleton%3C/span%3E%20%3Cspan%20class=%22variable%22%3EINSTANCE%3C/span%3E%20%3Cspan%20class=%22operator%22%3E=%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESingleton%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20Singleton%20%3Cspan%20class=%22title%20function_%22%3EgetInstance%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20INSTANCE;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Cstrong%3E%E4%BC%98%E7%82%B9%3C/strong%3E%EF%BC%9A%E4%BB%8E%E5%AE%83%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%AD%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%EF%BC%8C%E8%BF%99%E7%A7%8D%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%AF%94%E8%BE%83%E7%AE%80%E5%8D%95%EF%BC%8C%E5%9C%A8%E7%B1%BB%E5%8A%A0%E8%BD%BD%E7%9A%84%E6%97%B6%E5%80%99%E5%B0%B1%E5%AE%8C%E6%88%90%E4%BA%86%E5%AE%9E%E4%BE%8B%E5%8C%96%EF%BC%8C%E9%81%BF%E5%85%8D%E4%BA%86%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%90%8C%E6%AD%A5%E9%97%AE%E9%A2%98%E3%80%82%3C/p%3E%3Cp%3E%3Cstrong%3E%E7%BC%BA%E7%82%B9%3C/strong%3E%EF%BC%9A%E7%94%B1%E4%BA%8E%E5%9C%A8%E7%B1%BB%E5%8A%A0%E8%BD%BD%E7%9A%84%E6%97%B6%E5%80%99%E5%B0%B1%E5%AE%9E%E4%BE%8B%E5%8C%96%E4%BA%86%EF%BC%8C%E6%89%80%E4%BB%A5%E6%B2%A1%E6%9C%89%E8%BE%BE%E5%88%B0Lazy%20Loading(%E6%87%92%E5%8A%A0%E8%BD%BD)%E7%9A%84%E6%95%88%E6%9E%9C%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E8%AF%B4%E5%8F%AF%E8%83%BD%E6%88%91%E6%B2%A1%E6%9C%89%E7%94%A8%E5%88%B0%E8%BF%99%E4%B8%AA%E5%AE%9E%E4%BE%8B%EF%BC%8C%E4%BD%86%E6%98%AF%E5%AE%83%E4%B9%9F%E4%BC%9A%E5%8A%A0%E8%BD%BD%EF%BC%8C%E4%BC%9A%E9%80%A0%E6%88%90%E5%86%85%E5%AD%98%E7%9A%84%E6%B5%AA%E8%B4%B9%E3%80%82%3C/p%3E%3Ch3%20id=%22%E6%87%92%E6%B1%89%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E6%87%92%E6%B1%89%22%3E%C2%B6%3C/a%3E%E6%87%92%E6%B1%89%3C/h3%3E%3Cp%3E%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%87%92%E6%B1%89%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8D%95%E4%BE%8B%EF%BC%8C%E5%BB%B6%E8%BF%9F%E5%AE%9E%E4%BE%8B%E7%9A%84%E5%88%9B%E5%BB%BA%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESingleton%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3ESingleton%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20Singleton%20instance;%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20Singleton%20%3Cspan%20class=%22title%20function_%22%3EgetInstance%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20(instance%20==%20%3Cspan%20class=%22literal%22%3Enull%3C/span%3E)%20&amp;#123;%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%222%22%3E%3C/i%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20instance%20=%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3Esingleton%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20instance;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%20%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%87%92%E6%B1%89%E6%A8%A1%E5%BC%8F.%3C/p%3E%3Cp%3E%3Ci%20class=%22conum%22%20data-value=%222%22%3E%3C/i%3E%20%E8%BF%99%E9%87%8C%E7%9A%84%E7%BA%BF%E7%A8%8B%E6%98%AF%E4%B8%8D%E5%AE%89%E5%85%A8%E7%9A%84%EF%BC%8C%E5%8F%AF%E8%83%BD%E5%BE%97%E5%88%B0%E4%B8%A4%E4%B8%AA%E4%B8%8D%E5%90%8C%E7%9A%84%E5%AE%9E%E4%BE%8B%E3%80%82%3C/p%3E%3Cp%3E%E4%BF%AE%E5%A4%8D%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98%EF%BC%8C%E6%94%B9%E8%BF%9B%E7%89%88%E6%9C%AC1%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESingleton%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3ESingleton%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20Singleton%20instance;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Esynchronized%3C/span%3E%20Singleton%20%3Cspan%20class=%22title%20function_%22%3EgetInstance%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%20%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20(instance%20==%20%3Cspan%20class=%22literal%22%3Enull%3C/span%3E)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20instance%20=%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESingleton%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20instance;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%20%E6%87%92%E6%B1%89%E5%BC%8F%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%EF%BC%8C%E9%80%9A%E8%BF%87%3Ccode%3Esynchronized%3C/code%3E%E5%85%B3%E9%94%AE%E5%AD%97%E6%8E%A7%E5%88%B6%EF%BC%8C%E4%BD%86%E6%95%88%E7%8E%87%E4%BD%8E%EF%BC%8C%E5%9B%A0%E4%B8%BA%3Ccode%3Esynchronized%3C/code%3E%E4%BC%9A%F0%9F%94%93%E4%BD%8F%E8%AF%A5%E5%AF%B9%E8%B1%A1%E3%80%82%3C/p%3E%3Cp%3E%3Cstrong%3E%E7%BC%BA%E7%82%B9%3C/strong%3E%EF%BC%9A%20%E6%95%88%E7%8E%87%E5%A4%AA%E4%BD%8E%E4%BA%86%EF%BC%8C%E6%AF%8F%E4%B8%AA%E7%BA%BF%E7%A8%8B%E5%9C%A8%E6%83%B3%E8%8E%B7%E5%BE%97%E7%B1%BB%E7%9A%84%E5%AE%9E%E4%BE%8B%E6%97%B6%E5%80%99%EF%BC%8C%E6%89%A7%E8%A1%8C%3Ccode%3EgetInstance()%3C/code%3E%E6%96%B9%E6%B3%95%E9%83%BD%E8%A6%81%E8%BF%9B%E8%A1%8C%E5%90%8C%E6%AD%A5%E6%93%8D%E4%BD%9C%EF%BC%8C%E8%80%8C%E5%85%B6%E5%AE%9E%E8%BF%99%E4%B8%AA%E6%96%B9%E6%B3%95%E5%8F%AA%E6%89%A7%E8%A1%8C%E4%B8%80%E6%AC%A1%E5%AE%9E%E4%BE%8B%E5%8C%96%E5%B0%B1%E5%A4%9F%E4%BA%86%E3%80%82%3C/p%3E%3Cp%3E%E6%94%B9%E8%BF%9B%E7%89%88%E6%9C%AC2%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESingleton%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3ESingleton%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20Singleton%20instance;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20Singleton%20%3Cspan%20class=%22title%20function_%22%3EgetInstance%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20(instance%20==%20%3Cspan%20class=%22literal%22%3Enull%3C/span%3E)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%3Cspan%20class=%22keyword%22%3Esynchronized%3C/span%3E%20(Singleton.class)%20&amp;#123;%20%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20instance%20=%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESingleton%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20instance;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%20%E7%BA%BF%E7%A8%8B%E4%B8%8D%E5%AE%89%E5%85%A8%EF%BC%8C%E4%B8%8D%E5%8F%AF%E7%94%A8%E3%80%82%E8%99%BD%E7%84%B6%E5%8A%A0%E4%BA%86%F0%9F%94%93%EF%BC%8C%E4%BD%86%E6%B3%A8%E6%84%8F%E8%BF%99%E9%87%8C%E9%94%81%E7%9A%84%E6%98%AF%E8%AF%A5%E7%B1%BB%EF%BC%8C%E4%B8%8D%E6%98%AF%E5%AF%B9%E8%B1%A1%E5%AE%9E%E4%BE%8B%E3%80%82%E7%AD%89%E5%88%B0%E7%AC%AC%E4%B8%80%E4%B8%AA%E7%BA%BF%E7%A8%8B%E6%89%A7%E8%A1%8C%E5%AE%8C%3Ccode%3Einstance%20=%20new%20Singleton()%3C/code%3E%E8%B7%B3%E5%87%BA%E8%BF%99%E4%B8%AA%F0%9F%94%93%E6%97%B6%EF%BC%8C%E5%8F%A6%E4%B8%80%E4%B8%AA%E8%BF%9B%E5%85%A5%3Ccode%3Eif%3C/code%3E%E8%AF%AD%E5%8F%A5%E7%9A%84%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%A0%B7%E4%BC%9A%E5%AE%9E%E4%BE%8B%E5%8C%96%E5%8F%A6%E5%A4%96%E4%B8%80%E4%B8%AASingleton%E5%AF%B9%E8%B1%A1%E3%80%82%3C/p%3E%3Cp%3E%E6%94%B9%E8%BF%9B%E7%89%88%E6%9C%AC3%EF%BC%9A%20%E5%8F%8C%E9%87%8D%E6%A0%A1%E9%AA%8C%F0%9F%94%93%EF%BC%8C%E6%96%B0%E7%89%88jvm%E4%B8%8D%E5%86%8D%E6%8E%A8%E8%8D%90%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESingleton%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3ESingleton%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20Singleton%20instance;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Efinal%3C/span%3E%20%3Cspan%20class=%22type%22%3EObject%3C/span%3E%20%3Cspan%20class=%22variable%22%3EMUTEX%3C/span%3E%20%3Cspan%20class=%22operator%22%3E=%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EObject%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20Singleton%20%3Cspan%20class=%22title%20function_%22%3EgetInstance%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20(instance%20==%20%3Cspan%20class=%22literal%22%3Enull%3C/span%3E)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%3Cspan%20class=%22keyword%22%3Esynchronized%3C/span%3E%20(MUTEX)%20&amp;#123;%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20(instance%20==%20%3Cspan%20class=%22literal%22%3Enull%3C/span%3E)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20instance%20=%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESingleton%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20instance;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%20%E5%8F%8C%E9%87%8D%E6%A0%A1%E9%AA%8C%E9%94%81(Double-checked%20locking)%EF%BC%8C%E4%B8%8D%E5%86%8D%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8%EF%BC%8C%E5%8F%82%E8%80%83%3Ca%20href=%22https:/cwe.mitre.org/data/definitions/609%22%3Ecwe-609%3C/a%3E%E3%80%82%3C/p%3E%3Cp%3E%E6%94%B9%E8%BF%9B%E7%89%88%E6%9C%AC4%EF%BC%9A%20%3Cstrong%3E%E5%86%85%E9%83%A8%E7%B1%BB%3C/strong%3E%E5%86%99%E6%B3%95%E3%80%90%E6%8E%A8%E8%8D%90%E3%80%91%E3%80%82%E4%B9%9F%E6%98%AF%E5%85%B6%E4%BB%96jvm%E8%A1%8D%E7%94%9F%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96%EF%BC%8C%E8%AD%AC%E5%A6%82kotlin/scala/groovy%E7%9A%84%3Ccode%3Eobject%3C/code%3E%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESingleton%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20Singleton%20%3Cspan%20class=%22title%20function_%22%3EgetInstance%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20SingletonHolder.INSTANCE;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESingletonHolder%3C/span%3E%20&amp;#123;%20%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Efinal%3C/span%3E%20%3Cspan%20class=%22type%22%3ESingleton%3C/span%3E%20%3Cspan%20class=%22variable%22%3EINSTANCE%3C/span%3E%20%3Cspan%20class=%22operator%22%3E=%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESingleton%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%20%E5%86%85%E9%83%A8%E7%B1%BB%E4%BC%9A%E8%A2%AB%E5%BB%B6%E8%BF%9F%E6%9E%84%E5%BB%BA%E3%80%82%3C/p%3E%3Cp%3E%3Cstrong%3E%E4%BC%98%E7%82%B9%3C/strong%3E:%20%E9%81%BF%E5%85%8D%E4%BA%86%E7%BA%BF%E7%A8%8B%E4%B8%8D%E5%AE%89%E5%85%A8%E7%9A%84%E5%87%BA%E7%8E%B0%EF%BC%8C%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD%EF%BC%8C%E6%95%88%E7%8E%87%E9%AB%98%E3%80%82%3C/p%3E%3Cp%3E%E6%94%B9%E8%BF%9B%E7%89%88%E6%9C%AC5%EF%BC%9A%20%3Cstrong%3E%E6%9E%9A%E4%B8%BE%3C/strong%3E%E3%80%90%E6%8E%A8%E8%8D%90%E3%80%91%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESingleton%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20INSTANCE;%20%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3ESingleton%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%20%E5%80%9F%E5%8A%A9JDK1.5%E4%B8%AD%E6%B7%BB%E5%8A%A0%E7%9A%84%E6%9E%9A%E4%B8%BE%E6%9D%A5%E5%AE%9E%E7%8E%B0%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E3%80%82%E4%B8%8D%E4%BB%85%E8%83%BD%E9%81%BF%E5%85%8D%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E9%97%AE%E9%A2%98%EF%BC%8C%E8%80%8C%E4%B8%94%E8%BF%98%E8%83%BD%E9%98%B2%E6%AD%A2%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E9%87%8D%E6%96%B0%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84%E5%AF%B9%E8%B1%A1%E3%80%82%3C/p%3E%3Cp%3E%E6%94%B9%E8%BF%9B%E7%89%88%E6%9C%AC6%EF%BC%9A%20%3Cstrong%3E%E5%8E%9F%E5%AD%90%E7%B1%BB%3C/strong%3E%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESingleton%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3ESingleton%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Efinal%3C/span%3E%20AtomicReference&amp;lt;Singleton&amp;gt;%20INSTANCE%20=%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EAtomicReference%3C/span%3E&amp;lt;&amp;gt;();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20Singleton%20%3Cspan%20class=%22title%20function_%22%3EgetInstance%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%20%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20(INSTANCE.get()%20==%20%3Cspan%20class=%22literal%22%3Enull%3C/span%3E)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20INSTANCE.compareAndSet(%3Cspan%20class=%22literal%22%3Enull%3C/span%3E,%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESingleton%3C/span%3E());%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20INSTANCE.get();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%20%E4%B8%8D%E5%A4%AA%E5%B8%B8%E8%A7%81%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%EF%BC%8C%E6%9B%B4%E5%A4%9A%E7%9A%84%E6%98%AF%E7%94%A8%E4%BD%9C%E8%A1%A8%E7%A4%BA%E7%8A%B6%E6%80%81%E3%80%82%E5%AF%B9%E5%AE%9E%E4%BE%8B%E6%9C%89%E4%B8%80%E5%AE%9A%E7%9A%84%E5%AE%B9%E5%BF%8D%E5%BA%A6%E3%80%82%E6%97%A0%F0%9F%94%93%E8%AE%BE%E8%AE%A1%EF%BC%8C%E7%94%B1CAS%E8%87%AA%E6%97%8B%E7%AD%89%E5%BE%85%E3%80%82%3C/p%3E%3Cp%3E%E6%94%B9%E8%BF%9B%E7%89%88%E6%9C%AC7%EF%BC%9A%20%3Cstrong%3E%E9%94%81%E6%A0%B8%E5%8E%9F%E5%AD%90%E7%B1%BB%3C/strong%3E%3C/p%3E%3Cfigure%20class=%22highlight%20java%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eclass%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESingleton%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3ESingleton%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Eprivate%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Efinal%3C/span%3E%20AtomicReference&amp;lt;Singleton&amp;gt;%20INSTANCE%20=%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EAtomicReference%3C/span%3E&amp;lt;&amp;gt;();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22keyword%22%3Epublic%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20Singleton%20%3Cspan%20class=%22title%20function_%22%3EgetInstance%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ewhile%3C/span%3E%20(INSTANCE.get()%20==%20%3Cspan%20class=%22literal%22%3Enull%3C/span%3E)%20&amp;#123;%20%20%3Cspan%20class=%22comment%22%3E/%20%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20INSTANCE.compareAndSet(%3Cspan%20class=%22literal%22%3Enull%3C/span%3E,%20%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ESingleton%3C/span%3E());%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20INSTANCE.get();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Ci%20class=%22conum%22%20data-value=%221%22%3E%3C/i%3E%20%E4%B8%8D%E5%85%B7%E6%9C%89%E5%AE%B9%E5%BF%8D%E5%BA%A6%E7%9A%84%E5%8D%95%E4%BE%8B%E5%AE%9E%E7%8E%B0%EF%BC%8C%E4%B8%80%E5%AE%9A%E8%A6%81%E5%AF%B9%E8%B1%A1%E5%AE%9E%E4%BE%8B%E7%9A%84%E5%AD%98%E5%9C%A8%E6%89%8D%E5%BE%80%E4%B8%8B%E6%89%A7%E8%A1%8C%E3%80%82%3C/p%3E" type="image"/>
    
    
    
    <category term="creational" scheme="https://galudisu.info/tags/creational/"/>
    
    <category term="singleton" scheme="https://galudisu.info/tags/singleton/"/>
    
  </entry>
  
  <entry>
    <title>Design Pattern</title>
    <link href="https://galudisu.info/2025/05/10/pattern/basic/Design-Pattern/"/>
    <id>https://galudisu.info/2025/05/10/pattern/basic/Design-Pattern/</id>
    <published>2025-05-10T09:01:40.000Z</published>
    <updated>2025-05-11T16:16:24.580Z</updated>
    
    <content type="html"><![CDATA[<p>设计模式(Design Pattern)是一套被反复使用、多数人知晓的，经过分类编目的、代码设计经验的总结。</p><p>设计模式分为三种类型，共23种：</p><ul><li>创建型模式： <a href="/2025/05/10/pattern/basic/creational/Singleton/">单例模式</a>、<a href="/2025/05/10/pattern/basic/creational/Factory/#%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82-Abstract-Factory-Pattern">抽象工厂模式</a>、<a href="/2025/05/10/pattern/basic/creational/Builder">建造者模式</a>、<a href="/2025/05/10/pattern/basic/creational/Factory/">工厂模式</a>、<a href="/2025/05/10/pattern/basic/creational/Prototype/">原型模式</a>。</li><li>结构型模式： <a href="/2025/05/10/pattern/basic/structural/Adapter/">适配器模式</a>、<a href="/2025/05/10/pattern/basic/structural/Bridge">桥接模式</a>、<a href="/2025/05/10/pattern/basic/structural/Decorator">装饰模式</a>、<a href="/2025/05/10/pattern/basic/structural/Composite">组合模式</a>、<a href="/2025/05/10/pattern/basic/structural/Facade">外观模式</a>、<a href="/2025/05/10/pattern/basic/structural/Flyweight">享元模式</a>、<a href="/2025/05/10/pattern/basic/structural/Proxy">代理模式</a>。</li><li>行为型模式： <a href="/2025/05/10/pattern/basic/behavioral/TemplateMethod">模板方法模式</a>、<a href="/2025/05/10/pattern/basic/behavioral/Command">命令模式</a>、<a href="/2025/05/10/pattern/basic/behavioral/Iterator">迭代器模式</a>、<a href="/2025/05/10/pattern/basic/behavioral/Observer">观察者模式</a>、<a href="/2025/05/10/pattern/basic/behavioral/Mediator">中介者模式</a>、<a href="/2025/05/10/pattern/basic/behavioral/Memento">备忘录模式</a>、<a href="/2025/05/10/pattern/basic/behavioral/Interpreter">解析器模式</a>、<a href="/2025/05/10/pattern/basic/behavioral/State">状态模式</a>、<a href="/2025/05/10/pattern/basic/behavioral/Strategy">策略模式</a>、<a href="/2025/05/10/pattern/basic/behavioral/ChainOfResponsibility">责任链模式</a>、<a href="/2025/05/10/pattern/basic/behavioral/Visitor">访问者模式</a>。</li></ul><span id="more"></span>]]></content>
    
    
    <summary type="html">&lt;p&gt;设计模式(Design Pattern)是一套被反复使用、多数人知晓的，经过分类编目的、代码设计经验的总结。&lt;/p&gt;
&lt;p&gt;设计模式分为三种类型，共23种：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;创建型模式： &lt;a href=&quot;/2025/05/10/pattern/basic/creational/Singleton/&quot;&gt;单例模式&lt;/a&gt;、&lt;a href=&quot;/2025/05/10/pattern/basic/creational/Factory/#%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82-Abstract-Factory-Pattern&quot;&gt;抽象工厂模式&lt;/a&gt;、&lt;a href=&quot;/2025/05/10/pattern/basic/creational/Builder&quot;&gt;建造者模式&lt;/a&gt;、&lt;a href=&quot;/2025/05/10/pattern/basic/creational/Factory/&quot;&gt;工厂模式&lt;/a&gt;、&lt;a href=&quot;/2025/05/10/pattern/basic/creational/Prototype/&quot;&gt;原型模式&lt;/a&gt;。&lt;/li&gt;
&lt;li&gt;结构型模式： &lt;a href=&quot;/2025/05/10/pattern/basic/structural/Adapter/&quot;&gt;适配器模式&lt;/a&gt;、&lt;a href=&quot;/2025/05/10/pattern/basic/structural/Bridge&quot;&gt;桥接模式&lt;/a&gt;、&lt;a href=&quot;/2025/05/10/pattern/basic/structural/Decorator&quot;&gt;装饰模式&lt;/a&gt;、&lt;a href=&quot;/2025/05/10/pattern/basic/structural/Composite&quot;&gt;组合模式&lt;/a&gt;、&lt;a href=&quot;/2025/05/10/pattern/basic/structural/Facade&quot;&gt;外观模式&lt;/a&gt;、&lt;a href=&quot;/2025/05/10/pattern/basic/structural/Flyweight&quot;&gt;享元模式&lt;/a&gt;、&lt;a href=&quot;/2025/05/10/pattern/basic/structural/Proxy&quot;&gt;代理模式&lt;/a&gt;。&lt;/li&gt;
&lt;li&gt;行为型模式： &lt;a href=&quot;/2025/05/10/pattern/basic/behavioral/TemplateMethod&quot;&gt;模板方法模式&lt;/a&gt;、&lt;a href=&quot;/2025/05/10/pattern/basic/behavioral/Command&quot;&gt;命令模式&lt;/a&gt;、&lt;a href=&quot;/2025/05/10/pattern/basic/behavioral/Iterator&quot;&gt;迭代器模式&lt;/a&gt;、&lt;a href=&quot;/2025/05/10/pattern/basic/behavioral/Observer&quot;&gt;观察者模式&lt;/a&gt;、&lt;a href=&quot;/2025/05/10/pattern/basic/behavioral/Mediator&quot;&gt;中介者模式&lt;/a&gt;、&lt;a href=&quot;/2025/05/10/pattern/basic/behavioral/Memento&quot;&gt;备忘录模式&lt;/a&gt;、&lt;a href=&quot;/2025/05/10/pattern/basic/behavioral/Interpreter&quot;&gt;解析器模式&lt;/a&gt;、&lt;a href=&quot;/2025/05/10/pattern/basic/behavioral/State&quot;&gt;状态模式&lt;/a&gt;、&lt;a href=&quot;/2025/05/10/pattern/basic/behavioral/Strategy&quot;&gt;策略模式&lt;/a&gt;、&lt;a href=&quot;/2025/05/10/pattern/basic/behavioral/ChainOfResponsibility&quot;&gt;责任链模式&lt;/a&gt;、&lt;a href=&quot;/2025/05/10/pattern/basic/behavioral/Visitor&quot;&gt;访问者模式&lt;/a&gt;。&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    <content src="https://galudisu.info/%3Cp%3E%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F(Design%20Pattern)%E6%98%AF%E4%B8%80%E5%A5%97%E8%A2%AB%E5%8F%8D%E5%A4%8D%E4%BD%BF%E7%94%A8%E3%80%81%E5%A4%9A%E6%95%B0%E4%BA%BA%E7%9F%A5%E6%99%93%E7%9A%84%EF%BC%8C%E7%BB%8F%E8%BF%87%E5%88%86%E7%B1%BB%E7%BC%96%E7%9B%AE%E7%9A%84%E3%80%81%E4%BB%A3%E7%A0%81%E8%AE%BE%E8%AE%A1%E7%BB%8F%E9%AA%8C%E7%9A%84%E6%80%BB%E7%BB%93%E3%80%82%3C/p%3E%3Cp%3E%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%88%86%E4%B8%BA%E4%B8%89%E7%A7%8D%E7%B1%BB%E5%9E%8B%EF%BC%8C%E5%85%B123%E7%A7%8D%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F%EF%BC%9A%20%3Ca%20href=%22/2025/05/10/pattern/basic/creational/Singleton/%22%3E%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%3C/a%3E%E3%80%81%3Ca%20href=%22/2025/05/10/pattern/basic/creational/Factory/#%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82-Abstract-Factory-Pattern%22%3E%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%3C/a%3E%E3%80%81%3Ca%20href=%22/2025/05/10/pattern/basic/creational/Builder%22%3E%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F%3C/a%3E%E3%80%81%3Ca%20href=%22/2025/05/10/pattern/basic/creational/Factory/%22%3E%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%3C/a%3E%E3%80%81%3Ca%20href=%22/2025/05/10/pattern/basic/creational/Prototype/%22%3E%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F%3C/a%3E%E3%80%82%3C/li%3E%3Cli%3E%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F%EF%BC%9A%20%3Ca%20href=%22/2025/05/10/pattern/basic/structural/Adapter/%22%3E%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F%3C/a%3E%E3%80%81%3Ca%20href=%22/2025/05/10/pattern/basic/structural/Bridge%22%3E%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F%3C/a%3E%E3%80%81%3Ca%20href=%22/2025/05/10/pattern/basic/structural/Decorator%22%3E%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F%3C/a%3E%E3%80%81%3Ca%20href=%22/2025/05/10/pattern/basic/structural/Composite%22%3E%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F%3C/a%3E%E3%80%81%3Ca%20href=%22/2025/05/10/pattern/basic/structural/Facade%22%3E%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F%3C/a%3E%E3%80%81%3Ca%20href=%22/2025/05/10/pattern/basic/structural/Flyweight%22%3E%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F%3C/a%3E%E3%80%81%3Ca%20href=%22/2025/05/10/pattern/basic/structural/Proxy%22%3E%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%3C/a%3E%E3%80%82%3C/li%3E%3Cli%3E%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F%EF%BC%9A%20%3Ca%20href=%22/2025/05/10/pattern/basic/behavioral/TemplateMethod%22%3E%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F%3C/a%3E%E3%80%81%3Ca%20href=%22/2025/05/10/pattern/basic/behavioral/Command%22%3E%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F%3C/a%3E%E3%80%81%3Ca%20href=%22/2025/05/10/pattern/basic/behavioral/Iterator%22%3E%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F%3C/a%3E%E3%80%81%3Ca%20href=%22/2025/05/10/pattern/basic/behavioral/Observer%22%3E%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%3C/a%3E%E3%80%81%3Ca%20href=%22/2025/05/10/pattern/basic/behavioral/Mediator%22%3E%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F%3C/a%3E%E3%80%81%3Ca%20href=%22/2025/05/10/pattern/basic/behavioral/Memento%22%3E%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F%3C/a%3E%E3%80%81%3Ca%20href=%22/2025/05/10/pattern/basic/behavioral/Interpreter%22%3E%E8%A7%A3%E6%9E%90%E5%99%A8%E6%A8%A1%E5%BC%8F%3C/a%3E%E3%80%81%3Ca%20href=%22/2025/05/10/pattern/basic/behavioral/State%22%3E%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F%3C/a%3E%E3%80%81%3Ca%20href=%22/2025/05/10/pattern/basic/behavioral/Strategy%22%3E%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F%3C/a%3E%E3%80%81%3Ca%20href=%22/2025/05/10/pattern/basic/behavioral/ChainOfResponsibility%22%3E%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F%3C/a%3E%E3%80%81%3Ca%20href=%22/2025/05/10/pattern/basic/behavioral/Visitor%22%3E%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F%3C/a%3E%E3%80%82%3C/li%3E%3C/ul%3E%3Cspan%20id=%22more%22%3E%3C/span%3E" type="image"/>
    
    
    
    <category term="creational" scheme="https://galudisu.info/tags/creational/"/>
    
    <category term="behavioral" scheme="https://galudisu.info/tags/behavioral/"/>
    
    <category term="structural" scheme="https://galudisu.info/tags/structural/"/>
    
  </entry>
  
  <entry>
    <title>Pekko in Kubernetes, application level solution for Digital Transformation</title>
    <link href="https://galudisu.info/2024/06/13/pekko/pekko-in-kubernetes-for-coap/"/>
    <id>https://galudisu.info/2024/06/13/pekko/pekko-in-kubernetes-for-coap/</id>
    <published>2024-06-13T02:44:59.000Z</published>
    <updated>2025-04-27T11:59:08.279Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Digital-Reform"><a class="header-anchor" href="#Digital-Reform">¶</a>Digital Reform</h2><p>There was a vary circumstances from digital governance, industry, manufacture and medicine, and the booming of<br>new business models has stimulated enterprises to accelerate <strong>digital transformation</strong> for better company management<br>and customer service, which further promotes the upgrading and optimization of the Chinese digital economy.</p><span id="more"></span><h2 id="Solution-Cloud-Native"><a class="header-anchor" href="#Solution-Cloud-Native">¶</a>Solution - Cloud Native</h2><p>What’s internet essentially?</p><blockquote><p>移动互联网络应该是<br>一个异步的由事件流驱动的巨大的状态机</p></blockquote><p>There are many reason that we are migrating business service into Cloud Native. One of most important reason is that we<br>need to reduce our costs. Furthermore, as our productivity increases, we will have a vision on the IoT service.</p><p><img src="iot-visable.png" alt="Facets of design in IoT-a good product requires integrated thinking across all of these"></p><p>the digital reform indicate that in the future, the connected things shall be self-diagnosis, reliable, lower-bandwidth,<br>low-carbon, more intelligent, and have a better version management.</p><h2 id="Why-Pekko-if-you-have-kubernetes"><a class="header-anchor" href="#Why-Pekko-if-you-have-kubernetes">¶</a>Why Pekko if you have kubernetes?</h2><blockquote><p>Kubernetes is not the application layer.</p></blockquote><p>As we know, K8S is covering the cluster orchestration, supporting auto-scaling and resilience on the nodes or the pods<br>level.</p><p>How the auto-scaling and self-healing will be handled within the application instances or node?</p><p>Kubernetes will not be able to help with that, another layer such as Pekko need to look after the application<br>communication, remoting, concurrency &amp; parallel processing, responding to application failure, implementing resilience<br>design patterns such as bulk-heading and circuit-breakers on the application node level.</p><p>Non-function design in Kubernetes is stupid, such like GEO-Red, distributed-lock for business, transactions, entity-id<br>tracing, overload protect, data desensitization, Monitoring… etc.</p><p>In short, Kubernetes is looking after elasticity, auto-scaling and resilience outside the nodes while Pekko and other<br>reactive application tools are looking after those within the application layer and the nodes.</p><p>After all, Kubernetes will not be able to fix a poorly designed application that is prone to failure and lacking<br>resilience and elasticity.</p><p>We need a <strong>REAL</strong> <a href="https://www.reactivemanifesto.org/">reactive manifesto</a> application, and below Lightbend diagrams<br>help with understanding the concept:</p><p><img src="pekko-cloud.png" alt="Cloud Native"></p><p><img src="pekko-pod.png" alt="Cloud Pekko"></p><p>So, how to build stateful, resilient and responsive applications in the Cloud?</p><h2 id="Sharding-your-X"><a class="header-anchor" href="#Sharding-your-X">¶</a>Sharding your X</h2><h2 id="Pekko-roles-as-Kubernetes-resource-mapping"><a class="header-anchor" href="#Pekko-roles-as-Kubernetes-resource-mapping">¶</a>Pekko roles as Kubernetes resource mapping</h2><p>We use both Kubernetes Statefulset and Deployment. As we can use Statefulset for the seed nodes, mark as role <code>seed</code>,<br>and Deployment for scaling out worker nodes, marks role <code>worker</code>. In this way, we can maintaion stable and ordered DNS<br>names for the seed nodes, while retain the ability to start multiple Pekko nodes in parallel when scale with<br>Deployment.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  seeds  : Statefulset</span><br><span class="line">  workers: Deployment</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="Gossip.png" alt=""></p><p>We will setup env from Kubernetes and deliver into <code>application.conf</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">cluster &#123;</span><br><span class="line">  # This can also be defined as Java system properties when starting the JVM using the following syntax:</span><br><span class="line">  #</span><br><span class="line">  # -Dpekko.cluster.seed-nodes.0=pekko://Pekko@seed1:2551</span><br><span class="line">  # -Dpekko.cluster.seed-nodes.1=pekko://Pekko@seed2:2551</span><br><span class="line">  #</span><br><span class="line">  seed-nodes = [</span><br><span class="line">    &quot;pekko://Pekko@127.0.0.1:2551&quot;,</span><br><span class="line">    &quot;pekko://Pekko@127.0.0.1:2552&quot;]</span><br><span class="line">  seed-nodes = $&#123;?SEED_NODES&#125;</span><br><span class="line">  roles = [&quot;seed&quot;, &quot;sharding&quot;]</span><br><span class="line">  roles = $&#123;?ROLES&#125;</span><br><span class="line">  sharding.role = &quot;sharding&quot;</span><br><span class="line">  sharding.role = $&#123;?SHARDING_ROLE&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Statefulset-for-entry-seeds"><a class="header-anchor" href="#Statefulset-for-entry-seeds">¶</a>Statefulset for entry -&gt; seeds</h3><p>especially, mTLS in istio. We will map it for traffic entries as a headless service. And the <code>seed</code>-ed service won’t<br>do anything. The resource definition looks like a regular service, but clusterIP set to None:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"> <span class="attr">name:</span> <span class="string">pekko-seed</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">2551</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">    <span class="attr">targetPort:</span> <span class="number">2551</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">5684</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">UDP</span></span><br><span class="line">    <span class="attr">targetPort:</span> <span class="number">5684</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">run:</span> <span class="string">pekko-seed</span></span><br><span class="line">  <span class="attr">clusterIP:</span> <span class="string">None</span></span><br></pre></td></tr></table></figure><p>Every Pekko seed node instance in the Statefulset can be addressed via DNS as <code>$&#123;SEED_NODE_NAME&#125;.pekko-seed</code>.</p><p>Then, create Statefulset of seed nodes:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">StatefulSet</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">run:</span> <span class="string">pekko-seed</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pekko-seed</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">serviceName:</span> <span class="string">pekko-seed</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">pekko-seed</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">pekko-seed</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">pekko-seed</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">localhost:32000/pekko-jdk17-slim:latest</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">POD_NAME</span></span><br><span class="line">          <span class="attr">valueFrom:</span></span><br><span class="line">            <span class="attr">fieldRef:</span></span><br><span class="line">              <span class="attr">fieldPath:</span> <span class="string">metadata.name</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">SEED_NODES.0</span></span><br><span class="line">          <span class="attr">value:</span> <span class="string">pekko://Pekko@pekko-seed-0.pekko-seed:2551</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">SEED_NODES.1</span></span><br><span class="line">          <span class="attr">value:</span> <span class="string">pekko://Pekko@pekko-seed-1.pekko-seed:2551</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ROLES.0</span></span><br><span class="line">          <span class="attr">value:</span> <span class="string">seed</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">SHARDING_ROLE</span></span><br><span class="line">          <span class="attr">value:</span> <span class="string">sharding</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">HOST_NAME</span></span><br><span class="line">          <span class="attr">value:</span> <span class="string">$(POD_NAME).kaxis-seed</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">HOST_PORT</span></span><br><span class="line">          <span class="attr">value:</span> <span class="string">&quot;4684&quot;</span></span><br><span class="line">        <span class="attr">command:</span> [<span class="string">&quot;/bin/sh&quot;</span>, <span class="string">&quot;-c&quot;</span>, <span class="string">&quot;HOST_NAME=$&#123;POD_NAME&#125;.pekko-seed java -jar /app/app.jar&quot;</span>]</span><br><span class="line">        <span class="attr">livenessProbe:</span></span><br><span class="line">          <span class="attr">tcpSocket:</span></span><br><span class="line">            <span class="attr">port:</span> <span class="number">2551</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">2551</span></span><br><span class="line">          <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">5684</span></span><br><span class="line">          <span class="attr">protocol:</span> <span class="string">UDP</span></span><br></pre></td></tr></table></figure><p>First of all, every seed node will have a stable name (e.g. pekko-seed-0, pekko-ssed-1). This name is known as the<br>Kubernetes pod name. And then use it to construct the addressable DNS name, such as <code>pekko-seed-0.pekko-seed</code>.</p><p>Once deployment the Pekko seed nodes:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f pekko-seeds.yaml</span><br></pre></td></tr></table></figure><p>We will seed the seeds that were created sequentially:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kubectl get pods</span><br><span class="line">NAME                          READY     STATUS    RESTARTS   AGE</span><br><span class="line">pekko-seed-0                   1/1       Running   0          15h</span><br><span class="line">pekko-seed-1                   1/1       Running   0          15h</span><br></pre></td></tr></table></figure><p>As mentioned before, the seed nodes won’t do anything, below diagram show it just play the role for traffic transform,<br>cluster communication and cluster init.</p><p>This part is very-very important!! for vary business service, such like coap, diameter protocol based on udp that<br>Kubernetes doesn’t provide a full-stack support for loadbalancer.</p><h3 id="Deployment-for-loadbancer-workers"><a class="header-anchor" href="#Deployment-for-loadbancer-workers">¶</a>Deployment for loadbancer -&gt; workers</h3><p>Next, deploy the worker nodes using Deployment. It use the Downward API to assign the Pod IP address as te Pekko node’s<br>hostname.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pekko-worker</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">pekko-worker</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">pekko-worker</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">terminationGracePeriodSeconds:</span> <span class="number">10</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">pekko-worker</span></span><br><span class="line">          <span class="attr">image:</span> <span class="string">localhost:32000/pekko-jdk17-slim:latest</span></span><br><span class="line">          <span class="attr">imagePullPolicy:</span> <span class="string">Always</span></span><br><span class="line">          <span class="attr">resources:</span></span><br><span class="line">            <span class="attr">requests:</span></span><br><span class="line">              <span class="attr">memory:</span> <span class="string">&quot;1Gi&quot;</span></span><br><span class="line">              <span class="attr">cpu:</span> <span class="string">&quot;250m&quot;</span></span><br><span class="line">            <span class="attr">limits:</span></span><br><span class="line">              <span class="attr">memory:</span> <span class="string">&quot;2Gi&quot;</span></span><br><span class="line">              <span class="attr">cpu:</span> <span class="string">&quot;500m&quot;</span></span><br><span class="line">          <span class="attr">env:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">POD_NAME</span></span><br><span class="line">              <span class="attr">valueFrom:</span></span><br><span class="line">                <span class="attr">fieldRef:</span></span><br><span class="line">                  <span class="attr">fieldPath:</span> <span class="string">status.podIP</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">SEED_NODES.0</span></span><br><span class="line">              <span class="attr">value:</span> <span class="string">pekko://Pekko@pekko-seed-0.pekko-seed:4684</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">SEED_NODES.1</span></span><br><span class="line">              <span class="attr">value:</span> <span class="string">pekko://Pekko@pekko-seed-1.pekko-seed:4684</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ROLES.0</span></span><br><span class="line">              <span class="attr">value:</span> <span class="string">sharding</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">SHARDING_ROLE</span></span><br><span class="line">              <span class="attr">value:</span> <span class="string">sharding</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">HOST_NAME</span></span><br><span class="line">              <span class="attr">value:</span> <span class="string">&quot;$(POD_NAME)&quot;</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">HOST_PORT</span></span><br><span class="line">              <span class="attr">value:</span> <span class="string">&quot;4684&quot;</span></span><br><span class="line">          <span class="attr">livenessProbe:</span></span><br><span class="line">            <span class="attr">httpGet:</span></span><br><span class="line">              <span class="attr">port:</span> <span class="number">6684</span></span><br><span class="line">              <span class="attr">path:</span> <span class="string">health/alive</span></span><br><span class="line">            <span class="attr">initialDelaySeconds:</span> <span class="number">30</span></span><br><span class="line">            <span class="attr">periodSeconds:</span> <span class="number">20</span></span><br><span class="line">          <span class="attr">readinessProbe:</span></span><br><span class="line">            <span class="attr">httpGet:</span></span><br><span class="line">              <span class="attr">port:</span> <span class="number">6684</span></span><br><span class="line">              <span class="attr">path:</span> <span class="string">health/ready</span></span><br><span class="line">            <span class="attr">initialDelaySeconds:</span> <span class="number">30</span></span><br><span class="line">            <span class="attr">periodSeconds:</span> <span class="number">20</span></span><br><span class="line">          <span class="attr">ports:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">5684</span></span><br><span class="line">              <span class="attr">name:</span> <span class="string">tcp-udp</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">4684</span></span><br><span class="line">              <span class="attr">name:</span> <span class="string">http-gossip</span></span><br><span class="line">      <span class="attr">dnsPolicy:</span> <span class="string">ClusterFirst</span></span><br><span class="line">      <span class="attr">imagePullSecrets:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">regcred</span></span><br></pre></td></tr></table></figure><p>Once deloyed, you can validate that all nodes are up and running:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl get pods</span></span><br><span class="line">NAME                           READY     STATUS    RESTARTS   AGE</span><br><span class="line">pekko-seed-0                    1/1       Running   0          8s</span><br><span class="line">pekko-seed-1                    1/1       Running   0          6s</span><br><span class="line">pekko-worker-2263404214-8c266   1/1       Running   0          8s</span><br><span class="line">pekko-worker-2263404214-9ws3k   1/1       Running   0          8s</span><br><span class="line">pekko-worker-2263404214-f2tp3   1/1       Running   0          8s</span><br><span class="line">pekko-worker-2263404214-lkvz3   1/1       Running   0          8s</span><br></pre></td></tr></table></figure><p>You can validate that the nodes have joined the cluster by inspecting the logs of any of the Pekko nodes. For<br>example, to tail the first seed node’s log:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">kubect logs -f pekko-seed-0</span><br><span class="line">[INFO] [02/12/2017 15:36:53.568] [main] [pekko.remote.Remoting] Starting remoting</span><br><span class="line">[INFO] [02/12/2017 15:36:53.707] [main] [pekko.remote.Remoting] Remoting started; listening on addresses :[pekko.tcp://Pekko@pekko-seed-0.akka-seed:2551]</span><br><span class="line">...</span><br><span class="line">[INFO] [02/12/2017 15:37:05.101] [ClusterSystem-pekko.actor.default-dispatcher-16] [pekko.cluster.Cluster(pekko://ClusterSystem)] Cluster Node [pekko.tcp://Pekko@pekko-seed-0.pekko-seed:2551] - Node [pekko.tcp://Pekko@pekko-seed-1.pekko-seed:2551] is JOINING, roles []</span><br><span class="line">[INFO] [02/12/2017 15:37:06.854] [ClusterSystem-pekko.actor.default-dispatcher-16] [pekko://ClusterSystem/user/$a] Member is Up: Member(address = akka.tcp://Pekko@10.44.2.10:2551, status = Up)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>Also, you can simply attach Kubernetes HPA:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: autoscaling/v1</span><br><span class="line">kind: HorizontalPodAutoscaler</span><br><span class="line">metadata:</span><br><span class="line">  name: pekko-worker</span><br><span class="line">spec:</span><br><span class="line">  maxReplicas: 3</span><br><span class="line">  minReplicas: 1</span><br><span class="line">  scaleTargetRef:</span><br><span class="line">    apiVersion: apps/v1</span><br><span class="line">    kind: Deployment</span><br><span class="line">    name: pekko-worker</span><br><span class="line">  targetCPUUtilizationPercentage: 15</span><br></pre></td></tr></table></figure><h2 id="Health-check"><a class="header-anchor" href="#Health-check">¶</a>Health check</h2><p>Pekko already implementation cluster health check management:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">management</span></span><br><span class="line">management &#123;</span><br><span class="line">  http.hostname = 127.0.0.1</span><br><span class="line">  http.hostname = $&#123;?HOST_NAME&#125;</span><br><span class="line">  http.bind-hostname = 0.0.0.0</span><br><span class="line">  http.bind-hostname = $&#123;?HOST_NAME&#125;</span><br><span class="line">  health-checks &#123;</span><br><span class="line">    readiness-path = &quot;health/ready&quot;</span><br><span class="line">    liveness-path = &quot;health/alive&quot;</span><br><span class="line">    readiness-checks &#123;</span><br><span class="line">      # Default health check for cluster.</span><br><span class="line">      cluster-membership = &quot;org.apache.pekko.management.cluster.javadsl.ClusterMembershipCheck&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Summary"><a class="header-anchor" href="#Summary">¶</a>Summary</h2><p>Please check my own repo in <a href="https://github.com/barudisshu/kaxis">GitHub</a>, if you need more investigate.</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;Digital-Reform&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#Digital-Reform&quot;&gt;¶&lt;/a&gt;Digital Reform&lt;/h2&gt;
&lt;p&gt;There was a vary circumstances from digital governance, industry, manufacture and medicine, and the booming of&lt;br&gt;
new business models has stimulated enterprises to accelerate &lt;strong&gt;digital transformation&lt;/strong&gt; for better company management&lt;br&gt;
and customer service, which further promotes the upgrading and optimization of the Chinese digital economy.&lt;/p&gt;</summary>
    
    
    <content src="https://galudisu.info/%3Ch2%20id=%22Digital-Reform%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Digital-Reform%22%3E%C2%B6%3C/a%3EDigital%20Reform%3C/h2%3E%3Cp%3EThere%20was%20a%20vary%20circumstances%20from%20digital%20governance,%20industry,%20manufacture%20and%20medicine,%20and%20the%20booming%20of%3Cbr%3Enew%20business%20models%20has%20stimulated%20enterprises%20to%20accelerate%20%3Cstrong%3Edigital%20transformation%3C/strong%3E%20for%20better%20company%20management%3Cbr%3Eand%20customer%20service,%20which%20further%20promotes%20the%20upgrading%20and%20optimization%20of%20the%20Chinese%20digital%20economy.%3C/p%3E%3Cspan%20id=%22more%22%3E%3C/span%3E%3Ch2%20id=%22Solution-Cloud-Native%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Solution-Cloud-Native%22%3E%C2%B6%3C/a%3ESolution%20-%20Cloud%20Native%3C/h2%3E%3Cp%3EWhat%E2%80%99s%20internet%20essentially?%3C/p%3E%3Cblockquote%3E%3Cp%3E%E7%A7%BB%E5%8A%A8%E4%BA%92%E8%81%94%E7%BD%91%E7%BB%9C%E5%BA%94%E8%AF%A5%E6%98%AF%3Cbr%3E%E4%B8%80%E4%B8%AA%E5%BC%82%E6%AD%A5%E7%9A%84%E7%94%B1%E4%BA%8B%E4%BB%B6%E6%B5%81%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%B7%A8%E5%A4%A7%E7%9A%84%E7%8A%B6%E6%80%81%E6%9C%BA%3C/p%3E%3C/blockquote%3E%3Cp%3EThere%20are%20many%20reason%20that%20we%20are%20migrating%20business%20service%20into%20Cloud%20Native.%20One%20of%20most%20important%20reason%20is%20that%20we%3Cbr%3Eneed%20to%20reduce%20our%20costs.%20Furthermore,%20as%20our%20productivity%20increases,%20we%20will%20have%20a%20vision%20on%20the%20IoT%20service.%3C/p%3E%3Cp%3E%3Cimg%20src=%22iot-visable.png%22%20alt=%22Facets%20of%20design%20in%20IoT-a%20good%20product%20requires%20integrated%20thinking%20across%20all%20of%20these%22%3E%3C/p%3E%3Cp%3Ethe%20digital%20reform%20indicate%20that%20in%20the%20future,%20the%20connected%20things%20shall%20be%20self-diagnosis,%20reliable,%20lower-bandwidth,%3Cbr%3Elow-carbon,%20more%20intelligent,%20and%20have%20a%20better%20version%20management.%3C/p%3E%3Ch2%20id=%22Why-Pekko-if-you-have-kubernetes%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Why-Pekko-if-you-have-kubernetes%22%3E%C2%B6%3C/a%3EWhy%20Pekko%20if%20you%20have%20kubernetes?%3C/h2%3E%3Cblockquote%3E%3Cp%3EKubernetes%20is%20not%20the%20application%20layer.%3C/p%3E%3C/blockquote%3E%3Cp%3EAs%20we%20know,%20K8S%20is%20covering%20the%20cluster%20orchestration,%20supporting%20auto-scaling%20and%20resilience%20on%20the%20nodes%20or%20the%20pods%3Cbr%3Elevel.%3C/p%3E%3Cp%3EHow%20the%20auto-scaling%20and%20self-healing%20will%20be%20handled%20within%20the%20application%20instances%20or%20node?%3C/p%3E%3Cp%3EKubernetes%20will%20not%20be%20able%20to%20help%20with%20that,%20another%20layer%20such%20as%20Pekko%20need%20to%20look%20after%20the%20application%3Cbr%3Ecommunication,%20remoting,%20concurrency%20&amp;amp;%20parallel%20processing,%20responding%20to%20application%20failure,%20implementing%20resilience%3Cbr%3Edesign%20patterns%20such%20as%20bulk-heading%20and%20circuit-breakers%20on%20the%20application%20node%20level.%3C/p%3E%3Cp%3ENon-function%20design%20in%20Kubernetes%20is%20stupid,%20such%20like%20GEO-Red,%20distributed-lock%20for%20business,%20transactions,%20entity-id%3Cbr%3Etracing,%20overload%20protect,%20data%20desensitization,%20Monitoring%E2%80%A6%20etc.%3C/p%3E%3Cp%3EIn%20short,%20Kubernetes%20is%20looking%20after%20elasticity,%20auto-scaling%20and%20resilience%20outside%20the%20nodes%20while%20Pekko%20and%20other%3Cbr%3Ereactive%20application%20tools%20are%20looking%20after%20those%20within%20the%20application%20layer%20and%20the%20nodes.%3C/p%3E%3Cp%3EAfter%20all,%20Kubernetes%20will%20not%20be%20able%20to%20fix%20a%20poorly%20designed%20application%20that%20is%20prone%20to%20failure%20and%20lacking%3Cbr%3Eresilience%20and%20elasticity.%3C/p%3E%3Cp%3EWe%20need%20a%20%3Cstrong%3EREAL%3C/strong%3E%20%3Ca%20href=%22https:/www.reactivemanifesto.org/%22%3Ereactive%20manifesto%3C/a%3E%20application,%20and%20below%20Lightbend%20diagrams%3Cbr%3Ehelp%20with%20understanding%20the%20concept:%3C/p%3E%3Cp%3E%3Cimg%20src=%22pekko-cloud.png%22%20alt=%22Cloud%20Native%22%3E%3C/p%3E%3Cp%3E%3Cimg%20src=%22pekko-pod.png%22%20alt=%22Cloud%20Pekko%22%3E%3C/p%3E%3Cp%3ESo,%20how%20to%20build%20stateful,%20resilient%20and%20responsive%20applications%20in%20the%20Cloud?%3C/p%3E%3Ch2%20id=%22Sharding-your-X%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Sharding-your-X%22%3E%C2%B6%3C/a%3ESharding%20your%20X%3C/h2%3E%3Ch2%20id=%22Pekko-roles-as-Kubernetes-resource-mapping%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Pekko-roles-as-Kubernetes-resource-mapping%22%3E%C2%B6%3C/a%3EPekko%20roles%20as%20Kubernetes%20resource%20mapping%3C/h2%3E%3Cp%3EWe%20use%20both%20Kubernetes%20Statefulset%20and%20Deployment.%20As%20we%20can%20use%20Statefulset%20for%20the%20seed%20nodes,%20mark%20as%20role%20%3Ccode%3Eseed%3C/code%3E,%3Cbr%3Eand%20Deployment%20for%20scaling%20out%20worker%20nodes,%20marks%20role%20%3Ccode%3Eworker%3C/code%3E.%20In%20this%20way,%20we%20can%20maintaion%20stable%20and%20ordered%20DNS%3Cbr%3Enames%20for%20the%20seed%20nodes,%20while%20retain%20the%20ability%20to%20start%20multiple%20Pekko%20nodes%20in%20parallel%20when%20scale%20with%3Cbr%3EDeployment.%3C/p%3E%3Cfigure%20class=%22highlight%20plaintext%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20seeds%20%20:%20Statefulset%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20workers:%20Deployment%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Cimg%20src=%22Gossip.png%22%20alt=%22%22%3E%3C/p%3E%3Cp%3EWe%20will%20setup%20env%20from%20Kubernetes%20and%20deliver%20into%20%3Ccode%3Eapplication.conf%3C/code%3E%3C/p%3E%3Cfigure%20class=%22highlight%20plaintext%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3Ecluster%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20#%20This%20can%20also%20be%20defined%20as%20Java%20system%20properties%20when%20starting%20the%20JVM%20using%20the%20following%20syntax:%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20#%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20#%20-Dpekko.cluster.seed-nodes.0=pekko:/Pekko@seed1:2551%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20#%20-Dpekko.cluster.seed-nodes.1=pekko:/Pekko@seed2:2551%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20#%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20seed-nodes%20=%20[%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;quot;pekko:/Pekko@127.0.0.1:2551&amp;quot;,%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;quot;pekko:/Pekko@127.0.0.1:2552&amp;quot;]%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20seed-nodes%20=%20$&amp;#123;?SEED_NODES&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20roles%20=%20[&amp;quot;seed&amp;quot;,%20&amp;quot;sharding&amp;quot;]%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20roles%20=%20$&amp;#123;?ROLES&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20sharding.role%20=%20&amp;quot;sharding&amp;quot;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20sharding.role%20=%20$&amp;#123;?SHARDING_ROLE&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Ch3%20id=%22Statefulset-for-entry-seeds%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Statefulset-for-entry-seeds%22%3E%C2%B6%3C/a%3EStatefulset%20for%20entry%20-&amp;gt;%20seeds%3C/h3%3E%3Cp%3Eespecially,%20mTLS%20in%20istio.%20We%20will%20map%20it%20for%20traffic%20entries%20as%20a%20headless%20service.%20And%20the%20%3Ccode%3Eseed%3C/code%3E-ed%20service%20won%E2%80%99t%3Cbr%3Edo%20anything.%20The%20resource%20definition%20looks%20like%20a%20regular%20service,%20but%20clusterIP%20set%20to%20None:%3C/p%3E%3Cfigure%20class=%22highlight%20yaml%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22attr%22%3EapiVersion:%3C/span%3E%20%3Cspan%20class=%22string%22%3Ev1%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22attr%22%3Ekind:%3C/span%3E%20%3Cspan%20class=%22string%22%3EService%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22attr%22%3Emetadata:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%3Cspan%20class=%22attr%22%3Ename:%3C/span%3E%20%3Cspan%20class=%22string%22%3Epekko-seed%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22attr%22%3Espec:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22attr%22%3Eports:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22bullet%22%3E-%3C/span%3E%20%3Cspan%20class=%22attr%22%3Eport:%3C/span%3E%20%3Cspan%20class=%22number%22%3E2551%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22attr%22%3Eprotocol:%3C/span%3E%20%3Cspan%20class=%22string%22%3ETCP%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22attr%22%3EtargetPort:%3C/span%3E%20%3Cspan%20class=%22number%22%3E2551%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22bullet%22%3E-%3C/span%3E%20%3Cspan%20class=%22attr%22%3Eport:%3C/span%3E%20%3Cspan%20class=%22number%22%3E5684%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22attr%22%3Eprotocol:%3C/span%3E%20%3Cspan%20class=%22string%22%3EUDP%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22attr%22%3EtargetPort:%3C/span%3E%20%3Cspan%20class=%22number%22%3E5684%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22attr%22%3Eselector:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22attr%22%3Erun:%3C/span%3E%20%3Cspan%20class=%22string%22%3Epekko-seed%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22attr%22%3EclusterIP:%3C/span%3E%20%3Cspan%20class=%22string%22%3ENone%3C/span%3E%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3EEvery%20Pekko%20seed%20node%20instance%20in%20the%20Statefulset%20can%20be%20addressed%20via%20DNS%20as%20%3Ccode%3E$&amp;#123;SEED_NODE_NAME&amp;#125;.pekko-seed%3C/code%3E.%3C/p%3E%3Cp%3EThen,%20create%20Statefulset%20of%20seed%20nodes:%3C/p%3E%3Cfigure%20class=%22highlight%20yaml%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E18%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E19%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E21%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E22%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E23%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E24%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E25%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E26%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E27%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E28%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E29%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E30%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E31%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E32%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E33%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E34%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E35%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E36%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E37%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E38%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E39%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E40%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E41%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E42%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E43%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E44%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E45%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E46%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22attr%22%3EapiVersion:%3C/span%3E%20%3Cspan%20class=%22string%22%3Eapps/v1beta1%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22attr%22%3Ekind:%3C/span%3E%20%3Cspan%20class=%22string%22%3EStatefulSet%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22attr%22%3Emetadata:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22attr%22%3Elabels:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22attr%22%3Erun:%3C/span%3E%20%3Cspan%20class=%22string%22%3Epekko-seed%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22attr%22%3Ename:%3C/span%3E%20%3Cspan%20class=%22string%22%3Epekko-seed%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22attr%22%3Espec:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22attr%22%3EserviceName:%3C/span%3E%20%3Cspan%20class=%22string%22%3Epekko-seed%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22attr%22%3Ereplicas:%3C/span%3E%20%3Cspan%20class=%22number%22%3E2%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22attr%22%3Eselector:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22attr%22%3EmatchLabels:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Erun:%3C/span%3E%20%3Cspan%20class=%22string%22%3Epekko-seed%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22attr%22%3Etemplate:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22attr%22%3Emetadata:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Elabels:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Erun:%3C/span%3E%20%3Cspan%20class=%22string%22%3Epekko-seed%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22attr%22%3Espec:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Econtainers:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%3Cspan%20class=%22bullet%22%3E-%3C/span%3E%20%3Cspan%20class=%22attr%22%3Ename:%3C/span%3E%20%3Cspan%20class=%22string%22%3Epekko-seed%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Eimage:%3C/span%3E%20%3Cspan%20class=%22string%22%3Elocalhost:32000/pekko-jdk17-slim:latest%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Eenv:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22bullet%22%3E-%3C/span%3E%20%3Cspan%20class=%22attr%22%3Ename:%3C/span%3E%20%3Cspan%20class=%22string%22%3EPOD_NAME%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3EvalueFrom:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3EfieldRef:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3EfieldPath:%3C/span%3E%20%3Cspan%20class=%22string%22%3Emetadata.name%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22bullet%22%3E-%3C/span%3E%20%3Cspan%20class=%22attr%22%3Ename:%3C/span%3E%20%3Cspan%20class=%22string%22%3ESEED_NODES.0%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Evalue:%3C/span%3E%20%3Cspan%20class=%22string%22%3Epekko:/Pekko@pekko-seed-0.pekko-seed:2551%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22bullet%22%3E-%3C/span%3E%20%3Cspan%20class=%22attr%22%3Ename:%3C/span%3E%20%3Cspan%20class=%22string%22%3ESEED_NODES.1%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Evalue:%3C/span%3E%20%3Cspan%20class=%22string%22%3Epekko:/Pekko@pekko-seed-1.pekko-seed:2551%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22bullet%22%3E-%3C/span%3E%20%3Cspan%20class=%22attr%22%3Ename:%3C/span%3E%20%3Cspan%20class=%22string%22%3EROLES.0%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Evalue:%3C/span%3E%20%3Cspan%20class=%22string%22%3Eseed%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22bullet%22%3E-%3C/span%3E%20%3Cspan%20class=%22attr%22%3Ename:%3C/span%3E%20%3Cspan%20class=%22string%22%3ESHARDING_ROLE%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Evalue:%3C/span%3E%20%3Cspan%20class=%22string%22%3Esharding%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22bullet%22%3E-%3C/span%3E%20%3Cspan%20class=%22attr%22%3Ename:%3C/span%3E%20%3Cspan%20class=%22string%22%3EHOST_NAME%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Evalue:%3C/span%3E%20%3Cspan%20class=%22string%22%3E$(POD_NAME).kaxis-seed%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22bullet%22%3E-%3C/span%3E%20%3Cspan%20class=%22attr%22%3Ename:%3C/span%3E%20%3Cspan%20class=%22string%22%3EHOST_PORT%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Evalue:%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;quot;4684&amp;quot;%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Ecommand:%3C/span%3E%20[%3Cspan%20class=%22string%22%3E&amp;quot;/bin/sh&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22string%22%3E&amp;quot;-c&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22string%22%3E&amp;quot;HOST_NAME=$&amp;#123;POD_NAME&amp;#125;.pekko-seed%20java%20-jar%20/app/app.jar&amp;quot;%3C/span%3E]%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3ElivenessProbe:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3EtcpSocket:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Eport:%3C/span%3E%20%3Cspan%20class=%22number%22%3E2551%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Eports:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22bullet%22%3E-%3C/span%3E%20%3Cspan%20class=%22attr%22%3EcontainerPort:%3C/span%3E%20%3Cspan%20class=%22number%22%3E2551%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Eprotocol:%3C/span%3E%20%3Cspan%20class=%22string%22%3ETCP%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22bullet%22%3E-%3C/span%3E%20%3Cspan%20class=%22attr%22%3EcontainerPort:%3C/span%3E%20%3Cspan%20class=%22number%22%3E5684%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Eprotocol:%3C/span%3E%20%3Cspan%20class=%22string%22%3EUDP%3C/span%3E%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3EFirst%20of%20all,%20every%20seed%20node%20will%20have%20a%20stable%20name%20(e.g.%20pekko-seed-0,%20pekko-ssed-1).%20This%20name%20is%20known%20as%20the%3Cbr%3EKubernetes%20pod%20name.%20And%20then%20use%20it%20to%20construct%20the%20addressable%20DNS%20name,%20such%20as%20%3Ccode%3Epekko-seed-0.pekko-seed%3C/code%3E.%3C/p%3E%3Cp%3EOnce%20deployment%20the%20Pekko%20seed%20nodes:%3C/p%3E%3Cfigure%20class=%22highlight%20shell%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3Ekubectl%20apply%20-f%20pekko-seeds.yaml%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3EWe%20will%20seed%20the%20seeds%20that%20were%20created%20sequentially:%3C/p%3E%3Cfigure%20class=%22highlight%20shell%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3Ekubectl%20get%20pods%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3ENAME%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20READY%20%20%20%20%20STATUS%20%20%20%20RESTARTS%20%20%20AGE%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Epekko-seed-0%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%201/1%20%20%20%20%20%20%20Running%20%20%200%20%20%20%20%20%20%20%20%20%2015h%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Epekko-seed-1%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%201/1%20%20%20%20%20%20%20Running%20%20%200%20%20%20%20%20%20%20%20%20%2015h%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3EAs%20mentioned%20before,%20the%20seed%20nodes%20won%E2%80%99t%20do%20anything,%20below%20diagram%20show%20it%20just%20play%20the%20role%20for%20traffic%20transform,%3Cbr%3Ecluster%20communication%20and%20cluster%20init.%3C/p%3E%3Cp%3EThis%20part%20is%20very-very%20important!!%20for%20vary%20business%20service,%20such%20like%20coap,%20diameter%20protocol%20based%20on%20udp%20that%3Cbr%3EKubernetes%20doesn%E2%80%99t%20provide%20a%20full-stack%20support%20for%20loadbalancer.%3C/p%3E%3Ch3%20id=%22Deployment-for-loadbancer-workers%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Deployment-for-loadbancer-workers%22%3E%C2%B6%3C/a%3EDeployment%20for%20loadbancer%20-&amp;gt;%20workers%3C/h3%3E%3Cp%3ENext,%20deploy%20the%20worker%20nodes%20using%20Deployment.%20It%20use%20the%20Downward%20API%20to%20assign%20the%20Pod%20IP%20address%20as%20te%20Pekko%20node%E2%80%99s%3Cbr%3Ehostname.%3C/p%3E%3Cfigure%20class=%22highlight%20yaml%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E18%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E19%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E21%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E22%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E23%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E24%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E25%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E26%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E27%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E28%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E29%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E30%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E31%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E32%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E33%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E34%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E35%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E36%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E37%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E38%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E39%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E40%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E41%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E42%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E43%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E44%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E45%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E46%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E47%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E48%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E49%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E50%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E51%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E52%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E53%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E54%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E55%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E56%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E57%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E58%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E59%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E60%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E61%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E62%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E63%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22attr%22%3EapiVersion:%3C/span%3E%20%3Cspan%20class=%22string%22%3Eapps/v1%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22attr%22%3Ekind:%3C/span%3E%20%3Cspan%20class=%22string%22%3EDeployment%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22attr%22%3Emetadata:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22attr%22%3Ename:%3C/span%3E%20%3Cspan%20class=%22string%22%3Epekko-worker%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22attr%22%3Espec:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22attr%22%3Eselector:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22attr%22%3EmatchLabels:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Eapp:%3C/span%3E%20%3Cspan%20class=%22string%22%3Epekko-worker%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22attr%22%3Ereplicas:%3C/span%3E%20%3Cspan%20class=%22number%22%3E3%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%3Cspan%20class=%22attr%22%3Etemplate:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22attr%22%3Emetadata:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Elabels:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Eapp:%3C/span%3E%20%3Cspan%20class=%22string%22%3Epekko-worker%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22attr%22%3Espec:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3EterminationGracePeriodSeconds:%3C/span%3E%20%3Cspan%20class=%22number%22%3E10%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Econtainers:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22bullet%22%3E-%3C/span%3E%20%3Cspan%20class=%22attr%22%3Ename:%3C/span%3E%20%3Cspan%20class=%22string%22%3Epekko-worker%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Eimage:%3C/span%3E%20%3Cspan%20class=%22string%22%3Elocalhost:32000/pekko-jdk17-slim:latest%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3EimagePullPolicy:%3C/span%3E%20%3Cspan%20class=%22string%22%3EAlways%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Eresources:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Erequests:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Ememory:%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;quot;1Gi&amp;quot;%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Ecpu:%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;quot;250m&amp;quot;%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Elimits:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Ememory:%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;quot;2Gi&amp;quot;%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Ecpu:%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;quot;500m&amp;quot;%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Eenv:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22bullet%22%3E-%3C/span%3E%20%3Cspan%20class=%22attr%22%3Ename:%3C/span%3E%20%3Cspan%20class=%22string%22%3EPOD_NAME%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3EvalueFrom:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3EfieldRef:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3EfieldPath:%3C/span%3E%20%3Cspan%20class=%22string%22%3Estatus.podIP%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22bullet%22%3E-%3C/span%3E%20%3Cspan%20class=%22attr%22%3Ename:%3C/span%3E%20%3Cspan%20class=%22string%22%3ESEED_NODES.0%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Evalue:%3C/span%3E%20%3Cspan%20class=%22string%22%3Epekko:/Pekko@pekko-seed-0.pekko-seed:4684%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22bullet%22%3E-%3C/span%3E%20%3Cspan%20class=%22attr%22%3Ename:%3C/span%3E%20%3Cspan%20class=%22string%22%3ESEED_NODES.1%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Evalue:%3C/span%3E%20%3Cspan%20class=%22string%22%3Epekko:/Pekko@pekko-seed-1.pekko-seed:4684%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22bullet%22%3E-%3C/span%3E%20%3Cspan%20class=%22attr%22%3Ename:%3C/span%3E%20%3Cspan%20class=%22string%22%3EROLES.0%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Evalue:%3C/span%3E%20%3Cspan%20class=%22string%22%3Esharding%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22bullet%22%3E-%3C/span%3E%20%3Cspan%20class=%22attr%22%3Ename:%3C/span%3E%20%3Cspan%20class=%22string%22%3ESHARDING_ROLE%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Evalue:%3C/span%3E%20%3Cspan%20class=%22string%22%3Esharding%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22bullet%22%3E-%3C/span%3E%20%3Cspan%20class=%22attr%22%3Ename:%3C/span%3E%20%3Cspan%20class=%22string%22%3EHOST_NAME%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Evalue:%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;quot;$(POD_NAME)&amp;quot;%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22bullet%22%3E-%3C/span%3E%20%3Cspan%20class=%22attr%22%3Ename:%3C/span%3E%20%3Cspan%20class=%22string%22%3EHOST_PORT%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Evalue:%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;quot;4684&amp;quot;%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3ElivenessProbe:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3EhttpGet:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Eport:%3C/span%3E%20%3Cspan%20class=%22number%22%3E6684%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Epath:%3C/span%3E%20%3Cspan%20class=%22string%22%3Ehealth/alive%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3EinitialDelaySeconds:%3C/span%3E%20%3Cspan%20class=%22number%22%3E30%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3EperiodSeconds:%3C/span%3E%20%3Cspan%20class=%22number%22%3E20%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3EreadinessProbe:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3EhttpGet:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Eport:%3C/span%3E%20%3Cspan%20class=%22number%22%3E6684%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Epath:%3C/span%3E%20%3Cspan%20class=%22string%22%3Ehealth/ready%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3EinitialDelaySeconds:%3C/span%3E%20%3Cspan%20class=%22number%22%3E30%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3EperiodSeconds:%3C/span%3E%20%3Cspan%20class=%22number%22%3E20%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Eports:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22bullet%22%3E-%3C/span%3E%20%3Cspan%20class=%22attr%22%3EcontainerPort:%3C/span%3E%20%3Cspan%20class=%22number%22%3E5684%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Ename:%3C/span%3E%20%3Cspan%20class=%22string%22%3Etcp-udp%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22bullet%22%3E-%3C/span%3E%20%3Cspan%20class=%22attr%22%3EcontainerPort:%3C/span%3E%20%3Cspan%20class=%22number%22%3E4684%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3Ename:%3C/span%3E%20%3Cspan%20class=%22string%22%3Ehttp-gossip%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3EdnsPolicy:%3C/span%3E%20%3Cspan%20class=%22string%22%3EClusterFirst%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%3Cspan%20class=%22attr%22%3EimagePullSecrets:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22bullet%22%3E-%3C/span%3E%20%3Cspan%20class=%22attr%22%3Ename:%3C/span%3E%20%3Cspan%20class=%22string%22%3Eregcred%3C/span%3E%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3EOnce%20deloyed,%20you%20can%20validate%20that%20all%20nodes%20are%20up%20and%20running:%3C/p%3E%3Cfigure%20class=%22highlight%20shell%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22meta%20prompt_%22%3E$%20%3C/span%3E%3Cspan%20class=%22language-bash%22%3Ekubectl%20get%20pods%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3ENAME%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20READY%20%20%20%20%20STATUS%20%20%20%20RESTARTS%20%20%20AGE%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Epekko-seed-0%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%201/1%20%20%20%20%20%20%20Running%20%20%200%20%20%20%20%20%20%20%20%20%208s%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Epekko-seed-1%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%201/1%20%20%20%20%20%20%20Running%20%20%200%20%20%20%20%20%20%20%20%20%206s%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Epekko-worker-2263404214-8c266%20%20%201/1%20%20%20%20%20%20%20Running%20%20%200%20%20%20%20%20%20%20%20%20%208s%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Epekko-worker-2263404214-9ws3k%20%20%201/1%20%20%20%20%20%20%20Running%20%20%200%20%20%20%20%20%20%20%20%20%208s%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Epekko-worker-2263404214-f2tp3%20%20%201/1%20%20%20%20%20%20%20Running%20%20%200%20%20%20%20%20%20%20%20%20%208s%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Epekko-worker-2263404214-lkvz3%20%20%201/1%20%20%20%20%20%20%20Running%20%20%200%20%20%20%20%20%20%20%20%20%208s%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3EYou%20can%20validate%20that%20the%20nodes%20have%20joined%20the%20cluster%20by%20inspecting%20the%20logs%20of%20any%20of%20the%20Pekko%20nodes.%20For%3Cbr%3Eexample,%20to%20tail%20the%20first%20seed%20node%E2%80%99s%20log:%3C/p%3E%3Cfigure%20class=%22highlight%20shell%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3Ekubect%20logs%20-f%20pekko-seed-0%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E[INFO]%20[02/12/2017%2015:36:53.568]%20[main]%20[pekko.remote.Remoting]%20Starting%20remoting%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E[INFO]%20[02/12/2017%2015:36:53.707]%20[main]%20[pekko.remote.Remoting]%20Remoting%20started;%20listening%20on%20addresses%20:[pekko.tcp:/Pekko@pekko-seed-0.akka-seed:2551]%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E...%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E[INFO]%20[02/12/2017%2015:37:05.101]%20[ClusterSystem-pekko.actor.default-dispatcher-16]%20[pekko.cluster.Cluster(pekko:/ClusterSystem)]%20Cluster%20Node%20[pekko.tcp:/Pekko@pekko-seed-0.pekko-seed:2551]%20-%20Node%20[pekko.tcp:/Pekko@pekko-seed-1.pekko-seed:2551]%20is%20JOINING,%20roles%20[]%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E[INFO]%20[02/12/2017%2015:37:06.854]%20[ClusterSystem-pekko.actor.default-dispatcher-16]%20[pekko:/ClusterSystem/user/$a]%20Member%20is%20Up:%20Member(address%20=%20akka.tcp:/Pekko@10.44.2.10:2551,%20status%20=%20Up)%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E...%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3EAlso,%20you%20can%20simply%20attach%20Kubernetes%20HPA:%3C/p%3E%3Cfigure%20class=%22highlight%20shell%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3EapiVersion:%20autoscaling/v1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ekind:%20HorizontalPodAutoscaler%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Emetadata:%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20name:%20pekko-worker%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Espec:%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20maxReplicas:%203%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20minReplicas:%201%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20scaleTargetRef:%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20apiVersion:%20apps/v1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20kind:%20Deployment%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20name:%20pekko-worker%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20targetCPUUtilizationPercentage:%2015%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Ch2%20id=%22Health-check%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Health-check%22%3E%C2%B6%3C/a%3EHealth%20check%3C/h2%3E%3Cp%3EPekko%20already%20implementation%20cluster%20health%20check%20management:%3C/p%3E%3Cfigure%20class=%22highlight%20shell%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22meta%20prompt_%22%3E#%20%3C/span%3E%3Cspan%20class=%22language-bash%22%3Emanagement%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Emanagement%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20http.hostname%20=%20127.0.0.1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20http.hostname%20=%20$&amp;#123;?HOST_NAME&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20http.bind-hostname%20=%200.0.0.0%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20http.bind-hostname%20=%20$&amp;#123;?HOST_NAME&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20health-checks%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20readiness-path%20=%20&amp;quot;health/ready&amp;quot;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20liveness-path%20=%20&amp;quot;health/alive&amp;quot;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20readiness-checks%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20#%20Default%20health%20check%20for%20cluster.%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20cluster-membership%20=%20&amp;quot;org.apache.pekko.management.cluster.javadsl.ClusterMembershipCheck&amp;quot;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Ch2%20id=%22Summary%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Summary%22%3E%C2%B6%3C/a%3ESummary%3C/h2%3E%3Cp%3EPlease%20check%20my%20own%20repo%20in%20%3Ca%20href=%22https:/github.com/barudisshu/kaxis%22%3EGitHub%3C/a%3E,%20if%20you%20need%20more%20investigate.%3C/p%3E" type="image"/>
    
    
    
    <category term="kubernetes" scheme="https://galudisu.info/tags/kubernetes/"/>
    
    <category term="pekko" scheme="https://galudisu.info/tags/pekko/"/>
    
    <category term="udp" scheme="https://galudisu.info/tags/udp/"/>
    
    <category term="IIoT" scheme="https://galudisu.info/tags/IIoT/"/>
    
  </entry>
  
  <entry>
    <title>Pre-master Secret, Master Secret, Private Key, Shared Secret</title>
    <link href="https://galudisu.info/2024/06/05/cryptography/secret-identified/"/>
    <id>https://galudisu.info/2024/06/05/cryptography/secret-identified/</id>
    <published>2024-06-05T03:32:34.000Z</published>
    <updated>2025-04-27T11:59:08.276Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Introduction"><a class="header-anchor" href="#Introduction">¶</a>Introduction</h2><p>Keys are critical in <a href="https://www.baeldung.com/cs/cryptographic-algorithm-complexity">cryptographic</a> operations in <a href="https://www.baeldung.com/cs/introduction-to-cryptography">public-key infrastructure</a>(PKI). <strong><a href="https://www.baeldung.com/cs/connection-oriented-vs-connectionless-protocols">SSL handshake</a> invoke exchanging several pieces of information, such as <a href="https://www.baeldung.com/cs/public-private-keys-vs-certificates">public keys</a>, <a href="https://www.baeldung.com/cs/symmetric-cryptography">private keys</a>, shared secrets, pre-master secrets, and master secrets.</strong></p><p><strong>Let’s explore what happens between the key exchange and the data encryption and <a href="https://www.baeldung.com/cs/authentication-vs-authorization">authentication</a>.</strong></p><span id="more"></span><h2 id="SSL-TLS-Handshake"><a class="header-anchor" href="#SSL-TLS-Handshake">¶</a>SSL/TLS Handshake</h2><p>A secure SSL/TLS connection gets established in multiple steps. The client and the server must agree on the methods and data to share.</p><p>We’ll use a TLS 1.2 connection to illustrate this complex process. The method employed for all prior SSL/TLS versions is the same.</p><p><strong>The handshake initiates and establishes a secure connection between the server and the client:</strong></p><p><img src="/img/cryptography/1_SSL-TLS-Communication-setup-timeline-diagram.png" alt="1_SSL-TLS-Communication-setup-timeline-diagram.png"></p><p>The handshake involves the following:</p><ul><li><strong>Client Hello</strong>: This is a hello message from the client to the server having information such as client version, client random, session ID, <a href="https://www.baeldung.com/cs/stream-cipher-vs-block-cipher">cipher suites</a>, compression methods, and extensions</li><li><strong>Server Hello</strong>: This is a reply message from the server to the client having server version, server random, <a href="https://www.baeldung.com/cs/tokens-vs-sessions">session ID</a>, cipher suites, compression methods, and extensions</li><li><strong>Exchange Certificate</strong>: The server sends a signed TLS/SSL certificate and the server’s public key to prove its identity. Sometimes, the server may also require the client to authenticate with a certificate and seek the same from the client</li><li><strong>Server Hello Done</strong>: Server sends this message to the client to confirm that the server hello message has been executed and completed</li><li><strong>Client Key Exchange</strong>: This message is sent by the client once it receives the server hello done from the server. At this point, the client creates a pre-master secret. If the server’s certificate is insufficient for the client to share a pre-master secret, then the client needs a server key exchange message. The client and the server create the master secret key</li><li><strong>Change Cipher spec</strong>:  This protocol initiates symmetric encryption for data exchange using the shared keys</li><li><strong>Handshake Finished</strong>: The handshake process from both the client and server sides exchanges this message at the end.</li></ul><p><strong>Asymmetric and symmetric encryption is part of the SSL/TLS security protocols.</strong> Keys and secrets are for encryption, decryption, and authentication. In the rest of the article, we’ll cover details about when we use different keys.</p><h2 id="SSL-TLS-Keys"><a class="header-anchor" href="#SSL-TLS-Keys">¶</a>SSL/TLS Keys</h2><p>Let’s now discuss how the shared secret, pre-master secret, master secret, public key, and private keys work.</p><h3 id="Shared-Secret"><a class="header-anchor" href="#Shared-Secret">¶</a>Shared Secret</h3><p><strong>Generally, a shared secret is to generate one or more keys for message encryption and to authenticate users.</strong></p><p>In cryptography, this is a piece of information that is known only to the participating systems:</p><p><img src="/img/cryptography/1_Shared-Secret-1.png" alt="Describe the concept of shared secret"></p><p>The client and the server generate a public/private key pair and share each other’s public keys as per the <a href="https://www.baeldung.com/cs/symmetric-cryptography">Diffie-Hellman</a> key exchange protocol. Afterward, they can compute a shared secret offline.</p><p>It usually refers to the key of a symmetric cryptosystem, in which the same key encrypts and decrypts data.</p><p>Generally, we use the shared secret and an <a href="https://www.baeldung.com/cs/security-key-vs-vector-vs-nonce">initialization vector</a> (IV) to create the session and message keys. Lastly, a shared secret can be a password, passphrase, large integer, or a collection of bytes selected at random.</p><h3 id="Public-key"><a class="header-anchor" href="#Public-key">¶</a>Public key</h3><p><strong>The primary function of a public key is to encrypt messages before sending them.</strong></p><p>An asymmetric cryptosystem uses randomly generated public and private keys. Anybody can encrypt data using a public key, but only those with the corresponding private key can decode the data.</p><p><strong>The public and private keys are mathematically related. Only a related key pair can encrypt and decrypt data.</strong> The encrypted information will be unreadable if the corresponding private key for decryption is missing.</p><p>In PKI, the sender and receiver don’t share the same key. PKI is used only for short messages.</p><h3 id="Private-Key"><a class="header-anchor" href="#Private-Key">¶</a>Private Key</h3><p><strong>The private key is kept secret and is only accessible by the owner.</strong></p><p>In a symmetric cryptosystem, the same key (secret key) is used for encryption and decryption. In this cryptography scheme, the sender and receiver share the same key.</p><p>Furthermore, a private key decrypts the cipher text in the asymmetric cryptosystem. <strong>A digital signature created using the private key can be confirmed using the associated public key.</strong> A private key is faster than a public key and applicable to high-volume text content.</p><h3 id="Pre-master-Secret"><a class="header-anchor" href="#Pre-master-Secret">¶</a>Pre-master Secret</h3><p><strong>The client generates a 48-bit pre-master secret and sends it to the server mainly to compute master secrets.</strong></p><p>The client encrypts the pre-master secret using the server public key obtained from the server’s certificate. The server decrypts the message using the private key. The client and the server use the pre-master secret to produce the symmetric keys for the secured portion of the session.</p><p>The algorithm and parameters used during the data exchange affect the length of the message. <strong>We want a fixed-length value to derive the keys for any cipher suite. The pre-master secrets serve this purpose.</strong></p><h3 id="Master-Secret"><a class="header-anchor" href="#Master-Secret">¶</a>Master Secret</h3><p><strong>The client and server use the master secret to generate the session key.</strong></p><p>The server decrypts the pre-master secret key using its private key after receiving it.</p><p>The client and the server use a Pseudo-Random Function (<a href="https://en.wikipedia.org/wiki/Pseudorandom_function_family">PRF</a>) to calculate the master secret key. PRF is a deterministic algorithm with two inputs and a single output. PRF obtains its result by iterating a hash-based message authentication code (<a href="https://www.baeldung.com/java-hmac">HMAC</a>) based on the <a href="https://www.baeldung.com/sha-256-hashing-java">SHA256</a> hash function.</p><p>Let’s discuss how the pre-master secret creates the master secret key. The <a href="https://datatracker.ietf.org/doc/html/rfc7627">RFC</a> guideline to calculate the fixed-length value master secret using the pre-master secret is:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">master_secret=PRF(pre-master_secret, &quot;Master Secret&quot;,ClientHello.rando+ServerHello.random)</span><br></pre></td></tr></table></figure><p>The master secret is a function of the client and server randoms that were previously exchanged between the client and the server during the handshake stage.</p><p>Further, the first three inputs to PRF are string representations of byte sequences. So, the addition operator in the above code concatenates the random. <strong>A master secret key is 48 bytes long</strong> and computed using random values.</p><h2 id="When-to-Use-Different-Keys"><a class="header-anchor" href="#When-to-Use-Different-Keys">¶</a>When to Use Different Keys?</h2><p>The following table shows at what stage of communication between client and server the shared secret, pre-master secret, public key, private key, and master secret are used:</p><table><thead><tr><th style="text-align:left">Stage</th><th style="text-align:left">Keys Involved</th></tr></thead><tbody><tr><td style="text-align:left">Client-server hello</td><td style="text-align:left">Shared secret (Session ID)</td></tr><tr><td style="text-align:left">Certificate exchange</td><td style="text-align:left">Server’s public key</td></tr><tr><td style="text-align:left">Client key exchange</td><td style="text-align:left">The client creates a pre-master secret and uses a public key to encrypt it, while the server uses its private key to decrypt it</td></tr><tr><td style="text-align:left">Server key exchange</td><td style="text-align:left">Optional - required only if the server’s certificate is insufficient for authentication</td></tr><tr><td style="text-align:left">Post handshake</td><td style="text-align:left">Both client and server use master secret for symmetric encryption/decryption</td></tr></tbody></table><h2 id="Conclusion"><a class="header-anchor" href="#Conclusion">¶</a>Conclusion</h2><p>In this article, we talked about SSL handshakes, shared secrets, pre-master secrets, master secrets, and public/private keys.</p><p><strong>A key-agreement technique, such as PKI, is used to construct the shared secret at the beginning of the SSL/TLS communication session.</strong> The server uses its public key for encryption and its private key for decryption.</p><p>Once the client and the server receive a hello done message, the client sends a pre-master secret to the server to compute a master secret using PRF.</p><p>Lastly, after the handshake, for the rest of the session, the client and the server use the master secret to generate the session keys for symmetric data encryption/decryption.</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;Introduction&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#Introduction&quot;&gt;¶&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;Keys are critical in &lt;a href=&quot;https://www.baeldung.com/cs/cryptographic-algorithm-complexity&quot;&gt;cryptographic&lt;/a&gt; operations in &lt;a href=&quot;https://www.baeldung.com/cs/introduction-to-cryptography&quot;&gt;public-key infrastructure&lt;/a&gt;(PKI). &lt;strong&gt;&lt;a href=&quot;https://www.baeldung.com/cs/connection-oriented-vs-connectionless-protocols&quot;&gt;SSL handshake&lt;/a&gt; invoke exchanging several pieces of information, such as &lt;a href=&quot;https://www.baeldung.com/cs/public-private-keys-vs-certificates&quot;&gt;public keys&lt;/a&gt;, &lt;a href=&quot;https://www.baeldung.com/cs/symmetric-cryptography&quot;&gt;private keys&lt;/a&gt;, shared secrets, pre-master secrets, and master secrets.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Let’s explore what happens between the key exchange and the data encryption and &lt;a href=&quot;https://www.baeldung.com/cs/authentication-vs-authorization&quot;&gt;authentication&lt;/a&gt;.&lt;/strong&gt;&lt;/p&gt;</summary>
    
    
    <content src="https://galudisu.info/%3Ch2%20id=%22Introduction%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Introduction%22%3E%C2%B6%3C/a%3EIntroduction%3C/h2%3E%3Cp%3EKeys%20are%20critical%20in%20%3Ca%20href=%22https:/www.baeldung.com/cs/cryptographic-algorithm-complexity%22%3Ecryptographic%3C/a%3E%20operations%20in%20%3Ca%20href=%22https:/www.baeldung.com/cs/introduction-to-cryptography%22%3Epublic-key%20infrastructure%3C/a%3E(PKI).%20%3Cstrong%3E%3Ca%20href=%22https:/www.baeldung.com/cs/connection-oriented-vs-connectionless-protocols%22%3ESSL%20handshake%3C/a%3E%20invoke%20exchanging%20several%20pieces%20of%20information,%20such%20as%20%3Ca%20href=%22https:/www.baeldung.com/cs/public-private-keys-vs-certificates%22%3Epublic%20keys%3C/a%3E,%20%3Ca%20href=%22https:/www.baeldung.com/cs/symmetric-cryptography%22%3Eprivate%20keys%3C/a%3E,%20shared%20secrets,%20pre-master%20secrets,%20and%20master%20secrets.%3C/strong%3E%3C/p%3E%3Cp%3E%3Cstrong%3ELet%E2%80%99s%20explore%20what%20happens%20between%20the%20key%20exchange%20and%20the%20data%20encryption%20and%20%3Ca%20href=%22https:/www.baeldung.com/cs/authentication-vs-authorization%22%3Eauthentication%3C/a%3E.%3C/strong%3E%3C/p%3E%3Cspan%20id=%22more%22%3E%3C/span%3E%3Ch2%20id=%22SSL-TLS-Handshake%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#SSL-TLS-Handshake%22%3E%C2%B6%3C/a%3ESSL/TLS%20Handshake%3C/h2%3E%3Cp%3EA%20secure%20SSL/TLS%20connection%20gets%20established%20in%20multiple%20steps.%20The%20client%20and%20the%20server%20must%20agree%20on%20the%20methods%20and%20data%20to%20share.%3C/p%3E%3Cp%3EWe%E2%80%99ll%20use%20a%20TLS%201.2%20connection%20to%20illustrate%20this%20complex%20process.%20The%20method%20employed%20for%20all%20prior%20SSL/TLS%20versions%20is%20the%20same.%3C/p%3E%3Cp%3E%3Cstrong%3EThe%20handshake%20initiates%20and%20establishes%20a%20secure%20connection%20between%20the%20server%20and%20the%20client:%3C/strong%3E%3C/p%3E%3Cp%3E%3Cimg%20src=%22/img/cryptography/1_SSL-TLS-Communication-setup-timeline-diagram.png%22%20alt=%221_SSL-TLS-Communication-setup-timeline-diagram.png%22%3E%3C/p%3E%3Cp%3EThe%20handshake%20involves%20the%20following:%3C/p%3E%3Cul%3E%3Cli%3E%3Cstrong%3EClient%20Hello%3C/strong%3E:%20This%20is%20a%20hello%20message%20from%20the%20client%20to%20the%20server%20having%20information%20such%20as%20client%20version,%20client%20random,%20session%20ID,%20%3Ca%20href=%22https:/www.baeldung.com/cs/stream-cipher-vs-block-cipher%22%3Ecipher%20suites%3C/a%3E,%20compression%20methods,%20and%20extensions%3C/li%3E%3Cli%3E%3Cstrong%3EServer%20Hello%3C/strong%3E:%20This%20is%20a%20reply%20message%20from%20the%20server%20to%20the%20client%20having%20server%20version,%20server%20random,%20%3Ca%20href=%22https:/www.baeldung.com/cs/tokens-vs-sessions%22%3Esession%20ID%3C/a%3E,%20cipher%20suites,%20compression%20methods,%20and%20extensions%3C/li%3E%3Cli%3E%3Cstrong%3EExchange%20Certificate%3C/strong%3E:%20The%20server%20sends%20a%20signed%20TLS/SSL%20certificate%20and%20the%20server%E2%80%99s%20public%20key%20to%20prove%20its%20identity.%20Sometimes,%20the%20server%20may%20also%20require%20the%20client%20to%20authenticate%20with%20a%20certificate%20and%20seek%20the%20same%20from%20the%20client%3C/li%3E%3Cli%3E%3Cstrong%3EServer%20Hello%20Done%3C/strong%3E:%20Server%20sends%20this%20message%20to%20the%20client%20to%20confirm%20that%20the%20server%20hello%20message%20has%20been%20executed%20and%20completed%3C/li%3E%3Cli%3E%3Cstrong%3EClient%20Key%20Exchange%3C/strong%3E:%20This%20message%20is%20sent%20by%20the%20client%20once%20it%20receives%20the%20server%20hello%20done%20from%20the%20server.%20At%20this%20point,%20the%20client%20creates%20a%20pre-master%20secret.%20If%20the%20server%E2%80%99s%20certificate%20is%20insufficient%20for%20the%20client%20to%20share%20a%20pre-master%20secret,%20then%20the%20client%20needs%20a%20server%20key%20exchange%20message.%20The%20client%20and%20the%20server%20create%20the%20master%20secret%20key%3C/li%3E%3Cli%3E%3Cstrong%3EChange%20Cipher%20spec%3C/strong%3E:%20%20This%20protocol%20initiates%20symmetric%20encryption%20for%20data%20exchange%20using%20the%20shared%20keys%3C/li%3E%3Cli%3E%3Cstrong%3EHandshake%20Finished%3C/strong%3E:%20The%20handshake%20process%20from%20both%20the%20client%20and%20server%20sides%20exchanges%20this%20message%20at%20the%20end.%3C/li%3E%3C/ul%3E%3Cp%3E%3Cstrong%3EAsymmetric%20and%20symmetric%20encryption%20is%20part%20of%20the%20SSL/TLS%20security%20protocols.%3C/strong%3E%20Keys%20and%20secrets%20are%20for%20encryption,%20decryption,%20and%20authentication.%20In%20the%20rest%20of%20the%20article,%20we%E2%80%99ll%20cover%20details%20about%20when%20we%20use%20different%20keys.%3C/p%3E%3Ch2%20id=%22SSL-TLS-Keys%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#SSL-TLS-Keys%22%3E%C2%B6%3C/a%3ESSL/TLS%20Keys%3C/h2%3E%3Cp%3ELet%E2%80%99s%20now%20discuss%20how%20the%20shared%20secret,%20pre-master%20secret,%20master%20secret,%20public%20key,%20and%20private%20keys%20work.%3C/p%3E%3Ch3%20id=%22Shared-Secret%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Shared-Secret%22%3E%C2%B6%3C/a%3EShared%20Secret%3C/h3%3E%3Cp%3E%3Cstrong%3EGenerally,%20a%20shared%20secret%20is%20to%20generate%20one%20or%20more%20keys%20for%20message%20encryption%20and%20to%20authenticate%20users.%3C/strong%3E%3C/p%3E%3Cp%3EIn%20cryptography,%20this%20is%20a%20piece%20of%20information%20that%20is%20known%20only%20to%20the%20participating%20systems:%3C/p%3E%3Cp%3E%3Cimg%20src=%22/img/cryptography/1_Shared-Secret-1.png%22%20alt=%22Describe%20the%20concept%20of%20shared%20secret%22%3E%3C/p%3E%3Cp%3EThe%20client%20and%20the%20server%20generate%20a%20public/private%20key%20pair%20and%20share%20each%20other%E2%80%99s%20public%20keys%20as%20per%20the%20%3Ca%20href=%22https:/www.baeldung.com/cs/symmetric-cryptography%22%3EDiffie-Hellman%3C/a%3E%20key%20exchange%20protocol.%20Afterward,%20they%20can%20compute%20a%20shared%20secret%20offline.%3C/p%3E%3Cp%3EIt%20usually%20refers%20to%20the%20key%20of%20a%20symmetric%20cryptosystem,%20in%20which%20the%20same%20key%20encrypts%20and%20decrypts%20data.%3C/p%3E%3Cp%3EGenerally,%20we%20use%20the%20shared%20secret%20and%20an%20%3Ca%20href=%22https:/www.baeldung.com/cs/security-key-vs-vector-vs-nonce%22%3Einitialization%20vector%3C/a%3E%20(IV)%20to%20create%20the%20session%20and%20message%20keys.%20Lastly,%20a%20shared%20secret%20can%20be%20a%20password,%20passphrase,%20large%20integer,%20or%20a%20collection%20of%20bytes%20selected%20at%20random.%3C/p%3E%3Ch3%20id=%22Public-key%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Public-key%22%3E%C2%B6%3C/a%3EPublic%20key%3C/h3%3E%3Cp%3E%3Cstrong%3EThe%20primary%20function%20of%20a%20public%20key%20is%20to%20encrypt%20messages%20before%20sending%20them.%3C/strong%3E%3C/p%3E%3Cp%3EAn%20asymmetric%20cryptosystem%20uses%20randomly%20generated%20public%20and%20private%20keys.%20Anybody%20can%20encrypt%20data%20using%20a%20public%20key,%20but%20only%20those%20with%20the%20corresponding%20private%20key%20can%20decode%20the%20data.%3C/p%3E%3Cp%3E%3Cstrong%3EThe%20public%20and%20private%20keys%20are%20mathematically%20related.%20Only%20a%20related%20key%20pair%20can%20encrypt%20and%20decrypt%20data.%3C/strong%3E%20The%20encrypted%20information%20will%20be%20unreadable%20if%20the%20corresponding%20private%20key%20for%20decryption%20is%20missing.%3C/p%3E%3Cp%3EIn%20PKI,%20the%20sender%20and%20receiver%20don%E2%80%99t%20share%20the%20same%20key.%20PKI%20is%20used%20only%20for%20short%20messages.%3C/p%3E%3Ch3%20id=%22Private-Key%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Private-Key%22%3E%C2%B6%3C/a%3EPrivate%20Key%3C/h3%3E%3Cp%3E%3Cstrong%3EThe%20private%20key%20is%20kept%20secret%20and%20is%20only%20accessible%20by%20the%20owner.%3C/strong%3E%3C/p%3E%3Cp%3EIn%20a%20symmetric%20cryptosystem,%20the%20same%20key%20(secret%20key)%20is%20used%20for%20encryption%20and%20decryption.%20In%20this%20cryptography%20scheme,%20the%20sender%20and%20receiver%20share%20the%20same%20key.%3C/p%3E%3Cp%3EFurthermore,%20a%20private%20key%20decrypts%20the%20cipher%20text%20in%20the%20asymmetric%20cryptosystem.%20%3Cstrong%3EA%20digital%20signature%20created%20using%20the%20private%20key%20can%20be%20confirmed%20using%20the%20associated%20public%20key.%3C/strong%3E%20A%20private%20key%20is%20faster%20than%20a%20public%20key%20and%20applicable%20to%20high-volume%20text%20content.%3C/p%3E%3Ch3%20id=%22Pre-master-Secret%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Pre-master-Secret%22%3E%C2%B6%3C/a%3EPre-master%20Secret%3C/h3%3E%3Cp%3E%3Cstrong%3EThe%20client%20generates%20a%2048-bit%20pre-master%20secret%20and%20sends%20it%20to%20the%20server%20mainly%20to%20compute%20master%20secrets.%3C/strong%3E%3C/p%3E%3Cp%3EThe%20client%20encrypts%20the%20pre-master%20secret%20using%20the%20server%20public%20key%20obtained%20from%20the%20server%E2%80%99s%20certificate.%20The%20server%20decrypts%20the%20message%20using%20the%20private%20key.%20The%20client%20and%20the%20server%20use%20the%20pre-master%20secret%20to%20produce%20the%20symmetric%20keys%20for%20the%20secured%20portion%20of%20the%20session.%3C/p%3E%3Cp%3EThe%20algorithm%20and%20parameters%20used%20during%20the%20data%20exchange%20affect%20the%20length%20of%20the%20message.%20%3Cstrong%3EWe%20want%20a%20fixed-length%20value%20to%20derive%20the%20keys%20for%20any%20cipher%20suite.%20The%20pre-master%20secrets%20serve%20this%20purpose.%3C/strong%3E%3C/p%3E%3Ch3%20id=%22Master-Secret%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Master-Secret%22%3E%C2%B6%3C/a%3EMaster%20Secret%3C/h3%3E%3Cp%3E%3Cstrong%3EThe%20client%20and%20server%20use%20the%20master%20secret%20to%20generate%20the%20session%20key.%3C/strong%3E%3C/p%3E%3Cp%3EThe%20server%20decrypts%20the%20pre-master%20secret%20key%20using%20its%20private%20key%20after%20receiving%20it.%3C/p%3E%3Cp%3EThe%20client%20and%20the%20server%20use%20a%20Pseudo-Random%20Function%20(%3Ca%20href=%22https:/en.wikipedia.org/wiki/Pseudorandom_function_family%22%3EPRF%3C/a%3E)%20to%20calculate%20the%20master%20secret%20key.%20PRF%20is%20a%20deterministic%20algorithm%20with%20two%20inputs%20and%20a%20single%20output.%20PRF%20obtains%20its%20result%20by%20iterating%20a%20hash-based%20message%20authentication%20code%20(%3Ca%20href=%22https:/www.baeldung.com/java-hmac%22%3EHMAC%3C/a%3E)%20based%20on%20the%20%3Ca%20href=%22https:/www.baeldung.com/sha-256-hashing-java%22%3ESHA256%3C/a%3E%20hash%20function.%3C/p%3E%3Cp%3ELet%E2%80%99s%20discuss%20how%20the%20pre-master%20secret%20creates%20the%20master%20secret%20key.%20The%20%3Ca%20href=%22https:/datatracker.ietf.org/doc/html/rfc7627%22%3ERFC%3C/a%3E%20guideline%20to%20calculate%20the%20fixed-length%20value%20master%20secret%20using%20the%20pre-master%20secret%20is:%3C/p%3E%3Cfigure%20class=%22highlight%20text%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3Emaster_secret=PRF(pre-master_secret,%20&amp;quot;Master%20Secret&amp;quot;,ClientHello.rando+ServerHello.random)%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3EThe%20master%20secret%20is%20a%20function%20of%20the%20client%20and%20server%20randoms%20that%20were%20previously%20exchanged%20between%20the%20client%20and%20the%20server%20during%20the%20handshake%20stage.%3C/p%3E%3Cp%3EFurther,%20the%20first%20three%20inputs%20to%20PRF%20are%20string%20representations%20of%20byte%20sequences.%20So,%20the%20addition%20operator%20in%20the%20above%20code%20concatenates%20the%20random.%20%3Cstrong%3EA%20master%20secret%20key%20is%2048%20bytes%20long%3C/strong%3E%20and%20computed%20using%20random%20values.%3C/p%3E%3Ch2%20id=%22When-to-Use-Different-Keys%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#When-to-Use-Different-Keys%22%3E%C2%B6%3C/a%3EWhen%20to%20Use%20Different%20Keys?%3C/h2%3E%3Cp%3EThe%20following%20table%20shows%20at%20what%20stage%20of%20communication%20between%20client%20and%20server%20the%20shared%20secret,%20pre-master%20secret,%20public%20key,%20private%20key,%20and%20master%20secret%20are%20used:%3C/p%3E%3Ctable%3E%3Cthead%3E%3Ctr%3E%3Cth%20style=%22text-align:left%22%3EStage%3C/th%3E%3Cth%20style=%22text-align:left%22%3EKeys%20Involved%3C/th%3E%3C/tr%3E%3C/thead%3E%3Ctbody%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3EClient-server%20hello%3C/td%3E%3Ctd%20style=%22text-align:left%22%3EShared%20secret%20(Session%20ID)%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3ECertificate%20exchange%3C/td%3E%3Ctd%20style=%22text-align:left%22%3EServer%E2%80%99s%20public%20key%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3EClient%20key%20exchange%3C/td%3E%3Ctd%20style=%22text-align:left%22%3EThe%20client%20creates%20a%20pre-master%20secret%20and%20uses%20a%20public%20key%20to%20encrypt%20it,%20while%20the%20server%20uses%20its%20private%20key%20to%20decrypt%20it%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3EServer%20key%20exchange%3C/td%3E%3Ctd%20style=%22text-align:left%22%3EOptional%20-%20required%20only%20if%20the%20server%E2%80%99s%20certificate%20is%20insufficient%20for%20authentication%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3EPost%20handshake%3C/td%3E%3Ctd%20style=%22text-align:left%22%3EBoth%20client%20and%20server%20use%20master%20secret%20for%20symmetric%20encryption/decryption%3C/td%3E%3C/tr%3E%3C/tbody%3E%3C/table%3E%3Ch2%20id=%22Conclusion%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Conclusion%22%3E%C2%B6%3C/a%3EConclusion%3C/h2%3E%3Cp%3EIn%20this%20article,%20we%20talked%20about%20SSL%20handshakes,%20shared%20secrets,%20pre-master%20secrets,%20master%20secrets,%20and%20public/private%20keys.%3C/p%3E%3Cp%3E%3Cstrong%3EA%20key-agreement%20technique,%20such%20as%20PKI,%20is%20used%20to%20construct%20the%20shared%20secret%20at%20the%20beginning%20of%20the%20SSL/TLS%20communication%20session.%3C/strong%3E%20The%20server%20uses%20its%20public%20key%20for%20encryption%20and%20its%20private%20key%20for%20decryption.%3C/p%3E%3Cp%3EOnce%20the%20client%20and%20the%20server%20receive%20a%20hello%20done%20message,%20the%20client%20sends%20a%20pre-master%20secret%20to%20the%20server%20to%20compute%20a%20master%20secret%20using%20PRF.%3C/p%3E%3Cp%3ELastly,%20after%20the%20handshake,%20for%20the%20rest%20of%20the%20session,%20the%20client%20and%20the%20server%20use%20the%20master%20secret%20to%20generate%20the%20session%20keys%20for%20symmetric%20data%20encryption/decryption.%3C/p%3E" type="image"/>
    
    
    
    <category term="cryptography" scheme="https://galudisu.info/tags/cryptography/"/>
    
    <category term="security" scheme="https://galudisu.info/tags/security/"/>
    
  </entry>
  
  <entry>
    <title>Termius Cracked</title>
    <link href="https://galudisu.info/2023/10/26/termius/cracked/"/>
    <id>https://galudisu.info/2023/10/26/termius/cracked/</id>
    <published>2023-10-26T14:14:34.000Z</published>
    <updated>2025-04-27T11:59:08.289Z</updated>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="破解方法"><a class="header-anchor" href="#破解方法">¶</a>破解方法</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g asar</span><br></pre></td></tr></table></figure><p>所有平台破解方法大同小异</p><ul><li>解包</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /opt/Termius/resources</span><br><span class="line">asar extract app.asar ./app # 修改完不需要重新打包</span><br><span class="line">mv app.asar app.asar.bak # 留个备份，或者直接rm</span><br><span class="line">rm app-update.yml # 防止自动更新</span><br></pre></td></tr></table></figure><ul><li>修改app/js/background-process.js</li></ul><p>搜索 <code>await this.api.bulkAccount</code></p><p><code>const e=await this.api.bulkAccount();</code> -&gt; <code>var e=wait this.api.bulkAccount()</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> e=<span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">api</span>.<span class="title function_">bulkAccount</span>();e.<span class="property">account</span>.<span class="property">pro_mode</span>=!<span class="number">0</span>,e.<span class="property">account</span>.<span class="property">need_to_update_subscription</span>=!<span class="number">1</span>,e.<span class="property">account</span>.<span class="property">current_period</span>=&#123;<span class="attr">from</span>:<span class="string">&quot;2022-01-01T00:00:00&quot;</span>,<span class="attr">until</span>:<span class="string">&quot;2099-01-01T00:00:00&quot;</span>&#125;,e.<span class="property">account</span>.<span class="property">plan_type</span>=<span class="string">&quot;Premium&quot;</span>,e.<span class="property">account</span>.<span class="property">user_type</span>=<span class="string">&quot;Premium&quot;</span>,e.<span class="property">student</span>=<span class="literal">null</span>,e.<span class="property">trial</span>=<span class="literal">null</span>,e.<span class="property">account</span>.<span class="property">authorized_features</span>.<span class="property">show_trial_section</span>=!<span class="number">1</span>,e.<span class="property">account</span>.<span class="property">authorized_features</span>.<span class="property">show_subscription_section</span>=!<span class="number">0</span>,e.<span class="property">account</span>.<span class="property">authorized_features</span>.<span class="property">show_github_account_section</span>=!<span class="number">1</span>,e.<span class="property">account</span>.<span class="property">expired_screen_type</span>=<span class="literal">null</span>,e.<span class="property">personal_subscription</span>=&#123;<span class="attr">now</span>:(<span class="keyword">new</span> <span class="title class_">Date</span>).<span class="title function_">toISOString</span>().<span class="title function_">slice</span>(<span class="number">0</span>,-<span class="number">5</span>),<span class="attr">status</span>:<span class="string">&quot;SUCCESS&quot;</span>,<span class="attr">platform</span>:<span class="string">&quot;stripe&quot;</span>,<span class="attr">current_period</span>:&#123;<span class="attr">from</span>:<span class="string">&quot;2022-01-01T00:00:00&quot;</span>,<span class="attr">until</span>:<span class="string">&quot;2099-01-01T00:00:00&quot;</span>&#125;,<span class="attr">revokable</span>:!<span class="number">0</span>,<span class="attr">refunded</span>:!<span class="number">1</span>,<span class="attr">cancelable</span>:!<span class="number">0</span>,<span class="attr">reactivatable</span>:!<span class="number">1</span>,<span class="attr">currency</span>:<span class="string">&quot;usd&quot;</span>,<span class="attr">created_at</span>:<span class="string">&quot;2022-01-01T00:00:00&quot;</span>,<span class="attr">updated_at</span>:(<span class="keyword">new</span> <span class="title class_">Date</span>).<span class="title function_">toISOString</span>().<span class="title function_">slice</span>(<span class="number">0</span>,-<span class="number">5</span>),<span class="attr">valid_until</span>:<span class="string">&quot;2099-01-01T00:00:00&quot;</span>,<span class="attr">auto_renew</span>:!<span class="number">0</span>,<span class="attr">price</span>:<span class="number">12</span>,<span class="attr">verbose_plan_name</span>:<span class="string">&quot;Termius Pro Monthly&quot;</span>,<span class="attr">plan_type</span>:<span class="string">&quot;SINGLE&quot;</span>,<span class="attr">is_expired</span>:!<span class="number">1</span>&#125;,e.<span class="property">access_objects</span>=[&#123;<span class="attr">period</span>:&#123;<span class="attr">start</span>:<span class="string">&quot;2022-01-01T00:00:00&quot;</span>,<span class="attr">end</span>:<span class="string">&quot;2099-01-01T00:00:00&quot;</span>&#125;,<span class="attr">title</span>:<span class="string">&quot;Pro&quot;</span>&#125;];<span class="keyword">return</span> ...</span><br></pre></td></tr></table></figure><p>启动Termius，登录帐号，重启Termius</p>]]></content>
    
    
      
      
    <summary type="html">&lt;span id=&quot;more&quot;&gt;&lt;/span&gt;
&lt;h2 id=&quot;破解方法&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#破解方法&quot;&gt;¶&lt;/a&gt;破解方法&lt;/h2&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td cl</summary>
      
    
    
    <content src="https://galudisu.info/%3Cspan%20id=%22more%22%3E%3C/span%3E%3Ch2%20id=%22%E7%A0%B4%E8%A7%A3%E6%96%B9%E6%B3%95%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#%E7%A0%B4%E8%A7%A3%E6%96%B9%E6%B3%95%22%3E%C2%B6%3C/a%3E%E7%A0%B4%E8%A7%A3%E6%96%B9%E6%B3%95%3C/h2%3E%3Cfigure%20class=%22highlight%20shell%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3Enpm%20install%20-g%20asar%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E6%89%80%E6%9C%89%E5%B9%B3%E5%8F%B0%E7%A0%B4%E8%A7%A3%E6%96%B9%E6%B3%95%E5%A4%A7%E5%90%8C%E5%B0%8F%E5%BC%82%3C/p%3E%3Cul%3E%3Cli%3E%E8%A7%A3%E5%8C%85%3C/li%3E%3C/ul%3E%3Cfigure%20class=%22highlight%20shell%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3Ecd%20/opt/Termius/resources%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Easar%20extract%20app.asar%20./app%20#%20%E4%BF%AE%E6%94%B9%E5%AE%8C%E4%B8%8D%E9%9C%80%E8%A6%81%E9%87%8D%E6%96%B0%E6%89%93%E5%8C%85%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Emv%20app.asar%20app.asar.bak%20#%20%E7%95%99%E4%B8%AA%E5%A4%87%E4%BB%BD%EF%BC%8C%E6%88%96%E8%80%85%E7%9B%B4%E6%8E%A5rm%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Erm%20app-update.yml%20#%20%E9%98%B2%E6%AD%A2%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cul%3E%3Cli%3E%E4%BF%AE%E6%94%B9app/js/background-process.js%3C/li%3E%3C/ul%3E%3Cp%3E%E6%90%9C%E7%B4%A2%20%3Ccode%3Eawait%20this.api.bulkAccount%3C/code%3E%3C/p%3E%3Cp%3E%3Ccode%3Econst%20e=await%20this.api.bulkAccount();%3C/code%3E%20-&amp;gt;%20%3Ccode%3Evar%20e=wait%20this.api.bulkAccount()%3C/code%3E%3C/p%3E%3Cfigure%20class=%22highlight%20javascript%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Evar%3C/span%3E%20e=%3Cspan%20class=%22keyword%22%3Eawait%3C/span%3E%20%3Cspan%20class=%22variable%20language_%22%3Ethis%3C/span%3E.%3Cspan%20class=%22property%22%3Eapi%3C/span%3E.%3Cspan%20class=%22title%20function_%22%3EbulkAccount%3C/span%3E();e.%3Cspan%20class=%22property%22%3Eaccount%3C/span%3E.%3Cspan%20class=%22property%22%3Epro_mode%3C/span%3E=!%3Cspan%20class=%22number%22%3E0%3C/span%3E,e.%3Cspan%20class=%22property%22%3Eaccount%3C/span%3E.%3Cspan%20class=%22property%22%3Eneed_to_update_subscription%3C/span%3E=!%3Cspan%20class=%22number%22%3E1%3C/span%3E,e.%3Cspan%20class=%22property%22%3Eaccount%3C/span%3E.%3Cspan%20class=%22property%22%3Ecurrent_period%3C/span%3E=&amp;#123;%3Cspan%20class=%22attr%22%3Efrom%3C/span%3E:%3Cspan%20class=%22string%22%3E&amp;quot;2022-01-01T00:00:00&amp;quot;%3C/span%3E,%3Cspan%20class=%22attr%22%3Euntil%3C/span%3E:%3Cspan%20class=%22string%22%3E&amp;quot;2099-01-01T00:00:00&amp;quot;%3C/span%3E&amp;#125;,e.%3Cspan%20class=%22property%22%3Eaccount%3C/span%3E.%3Cspan%20class=%22property%22%3Eplan_type%3C/span%3E=%3Cspan%20class=%22string%22%3E&amp;quot;Premium&amp;quot;%3C/span%3E,e.%3Cspan%20class=%22property%22%3Eaccount%3C/span%3E.%3Cspan%20class=%22property%22%3Euser_type%3C/span%3E=%3Cspan%20class=%22string%22%3E&amp;quot;Premium&amp;quot;%3C/span%3E,e.%3Cspan%20class=%22property%22%3Estudent%3C/span%3E=%3Cspan%20class=%22literal%22%3Enull%3C/span%3E,e.%3Cspan%20class=%22property%22%3Etrial%3C/span%3E=%3Cspan%20class=%22literal%22%3Enull%3C/span%3E,e.%3Cspan%20class=%22property%22%3Eaccount%3C/span%3E.%3Cspan%20class=%22property%22%3Eauthorized_features%3C/span%3E.%3Cspan%20class=%22property%22%3Eshow_trial_section%3C/span%3E=!%3Cspan%20class=%22number%22%3E1%3C/span%3E,e.%3Cspan%20class=%22property%22%3Eaccount%3C/span%3E.%3Cspan%20class=%22property%22%3Eauthorized_features%3C/span%3E.%3Cspan%20class=%22property%22%3Eshow_subscription_section%3C/span%3E=!%3Cspan%20class=%22number%22%3E0%3C/span%3E,e.%3Cspan%20class=%22property%22%3Eaccount%3C/span%3E.%3Cspan%20class=%22property%22%3Eauthorized_features%3C/span%3E.%3Cspan%20class=%22property%22%3Eshow_github_account_section%3C/span%3E=!%3Cspan%20class=%22number%22%3E1%3C/span%3E,e.%3Cspan%20class=%22property%22%3Eaccount%3C/span%3E.%3Cspan%20class=%22property%22%3Eexpired_screen_type%3C/span%3E=%3Cspan%20class=%22literal%22%3Enull%3C/span%3E,e.%3Cspan%20class=%22property%22%3Epersonal_subscription%3C/span%3E=&amp;#123;%3Cspan%20class=%22attr%22%3Enow%3C/span%3E:(%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EDate%3C/span%3E).%3Cspan%20class=%22title%20function_%22%3EtoISOString%3C/span%3E().%3Cspan%20class=%22title%20function_%22%3Eslice%3C/span%3E(%3Cspan%20class=%22number%22%3E0%3C/span%3E,-%3Cspan%20class=%22number%22%3E5%3C/span%3E),%3Cspan%20class=%22attr%22%3Estatus%3C/span%3E:%3Cspan%20class=%22string%22%3E&amp;quot;SUCCESS&amp;quot;%3C/span%3E,%3Cspan%20class=%22attr%22%3Eplatform%3C/span%3E:%3Cspan%20class=%22string%22%3E&amp;quot;stripe&amp;quot;%3C/span%3E,%3Cspan%20class=%22attr%22%3Ecurrent_period%3C/span%3E:&amp;#123;%3Cspan%20class=%22attr%22%3Efrom%3C/span%3E:%3Cspan%20class=%22string%22%3E&amp;quot;2022-01-01T00:00:00&amp;quot;%3C/span%3E,%3Cspan%20class=%22attr%22%3Euntil%3C/span%3E:%3Cspan%20class=%22string%22%3E&amp;quot;2099-01-01T00:00:00&amp;quot;%3C/span%3E&amp;#125;,%3Cspan%20class=%22attr%22%3Erevokable%3C/span%3E:!%3Cspan%20class=%22number%22%3E0%3C/span%3E,%3Cspan%20class=%22attr%22%3Erefunded%3C/span%3E:!%3Cspan%20class=%22number%22%3E1%3C/span%3E,%3Cspan%20class=%22attr%22%3Ecancelable%3C/span%3E:!%3Cspan%20class=%22number%22%3E0%3C/span%3E,%3Cspan%20class=%22attr%22%3Ereactivatable%3C/span%3E:!%3Cspan%20class=%22number%22%3E1%3C/span%3E,%3Cspan%20class=%22attr%22%3Ecurrency%3C/span%3E:%3Cspan%20class=%22string%22%3E&amp;quot;usd&amp;quot;%3C/span%3E,%3Cspan%20class=%22attr%22%3Ecreated_at%3C/span%3E:%3Cspan%20class=%22string%22%3E&amp;quot;2022-01-01T00:00:00&amp;quot;%3C/span%3E,%3Cspan%20class=%22attr%22%3Eupdated_at%3C/span%3E:(%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EDate%3C/span%3E).%3Cspan%20class=%22title%20function_%22%3EtoISOString%3C/span%3E().%3Cspan%20class=%22title%20function_%22%3Eslice%3C/span%3E(%3Cspan%20class=%22number%22%3E0%3C/span%3E,-%3Cspan%20class=%22number%22%3E5%3C/span%3E),%3Cspan%20class=%22attr%22%3Evalid_until%3C/span%3E:%3Cspan%20class=%22string%22%3E&amp;quot;2099-01-01T00:00:00&amp;quot;%3C/span%3E,%3Cspan%20class=%22attr%22%3Eauto_renew%3C/span%3E:!%3Cspan%20class=%22number%22%3E0%3C/span%3E,%3Cspan%20class=%22attr%22%3Eprice%3C/span%3E:%3Cspan%20class=%22number%22%3E12%3C/span%3E,%3Cspan%20class=%22attr%22%3Everbose_plan_name%3C/span%3E:%3Cspan%20class=%22string%22%3E&amp;quot;Termius%20Pro%20Monthly&amp;quot;%3C/span%3E,%3Cspan%20class=%22attr%22%3Eplan_type%3C/span%3E:%3Cspan%20class=%22string%22%3E&amp;quot;SINGLE&amp;quot;%3C/span%3E,%3Cspan%20class=%22attr%22%3Eis_expired%3C/span%3E:!%3Cspan%20class=%22number%22%3E1%3C/span%3E&amp;#125;,e.%3Cspan%20class=%22property%22%3Eaccess_objects%3C/span%3E=[&amp;#123;%3Cspan%20class=%22attr%22%3Eperiod%3C/span%3E:&amp;#123;%3Cspan%20class=%22attr%22%3Estart%3C/span%3E:%3Cspan%20class=%22string%22%3E&amp;quot;2022-01-01T00:00:00&amp;quot;%3C/span%3E,%3Cspan%20class=%22attr%22%3Eend%3C/span%3E:%3Cspan%20class=%22string%22%3E&amp;quot;2099-01-01T00:00:00&amp;quot;%3C/span%3E&amp;#125;,%3Cspan%20class=%22attr%22%3Etitle%3C/span%3E:%3Cspan%20class=%22string%22%3E&amp;quot;Pro&amp;quot;%3C/span%3E&amp;#125;];%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20...%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%90%AF%E5%8A%A8Termius%EF%BC%8C%E7%99%BB%E5%BD%95%E5%B8%90%E5%8F%B7%EF%BC%8C%E9%87%8D%E5%90%AFTermius%3C/p%3E" type="image"/>
    
    
    
    <category term="termius" scheme="https://galudisu.info/tags/termius/"/>
    
  </entry>
  
  <entry>
    <title>rust基础入门[23] - More About Lifetimes</title>
    <link href="https://galudisu.info/2023/01/23/rust/beginning/chapter23_More%20About%20Lifetimes/"/>
    <id>https://galudisu.info/2023/01/23/rust/beginning/chapter23_More%20About%20Lifetimes/</id>
    <published>2023-01-23T07:50:46.000Z</published>
    <updated>2025-04-27T11:59:08.286Z</updated>
    
    <content type="html"><![CDATA[<p>本章覆盖有：</p><ul><li>简单、自由(free)函数和方法需要避免写入生命周期指示器(lifetime specifiers)，因为它们是被推断的</li><li>为什么包含引用的结构体(structs)、元组-结构体(tuple-structs)、枚举(enums)需要生命周期指示器(lifetime specifiers)</li><li>如何为结构体(structs)、元组-结构体(tuple-structs)、枚举(enums)编写生命周期指示器(lifetime specifiers)</li><li>为什么包含指向泛型参数的结构体需要生命周期边界(协变、逆协变)</li></ul><span id="more"></span><h2 id="Lifetime-Elision"><a class="header-anchor" href="#Lifetime-Elision">¶</a>Lifetime Elision</h2><p>上一章节，我们看到每个函数签名，都必须确定引用返回值，即要么是<code>'static</code>的lifetime specifier，要么是关联的函数参数的lifetime specifier。</p><p>有时避免编写这种烦人的注解。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">trait</span> <span class="title class_">Tr</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">f</span>(x: &amp;<span class="type">u8</span>) <span class="punctuation">-&gt;</span> &amp;<span class="type">u8</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这代码是被允许的。返回的值是个引用，它没用指定生命周期，但它也不是<code>'static</code>的，因此这个隐式生命周期指示器(implicit lifetime specifier)必须是函数参数中的其中一个。因为函数参数仅有一个，因此它的lifetime specifier无可厚非就是该参数关联的lifetime specifier。换言之，这个声明函数等效于下面的写法：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">trait</span> <span class="title class_">Tr</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">f</span>&lt;<span class="symbol">&#x27;a</span>&gt;(x: &amp;<span class="symbol">&#x27;a</span> <span class="type">u8</span>) <span class="punctuation">-&gt;</span> &amp;<span class="symbol">&#x27;a</span> <span class="type">u8</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>甚至下面的声明也是有效的：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">trait</span> <span class="title class_">Tr</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">f</span>(b: <span class="type">bool</span>, x: (<span class="type">u32</span>, &amp;<span class="type">u8</span>)) <span class="punctuation">-&gt;</span> &amp;<span class="type">u8</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>因为仅有一个引用，因此可以推断出返回值指向的对象。</p><p>下面的代码也是有效的：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">trait</span> <span class="title class_">Tr</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">f</span>(x: &amp;<span class="type">u8</span>) <span class="punctuation">-&gt;</span> (&amp;<span class="type">u8</span>, &amp;<span class="type">f64</span>, <span class="type">bool</span>, &amp;<span class="type">Vec</span>&lt;<span class="type">String</span>&gt;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这种情况，返回值有好几个引用，但参数的引用仍然仅有一种。</p><p>参数引用类型仅有一种时，你甚至可以省略其返回值类型，而用在其它类型中指定。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">trait</span> <span class="title class_">Tr</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">f</span>&lt;<span class="symbol">&#x27;a</span>&gt;(x: &amp;<span class="symbol">&#x27;a</span> <span class="type">u8</span>) <span class="punctuation">-&gt;</span> (&amp;<span class="type">u8</span>, &amp;<span class="symbol">&#x27;a</span> <span class="type">f64</span>, <span class="type">bool</span>, &amp;<span class="symbol">&#x27;static</span> <span class="type">Vec</span>&lt;<span class="type">String</span>&gt;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里的返回值包含三个引用：第一个没有指定，第二字段有<code>'a</code>，第三个用了<code>'static</code>生命周期指示器。然而，参数中仍然仅有一个引用，因此返回的第一个字段的引用有一个隐式<code>'a</code>生命周期指示器。</p><p>这种省略机制称为“<strong>lifetime elision</strong>”。为了简化语法，生命周期指示器遇到这种仅有一个非静态(non-static)值时，可以 <strong>删去(elided)</strong> 。</p><h2 id="Lifetime-Elision-with-Object-Oriented-Programming"><a class="header-anchor" href="#Lifetime-Elision-with-Object-Oriented-Programming">¶</a>Lifetime Elision with Object-Oriented Programming</h2><p>考虑下面：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">trait</span> <span class="title class_">Tr</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">f</span>(&amp;<span class="keyword">self</span>, y: &amp;<span class="type">u8</span>) <span class="punctuation">-&gt;</span> (&amp;<span class="type">u8</span>, &amp;<span class="type">f64</span>, <span class="type">bool</span>, &amp;<span class="type">Vec</span>&lt;<span class="type">String</span>&gt;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>因为参数有两个引用，所以前面的规则不起作用。然而，当一个方法返回某些引用时，多数情况下这些引用会租借当前的对象，即由<code>&amp;self</code>指向的值。因此，为了简化表达式，前面的代码被看做是下面的等价：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">trait</span> <span class="title class_">Tr</span> &#123;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">f</span>&lt;<span class="symbol">&#x27;a</span>&gt;(&amp;<span class="symbol">&#x27;a</span> <span class="keyword">self</span>, y: &amp;<span class="type">u8</span>) <span class="punctuation">-&gt;</span> (&amp;<span class="symbol">&#x27;a</span> <span class="type">u8</span>, &amp;<span class="symbol">&#x27;a</span> <span class="type">f64</span>, <span class="type">bool</span>, &amp;<span class="symbol">&#x27;a</span> <span class="type">Vec</span>&lt;<span class="type">String</span>&gt;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>目前，你可以为特定引用重载行为。这种情况，你希望返回值的第二个字段生命周期关联参数<code>y</code>，你需要写，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">trait</span> <span class="title class_">Tr</span> &#123;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">f</span>&lt;<span class="symbol">&#x27;a</span>&gt;(&amp;<span class="keyword">self</span>, y: &amp;<span class="symbol">&#x27;a</span> <span class="type">u8</span>) <span class="punctuation">-&gt;</span> (&amp;<span class="type">u8</span>, &amp;<span class="symbol">&#x27;a</span> <span class="type">f64</span>, <span class="type">bool</span>, &amp;<span class="type">Vec</span>&lt;<span class="type">String</span>&gt;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里，tuple中第二个字段指向的对象，存活时间必须要少于<code>y</code>指向的对象，以及第一个字段和第四个字段指向的对象，存活时间必须要少于<code>self</code>指向的对象。</p><p>当然，这个规则同样作用于<code>&amp;mut self</code>参数。</p><h2 id="The-Need-of-Lifetime-Specifiers-for-Structs"><a class="header-anchor" href="#The-Need-of-Lifetime-Specifiers-for-Structs">¶</a>The Need of Lifetime Specifiers for Structs</h2><p>上一个章节中，我们看到这种代码是有效的：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">x</span>: <span class="type">i32</span> = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_y</span>: &amp;<span class="type">i32</span> = &amp;x;</span><br></pre></td></tr></table></figure><p>这是因为，尽管<code>_y</code>持有对<code>x</code>的引用，它存活少于<code>x</code>。</p><p>相反，下面是不合法的，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">_y</span>: &amp;<span class="type">i32</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">x</span>: <span class="type">i32</span> = <span class="number">12</span>;</span><br><span class="line">_y = &amp;x;</span><br></pre></td></tr></table></figure><p>因为<code>_y</code>先于<code>x</code>声明，所以它会在<code>x</code>后销毁，它存活长于<code>x</code>。</p><p>我们也看到了，对于函数签名，需要有合适的注解(即lifetime specifier)，来满足有效的租借检查(borrow checker)。</p><p>除了上一章介绍这些情况，对于结构体(struct)来说，包含某些引用的issue下也相似。</p><p>下面代码看起来是合法的(实际上不是)：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> &#123;</span><br><span class="line">_b: <span class="type">bool</span>,</span><br><span class="line">_ri: &amp;<span class="type">i32</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">x</span>: <span class="type">i32</span> = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_y</span>: S = S &#123; _b: <span class="literal">true</span>, _ri: &amp;x &#125;;</span><br></pre></td></tr></table></figure><p>下面这种很明显是不合法：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> &#123;</span><br><span class="line">_b: <span class="type">bool</span>,</span><br><span class="line">_ri: &amp;<span class="type">i32</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_y</span>: S;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">x</span>: <span class="type">i32</span> = <span class="number">12</span>;</span><br><span class="line">_y = s &#123; _b: <span class="literal">true</span>, _ri: &amp;x &#125;;</span><br></pre></td></tr></table></figure><p>尽管<code>S</code>的字段<code>_ri</code>持有一个<code>x</code>的引用，但它存活长于<code>x</code>。</p><p>这种情况可以非常简单分析出来，但在一个real-world程序中可能是：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// In some library code:</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> &#123;</span><br><span class="line">_b: <span class="type">bool</span>,</span><br><span class="line">_ri: &amp;<span class="type">i32</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">create_s</span>(ri: &amp;<span class="type">i32</span>) <span class="punctuation">-&gt;</span> &#123;</span><br><span class="line">s &#123; _b: <span class="literal">true</span>, _ri: ri &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// In application code:</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_y</span>: S;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">x</span>: <span class="type">i32</span> = <span class="number">12</span>;</span><br><span class="line">_y = <span class="title function_ invoke__">create_s</span>(&amp;x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>该程序代码是无效的，因为，当调用<code>create_s</code>时，指向<code>x</code>的引用会被存储在<code>_y</code>对象内部，但<code>_y</code>存活长于<code>x</code>(<code>_y</code>先于<code>x</code>声明)。</p><p>但程序员若不查看函数体的代码，又怎么知道<code>create_s</code>函数将参数的引用对象作为返回存储了？让我们看看下面的有效程序，它和上面这个类似，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// In some library code:</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> &#123;</span><br><span class="line">_b: <span class="type">bool</span>,</span><br><span class="line">_ri: &amp;<span class="symbol">&#x27;static</span> <span class="type">i32</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">create_s</span>(ri: &amp;<span class="type">i32</span>) <span class="punctuation">-&gt;</span> S &#123;</span><br><span class="line"><span class="keyword">static</span> ZERO: <span class="type">i32</span> = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">static</span> ONE: <span class="type">i32</span> = <span class="number">1</span>;</span><br><span class="line">S &#123;</span><br><span class="line">_b: <span class="literal">true</span>,</span><br><span class="line">_ri: <span class="keyword">if</span> *ri &gt; <span class="number">0</span> &#123; &amp;ONE &#125; <span class="keyword">else</span> &#123; &amp;ZERO &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// In application code:</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_y</span>: S;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">x</span>: <span class="type">i32</span> = <span class="number">12</span>;</span><br><span class="line">_y = <span class="title function_ invoke__">create_s</span>(&amp;x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>代码中，函数<code>create_s</code>仅是用<code>ri</code>参数来初始化结构体的<code>_ri</code>字段。因此参数的值没有被存储在结构体内。<code>_ri</code>会包含一个静态值，即<code>ZERO</code>或<code>ONE</code>，静态变量不会被销毁。</p><p>这里的<code>create_s</code>函数签名虽然和上一个代码一样；但前一个代码是不合法的，因为参数被存储在结构体的字段中，而这里，参数通过<code>*ri</code>使用后，scope就已经结束了，并被回收掉。</p><p>因此，如果没有lifetime specifier，编程者被强迫去阅读函数<code>create_s</code>的方法体的内容，这样才能得知该函数是否会存储参数的引用对象。这种设计是糟糕的。</p><p>为了让编程者避免需要分析<code>create_s</code>函数来得知对象的声明周期是否合法，有必要有更进一步的生命周期注解(lifetime annotations)。</p><p>因此，类似于函数，仅是对于结构体函数，必须显式指定它们字段的每个引用的生命周期。</p><p>这解析了上面代码中，形式上看起来是有效的代码片段，实际上会产生“missing lifetime specifier”的编译错误。</p><h2 id="Possible-Lifetime-Specifiers-for-Structs"><a class="header-anchor" href="#Possible-Lifetime-Specifiers-for-Structs">¶</a>Possible Lifetime Specifiers for Structs</h2><p>实际上，对于一个结构体的引用字段的生命周期，Rust编译器仅允许两种可能：</p><ul><li>该字段仅指向静态对象(static objects)。</li><li>或者指向的对象，虽然不是静态的，但预先存在整个结构体对象中，并且存活长于该结构体。</li></ul><p>第一种情况已经介绍过，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> &#123; _b: <span class="type">bool</span>, _ri: &amp;<span class="symbol">&#x27;static</span> <span class="type">i32</span> &#125;</span><br></pre></td></tr></table></figure><p>该结构体包含有一个引用，不过它是<code>'static</code>引用，所以该引用不能被指派给任何租借的引用值。因此不会有生命周期的讨论问题，只要<code>_ri</code>字段被分配的是静态引用。</p><p>相反，对于第二种情况，下面有效代码阐述，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// In some library code:</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">s</span>&lt;<span class="symbol">&#x27;a</span>&gt; &#123; _b: <span class="type">bool</span>, _ri: &amp;<span class="symbol">&#x27;a</span> <span class="type">i32</span> &#125;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">create_s</span>&lt;<span class="symbol">&#x27;b</span>&gt;(ri: &amp;<span class="symbol">&#x27;b</span> <span class="type">i32</span>) <span class="punctuation">-&gt;</span> S&lt;<span class="symbol">&#x27;b</span>&gt; &#123;</span><br><span class="line">s&#123; _b: <span class="literal">true</span>, _ri: ri &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// In application code:</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">x</span>: <span class="type">i32</span> = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_y</span>: S;</span><br><span class="line">_y = <span class="title function_ invoke__">create_s</span>(&amp;x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里变量<code>x</code>的值被<code>create_s</code>函数租借以及持久化。实际上，它被存储在结构对象的返回字段<code>_ri</code>中；该对象在<code>main</code>函数中被用于初始化变量<code>_y</code>。因此，变量<code>_y</code>必须存活少于<code>x</code>。若将<code>let _y: S;</code>移到<code>x</code>前面，先于<code>x</code>声明，会产生错误“<code>x</code> does not live long enough”。</p><p>要判断<code>_x</code>是否被存储在结构体内部，不需要检查<code>create_s</code>函数体内部实现，也不需要检查结构体<code>S</code>的字段；检查<code>create_s</code>和<code>S</code>的函数签名足够了。</p><p>通过检查<code>create_s</code>函数签名，发现引用参数的生命周期指示器，和返回值<code>S</code>类型的引用指示器是同一个<code>'b</code>。这意味着返回的结构体必须存活长于租借的<code>i32</code>类型的对象。</p><p>通过检查结构体<code>S</code>的签名，发现它由一个lifetime specifier参数化，也意味着相关的某个字段不会是<code>'static</code>的引用。</p><p>因此，我们发现<code>create_s</code>函数是通过同一个lifetime specifier，获取参数的引用和参数化的(parameterized返回对象。这表示返回的引用的对象，可能租借自引用参数。</p><p>编译器必须分别检测结构声明的一致性。<code>struct S&lt;'a&gt;</code>表示<code>S</code>租借了某些对象，而结构体内的<code>_ri: &amp;'a i32</code>表示<code>_ri</code>字段是一个引用租借了一个对象。</p><p>因此，包含有引用字段的结构体，仅允许两种合法语法：“<code>field: &amp;'static type</code>” 或 “<code>field: &amp;'lifetime type</code>”，其中<code>lifetime</code>也是结构体自身的一个参数。如果结构体不包含引用字段或仅会出现静态引用字段，结构体可以不需要声明周期参数。</p><p>由于仅包含一个参数，所以可以通过lifetime elision由其隐式推断，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">create_s</span>(ri: &amp; <span class="type">i32</span>) <span class="punctuation">-&gt;</span> S &#123;</span><br><span class="line">S&#123; _b: <span class="literal">true</span>, _ri: ri &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>因此，可能会有几种的语法错误情况，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">_S1</span> &#123; _f: &amp;<span class="type">i32</span> &#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">_S2</span>&lt;<span class="symbol">&#x27;a</span>&gt; &#123; _f: &amp;<span class="type">i32</span> &#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">_S3</span> &#123; _f: &amp;<span class="symbol">&#x27;a</span> <span class="type">i32</span> &#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">_S4</span>&lt;<span class="symbol">&#x27;a</span>&gt; &#123; _f: &amp;<span class="symbol">&#x27;static</span> <span class="type">i32</span> &#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">_S5</span> &#123; _f: &amp;<span class="symbol">&#x27;static</span> <span class="type">i32</span> &#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">_S6</span>&lt;<span class="symbol">&#x27;a</span>&gt; &#123; _f: &amp;<span class="symbol">&#x27;a</span> <span class="type">i32</span> &#125;</span><br></pre></td></tr></table></figure><p>第一条和第四条语句是不合法的。<code>_S1</code>和<code>_S2</code>的声明是不合法的，因为<code>_f</code>字段是一个引用字段，没有lifetime specifier。</p><p><code>_S3</code>的声明是不合法的，因为生命周期指示器<code>'a</code>没有作为<code>S</code>的一个参数。</p><p><code>_S4</code>的声明是不合法的，因为参数<code>'a</code>没用被用于结构体内。</p><p>相反，最后两个结构体的声明是有效的。<code>_S5</code>包含一个静态对象引用。而<code>_S6</code>包含包含的引用总是存活长于结构体自身。</p><h2 id="Other-Uses-of-Lifetime-Specifiers"><a class="header-anchor" href="#Other-Uses-of-Lifetime-Specifiers">¶</a>Other Uses of Lifetime Specifiers</h2><p>我们知道，当定义一个包含引用的结构体类型时，生命周期指示器是必要的。对于元组-结构体类型也一样。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">TS</span>&lt;<span class="symbol">&#x27;a</span>&gt;(&amp;<span class="symbol">&#x27;a</span> <span class="type">u8</span>);</span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">E</span>&lt;<span class="symbol">&#x27;a</span>, <span class="symbol">&#x27;b</span>&gt; &#123;</span><br><span class="line">    _A(&amp;<span class="symbol">&#x27;a</span> <span class="type">u8</span>),</span><br><span class="line">    _B,</span><br><span class="line">    _C(<span class="type">bool</span>, &amp;<span class="symbol">&#x27;b</span> <span class="type">f64</span>, <span class="type">char</span>),</span><br><span class="line">    _D(&amp;<span class="symbol">&#x27;static</span> <span class="type">str</span>),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">byte</span> = <span class="number">34</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_ts</span> = <span class="title function_ invoke__">TS</span>(&amp;byte);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_e</span> = E::_A(&amp;byte);</span><br></pre></td></tr></table></figure><p>这段代码是有效的，以及移除任何一个lifetime specifier，都会产生“missing lifetime specifier”错误。</p><p>顺带一下，注意<code>E::_D</code>字段的定义。它是一个static string slice 引用。它们是 <strong>字符串字面量(string literals)</strong>。</p><p>为了简化，我们从不在可变引用中混入指示器。实际上，它是被允许的，虽然很另类，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">f</span>&lt;<span class="symbol">&#x27;a</span>&gt;(b: &amp;<span class="symbol">&#x27;a</span> <span class="keyword">mut</span> <span class="type">u8</span>) <span class="punctuation">-&gt;</span> &amp;<span class="symbol">&#x27;a</span> <span class="type">u8</span> &#123;</span><br><span class="line">    *b += <span class="number">1</span>;</span><br><span class="line">    b</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">byte</span> = <span class="number">12u8</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">byte_ref</span> = <span class="title function_ invoke__">f</span>(&amp;<span class="keyword">mut</span> byte);</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, *byte_ref);</span><br></pre></td></tr></table></figure><p>结果将会打印：“13”。一个指向byte的可变引用被作为参数传递给<code>f</code>，以及递增之后作为返回值。通常对于一个可变参数来说，传递给函数后没必要返回它租借的引用的，因为<code>byte_ref</code>和<code>byte</code>都是指向同一个内存对象。</p><p>前面看过了，类型参数和生命周期指示器可以参数化使用，它们也可以用于同一个函数。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">f</span>&lt;<span class="symbol">&#x27;a</span>, T&gt;(b: &amp;<span class="symbol">&#x27;a</span> T) <span class="punctuation">-&gt;</span> &amp;<span class="symbol">&#x27;a</span> T &#123; b &#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">pi</span> = <span class="number">3.14</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">pi_ref</span> = <span class="title function_ invoke__">f</span>(&amp;pi);</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, *pi_ref);</span><br></pre></td></tr></table></figure><p>结果将会打印：“3.14”。</p><p>下面是不合法的，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span>&lt;<span class="symbol">&#x27;a</span>, T&gt; &#123; b: &amp;<span class="symbol">&#x27;a</span> T&#125;</span><br></pre></td></tr></table></figure><p>编译器出现“the parameter type <code>T</code> may not live long enough”。这是因为泛型类型<code>T</code>被具现化时，它的类型可能会包含一个引用，这种引用可能会导致声明周期错误。处于保护机制，编译器禁止这种语法。实际上有两种情况：</p><ul><li><code>T</code>所表示的类型不包含引用，或仅包含静态对象的引用。</li><li><code>T</code>所表示的类型包含non-static对象的引用，它的生命周期需要指定。</li></ul><p>第一种情况类似于，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span>&lt;<span class="symbol">&#x27;a</span>, T: <span class="symbol">&#x27;static</span>&gt; &#123; b: &amp;<span class="symbol">&#x27;a</span> T &#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">s</span> = S &#123; b: &amp;<span class="literal">true</span> &#125;;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, *s.b);</span><br></pre></td></tr></table></figure><p>第二种情况类似于，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span>&lt;<span class="symbol">&#x27;a</span>, T: <span class="symbol">&#x27;a</span>&gt; &#123; b: &amp;<span class="symbol">&#x27;a</span> T &#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">s1</span> = S &#123; b: &amp;<span class="literal">true</span> &#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">s2</span> = S &#123; b: &amp;s1 &#125;;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125;&quot;</span>, *s1.b, *s2.b.b);</span><br></pre></td></tr></table></figure><p>在第一行，<code>T</code>类型参数被界限在<code>'a</code>，意味着不管这个类型是什么，会包含一个引用，并租借这个lifetime specifier注解的对象，即整个结构对象自己。</p><p>在第二行，<code>S</code>结构体被<code>bool</code>初始化。实际上，原生类型不包含任何引用，所以这里用<code>'static</code>限界即可。</p><p>对于第三行，<code>S</code>结构体由<code>S&lt;bool&gt;</code>初始化。该类型包含一个non-static引用，用<code>'a</code>限界。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;本章覆盖有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;简单、自由(free)函数和方法需要避免写入生命周期指示器(lifetime specifiers)，因为它们是被推断的&lt;/li&gt;
&lt;li&gt;为什么包含引用的结构体(structs)、元组-结构体(tuple-structs)、枚举(enums)需要生命周期指示器(lifetime specifiers)&lt;/li&gt;
&lt;li&gt;如何为结构体(structs)、元组-结构体(tuple-structs)、枚举(enums)编写生命周期指示器(lifetime specifiers)&lt;/li&gt;
&lt;li&gt;为什么包含指向泛型参数的结构体需要生命周期边界(协变、逆协变)&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    <content src="https://galudisu.info/%3Cp%3E%E6%9C%AC%E7%AB%A0%E8%A6%86%E7%9B%96%E6%9C%89%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%E7%AE%80%E5%8D%95%E3%80%81%E8%87%AA%E7%94%B1(free)%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95%E9%9C%80%E8%A6%81%E9%81%BF%E5%85%8D%E5%86%99%E5%85%A5%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8(lifetime%20specifiers)%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%AE%83%E4%BB%AC%E6%98%AF%E8%A2%AB%E6%8E%A8%E6%96%AD%E7%9A%84%3C/li%3E%3Cli%3E%E4%B8%BA%E4%BB%80%E4%B9%88%E5%8C%85%E5%90%AB%E5%BC%95%E7%94%A8%E7%9A%84%E7%BB%93%E6%9E%84%E4%BD%93(structs)%E3%80%81%E5%85%83%E7%BB%84-%E7%BB%93%E6%9E%84%E4%BD%93(tuple-structs)%E3%80%81%E6%9E%9A%E4%B8%BE(enums)%E9%9C%80%E8%A6%81%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8(lifetime%20specifiers)%3C/li%3E%3Cli%3E%E5%A6%82%E4%BD%95%E4%B8%BA%E7%BB%93%E6%9E%84%E4%BD%93(structs)%E3%80%81%E5%85%83%E7%BB%84-%E7%BB%93%E6%9E%84%E4%BD%93(tuple-structs)%E3%80%81%E6%9E%9A%E4%B8%BE(enums)%E7%BC%96%E5%86%99%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8(lifetime%20specifiers)%3C/li%3E%3Cli%3E%E4%B8%BA%E4%BB%80%E4%B9%88%E5%8C%85%E5%90%AB%E6%8C%87%E5%90%91%E6%B3%9B%E5%9E%8B%E5%8F%82%E6%95%B0%E7%9A%84%E7%BB%93%E6%9E%84%E4%BD%93%E9%9C%80%E8%A6%81%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E8%BE%B9%E7%95%8C(%E5%8D%8F%E5%8F%98%E3%80%81%E9%80%86%E5%8D%8F%E5%8F%98)%3C/li%3E%3C/ul%3E%3Cspan%20id=%22more%22%3E%3C/span%3E%3Ch2%20id=%22Lifetime-Elision%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Lifetime-Elision%22%3E%C2%B6%3C/a%3ELifetime%20Elision%3C/h2%3E%3Cp%3E%E4%B8%8A%E4%B8%80%E7%AB%A0%E8%8A%82%EF%BC%8C%E6%88%91%E4%BB%AC%E7%9C%8B%E5%88%B0%E6%AF%8F%E4%B8%AA%E5%87%BD%E6%95%B0%E7%AD%BE%E5%90%8D%EF%BC%8C%E9%83%BD%E5%BF%85%E9%A1%BB%E7%A1%AE%E5%AE%9A%E5%BC%95%E7%94%A8%E8%BF%94%E5%9B%9E%E5%80%BC%EF%BC%8C%E5%8D%B3%E8%A6%81%E4%B9%88%E6%98%AF%3Ccode%3E&#39;static%3C/code%3E%E7%9A%84lifetime%20specifier%EF%BC%8C%E8%A6%81%E4%B9%88%E6%98%AF%E5%85%B3%E8%81%94%E7%9A%84%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E7%9A%84lifetime%20specifier%E3%80%82%3C/p%3E%3Cp%3E%E6%9C%89%E6%97%B6%E9%81%BF%E5%85%8D%E7%BC%96%E5%86%99%E8%BF%99%E7%A7%8D%E7%83%A6%E4%BA%BA%E7%9A%84%E6%B3%A8%E8%A7%A3%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Etrait%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ETr%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E(x:%20&amp;amp;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20&amp;amp;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%BF%99%E4%BB%A3%E7%A0%81%E6%98%AF%E8%A2%AB%E5%85%81%E8%AE%B8%E7%9A%84%E3%80%82%E8%BF%94%E5%9B%9E%E7%9A%84%E5%80%BC%E6%98%AF%E4%B8%AA%E5%BC%95%E7%94%A8%EF%BC%8C%E5%AE%83%E6%B2%A1%E7%94%A8%E6%8C%87%E5%AE%9A%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%8C%E4%BD%86%E5%AE%83%E4%B9%9F%E4%B8%8D%E6%98%AF%3Ccode%3E&#39;static%3C/code%3E%E7%9A%84%EF%BC%8C%E5%9B%A0%E6%AD%A4%E8%BF%99%E4%B8%AA%E9%9A%90%E5%BC%8F%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8(implicit%20lifetime%20specifier)%E5%BF%85%E9%A1%BB%E6%98%AF%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E4%B8%AD%E7%9A%84%E5%85%B6%E4%B8%AD%E4%B8%80%E4%B8%AA%E3%80%82%E5%9B%A0%E4%B8%BA%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E4%BB%85%E6%9C%89%E4%B8%80%E4%B8%AA%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%AE%83%E7%9A%84lifetime%20specifier%E6%97%A0%E5%8F%AF%E5%8E%9A%E9%9D%9E%E5%B0%B1%E6%98%AF%E8%AF%A5%E5%8F%82%E6%95%B0%E5%85%B3%E8%81%94%E7%9A%84lifetime%20specifier%E3%80%82%E6%8D%A2%E8%A8%80%E4%B9%8B%EF%BC%8C%E8%BF%99%E4%B8%AA%E5%A3%B0%E6%98%8E%E5%87%BD%E6%95%B0%E7%AD%89%E6%95%88%E4%BA%8E%E4%B8%8B%E9%9D%A2%E7%9A%84%E5%86%99%E6%B3%95%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Etrait%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ETr%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E&amp;gt;(x:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Eu8%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Eu8%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%94%9A%E8%87%B3%E4%B8%8B%E9%9D%A2%E7%9A%84%E5%A3%B0%E6%98%8E%E4%B9%9F%E6%98%AF%E6%9C%89%E6%95%88%E7%9A%84%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Etrait%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ETr%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E(b:%20%3Cspan%20class=%22type%22%3Ebool%3C/span%3E,%20x:%20(%3Cspan%20class=%22type%22%3Eu32%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E))%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20&amp;amp;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%9B%A0%E4%B8%BA%E4%BB%85%E6%9C%89%E4%B8%80%E4%B8%AA%E5%BC%95%E7%94%A8%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%8F%AF%E4%BB%A5%E6%8E%A8%E6%96%AD%E5%87%BA%E8%BF%94%E5%9B%9E%E5%80%BC%E6%8C%87%E5%90%91%E7%9A%84%E5%AF%B9%E8%B1%A1%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BB%A3%E7%A0%81%E4%B9%9F%E6%98%AF%E6%9C%89%E6%95%88%E7%9A%84%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Etrait%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ETr%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E(x:%20&amp;amp;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20(&amp;amp;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22type%22%3Ef64%3C/span%3E,%20%3Cspan%20class=%22type%22%3Ebool%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3EString%3C/span%3E&amp;gt;);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%EF%BC%8C%E8%BF%94%E5%9B%9E%E5%80%BC%E6%9C%89%E5%A5%BD%E5%87%A0%E4%B8%AA%E5%BC%95%E7%94%A8%EF%BC%8C%E4%BD%86%E5%8F%82%E6%95%B0%E7%9A%84%E5%BC%95%E7%94%A8%E4%BB%8D%E7%84%B6%E4%BB%85%E6%9C%89%E4%B8%80%E7%A7%8D%E3%80%82%3C/p%3E%3Cp%3E%E5%8F%82%E6%95%B0%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E4%BB%85%E6%9C%89%E4%B8%80%E7%A7%8D%E6%97%B6%EF%BC%8C%E4%BD%A0%E7%94%9A%E8%87%B3%E5%8F%AF%E4%BB%A5%E7%9C%81%E7%95%A5%E5%85%B6%E8%BF%94%E5%9B%9E%E5%80%BC%E7%B1%BB%E5%9E%8B%EF%BC%8C%E8%80%8C%E7%94%A8%E5%9C%A8%E5%85%B6%E5%AE%83%E7%B1%BB%E5%9E%8B%E4%B8%AD%E6%8C%87%E5%AE%9A%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Etrait%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ETr%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E&amp;gt;(x:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Eu8%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20(&amp;amp;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E,%20%3Cspan%20class=%22type%22%3Ebool%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;static%3C/span%3E%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3EString%3C/span%3E&amp;gt;);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%BF%99%E9%87%8C%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC%E5%8C%85%E5%90%AB%E4%B8%89%E4%B8%AA%E5%BC%95%E7%94%A8%EF%BC%9A%E7%AC%AC%E4%B8%80%E4%B8%AA%E6%B2%A1%E6%9C%89%E6%8C%87%E5%AE%9A%EF%BC%8C%E7%AC%AC%E4%BA%8C%E5%AD%97%E6%AE%B5%E6%9C%89%3Ccode%3E&#39;a%3C/code%3E%EF%BC%8C%E7%AC%AC%E4%B8%89%E4%B8%AA%E7%94%A8%E4%BA%86%3Ccode%3E&#39;static%3C/code%3E%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8%E3%80%82%E7%84%B6%E8%80%8C%EF%BC%8C%E5%8F%82%E6%95%B0%E4%B8%AD%E4%BB%8D%E7%84%B6%E4%BB%85%E6%9C%89%E4%B8%80%E4%B8%AA%E5%BC%95%E7%94%A8%EF%BC%8C%E5%9B%A0%E6%AD%A4%E8%BF%94%E5%9B%9E%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%9A%84%E5%BC%95%E7%94%A8%E6%9C%89%E4%B8%80%E4%B8%AA%E9%9A%90%E5%BC%8F%3Ccode%3E&#39;a%3C/code%3E%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8%E3%80%82%3C/p%3E%3Cp%3E%E8%BF%99%E7%A7%8D%E7%9C%81%E7%95%A5%E6%9C%BA%E5%88%B6%E7%A7%B0%E4%B8%BA%E2%80%9C%3Cstrong%3Elifetime%20elision%3C/strong%3E%E2%80%9D%E3%80%82%E4%B8%BA%E4%BA%86%E7%AE%80%E5%8C%96%E8%AF%AD%E6%B3%95%EF%BC%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8%E9%81%87%E5%88%B0%E8%BF%99%E7%A7%8D%E4%BB%85%E6%9C%89%E4%B8%80%E4%B8%AA%E9%9D%9E%E9%9D%99%E6%80%81(non-static)%E5%80%BC%E6%97%B6%EF%BC%8C%E5%8F%AF%E4%BB%A5%20%3Cstrong%3E%E5%88%A0%E5%8E%BB(elided)%3C/strong%3E%20%E3%80%82%3C/p%3E%3Ch2%20id=%22Lifetime-Elision-with-Object-Oriented-Programming%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Lifetime-Elision-with-Object-Oriented-Programming%22%3E%C2%B6%3C/a%3ELifetime%20Elision%20with%20Object-Oriented%20Programming%3C/h2%3E%3Cp%3E%E8%80%83%E8%99%91%E4%B8%8B%E9%9D%A2%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Etrait%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ETr%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E(&amp;amp;%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E,%20y:%20&amp;amp;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20(&amp;amp;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22type%22%3Ef64%3C/span%3E,%20%3Cspan%20class=%22type%22%3Ebool%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3EString%3C/span%3E&amp;gt;);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%9B%A0%E4%B8%BA%E5%8F%82%E6%95%B0%E6%9C%89%E4%B8%A4%E4%B8%AA%E5%BC%95%E7%94%A8%EF%BC%8C%E6%89%80%E4%BB%A5%E5%89%8D%E9%9D%A2%E7%9A%84%E8%A7%84%E5%88%99%E4%B8%8D%E8%B5%B7%E4%BD%9C%E7%94%A8%E3%80%82%E7%84%B6%E8%80%8C%EF%BC%8C%E5%BD%93%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%E8%BF%94%E5%9B%9E%E6%9F%90%E4%BA%9B%E5%BC%95%E7%94%A8%E6%97%B6%EF%BC%8C%E5%A4%9A%E6%95%B0%E6%83%85%E5%86%B5%E4%B8%8B%E8%BF%99%E4%BA%9B%E5%BC%95%E7%94%A8%E4%BC%9A%E7%A7%9F%E5%80%9F%E5%BD%93%E5%89%8D%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%8D%B3%E7%94%B1%3Ccode%3E&amp;amp;self%3C/code%3E%E6%8C%87%E5%90%91%E7%9A%84%E5%80%BC%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8C%E4%B8%BA%E4%BA%86%E7%AE%80%E5%8C%96%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%8C%E5%89%8D%E9%9D%A2%E7%9A%84%E4%BB%A3%E7%A0%81%E8%A2%AB%E7%9C%8B%E5%81%9A%E6%98%AF%E4%B8%8B%E9%9D%A2%E7%9A%84%E7%AD%89%E4%BB%B7%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Etrait%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ETr%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E&amp;gt;(&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E,%20y:%20&amp;amp;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20(&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Eu8%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E,%20%3Cspan%20class=%22type%22%3Ebool%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3EString%3C/span%3E&amp;gt;);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%9B%AE%E5%89%8D%EF%BC%8C%E4%BD%A0%E5%8F%AF%E4%BB%A5%E4%B8%BA%E7%89%B9%E5%AE%9A%E5%BC%95%E7%94%A8%E9%87%8D%E8%BD%BD%E8%A1%8C%E4%B8%BA%E3%80%82%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%EF%BC%8C%E4%BD%A0%E5%B8%8C%E6%9C%9B%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%85%B3%E8%81%94%E5%8F%82%E6%95%B0%3Ccode%3Ey%3C/code%3E%EF%BC%8C%E4%BD%A0%E9%9C%80%E8%A6%81%E5%86%99%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Etrait%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ETr%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E&amp;gt;(&amp;amp;%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E,%20y:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Eu8%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20(&amp;amp;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E,%20%3Cspan%20class=%22type%22%3Ebool%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3EString%3C/span%3E&amp;gt;);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%BF%99%E9%87%8C%EF%BC%8Ctuple%E4%B8%AD%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%AD%97%E6%AE%B5%E6%8C%87%E5%90%91%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%AD%98%E6%B4%BB%E6%97%B6%E9%97%B4%E5%BF%85%E9%A1%BB%E8%A6%81%E5%B0%91%E4%BA%8E%3Ccode%3Ey%3C/code%3E%E6%8C%87%E5%90%91%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E4%BB%A5%E5%8F%8A%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AE%B5%E5%92%8C%E7%AC%AC%E5%9B%9B%E4%B8%AA%E5%AD%97%E6%AE%B5%E6%8C%87%E5%90%91%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%AD%98%E6%B4%BB%E6%97%B6%E9%97%B4%E5%BF%85%E9%A1%BB%E8%A6%81%E5%B0%91%E4%BA%8E%3Ccode%3Eself%3C/code%3E%E6%8C%87%E5%90%91%E7%9A%84%E5%AF%B9%E8%B1%A1%E3%80%82%3C/p%3E%3Cp%3E%E5%BD%93%E7%84%B6%EF%BC%8C%E8%BF%99%E4%B8%AA%E8%A7%84%E5%88%99%E5%90%8C%E6%A0%B7%E4%BD%9C%E7%94%A8%E4%BA%8E%3Ccode%3E&amp;amp;mut%20self%3C/code%3E%E5%8F%82%E6%95%B0%E3%80%82%3C/p%3E%3Ch2%20id=%22The-Need-of-Lifetime-Specifiers-for-Structs%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#The-Need-of-Lifetime-Specifiers-for-Structs%22%3E%C2%B6%3C/a%3EThe%20Need%20of%20Lifetime%20Specifiers%20for%20Structs%3C/h2%3E%3Cp%3E%E4%B8%8A%E4%B8%80%E4%B8%AA%E7%AB%A0%E8%8A%82%E4%B8%AD%EF%BC%8C%E6%88%91%E4%BB%AC%E7%9C%8B%E5%88%B0%E8%BF%99%E7%A7%8D%E4%BB%A3%E7%A0%81%E6%98%AF%E6%9C%89%E6%95%88%E7%9A%84%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ex%3C/span%3E:%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_y%3C/span%3E:%20&amp;amp;%3Cspan%20class=%22type%22%3Ei32%3C/span%3E%20=%20&amp;amp;x;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%BF%99%E6%98%AF%E5%9B%A0%E4%B8%BA%EF%BC%8C%E5%B0%BD%E7%AE%A1%3Ccode%3E_y%3C/code%3E%E6%8C%81%E6%9C%89%E5%AF%B9%3Ccode%3Ex%3C/code%3E%E7%9A%84%E5%BC%95%E7%94%A8%EF%BC%8C%E5%AE%83%E5%AD%98%E6%B4%BB%E5%B0%91%E4%BA%8E%3Ccode%3Ex%3C/code%3E%E3%80%82%3C/p%3E%3Cp%3E%E7%9B%B8%E5%8F%8D%EF%BC%8C%E4%B8%8B%E9%9D%A2%E6%98%AF%E4%B8%8D%E5%90%88%E6%B3%95%E7%9A%84%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_y%3C/span%3E:%20&amp;amp;%3Cspan%20class=%22type%22%3Ei32%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ex%3C/span%3E:%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E_y%20=%20&amp;amp;x;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%9B%A0%E4%B8%BA%3Ccode%3E_y%3C/code%3E%E5%85%88%E4%BA%8E%3Ccode%3Ex%3C/code%3E%E5%A3%B0%E6%98%8E%EF%BC%8C%E6%89%80%E4%BB%A5%E5%AE%83%E4%BC%9A%E5%9C%A8%3Ccode%3Ex%3C/code%3E%E5%90%8E%E9%94%80%E6%AF%81%EF%BC%8C%E5%AE%83%E5%AD%98%E6%B4%BB%E9%95%BF%E4%BA%8E%3Ccode%3Ex%3C/code%3E%E3%80%82%3C/p%3E%3Cp%3E%E6%88%91%E4%BB%AC%E4%B9%9F%E7%9C%8B%E5%88%B0%E4%BA%86%EF%BC%8C%E5%AF%B9%E4%BA%8E%E5%87%BD%E6%95%B0%E7%AD%BE%E5%90%8D%EF%BC%8C%E9%9C%80%E8%A6%81%E6%9C%89%E5%90%88%E9%80%82%E7%9A%84%E6%B3%A8%E8%A7%A3(%E5%8D%B3lifetime%20specifier)%EF%BC%8C%E6%9D%A5%E6%BB%A1%E8%B6%B3%E6%9C%89%E6%95%88%E7%9A%84%E7%A7%9F%E5%80%9F%E6%A3%80%E6%9F%A5(borrow%20checker)%E3%80%82%3C/p%3E%3Cp%3E%E9%99%A4%E4%BA%86%E4%B8%8A%E4%B8%80%E7%AB%A0%E4%BB%8B%E7%BB%8D%E8%BF%99%E4%BA%9B%E6%83%85%E5%86%B5%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%BB%93%E6%9E%84%E4%BD%93(struct)%E6%9D%A5%E8%AF%B4%EF%BC%8C%E5%8C%85%E5%90%AB%E6%9F%90%E4%BA%9B%E5%BC%95%E7%94%A8%E7%9A%84issue%E4%B8%8B%E4%B9%9F%E7%9B%B8%E4%BC%BC%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%8B%E9%9D%A2%E4%BB%A3%E7%A0%81%E7%9C%8B%E8%B5%B7%E6%9D%A5%E6%98%AF%E5%90%88%E6%B3%95%E7%9A%84(%E5%AE%9E%E9%99%85%E4%B8%8A%E4%B8%8D%E6%98%AF)%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E_b:%20%3Cspan%20class=%22type%22%3Ebool%3C/span%3E,%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E_ri:%20&amp;amp;%3Cspan%20class=%22type%22%3Ei32%3C/span%3E,%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ex%3C/span%3E:%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_y%3C/span%3E:%20S%20=%20S%20&amp;#123;%20_b:%20%3Cspan%20class=%22literal%22%3Etrue%3C/span%3E,%20_ri:%20&amp;amp;x%20&amp;#125;;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E4%B8%8B%E9%9D%A2%E8%BF%99%E7%A7%8D%E5%BE%88%E6%98%8E%E6%98%BE%E6%98%AF%E4%B8%8D%E5%90%88%E6%B3%95%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E_b:%20%3Cspan%20class=%22type%22%3Ebool%3C/span%3E,%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E_ri:%20&amp;amp;%3Cspan%20class=%22type%22%3Ei32%3C/span%3E,%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_y%3C/span%3E:%20S;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ex%3C/span%3E:%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E_y%20=%20s%20&amp;#123;%20_b:%20%3Cspan%20class=%22literal%22%3Etrue%3C/span%3E,%20_ri:%20&amp;amp;x%20&amp;#125;;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%B0%BD%E7%AE%A1%3Ccode%3ES%3C/code%3E%E7%9A%84%E5%AD%97%E6%AE%B5%3Ccode%3E_ri%3C/code%3E%E6%8C%81%E6%9C%89%E4%B8%80%E4%B8%AA%3Ccode%3Ex%3C/code%3E%E7%9A%84%E5%BC%95%E7%94%A8%EF%BC%8C%E4%BD%86%E5%AE%83%E5%AD%98%E6%B4%BB%E9%95%BF%E4%BA%8E%3Ccode%3Ex%3C/code%3E%E3%80%82%3C/p%3E%3Cp%3E%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%E5%8F%AF%E4%BB%A5%E9%9D%9E%E5%B8%B8%E7%AE%80%E5%8D%95%E5%88%86%E6%9E%90%E5%87%BA%E6%9D%A5%EF%BC%8C%E4%BD%86%E5%9C%A8%E4%B8%80%E4%B8%AAreal-world%E7%A8%8B%E5%BA%8F%E4%B8%AD%E5%8F%AF%E8%83%BD%E6%98%AF%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22comment%22%3E/%20In%20some%20library%20code:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E_b:%20%3Cspan%20class=%22type%22%3Ebool%3C/span%3E,%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E_ri:%20&amp;amp;%3Cspan%20class=%22type%22%3Ei32%3C/span%3E,%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ecreate_s%3C/span%3E(ri:%20&amp;amp;%3Cspan%20class=%22type%22%3Ei32%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Es%20&amp;#123;%20_b:%20%3Cspan%20class=%22literal%22%3Etrue%3C/span%3E,%20_ri:%20ri%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22comment%22%3E/%20In%20application%20code:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Emain%3C/span%3E()%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_y%3C/span%3E:%20S;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ex%3C/span%3E:%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E_y%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Ecreate_s%3C/span%3E(&amp;amp;x);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%AF%A5%E7%A8%8B%E5%BA%8F%E4%BB%A3%E7%A0%81%E6%98%AF%E6%97%A0%E6%95%88%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%EF%BC%8C%E5%BD%93%E8%B0%83%E7%94%A8%3Ccode%3Ecreate_s%3C/code%3E%E6%97%B6%EF%BC%8C%E6%8C%87%E5%90%91%3Ccode%3Ex%3C/code%3E%E7%9A%84%E5%BC%95%E7%94%A8%E4%BC%9A%E8%A2%AB%E5%AD%98%E5%82%A8%E5%9C%A8%3Ccode%3E_y%3C/code%3E%E5%AF%B9%E8%B1%A1%E5%86%85%E9%83%A8%EF%BC%8C%E4%BD%86%3Ccode%3E_y%3C/code%3E%E5%AD%98%E6%B4%BB%E9%95%BF%E4%BA%8E%3Ccode%3Ex%3C/code%3E(%3Ccode%3E_y%3C/code%3E%E5%85%88%E4%BA%8E%3Ccode%3Ex%3C/code%3E%E5%A3%B0%E6%98%8E)%E3%80%82%3C/p%3E%3Cp%3E%E4%BD%86%E7%A8%8B%E5%BA%8F%E5%91%98%E8%8B%A5%E4%B8%8D%E6%9F%A5%E7%9C%8B%E5%87%BD%E6%95%B0%E4%BD%93%E7%9A%84%E4%BB%A3%E7%A0%81%EF%BC%8C%E5%8F%88%E6%80%8E%E4%B9%88%E7%9F%A5%E9%81%93%3Ccode%3Ecreate_s%3C/code%3E%E5%87%BD%E6%95%B0%E5%B0%86%E5%8F%82%E6%95%B0%E7%9A%84%E5%BC%95%E7%94%A8%E5%AF%B9%E8%B1%A1%E4%BD%9C%E4%B8%BA%E8%BF%94%E5%9B%9E%E5%AD%98%E5%82%A8%E4%BA%86%EF%BC%9F%E8%AE%A9%E6%88%91%E4%BB%AC%E7%9C%8B%E7%9C%8B%E4%B8%8B%E9%9D%A2%E7%9A%84%E6%9C%89%E6%95%88%E7%A8%8B%E5%BA%8F%EF%BC%8C%E5%AE%83%E5%92%8C%E4%B8%8A%E9%9D%A2%E8%BF%99%E4%B8%AA%E7%B1%BB%E4%BC%BC%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E18%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E19%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E20%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22comment%22%3E/%20In%20some%20library%20code:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E_b:%20%3Cspan%20class=%22type%22%3Ebool%3C/span%3E,%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E_ri:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;static%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E,%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ecreate_s%3C/span%3E(ri:%20&amp;amp;%3Cspan%20class=%22type%22%3Ei32%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20S%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20ZERO:%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E0%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20ONE:%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E1%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3ES%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E_b:%20%3Cspan%20class=%22literal%22%3Etrue%3C/span%3E,%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E_ri:%20%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20*ri%20&amp;gt;%20%3Cspan%20class=%22number%22%3E0%3C/span%3E%20&amp;#123;%20&amp;amp;ONE%20&amp;#125;%20%3Cspan%20class=%22keyword%22%3Eelse%3C/span%3E%20&amp;#123;%20&amp;amp;ZERO%20&amp;#125;,%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22comment%22%3E/%20In%20application%20code:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Emain%3C/span%3E()%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_y%3C/span%3E:%20S;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ex%3C/span%3E:%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E_y%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Ecreate_s%3C/span%3E(&amp;amp;x);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E4%BB%A3%E7%A0%81%E4%B8%AD%EF%BC%8C%E5%87%BD%E6%95%B0%3Ccode%3Ecreate_s%3C/code%3E%E4%BB%85%E6%98%AF%E7%94%A8%3Ccode%3Eri%3C/code%3E%E5%8F%82%E6%95%B0%E6%9D%A5%E5%88%9D%E5%A7%8B%E5%8C%96%E7%BB%93%E6%9E%84%E4%BD%93%E7%9A%84%3Ccode%3E_ri%3C/code%3E%E5%AD%97%E6%AE%B5%E3%80%82%E5%9B%A0%E6%AD%A4%E5%8F%82%E6%95%B0%E7%9A%84%E5%80%BC%E6%B2%A1%E6%9C%89%E8%A2%AB%E5%AD%98%E5%82%A8%E5%9C%A8%E7%BB%93%E6%9E%84%E4%BD%93%E5%86%85%E3%80%82%3Ccode%3E_ri%3C/code%3E%E4%BC%9A%E5%8C%85%E5%90%AB%E4%B8%80%E4%B8%AA%E9%9D%99%E6%80%81%E5%80%BC%EF%BC%8C%E5%8D%B3%3Ccode%3EZERO%3C/code%3E%E6%88%96%3Ccode%3EONE%3C/code%3E%EF%BC%8C%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F%E4%B8%8D%E4%BC%9A%E8%A2%AB%E9%94%80%E6%AF%81%E3%80%82%3C/p%3E%3Cp%3E%E8%BF%99%E9%87%8C%E7%9A%84%3Ccode%3Ecreate_s%3C/code%3E%E5%87%BD%E6%95%B0%E7%AD%BE%E5%90%8D%E8%99%BD%E7%84%B6%E5%92%8C%E4%B8%8A%E4%B8%80%E4%B8%AA%E4%BB%A3%E7%A0%81%E4%B8%80%E6%A0%B7%EF%BC%9B%E4%BD%86%E5%89%8D%E4%B8%80%E4%B8%AA%E4%BB%A3%E7%A0%81%E6%98%AF%E4%B8%8D%E5%90%88%E6%B3%95%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%8F%82%E6%95%B0%E8%A2%AB%E5%AD%98%E5%82%A8%E5%9C%A8%E7%BB%93%E6%9E%84%E4%BD%93%E7%9A%84%E5%AD%97%E6%AE%B5%E4%B8%AD%EF%BC%8C%E8%80%8C%E8%BF%99%E9%87%8C%EF%BC%8C%E5%8F%82%E6%95%B0%E9%80%9A%E8%BF%87%3Ccode%3E*ri%3C/code%3E%E4%BD%BF%E7%94%A8%E5%90%8E%EF%BC%8Cscope%E5%B0%B1%E5%B7%B2%E7%BB%8F%E7%BB%93%E6%9D%9F%E4%BA%86%EF%BC%8C%E5%B9%B6%E8%A2%AB%E5%9B%9E%E6%94%B6%E6%8E%89%E3%80%82%3C/p%3E%3Cp%3E%E5%9B%A0%E6%AD%A4%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89lifetime%20specifier%EF%BC%8C%E7%BC%96%E7%A8%8B%E8%80%85%E8%A2%AB%E5%BC%BA%E8%BF%AB%E5%8E%BB%E9%98%85%E8%AF%BB%E5%87%BD%E6%95%B0%3Ccode%3Ecreate_s%3C/code%3E%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%93%E7%9A%84%E5%86%85%E5%AE%B9%EF%BC%8C%E8%BF%99%E6%A0%B7%E6%89%8D%E8%83%BD%E5%BE%97%E7%9F%A5%E8%AF%A5%E5%87%BD%E6%95%B0%E6%98%AF%E5%90%A6%E4%BC%9A%E5%AD%98%E5%82%A8%E5%8F%82%E6%95%B0%E7%9A%84%E5%BC%95%E7%94%A8%E5%AF%B9%E8%B1%A1%E3%80%82%E8%BF%99%E7%A7%8D%E8%AE%BE%E8%AE%A1%E6%98%AF%E7%B3%9F%E7%B3%95%E7%9A%84%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%BA%E4%BA%86%E8%AE%A9%E7%BC%96%E7%A8%8B%E8%80%85%E9%81%BF%E5%85%8D%E9%9C%80%E8%A6%81%E5%88%86%E6%9E%90%3Ccode%3Ecreate_s%3C/code%3E%E5%87%BD%E6%95%B0%E6%9D%A5%E5%BE%97%E7%9F%A5%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%A3%B0%E6%98%8E%E5%91%A8%E6%9C%9F%E6%98%AF%E5%90%A6%E5%90%88%E6%B3%95%EF%BC%8C%E6%9C%89%E5%BF%85%E8%A6%81%E6%9C%89%E6%9B%B4%E8%BF%9B%E4%B8%80%E6%AD%A5%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%B3%A8%E8%A7%A3(lifetime%20annotations)%E3%80%82%3C/p%3E%3Cp%3E%E5%9B%A0%E6%AD%A4%EF%BC%8C%E7%B1%BB%E4%BC%BC%E4%BA%8E%E5%87%BD%E6%95%B0%EF%BC%8C%E4%BB%85%E6%98%AF%E5%AF%B9%E4%BA%8E%E7%BB%93%E6%9E%84%E4%BD%93%E5%87%BD%E6%95%B0%EF%BC%8C%E5%BF%85%E9%A1%BB%E6%98%BE%E5%BC%8F%E6%8C%87%E5%AE%9A%E5%AE%83%E4%BB%AC%E5%AD%97%E6%AE%B5%E7%9A%84%E6%AF%8F%E4%B8%AA%E5%BC%95%E7%94%A8%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E3%80%82%3C/p%3E%3Cp%3E%E8%BF%99%E8%A7%A3%E6%9E%90%E4%BA%86%E4%B8%8A%E9%9D%A2%E4%BB%A3%E7%A0%81%E4%B8%AD%EF%BC%8C%E5%BD%A2%E5%BC%8F%E4%B8%8A%E7%9C%8B%E8%B5%B7%E6%9D%A5%E6%98%AF%E6%9C%89%E6%95%88%E7%9A%84%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5%EF%BC%8C%E5%AE%9E%E9%99%85%E4%B8%8A%E4%BC%9A%E4%BA%A7%E7%94%9F%E2%80%9Cmissing%20lifetime%20specifier%E2%80%9D%E7%9A%84%E7%BC%96%E8%AF%91%E9%94%99%E8%AF%AF%E3%80%82%3C/p%3E%3Ch2%20id=%22Possible-Lifetime-Specifiers-for-Structs%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Possible-Lifetime-Specifiers-for-Structs%22%3E%C2%B6%3C/a%3EPossible%20Lifetime%20Specifiers%20for%20Structs%3C/h2%3E%3Cp%3E%E5%AE%9E%E9%99%85%E4%B8%8A%EF%BC%8C%E5%AF%B9%E4%BA%8E%E4%B8%80%E4%B8%AA%E7%BB%93%E6%9E%84%E4%BD%93%E7%9A%84%E5%BC%95%E7%94%A8%E5%AD%97%E6%AE%B5%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%8CRust%E7%BC%96%E8%AF%91%E5%99%A8%E4%BB%85%E5%85%81%E8%AE%B8%E4%B8%A4%E7%A7%8D%E5%8F%AF%E8%83%BD%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%E8%AF%A5%E5%AD%97%E6%AE%B5%E4%BB%85%E6%8C%87%E5%90%91%E9%9D%99%E6%80%81%E5%AF%B9%E8%B1%A1(static%20objects)%E3%80%82%3C/li%3E%3Cli%3E%E6%88%96%E8%80%85%E6%8C%87%E5%90%91%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E8%99%BD%E7%84%B6%E4%B8%8D%E6%98%AF%E9%9D%99%E6%80%81%E7%9A%84%EF%BC%8C%E4%BD%86%E9%A2%84%E5%85%88%E5%AD%98%E5%9C%A8%E6%95%B4%E4%B8%AA%E7%BB%93%E6%9E%84%E4%BD%93%E5%AF%B9%E8%B1%A1%E4%B8%AD%EF%BC%8C%E5%B9%B6%E4%B8%94%E5%AD%98%E6%B4%BB%E9%95%BF%E4%BA%8E%E8%AF%A5%E7%BB%93%E6%9E%84%E4%BD%93%E3%80%82%3C/li%3E%3C/ul%3E%3Cp%3E%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%83%85%E5%86%B5%E5%B7%B2%E7%BB%8F%E4%BB%8B%E7%BB%8D%E8%BF%87%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;%20_b:%20%3Cspan%20class=%22type%22%3Ebool%3C/span%3E,%20_ri:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;static%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E%20&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%AF%A5%E7%BB%93%E6%9E%84%E4%BD%93%E5%8C%85%E5%90%AB%E6%9C%89%E4%B8%80%E4%B8%AA%E5%BC%95%E7%94%A8%EF%BC%8C%E4%B8%8D%E8%BF%87%E5%AE%83%E6%98%AF%3Ccode%3E&#39;static%3C/code%3E%E5%BC%95%E7%94%A8%EF%BC%8C%E6%89%80%E4%BB%A5%E8%AF%A5%E5%BC%95%E7%94%A8%E4%B8%8D%E8%83%BD%E8%A2%AB%E6%8C%87%E6%B4%BE%E7%BB%99%E4%BB%BB%E4%BD%95%E7%A7%9F%E5%80%9F%E7%9A%84%E5%BC%95%E7%94%A8%E5%80%BC%E3%80%82%E5%9B%A0%E6%AD%A4%E4%B8%8D%E4%BC%9A%E6%9C%89%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%9A%84%E8%AE%A8%E8%AE%BA%E9%97%AE%E9%A2%98%EF%BC%8C%E5%8F%AA%E8%A6%81%3Ccode%3E_ri%3C/code%3E%E5%AD%97%E6%AE%B5%E8%A2%AB%E5%88%86%E9%85%8D%E7%9A%84%E6%98%AF%E9%9D%99%E6%80%81%E5%BC%95%E7%94%A8%E3%80%82%3C/p%3E%3Cp%3E%E7%9B%B8%E5%8F%8D%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%83%85%E5%86%B5%EF%BC%8C%E4%B8%8B%E9%9D%A2%E6%9C%89%E6%95%88%E4%BB%A3%E7%A0%81%E9%98%90%E8%BF%B0%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22comment%22%3E/%20In%20some%20library%20code:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3Es%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E&amp;gt;%20&amp;#123;%20_b:%20%3Cspan%20class=%22type%22%3Ebool%3C/span%3E,%20_ri:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ecreate_s%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;b%3C/span%3E&amp;gt;(ri:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;b%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20S&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;b%3C/span%3E&amp;gt;%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Es&amp;#123;%20_b:%20%3Cspan%20class=%22literal%22%3Etrue%3C/span%3E,%20_ri:%20ri%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22comment%22%3E/%20In%20application%20code:%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Emain%3C/span%3E()%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ex%3C/span%3E:%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_y%3C/span%3E:%20S;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E_y%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Ecreate_s%3C/span%3E(&amp;amp;x);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%BF%99%E9%87%8C%E5%8F%98%E9%87%8F%3Ccode%3Ex%3C/code%3E%E7%9A%84%E5%80%BC%E8%A2%AB%3Ccode%3Ecreate_s%3C/code%3E%E5%87%BD%E6%95%B0%E7%A7%9F%E5%80%9F%E4%BB%A5%E5%8F%8A%E6%8C%81%E4%B9%85%E5%8C%96%E3%80%82%E5%AE%9E%E9%99%85%E4%B8%8A%EF%BC%8C%E5%AE%83%E8%A2%AB%E5%AD%98%E5%82%A8%E5%9C%A8%E7%BB%93%E6%9E%84%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%BF%94%E5%9B%9E%E5%AD%97%E6%AE%B5%3Ccode%3E_ri%3C/code%3E%E4%B8%AD%EF%BC%9B%E8%AF%A5%E5%AF%B9%E8%B1%A1%E5%9C%A8%3Ccode%3Emain%3C/code%3E%E5%87%BD%E6%95%B0%E4%B8%AD%E8%A2%AB%E7%94%A8%E4%BA%8E%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8F%98%E9%87%8F%3Ccode%3E_y%3C/code%3E%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8C%E5%8F%98%E9%87%8F%3Ccode%3E_y%3C/code%3E%E5%BF%85%E9%A1%BB%E5%AD%98%E6%B4%BB%E5%B0%91%E4%BA%8E%3Ccode%3Ex%3C/code%3E%E3%80%82%E8%8B%A5%E5%B0%86%3Ccode%3Elet%20_y:%20S;%3C/code%3E%E7%A7%BB%E5%88%B0%3Ccode%3Ex%3C/code%3E%E5%89%8D%E9%9D%A2%EF%BC%8C%E5%85%88%E4%BA%8E%3Ccode%3Ex%3C/code%3E%E5%A3%B0%E6%98%8E%EF%BC%8C%E4%BC%9A%E4%BA%A7%E7%94%9F%E9%94%99%E8%AF%AF%E2%80%9C%3Ccode%3Ex%3C/code%3E%20does%20not%20live%20long%20enough%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E8%A6%81%E5%88%A4%E6%96%AD%3Ccode%3E_x%3C/code%3E%E6%98%AF%E5%90%A6%E8%A2%AB%E5%AD%98%E5%82%A8%E5%9C%A8%E7%BB%93%E6%9E%84%E4%BD%93%E5%86%85%E9%83%A8%EF%BC%8C%E4%B8%8D%E9%9C%80%E8%A6%81%E6%A3%80%E6%9F%A5%3Ccode%3Ecreate_s%3C/code%3E%E5%87%BD%E6%95%B0%E4%BD%93%E5%86%85%E9%83%A8%E5%AE%9E%E7%8E%B0%EF%BC%8C%E4%B9%9F%E4%B8%8D%E9%9C%80%E8%A6%81%E6%A3%80%E6%9F%A5%E7%BB%93%E6%9E%84%E4%BD%93%3Ccode%3ES%3C/code%3E%E7%9A%84%E5%AD%97%E6%AE%B5%EF%BC%9B%E6%A3%80%E6%9F%A5%3Ccode%3Ecreate_s%3C/code%3E%E5%92%8C%3Ccode%3ES%3C/code%3E%E7%9A%84%E5%87%BD%E6%95%B0%E7%AD%BE%E5%90%8D%E8%B6%B3%E5%A4%9F%E4%BA%86%E3%80%82%3C/p%3E%3Cp%3E%E9%80%9A%E8%BF%87%E6%A3%80%E6%9F%A5%3Ccode%3Ecreate_s%3C/code%3E%E5%87%BD%E6%95%B0%E7%AD%BE%E5%90%8D%EF%BC%8C%E5%8F%91%E7%8E%B0%E5%BC%95%E7%94%A8%E5%8F%82%E6%95%B0%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8%EF%BC%8C%E5%92%8C%E8%BF%94%E5%9B%9E%E5%80%BC%3Ccode%3ES%3C/code%3E%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%BC%95%E7%94%A8%E6%8C%87%E7%A4%BA%E5%99%A8%E6%98%AF%E5%90%8C%E4%B8%80%E4%B8%AA%3Ccode%3E&#39;b%3C/code%3E%E3%80%82%E8%BF%99%E6%84%8F%E5%91%B3%E7%9D%80%E8%BF%94%E5%9B%9E%E7%9A%84%E7%BB%93%E6%9E%84%E4%BD%93%E5%BF%85%E9%A1%BB%E5%AD%98%E6%B4%BB%E9%95%BF%E4%BA%8E%E7%A7%9F%E5%80%9F%E7%9A%84%3Ccode%3Ei32%3C/code%3E%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%AF%B9%E8%B1%A1%E3%80%82%3C/p%3E%3Cp%3E%E9%80%9A%E8%BF%87%E6%A3%80%E6%9F%A5%E7%BB%93%E6%9E%84%E4%BD%93%3Ccode%3ES%3C/code%3E%E7%9A%84%E7%AD%BE%E5%90%8D%EF%BC%8C%E5%8F%91%E7%8E%B0%E5%AE%83%E7%94%B1%E4%B8%80%E4%B8%AAlifetime%20specifier%E5%8F%82%E6%95%B0%E5%8C%96%EF%BC%8C%E4%B9%9F%E6%84%8F%E5%91%B3%E7%9D%80%E7%9B%B8%E5%85%B3%E7%9A%84%E6%9F%90%E4%B8%AA%E5%AD%97%E6%AE%B5%E4%B8%8D%E4%BC%9A%E6%98%AF%3Ccode%3E&#39;static%3C/code%3E%E7%9A%84%E5%BC%95%E7%94%A8%E3%80%82%3C/p%3E%3Cp%3E%E5%9B%A0%E6%AD%A4%EF%BC%8C%E6%88%91%E4%BB%AC%E5%8F%91%E7%8E%B0%3Ccode%3Ecreate_s%3C/code%3E%E5%87%BD%E6%95%B0%E6%98%AF%E9%80%9A%E8%BF%87%E5%90%8C%E4%B8%80%E4%B8%AAlifetime%20specifier%EF%BC%8C%E8%8E%B7%E5%8F%96%E5%8F%82%E6%95%B0%E7%9A%84%E5%BC%95%E7%94%A8%E5%92%8C%E5%8F%82%E6%95%B0%E5%8C%96%E7%9A%84(parameterized%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1%E3%80%82%E8%BF%99%E8%A1%A8%E7%A4%BA%E8%BF%94%E5%9B%9E%E7%9A%84%E5%BC%95%E7%94%A8%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%8F%AF%E8%83%BD%E7%A7%9F%E5%80%9F%E8%87%AA%E5%BC%95%E7%94%A8%E5%8F%82%E6%95%B0%E3%80%82%3C/p%3E%3Cp%3E%E7%BC%96%E8%AF%91%E5%99%A8%E5%BF%85%E9%A1%BB%E5%88%86%E5%88%AB%E6%A3%80%E6%B5%8B%E7%BB%93%E6%9E%84%E5%A3%B0%E6%98%8E%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7%E3%80%82%3Ccode%3Estruct%20S&amp;lt;&#39;a&amp;gt;%3C/code%3E%E8%A1%A8%E7%A4%BA%3Ccode%3ES%3C/code%3E%E7%A7%9F%E5%80%9F%E4%BA%86%E6%9F%90%E4%BA%9B%E5%AF%B9%E8%B1%A1%EF%BC%8C%E8%80%8C%E7%BB%93%E6%9E%84%E4%BD%93%E5%86%85%E7%9A%84%3Ccode%3E_ri:%20&amp;amp;&#39;a%20i32%3C/code%3E%E8%A1%A8%E7%A4%BA%3Ccode%3E_ri%3C/code%3E%E5%AD%97%E6%AE%B5%E6%98%AF%E4%B8%80%E4%B8%AA%E5%BC%95%E7%94%A8%E7%A7%9F%E5%80%9F%E4%BA%86%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%E3%80%82%3C/p%3E%3Cp%3E%E5%9B%A0%E6%AD%A4%EF%BC%8C%E5%8C%85%E5%90%AB%E6%9C%89%E5%BC%95%E7%94%A8%E5%AD%97%E6%AE%B5%E7%9A%84%E7%BB%93%E6%9E%84%E4%BD%93%EF%BC%8C%E4%BB%85%E5%85%81%E8%AE%B8%E4%B8%A4%E7%A7%8D%E5%90%88%E6%B3%95%E8%AF%AD%E6%B3%95%EF%BC%9A%E2%80%9C%3Ccode%3Efield:%20&amp;amp;&#39;static%20type%3C/code%3E%E2%80%9D%20%E6%88%96%20%E2%80%9C%3Ccode%3Efield:%20&amp;amp;&#39;lifetime%20type%3C/code%3E%E2%80%9D%EF%BC%8C%E5%85%B6%E4%B8%AD%3Ccode%3Elifetime%3C/code%3E%E4%B9%9F%E6%98%AF%E7%BB%93%E6%9E%84%E4%BD%93%E8%87%AA%E8%BA%AB%E7%9A%84%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0%E3%80%82%E5%A6%82%E6%9E%9C%E7%BB%93%E6%9E%84%E4%BD%93%E4%B8%8D%E5%8C%85%E5%90%AB%E5%BC%95%E7%94%A8%E5%AD%97%E6%AE%B5%E6%88%96%E4%BB%85%E4%BC%9A%E5%87%BA%E7%8E%B0%E9%9D%99%E6%80%81%E5%BC%95%E7%94%A8%E5%AD%97%E6%AE%B5%EF%BC%8C%E7%BB%93%E6%9E%84%E4%BD%93%E5%8F%AF%E4%BB%A5%E4%B8%8D%E9%9C%80%E8%A6%81%E5%A3%B0%E6%98%8E%E5%91%A8%E6%9C%9F%E5%8F%82%E6%95%B0%E3%80%82%3C/p%3E%3Cp%3E%E7%94%B1%E4%BA%8E%E4%BB%85%E5%8C%85%E5%90%AB%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%8C%E6%89%80%E4%BB%A5%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87lifetime%20elision%E7%94%B1%E5%85%B6%E9%9A%90%E5%BC%8F%E6%8E%A8%E6%96%AD%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ecreate_s%3C/span%3E(ri:%20&amp;amp;%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20S%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3ES&amp;#123;%20_b:%20%3Cspan%20class=%22literal%22%3Etrue%3C/span%3E,%20_ri:%20ri%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%9B%A0%E6%AD%A4%EF%BC%8C%E5%8F%AF%E8%83%BD%E4%BC%9A%E6%9C%89%E5%87%A0%E7%A7%8D%E7%9A%84%E8%AF%AD%E6%B3%95%E9%94%99%E8%AF%AF%E6%83%85%E5%86%B5%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3E_S1%3C/span%3E%20&amp;#123;%20_f:%20&amp;amp;%3Cspan%20class=%22type%22%3Ei32%3C/span%3E%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3E_S2%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E&amp;gt;%20&amp;#123;%20_f:%20&amp;amp;%3Cspan%20class=%22type%22%3Ei32%3C/span%3E%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3E_S3%3C/span%3E%20&amp;#123;%20_f:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3E_S4%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E&amp;gt;%20&amp;#123;%20_f:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;static%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3E_S5%3C/span%3E%20&amp;#123;%20_f:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;static%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3E_S6%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E&amp;gt;%20&amp;#123;%20_f:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E%20&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%AC%AC%E4%B8%80%E6%9D%A1%E5%92%8C%E7%AC%AC%E5%9B%9B%E6%9D%A1%E8%AF%AD%E5%8F%A5%E6%98%AF%E4%B8%8D%E5%90%88%E6%B3%95%E7%9A%84%E3%80%82%3Ccode%3E_S1%3C/code%3E%E5%92%8C%3Ccode%3E_S2%3C/code%3E%E7%9A%84%E5%A3%B0%E6%98%8E%E6%98%AF%E4%B8%8D%E5%90%88%E6%B3%95%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%3Ccode%3E_f%3C/code%3E%E5%AD%97%E6%AE%B5%E6%98%AF%E4%B8%80%E4%B8%AA%E5%BC%95%E7%94%A8%E5%AD%97%E6%AE%B5%EF%BC%8C%E6%B2%A1%E6%9C%89lifetime%20specifier%E3%80%82%3C/p%3E%3Cp%3E%3Ccode%3E_S3%3C/code%3E%E7%9A%84%E5%A3%B0%E6%98%8E%E6%98%AF%E4%B8%8D%E5%90%88%E6%B3%95%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8%3Ccode%3E&#39;a%3C/code%3E%E6%B2%A1%E6%9C%89%E4%BD%9C%E4%B8%BA%3Ccode%3ES%3C/code%3E%E7%9A%84%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0%E3%80%82%3C/p%3E%3Cp%3E%3Ccode%3E_S4%3C/code%3E%E7%9A%84%E5%A3%B0%E6%98%8E%E6%98%AF%E4%B8%8D%E5%90%88%E6%B3%95%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%8F%82%E6%95%B0%3Ccode%3E&#39;a%3C/code%3E%E6%B2%A1%E7%94%A8%E8%A2%AB%E7%94%A8%E4%BA%8E%E7%BB%93%E6%9E%84%E4%BD%93%E5%86%85%E3%80%82%3C/p%3E%3Cp%3E%E7%9B%B8%E5%8F%8D%EF%BC%8C%E6%9C%80%E5%90%8E%E4%B8%A4%E4%B8%AA%E7%BB%93%E6%9E%84%E4%BD%93%E7%9A%84%E5%A3%B0%E6%98%8E%E6%98%AF%E6%9C%89%E6%95%88%E7%9A%84%E3%80%82%3Ccode%3E_S5%3C/code%3E%E5%8C%85%E5%90%AB%E4%B8%80%E4%B8%AA%E9%9D%99%E6%80%81%E5%AF%B9%E8%B1%A1%E5%BC%95%E7%94%A8%E3%80%82%E8%80%8C%3Ccode%3E_S6%3C/code%3E%E5%8C%85%E5%90%AB%E5%8C%85%E5%90%AB%E7%9A%84%E5%BC%95%E7%94%A8%E6%80%BB%E6%98%AF%E5%AD%98%E6%B4%BB%E9%95%BF%E4%BA%8E%E7%BB%93%E6%9E%84%E4%BD%93%E8%87%AA%E8%BA%AB%E3%80%82%3C/p%3E%3Ch2%20id=%22Other-Uses-of-Lifetime-Specifiers%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Other-Uses-of-Lifetime-Specifiers%22%3E%C2%B6%3C/a%3EOther%20Uses%20of%20Lifetime%20Specifiers%3C/h2%3E%3Cp%3E%E6%88%91%E4%BB%AC%E7%9F%A5%E9%81%93%EF%BC%8C%E5%BD%93%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E5%8C%85%E5%90%AB%E5%BC%95%E7%94%A8%E7%9A%84%E7%BB%93%E6%9E%84%E4%BD%93%E7%B1%BB%E5%9E%8B%E6%97%B6%EF%BC%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8%E6%98%AF%E5%BF%85%E8%A6%81%E7%9A%84%E3%80%82%E5%AF%B9%E4%BA%8E%E5%85%83%E7%BB%84-%E7%BB%93%E6%9E%84%E4%BD%93%E7%B1%BB%E5%9E%8B%E4%B9%9F%E4%B8%80%E6%A0%B7%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ETS%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E&amp;gt;(&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Eu8%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eenum%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EE%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E,%20%3Cspan%20class=%22symbol%22%3E&amp;#x27;b%3C/span%3E&amp;gt;%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20_A(&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Eu8%3C/span%3E),%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20_B,%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20_C(%3Cspan%20class=%22type%22%3Ebool%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;b%3C/span%3E%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E,%20%3Cspan%20class=%22type%22%3Echar%3C/span%3E),%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20_D(&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;static%3C/span%3E%20%3Cspan%20class=%22type%22%3Estr%3C/span%3E),%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ebyte%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E34%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_ts%3C/span%3E%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3ETS%3C/span%3E(&amp;amp;byte);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_e%3C/span%3E%20=%20E::_A(&amp;amp;byte);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%BF%99%E6%AE%B5%E4%BB%A3%E7%A0%81%E6%98%AF%E6%9C%89%E6%95%88%E7%9A%84%EF%BC%8C%E4%BB%A5%E5%8F%8A%E7%A7%BB%E9%99%A4%E4%BB%BB%E4%BD%95%E4%B8%80%E4%B8%AAlifetime%20specifier%EF%BC%8C%E9%83%BD%E4%BC%9A%E4%BA%A7%E7%94%9F%E2%80%9Cmissing%20lifetime%20specifier%E2%80%9D%E9%94%99%E8%AF%AF%E3%80%82%3C/p%3E%3Cp%3E%E9%A1%BA%E5%B8%A6%E4%B8%80%E4%B8%8B%EF%BC%8C%E6%B3%A8%E6%84%8F%3Ccode%3EE::_D%3C/code%3E%E5%AD%97%E6%AE%B5%E7%9A%84%E5%AE%9A%E4%B9%89%E3%80%82%E5%AE%83%E6%98%AF%E4%B8%80%E4%B8%AAstatic%20string%20slice%20%E5%BC%95%E7%94%A8%E3%80%82%E5%AE%83%E4%BB%AC%E6%98%AF%20%3Cstrong%3E%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%AD%97%E9%9D%A2%E9%87%8F(string%20literals)%3C/strong%3E%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%BA%E4%BA%86%E7%AE%80%E5%8C%96%EF%BC%8C%E6%88%91%E4%BB%AC%E4%BB%8E%E4%B8%8D%E5%9C%A8%E5%8F%AF%E5%8F%98%E5%BC%95%E7%94%A8%E4%B8%AD%E6%B7%B7%E5%85%A5%E6%8C%87%E7%A4%BA%E5%99%A8%E3%80%82%E5%AE%9E%E9%99%85%E4%B8%8A%EF%BC%8C%E5%AE%83%E6%98%AF%E8%A2%AB%E5%85%81%E8%AE%B8%E7%9A%84%EF%BC%8C%E8%99%BD%E7%84%B6%E5%BE%88%E5%8F%A6%E7%B1%BB%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E&amp;gt;(b:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20%3Cspan%20class=%22type%22%3Eu8%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Eu8%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20*b%20+=%20%3Cspan%20class=%22number%22%3E1%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20b%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ebyte%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12u8%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ebyte_ref%3C/span%3E%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Ef%3C/span%3E(&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20byte);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20*byte_ref);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BB%93%E6%9E%9C%E5%B0%86%E4%BC%9A%E6%89%93%E5%8D%B0%EF%BC%9A%E2%80%9C13%E2%80%9D%E3%80%82%E4%B8%80%E4%B8%AA%E6%8C%87%E5%90%91byte%E7%9A%84%E5%8F%AF%E5%8F%98%E5%BC%95%E7%94%A8%E8%A2%AB%E4%BD%9C%E4%B8%BA%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92%E7%BB%99%3Ccode%3Ef%3C/code%3E%EF%BC%8C%E4%BB%A5%E5%8F%8A%E9%80%92%E5%A2%9E%E4%B9%8B%E5%90%8E%E4%BD%9C%E4%B8%BA%E8%BF%94%E5%9B%9E%E5%80%BC%E3%80%82%E9%80%9A%E5%B8%B8%E5%AF%B9%E4%BA%8E%E4%B8%80%E4%B8%AA%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E6%9D%A5%E8%AF%B4%EF%BC%8C%E4%BC%A0%E9%80%92%E7%BB%99%E5%87%BD%E6%95%B0%E5%90%8E%E6%B2%A1%E5%BF%85%E8%A6%81%E8%BF%94%E5%9B%9E%E5%AE%83%E7%A7%9F%E5%80%9F%E7%9A%84%E5%BC%95%E7%94%A8%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%3Ccode%3Ebyte_ref%3C/code%3E%E5%92%8C%3Ccode%3Ebyte%3C/code%3E%E9%83%BD%E6%98%AF%E6%8C%87%E5%90%91%E5%90%8C%E4%B8%80%E4%B8%AA%E5%86%85%E5%AD%98%E5%AF%B9%E8%B1%A1%E3%80%82%3C/p%3E%3Cp%3E%E5%89%8D%E9%9D%A2%E7%9C%8B%E8%BF%87%E4%BA%86%EF%BC%8C%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8%E5%8F%AF%E4%BB%A5%E5%8F%82%E6%95%B0%E5%8C%96%E4%BD%BF%E7%94%A8%EF%BC%8C%E5%AE%83%E4%BB%AC%E4%B9%9F%E5%8F%AF%E4%BB%A5%E7%94%A8%E4%BA%8E%E5%90%8C%E4%B8%80%E4%B8%AA%E5%87%BD%E6%95%B0%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E,%20T&amp;gt;(b:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20T)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20T%20&amp;#123;%20b%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Epi%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E3.14%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Epi_ref%3C/span%3E%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Ef%3C/span%3E(&amp;amp;pi);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20*pi_ref);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BB%93%E6%9E%9C%E5%B0%86%E4%BC%9A%E6%89%93%E5%8D%B0%EF%BC%9A%E2%80%9C3.14%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%8B%E9%9D%A2%E6%98%AF%E4%B8%8D%E5%90%88%E6%B3%95%E7%9A%84%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E,%20T&amp;gt;%20&amp;#123;%20b:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20T&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BC%96%E8%AF%91%E5%99%A8%E5%87%BA%E7%8E%B0%E2%80%9Cthe%20parameter%20type%20%3Ccode%3ET%3C/code%3E%20may%20not%20live%20long%20enough%E2%80%9D%E3%80%82%E8%BF%99%E6%98%AF%E5%9B%A0%E4%B8%BA%E6%B3%9B%E5%9E%8B%E7%B1%BB%E5%9E%8B%3Ccode%3ET%3C/code%3E%E8%A2%AB%E5%85%B7%E7%8E%B0%E5%8C%96%E6%97%B6%EF%BC%8C%E5%AE%83%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%8F%AF%E8%83%BD%E4%BC%9A%E5%8C%85%E5%90%AB%E4%B8%80%E4%B8%AA%E5%BC%95%E7%94%A8%EF%BC%8C%E8%BF%99%E7%A7%8D%E5%BC%95%E7%94%A8%E5%8F%AF%E8%83%BD%E4%BC%9A%E5%AF%BC%E8%87%B4%E5%A3%B0%E6%98%8E%E5%91%A8%E6%9C%9F%E9%94%99%E8%AF%AF%E3%80%82%E5%A4%84%E4%BA%8E%E4%BF%9D%E6%8A%A4%E6%9C%BA%E5%88%B6%EF%BC%8C%E7%BC%96%E8%AF%91%E5%99%A8%E7%A6%81%E6%AD%A2%E8%BF%99%E7%A7%8D%E8%AF%AD%E6%B3%95%E3%80%82%E5%AE%9E%E9%99%85%E4%B8%8A%E6%9C%89%E4%B8%A4%E7%A7%8D%E6%83%85%E5%86%B5%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%3Ccode%3ET%3C/code%3E%E6%89%80%E8%A1%A8%E7%A4%BA%E7%9A%84%E7%B1%BB%E5%9E%8B%E4%B8%8D%E5%8C%85%E5%90%AB%E5%BC%95%E7%94%A8%EF%BC%8C%E6%88%96%E4%BB%85%E5%8C%85%E5%90%AB%E9%9D%99%E6%80%81%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%BC%95%E7%94%A8%E3%80%82%3C/li%3E%3Cli%3E%3Ccode%3ET%3C/code%3E%E6%89%80%E8%A1%A8%E7%A4%BA%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%8C%85%E5%90%ABnon-static%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%BC%95%E7%94%A8%EF%BC%8C%E5%AE%83%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%9C%80%E8%A6%81%E6%8C%87%E5%AE%9A%E3%80%82%3C/li%3E%3C/ul%3E%3Cp%3E%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%83%85%E5%86%B5%E7%B1%BB%E4%BC%BC%E4%BA%8E%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E,%20T:%20%3Cspan%20class=%22symbol%22%3E&amp;#x27;static%3C/span%3E&amp;gt;%20&amp;#123;%20b:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20T%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Es%3C/span%3E%20=%20S%20&amp;#123;%20b:%20&amp;amp;%3Cspan%20class=%22literal%22%3Etrue%3C/span%3E%20&amp;#125;;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20*s.b);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%83%85%E5%86%B5%E7%B1%BB%E4%BC%BC%E4%BA%8E%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E,%20T:%20%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E&amp;gt;%20&amp;#123;%20b:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20T%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Es1%3C/span%3E%20=%20S%20&amp;#123;%20b:%20&amp;amp;%3Cspan%20class=%22literal%22%3Etrue%3C/span%3E%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Es2%3C/span%3E%20=%20S%20&amp;#123;%20b:%20&amp;amp;s1%20&amp;#125;;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20*s1.b,%20*s2.b.b);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%9C%A8%E7%AC%AC%E4%B8%80%E8%A1%8C%EF%BC%8C%3Ccode%3ET%3C/code%3E%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0%E8%A2%AB%E7%95%8C%E9%99%90%E5%9C%A8%3Ccode%3E&#39;a%3C/code%3E%EF%BC%8C%E6%84%8F%E5%91%B3%E7%9D%80%E4%B8%8D%E7%AE%A1%E8%BF%99%E4%B8%AA%E7%B1%BB%E5%9E%8B%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%E4%BC%9A%E5%8C%85%E5%90%AB%E4%B8%80%E4%B8%AA%E5%BC%95%E7%94%A8%EF%BC%8C%E5%B9%B6%E7%A7%9F%E5%80%9F%E8%BF%99%E4%B8%AAlifetime%20specifier%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%8D%B3%E6%95%B4%E4%B8%AA%E7%BB%93%E6%9E%84%E5%AF%B9%E8%B1%A1%E8%87%AA%E5%B7%B1%E3%80%82%3C/p%3E%3Cp%3E%E5%9C%A8%E7%AC%AC%E4%BA%8C%E8%A1%8C%EF%BC%8C%3Ccode%3ES%3C/code%3E%E7%BB%93%E6%9E%84%E4%BD%93%E8%A2%AB%3Ccode%3Ebool%3C/code%3E%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82%E5%AE%9E%E9%99%85%E4%B8%8A%EF%BC%8C%E5%8E%9F%E7%94%9F%E7%B1%BB%E5%9E%8B%E4%B8%8D%E5%8C%85%E5%90%AB%E4%BB%BB%E4%BD%95%E5%BC%95%E7%94%A8%EF%BC%8C%E6%89%80%E4%BB%A5%E8%BF%99%E9%87%8C%E7%94%A8%3Ccode%3E&#39;static%3C/code%3E%E9%99%90%E7%95%8C%E5%8D%B3%E5%8F%AF%E3%80%82%3C/p%3E%3Cp%3E%E5%AF%B9%E4%BA%8E%E7%AC%AC%E4%B8%89%E8%A1%8C%EF%BC%8C%3Ccode%3ES%3C/code%3E%E7%BB%93%E6%9E%84%E4%BD%93%E7%94%B1%3Ccode%3ES&amp;lt;bool&amp;gt;%3C/code%3E%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82%E8%AF%A5%E7%B1%BB%E5%9E%8B%E5%8C%85%E5%90%AB%E4%B8%80%E4%B8%AAnon-static%E5%BC%95%E7%94%A8%EF%BC%8C%E7%94%A8%3Ccode%3E&#39;a%3C/code%3E%E9%99%90%E7%95%8C%E3%80%82%3C/p%3E" type="image"/>
    
    
    <category term="learning" scheme="https://galudisu.info/categories/learning/"/>
    
    
    <category term="rust" scheme="https://galudisu.info/tags/rust/"/>
    
  </entry>
  
  <entry>
    <title>rust基础入门[22] - Borrowing and Lifetimes</title>
    <link href="https://galudisu.info/2023/01/22/rust/beginning/chapter22_Borrowing%20and%20Lifetimes/"/>
    <id>https://galudisu.info/2023/01/22/rust/beginning/chapter22_Borrowing%20and%20Lifetimes/</id>
    <published>2023-01-22T07:50:46.000Z</published>
    <updated>2025-04-27T11:59:08.286Z</updated>
    
    <content type="html"><![CDATA[<p>本章覆盖有：</p><ul><li>“租借，borrowing”和“生命周期，lifetime”的概念</li><li>困扰系统软件的租借典型错误是哪些</li><li>如何通过租借checker，Rust的严格语法来避免这种典型错误</li><li>如何通过插入语句块来约束租借的作用域(scope)</li><li>为什么函数返回的引用需要生命周期指示符(specifiers)</li><li>如何给函数使用生命周期指示符(lifetime specifiers)，它们表示什么</li><li>租借checker的任务是什么</li></ul><span id="more"></span><h2 id="Ownership-and-Borrowing"><a class="header-anchor" href="#Ownership-and-Borrowing">¶</a>Ownership and Borrowing</h2><p>上一章介绍到，当将变量<code>a</code>赋值给<code>b</code>时，会有两种情况：如果它们类型是可拷贝的(copyable)，它就实现了<code>Copy</code>特质(当然也肯定实现了<code>Clone</code>)；如果它们的类型不可拷贝(non-copyable)，则没有实现<code>Copy</code>(<code>Clone</code>可能实现，也可能没有)。</p><p>第一种情况，用到拷贝语义(copy semantics)。意味着，在赋值过程中，当<code>a</code>保留它对象的所有权(ownership)，一个新的对象被创建，初始化值等同于<code>a</code>的值，以及<code>b</code>获得这些新的对象的所有权。当<code>a</code>和<code>b</code>离开它的作用域时，它们拥有的对象被销毁(又叫dropped)。</p><p>相反，第二种情况，用到移动语义(move semantics)。意味着，在赋值过程中，<code>a</code>将它的所有权移交给了<code>b</code>，不会有新对象的创建，<code>a</code>不再可访问。当<code>b</code>离开它的作用域时，它拥有的对象被销毁。当<code>a</code>离开它的作用域，不发生任何事情。</p><p>所有这些保证了合适的内存管理，只要没有引用被使用到。</p><p>但看看这个代码，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">n</span> = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">ref_to_n</span> = &amp;n;</span><br></pre></td></tr></table></figure><p>第一条语句后，变量<code>n</code>拥有一个数。</p><p>第二条语句后，变量<code>ref_to_n</code>拥有一个引用，该引用指向同一个由<code>n</code>引用的数。它是一个所有权吗？</p><p>它不能作为一个所有权，因为这个数早已经由<code>n</code>所拥有，如果同时被这个引用所“拥有”，它将会被销毁两次。因此，类似这样的引用不能“拥有”对象。</p><p>表达式<code>n</code>和<code>*ref_to_n</code>指向同一个对象，但仅<code>n</code>拥有这个对象。变量<code>ref_to_n</code>可以访问这个对象，但不是“拥有”这个对象。这种概念称为<strong>租借，borrowing</strong>。我们说<code>ref_to_n</code>借了<code>n</code>拥有的数。这种租借，开始于引用指向该对象，结束于该对象的销毁。</p><p>关于可变性(mutability)，有两种类型的borrowing：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">n</span> = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">ref1_to_n</span> = &amp;<span class="keyword">mut</span> n;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">ref2_to_n</span> = &amp;n;</span><br></pre></td></tr></table></figure><p>这段程序中，<code>ref1_to_n</code>将<code>n</code>拥有的值，租借为 <strong>mutably</strong> 的值，以及<code>ref2_to_n</code>租借为 <strong>immutably</strong> 的值。第一种是可变租借(mutable borrowing)，第二种是不可变租借(immutable borrowing)。可变租借仅能从可变变量中获取。</p><h2 id="Object-Lifetimes"><a class="header-anchor" href="#Object-Lifetimes">¶</a>Object Lifetimes</h2><p>注意到，“作用域，scope”的概念作用于编译期的变量，而不是运行期的对象。对应运行期对象的概念叫“生命周期，lifetime”。在Rust中，一个对象的生命周期，指的是一系列执行指令，从执行指令的创建，到执行指令的销毁。在该时间段，该对象叫做“存活，to live，to be alive”。</p><p>当然，作用域和生命周期存在一定关系，但它们不是同一个概念。例如：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">a</span>;</span><br><span class="line">a = <span class="number">12</span>;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, a);</span><br></pre></td></tr></table></figure><p>该程序中，变量<code>a</code>的作用域开始于第一行，而<code>a</code>拥有的对象的生命周期开始于第二行。通常认为，变量<code>a</code>的作用域开始于它的声明，对象的生命周期开始于该对象接收一个值。</p><p>即使是变量作用域(scope)的结束，跟对象生命周期(lifetime)的结束也不是同时发生的，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">a</span> = <span class="string">&quot;Hello&quot;</span>.<span class="title function_ invoke__">to_string</span>();</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">b</span> = a;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;, &quot;</span>, b);</span><br><span class="line">a = <span class="string">&quot;world&quot;</span>.<span class="title function_ invoke__">to_string</span>();</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;!&quot;</span>, a);</span><br><span class="line">b = a;</span><br></pre></td></tr></table></figure><p>结果将输出：“Hello, world!”。</p><p>在第一条语句，变量<code>a</code>被声明以及初始化。因此<code>a</code>的作用域开始，接着<code>a</code>拥有的对象被创建，<code>a</code>的生命周期开始。</p><p>在第二条语句，变量<code>b</code>被声明，由<code>a</code>移动对象进行初始化。因此，<code>b</code>的作用域开始，<code>a</code>的作用域被悬挂(suspended)，因为它被移动了，所以它不可再被访问。<code>b</code>拥有的对象不用创建，因为它就是先前创建的对象。</p><p>在第三条语句，<code>b</code>被访问。</p><p>在第四条语句，变量<code>a</code>通过<code>new</code>构造器，指派新的值。这里，<code>a</code>恢复(resume)它的作用域(scope)，因为它的作用域还没有结束。一个新的对象被创建，该对象的生命周期开始。前面由于变量<code>a</code>被“移动”了，所以它不“拥有”任何对象。所以这里的语句类似于一个初始化。</p><p>在第五条语句，<code>a</code>(拥有对象)可被访问了。</p><p>在第六条语句，<code>a</code>再次被移动到<code>b</code>，它的作用域再次被悬挂(suspended)。相反，<code>b</code>一直是活动的(active)，它拥有的对象由移动的<code>a</code>替换，因此，原先的对象在这里被销毁，以及生命周期结束。如果该对象实现了<code>Drop</code>，在这里，它的<code>drop</code>方法会被调用。</p><p>最后，<code>b</code>和<code>a</code>陆续退出它们的作用域。变量<code>b</code>拥有一个对象，该对象被销毁，以及结束它的生命周期。相反，变量<code>a</code>被“移动”了，不再拥有任何对象，也就不会有销毁对象的发生。</p><h2 id="Errors-Regarding-Borrowing"><a class="header-anchor" href="#Errors-Regarding-Borrowing">¶</a>Errors Regarding Borrowing</h2><p>C和C++程序编写总是被各种错误困扰，而Rust则通过设计来避免这一类问题。Rust的一种常见错误是“use after move”，前面介绍过。另一种错误如下，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">ref_to_n</span>;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">n</span> = <span class="number">12</span>;</span><br><span class="line">    ref_to_n = &amp;n;</span><br><span class="line">    <span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &quot;</span>, *ref_to_n);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, *ref_to_n);</span><br></pre></td></tr></table></figure><p>首先，变量<code>ref_to_n</code>被声明，但没有被初始化。然后，在语句块内，可变变量<code>n</code>被声明并初始化，它分配一个数在栈上，值为12。</p><p>然后，原先的变量，用一个指向<code>n</code>的引用进行初始化，它租借(borrow)了这个对象。</p><p>接着，变量<code>ref_to_n</code>指向的对象，即值为12的对象，打印输出。</p><p>接着，语句块结束，内部变量<code>n</code>结束了它的作用域，它的对象被销毁。</p><p>接着，变量<code>ref_to_n</code>指向的对象再次被打印。但该对象原先被<code>n</code>“拥有”，它现在不存在了！</p><p>幸运的是，Rust编译器拒绝该代码，产生错误信息“<code>n</code> does not live long enough”。该消息表示，变量<code>n</code>死了(dying)，但仍然有指向它“拥有”的对象的引用，它应该活更长一些；至少应该跟租借它对象的租借方一样长。</p><p>顺便，C或C++对应的代码如下，</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span>* ref_to_n;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> n = <span class="number">12</span>;</span><br><span class="line">        ref_to_n &amp;n;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, *ref_to_n);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, *ref_to_n);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这段程序可被C和C++编译器接受。结果会打印“12”，之后的行为会变得不可预测。</p><p>这类程序错误，我们称之为“use after drop”。</p><p>有另一种可避免的Rust错误，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">v</span> = <span class="built_in">vec!</span>[<span class="number">12</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">ref_to_first</span> = &amp;v[<span class="number">0</span>];</span><br><span class="line">v.<span class="title function_ invoke__">push</span>(<span class="number">13</span>);</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, ref_to_first);</span><br></pre></td></tr></table></figure><p>对应的C语言实现是，</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span>* v = <span class="built_in">malloc</span>(<span class="number">1</span> * <span class="keyword">sizeof</span> (<span class="type">int</span>));</span><br><span class="line">    v[<span class="number">0</span>] = <span class="number">12</span>;</span><br><span class="line">    <span class="type">const</span> <span class="type">int</span>* ref_to_first = &amp;v[<span class="number">0</span>];</span><br><span class="line">    v = <span class="built_in">realloc</span>(v, <span class="number">2</span> * <span class="keyword">sizeof</span> (<span class="type">int</span>));</span><br><span class="line">    v[<span class="number">1</span>] = <span class="number">13</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, *ref_to_first);</span><br><span class="line">    <span class="built_in">free</span>(v);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以及C++的实现是，</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; v &#123; <span class="number">12</span> &#125;;</span><br><span class="line">    <span class="type">const</span> <span class="type">int</span>&amp; ref_to_first = v[<span class="number">0</span>];</span><br><span class="line">    v.<span class="built_in">push_back</span>(<span class="number">13</span>);</span><br><span class="line">    std::cout &lt;&lt; ref_to_first;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>不用多说，最后两个程序会被各自的编译器接受，即使它们的行为是未定义的。相反，Rust编译器会拒绝并抛出错误信息“cannot borrow <code>v</code> as mutable because it is also borrowed as immutable”。让我们看看该程序有什么错误。</p><p>首先，可变(mutable)变量<code>v</code>，用一个仅带数12的vector声明和初始化。</p><p>然后，变量<code>ref_to_first</code>用原先指向<code>v</code>的引用声明和初始化。引用指向的值包含数12。</p><p>然后，另一个数13被添加到vector。但这种插入会导致缓冲区的重新分配。即使在这个例子，<code>ref_to_first</code>仍会继续指向旧的对象，不是有效的内存地址。</p><p>最后，这个旧的内存地址，可能是错误的，读取的内存地址的值打印后，是不可预测的结果。</p><p>由于从一个vector插入或添加元素时，所有指向vector的引用都“失效”，导致这种错误的出现。通常，这种错误属于广义的错误类别，也就是一个数据结构，通过几种路径、或别名访问，当数据结构被其中一个别名修改时，不能被另一个别名使用。</p><p>我们将这类编程错误命名为“use after change by an alias”。</p><h2 id="How-to-Prevent-“Use-After-Drop”-Errors"><a class="header-anchor" href="#How-to-Prevent-“Use-After-Drop”-Errors">¶</a>How to Prevent “Use After Drop” Errors</h2><p>Rust防止使用“脱落，dropped”对象的技术是简单的。</p><p>把该对象看做是被一个变量指向，遵循栈分配的规则，会按照变量声明的反向顺序被脱落，而不是初始化的反向顺序。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">X</span>(<span class="type">char</span>);</span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Drop</span> <span class="keyword">for</span> <span class="title class_">X</span> &#123;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">drop</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, <span class="keyword">self</span>.<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_a</span> = <span class="title function_ invoke__">X</span>(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_b</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_c</span> = <span class="title function_ invoke__">X</span>(<span class="string">&#x27;c&#x27;</span>);</span><br><span class="line">_b = <span class="title function_ invoke__">X</span>(<span class="string">&#x27;b&#x27;</span>);</span><br></pre></td></tr></table></figure><p>该程序会打印“cba”。这三个对象按照顺序“acb”被构造，但三个对象的分配顺序是“abc”，因此回收以及脱落的按相反的顺序。</p><p>为了避免使用脱落对象，所有变量，租借其它变量拥有的对象，必须在该变量的 <strong>后面</strong> 声明。</p><p>例如，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">n</span> = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">_r</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">m</span> = <span class="number">13</span>;</span><br><span class="line">_r = &amp;m;</span><br><span class="line">_r = &amp;n;</span><br></pre></td></tr></table></figure><p>这段代码会产生错误信息：“<code>m</code> does not live long enough”。这是因为<code>_r</code>同时从<code>m</code>和<code>n</code>进行borrow，虽然不在同一时刻指向两者，但它在<code>m</code>之前声明了。要更正这段代码，改为如下，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">n</span> = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">m</span> = <span class="number">13</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">_r</span>;</span><br><span class="line">_r = &amp;m;</span><br><span class="line">_r = &amp;n;</span><br></pre></td></tr></table></figure><p>这段代码是合法的，当<code>m</code>和<code>n</code>拥有的对象被dropped时，不会再有指向它们的引用。</p><h2 id="How-to-Prevent-“Use-After-Change-by-an-Alias”-Errors"><a class="header-anchor" href="#How-to-Prevent-“Use-After-Change-by-an-Alias”-Errors">¶</a>How to Prevent “Use After Change by an Alias” Errors</h2><p>由于其它变量引起对象的改变，导致当前变量使用该对象出现错误。要避免这种错误，使用的规则有几分复杂。</p><p>首先，要求考虑任何语句会读这个对象，不会有写操作，就像是该对象的一个 <strong>临时不可变租借(temporary immutable borrowing)</strong>；任何语句变更这个对象，就像是该对象的一个 <strong>临时可变租借(temporary mutable borrowing)</strong>。这种租借的出现和结束在该语句的内部进行。</p><p>然后，租借开始于，获取指向该对象的引用，并分配给一个变量；结束于，该变量的作用域(scope)结束。</p><p>下面是一个例子，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">a</span> = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">b</span> = <span class="number">13</span>;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &quot;</span>, a);</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">c</span> = &amp;a;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">d</span> = &amp;<span class="keyword">mut</span> b;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125; &quot;</span>, c, d);</span><br><span class="line">&#125;</span><br><span class="line">b += <span class="number">1</span>;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, b);</span><br></pre></td></tr></table></figure><p>结果会打印：“12 12 13 14”。</p><p>在第3行和最后一行，一个可变租借开始并结束。在第5行，一个不可变租借开始，第6行，一个可变租借开始；它们在语句块末尾结束。在第9行，一个可变租借开始并结束。</p><p>这种规则要求，同一时刻，可变租借(即，&amp;mut )的出现不能和其它租借并存。</p><p>换句话说，同一时刻：</p><ul><li>没有租借</li><li>或，一个单一的可变(mutable)租借</li><li>或，一个单一的不可变(immutable)租借</li><li>或，几个不可变(immutable)租借</li></ul><p>不能有：</p><ul><li>几个可变(mutable)租借</li><li>不能有一个单一的可变(mutable)租借和一个或多个不可变(immutable)租借</li></ul><h2 id="Listing-the-Possible-Cases-of-Multiple-Borrowings"><a class="header-anchor" href="#Listing-the-Possible-Cases-of-Multiple-Borrowings">¶</a>Listing the Possible Cases of Multiple Borrowings</h2><p>下面罗列六种允许的情况。</p><p>第一种：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">a</span> = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_b</span> = &amp;a;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_c</span> = &amp;a;</span><br></pre></td></tr></table></figure><p>有两个不可变租借，直到结束为止被持有。</p><p>第二种：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">a</span> = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_b</span> = &amp;a;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, a);</span><br></pre></td></tr></table></figure><p>第三种：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">a</span> = <span class="number">12</span>;</span><br><span class="line">a = <span class="number">13</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_b</span> = &amp;a;</span><br></pre></td></tr></table></figure><p>一个不可变租借，紧随后一个临时可变租借。</p><p>第四种：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">a</span> = <span class="number">12</span>;</span><br><span class="line">a = <span class="number">13</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_b</span> = &amp;<span class="keyword">mut</span> a;</span><br></pre></td></tr></table></figure><p>一个可变租借，紧随后一个临时可变租借。</p><p>第五种：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">a</span> = <span class="number">12</span>;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, a);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_b</span> = &amp;a;</span><br></pre></td></tr></table></figure><p>一个不可变租借，紧随后一个临时不可变租借。</p><p>第六种：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">a</span> = <span class="number">12</span>;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, a);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_b</span> = &amp;<span class="keyword">mut</span> a;</span><br></pre></td></tr></table></figure><p>一个可变租借，紧随后一个临时不可租借。</p><p>下面是六种不合法情况。</p><p>第一种：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">a</span> = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_b</span> = &amp;<span class="keyword">mut</span> a;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_c</span> = &amp;a;</span><br></pre></td></tr></table></figure><p>编译出错“cannot borrow <code>a</code> as immutable because it is also borrowed as mutable”。</p><p>第二种：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">a</span> = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_b</span> = &amp;a;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_c</span> = &amp;<span class="keyword">mut</span> a;</span><br></pre></td></tr></table></figure><p>编译出错“cannot borrow <code>a</code> as mutable because it is also borrowed as immutable”。</p><p>第三种：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">a</span> = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_b</span> = &amp;<span class="keyword">mut</span> a;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_c</span> = &amp;<span class="keyword">mut</span> a;</span><br></pre></td></tr></table></figure><p>编译出错“cannot borrow <code>a</code> as mutable more than once at a time”。</p><p>第四种：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">a</span> = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_b</span> = &amp;a;</span><br><span class="line">a = <span class="number">13</span>;</span><br></pre></td></tr></table></figure><p>编译出错“cannot assign to <code>a</code> because it is borrowed”。</p><p>第五种：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">a</span> = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_b</span> = &amp;<span class="keyword">mut</span> a;</span><br><span class="line">a = <span class="number">13</span>;</span><br></pre></td></tr></table></figure><p>编译出错“cannot assign to <code>a</code> because it is borrowed”。</p><p>第六种：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">a</span> = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_b</span> = &amp;<span class="keyword">mut</span> a;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, a);</span><br></pre></td></tr></table></figure><p>编译出错“cannot borrow <code>a</code> as immutable because it is also borrowed as mutable”。</p><p>梳理一下。对于当前尚未被borrowed的对象来说，允许的操作是：</p><ol><li>仅可被不可变租借(immutablely borrowed)数次，然后可以由所有者(owner)和任何租借方(borrower)读取。</li><li>仅可被可变租借(mutably borrowed)一次，然后有且仅能由这个租借方(borrower)读取和修改。</li></ol><h2 id="Using-a-Bock-to-Restrict-Borrowing-Scope"><a class="header-anchor" href="#Using-a-Bock-to-Restrict-Borrowing-Scope">¶</a>Using a Bock to Restrict Borrowing Scope</h2><p>当一个对象的租借结束后，对象对其它租借又变得可用了。任何类型的租借都可限制在语句块内。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">a</span> = <span class="number">12</span>;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">b</span> = &amp;<span class="keyword">mut</span> a;</span><br><span class="line">*b += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">c</span> = &amp;<span class="keyword">mut</span> a;</span><br><span class="line">*c += <span class="number">2</span>;</span><br></pre></td></tr></table></figure><p>这是允许的，因为租借发生在第三行，语句块结束后，租借也结束了，因此第7行的<code>a</code>可以用于其它租借。</p><p>类似地，对于函数也一样，在函数结束后，对象再次变得可用。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">a</span> = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">f</span>*b: &amp;<span class="keyword">mut</span> <span class="type">i32</span>) &#123;</span><br><span class="line">*b += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_ invoke__">f</span>(&amp;<span class="keyword">mut</span> a);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">c</span> = &amp;<span class="keyword">mut</span> a;</span><br><span class="line">*c += <span class="number">2</span>;</span><br></pre></td></tr></table></figure><p>这种规则，适用于Rust确保可以自动地决定内存的回收，避免不合法的引用；这种规则允许Rust实现无数据竞争(data-race-free)的并发编程。</p><h2 id="The-Need-of-Lifetime-Specifiers-for-Returned-References"><a class="header-anchor" href="#The-Need-of-Lifetime-Specifiers-for-Returned-References">¶</a>The Need of Lifetime Specifiers for Returned References</h2><p>先看这段代码：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">v1</span> = <span class="built_in">vec!</span>[<span class="number">11u8</span>, <span class="number">22</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">result</span>;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">v2</span> = <span class="built_in">vec!</span>[<span class="number">33u8</span>];</span><br><span class="line">result = &#123;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_x1</span>: &amp;<span class="type">Vec</span>&lt;<span class="type">u8</span>&gt; = &amp;v1;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_x2</span>: &amp;<span class="type">Vec</span>&lt;<span class="type">u8</span>&gt; = &amp;v2;</span><br><span class="line">_x1</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, *result);</span><br></pre></td></tr></table></figure><p>结果将会输出：“<code>[11, 22]</code>”。</p><p>变量<code>v1</code>和<code>v2</code>各自拥有vector。接着被两个引用borrowed了，分别被<code>_x1</code>和<code>_x2</code>拥有。因此，在第7行后，<code>_x1</code>租借了变量<code>v1</code>拥有的vector，<code>_x2</code>租借了变量<code>v2</code>拥有的vector。这是被允许的，因为<code>_x1</code>在<code>v1</code>之后声明，<code>_x2</code>在<code>v2</code>之后声明，这些引用比它们租借对象存活时间短。</p><p>在第八行，有个简单的表达式<code>_x1</code>。因为它是语句块的最后表达式，该表达式的值成为语句的值，因此该值被用来初始化变量<code>result</code>。该值是一个指向<code>v1</code>的引用，<code>result</code>变量租借了vector。这是被允许的，因为<code>result</code>的声明在<code>v1</code>之后，因此可以租借<code>v1</code>拥有的对象。</p><p>现在，小小的改动：在第八行替换&quot;1&quot;和&quot;2&quot;。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">v1</span> = <span class="built_in">vec!</span>[<span class="number">11u8</span>, <span class="number">22</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">result</span>;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">v2</span> = <span class="built_in">vec!</span>[<span class="number">33u8</span>];</span><br><span class="line">    result = &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">_x1</span>: &amp;<span class="type">Vec</span>&lt;<span class="type">u8</span>&gt; = &amp;v1;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">_x2</span>: &amp;<span class="type">Vec</span>&lt;<span class="type">u8</span>&gt; = &amp;v2;</span><br><span class="line">        _x2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, *result);</span><br></pre></td></tr></table></figure><p>这会产生编译错误：“<code>v2</code> does not live long enough”。因为<code>result</code>的值来自于<code>_x2</code>表达式，由于<code>_x2</code>租借了<code>v2</code>的对象，所以<code>result</code>租借了vector。因为<code>result</code>在<code>v2</code>之前声明，因此不能租借它的对象。</p><p>Rust编译器致力于这种推理的部分称作“租借检查，<strong>borrow checker</strong>”。</p><p>现在，让我们尝试转换前面两个代码，将内部语句转换为一个函数。第一个变为，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">v1</span> = <span class="built_in">vec!</span>[<span class="number">118</span>, <span class="number">22</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">result</span>;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">v2</span> = <span class="built_in">vec!</span>[<span class="number">33u8</span>];</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">func</span>(_x1: &amp;<span class="type">Vec</span>&lt;<span class="type">u8</span>&gt;, _x2: &amp;<span class="type">Vec</span>&lt;<span class="type">u8</span>&gt;) <span class="punctuation">-&gt;</span> &amp;<span class="type">Vec</span>&lt;<span class="type">u8</span>&gt; &#123;</span><br><span class="line">        _x1</span><br><span class="line">    &#125;</span><br><span class="line">    result = <span class="title function_ invoke__">func</span>(&amp;v1, &amp;v2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, *result);</span><br></pre></td></tr></table></figure><p>第二个变为，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">v1</span> = <span class="built_in">vec!</span>[<span class="number">11u8</span>, <span class="number">22</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">result</span>;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">v2</span> = <span class="built_in">vec!</span>[<span class="number">33u8</span>];</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">func</span>(_x1: &amp;<span class="type">Vec</span>&lt;<span class="type">u8</span>&gt;, _x2: &amp;<span class="type">Vec</span>&lt;<span class="type">u8</span>&gt;) <span class="punctuation">-&gt;</span> &amp;<span class="type">Vec</span>&lt;<span class="type">u8</span>&gt; &#123;</span><br><span class="line">        _x2</span><br><span class="line">    &#125;</span><br><span class="line">    result = <span class="title function_ invoke__">func</span>(&amp;v1, &amp;v2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, *result);</span><br></pre></td></tr></table></figure><p>两者唯一不同的是<code>func</code>函数体。</p><p>根据之前的规则，第一个程序看起来是合法的，第二个不合法。两个<code>func</code>函数本身是合法的。但borrow checker会查找它们不兼容的具体用法。</p><p>泛型函数的参数边界使用traits，函数调用是否有效，依据该函数体的内容，这不是好事。主要是因为不能从错误信息理解出错的原因，除非你清楚函数体的内部代码。另一个原因是，函数被调用时，如果该函数体内任意调用了其它函数，确保<code>main</code>函数是合法的，borrow checker需要分析程序的所有函数。这种整个程序的分析带来了过度的复杂。</p><p>因此，类似于泛型函数，返回一个引用的函数，必须在函数签名阈将borrow-checking隔离！函数的borrow-check，仅考虑签名，函数体，函数调用的签名，而不需要考虑函数体调用其它函数。</p><p>因此，前面的两个程序都会出现编译错误：“missing lifetime specifier”。“声明周期指示器，<strong>lifetime specifier</strong>”是一个函数签名的一个装饰，它允许borrow checker对函数体和函数调用分离检查。</p><p>不管怎样，函数或语句体的租借行为应该是“到此为止”，不应该再将它进一步传递给其它函数或表达式，以避免带来不必要的副作用，未知的错误信息。</p><h2 id="Usage-and-Meaning-of-Lifetime-Specifiers"><a class="header-anchor" href="#Usage-and-Meaning-of-Lifetime-Specifiers">¶</a>Usage and Meaning of Lifetime Specifiers</h2><p>讨论到函数的调用和生命周期，下面是一个简单例子。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">func</span>(v1: <span class="type">Vec</span>&lt;<span class="type">u32</span>&gt;, v2: &amp;<span class="type">Vec</span>&lt;<span class="type">bool</span>&gt;) &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">s</span> = <span class="string">&quot;Hello&quot;</span>.<span class="title function_ invoke__">to_string</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在任何Rust函数内，仅可以参考的有：</p><ul><li>函数参数拥有的对象(<code>v1</code>拥有的vector)；</li><li>本地变量拥有的对象(<code>s</code>拥有的动态字符串)；</li><li>临时对象(动态字符串表达式<code>&quot;Hello&quot;.to_string()</code>)；</li><li>静态对象(字符串字面量<code>&quot;Hello&quot;</code>)；</li><li>函数参数租借的对象，由预先存在的某些变量拥有，发生在当前函数调用处(<code>v2</code>租借过来的对象)。</li></ul><p>当一个函数返回一个引用，这个引用的对象不能推断是由函数参数拥有，还是由本地变量拥有，还是由临时对象拥有，因为当函数return时，本地变量，函数参数，临时变量都会被销毁。因此，这个引用将被悬挂。</p><p>相反，这个引用却可以推断得知是静态对象，或是函数参数租借的对象。</p><p>下面是这两种情况的中第一种情况的示例(尽管代码在Rust不被允许)，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">func</span>() <span class="punctuation">-&gt;</span> &amp;<span class="type">str</span> &#123;</span><br><span class="line">    <span class="string">&quot;Hello&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">func</span>(v: &amp;<span class="type">Vec</span>&lt;<span class="type">u8</span>&gt;) <span class="punctuation">-&gt;</span> &amp;<span class="type">u8</span> &#123;</span><br><span class="line">    &amp;v[<span class="number">3</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>borrow checker仅对返回值的引用感兴趣，该引用有两种：指向静态对象，或接收的参数的租借对象。borrow checker需要知道哪些引用是指向静态对象，哪些是租借的参数对象；如果有几个参数租借对象，需要知道它们中哪些租借了非静态返回的引用。</p><p>不带lifetime specifer的函数签名是不合法的，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">trait</span> <span class="title class_">Tr</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">f</span>(flag: <span class="type">bool</span>, b: &amp;<span class="type">i32</span>, c: (<span class="type">char</span>, &amp;<span class="type">i32</span>)) <span class="punctuation">-&gt;</span> (&amp;<span class="type">i32</span>, <span class="type">f64</span>, &amp;<span class="type">i32</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>函数签名参数中有两个引用，返回值类型也包含有两个引用。后两个引用可能指向静态对象，或者参数<code>b</code>的租借对象，或者参数<code>c</code>的第二个字段的租借对象。</p><p>下面表达式指定了一种可能的情况，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">trait</span> <span class="title class_">Tr</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">f</span>&lt;<span class="symbol">&#x27;a</span>&gt;(flag: <span class="type">bool</span>, b: &amp;<span class="symbol">&#x27;a</span> <span class="type">i32</span>, c: (<span class="type">char</span>, &amp;<span class="symbol">&#x27;a</span> <span class="type">i32</span>)) <span class="punctuation">-&gt;</span> (&amp;<span class="symbol">&#x27;a</span> <span class="type">i32</span>, <span class="type">f64</span>, &amp;<span class="symbol">&#x27;static</span> <span class="type">i32</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>和泛型函数用法一样，在函数名后面，添加一个参数列表。如其说是一个类型参数，实际上它是一个生命周期指示器(lifetime specifier)。</p><p>从句<code>&lt;'a&gt;</code>是一个声明。它表示：<code>&lt;&lt;In this function signature, a lifetime specifier is used; its name is &quot;a&quot;&gt;&gt;</code>。名字&quot;a&quot;是任意的。它简单表示所有出现的情况，“匹配”这种出现。它类似泛型函数的类型参数，不同的地方在于，生命周期指示器前缀使用单引号，另外，按照约定，泛型参数首字母使用大写，生命周期指示器使用一个小写字母，如a，b，c，…。</p><p>然后，函数签名包含其它三个<code>'a</code>生命周期指示器的出现，<code>b</code>参数的类型、<code>c</code>参数的第二字段的类型、返回值的第一个字段的类型。相反，返回值的第三个字段类型用了<code>static</code>生命周期标识。</p><p>该<code>a</code>生命周期指示器的用法表示：“返回值的第一个字段租借已存在的<code>b</code>参数和<code>c</code>参数第二个字段的对象，因此它存活比该对象要短”。</p><p>相反，<code>static</code>生命周期指示器的用法表示：“返回值的第三个字段指向一个静态对象，因此它可以存活在任何时间，甚至和整个进程一样长”。</p><p>当然，这仅是一种可能生命周期注解，下面是另一种，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">trait</span> <span class="title class_">Tr</span> &#123;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">f</span>&lt;<span class="symbol">&#x27;a</span>&gt;(flag: <span class="type">bool</span>, b: &amp;<span class="symbol">&#x27;a</span> <span class="type">i32</span>, c: (<span class="type">char</span>, &amp;<span class="type">i32</span>)) <span class="punctuation">-&gt;</span> (&amp;<span class="symbol">&#x27;static</span> <span class="type">i32</span>, <span class="type">f64</span>, &amp;<span class="symbol">&#x27;a</span> <span class="type">i32</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>c</code>参数不带注解，引用的对象不租借给返回值的引用，</p><p>还有另一种可能生命周期注解，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">trait</span> <span class="title class_">Tr</span> &#123;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">f</span>&lt;<span class="symbol">&#x27;a</span>, <span class="symbol">&#x27;b</span>, T1, T2&gt;(flag: <span class="type">bool</span>, b: &amp;<span class="symbol">&#x27;a</span> T1, c: (<span class="type">char</span>, &amp;<span class="symbol">&#x27;b</span> <span class="type">i32</span>)) <span class="punctuation">-&gt;</span> (&amp;<span class="symbol">&#x27;b</span> <span class="type">i32</span>, <span class="type">f64</span>, &amp;<span class="symbol">&#x27;a</span> T2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>泛型函数有两个生命周期指示器和两个泛型参数。生命周期参数<code>a</code>指定了返回值的第三个字段租借了参数<code>b</code>的对象，以及生命周期参数<code>b</code>指定了返回值的第一个字段租借了参数<code>c</code>的第二个字段的对象。另外，函数有两个类型参数<code>T1</code>和<code>T2</code>，不带trait边界。</p><h2 id="Checking-the-Validity-of-Lifetime-Specifiers"><a class="header-anchor" href="#Checking-the-Validity-of-Lifetime-Specifiers">¶</a>Checking the Validity of Lifetime Specifiers</h2><p>编译任何函数时，borrow checker有两个工作：</p><ul><li>通过函数自身和函数体，检查函数签名是否有效。</li><li>检查函数体是否合法，统计该函数被调用次数。</li></ul><p>本小节，先看第一种情况。</p><p>如果函数返回值没有引用类型，borrow checker不做任何处理。</p><p>否则，每个返回值引用，必须检查是否有正确的生命周期指示器(lifetime specifier)。</p><p>这样一个指示器(specifier)可以是“<code>'static</code>”。这种情况，引用必须指向一个静态对象。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> FOUR: <span class="type">u8</span> = <span class="number">4</span>;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">f</span>() <span class="punctuation">-&gt;</span> (<span class="type">bool</span>, &amp;<span class="symbol">&#x27;static</span> <span class="type">u8</span>, &amp;<span class="symbol">&#x27;static</span> <span class="type">str</span>, &amp;<span class="symbol">&#x27;static</span> <span class="type">f64</span>) &#123;</span><br><span class="line">    (<span class="literal">true</span>, &amp;FOUR, <span class="string">&quot;Hello&quot;</span>, &amp;<span class="number">3.14</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125; &#123;&#125; &#123;&#125;&quot;</span>, <span class="title function_ invoke__">f</span>().<span class="number">0</span>, *<span class="title function_ invoke__">f</span>().<span class="number">1</span>, <span class="title function_ invoke__">f</span>().<span class="number">2</span>, *<span class="title function_ invoke__">f</span>().<span class="number">3</span>);</span><br></pre></td></tr></table></figure><p>结果将会打印：“<code>true 4 Hello 3.14</code>”。该程序是合法的，因为三个返回值的引用都是静态对象。</p><p>相反，下面</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">f</span>(n: &amp;<span class="type">u8</span>) <span class="punctuation">-&gt;</span> &amp;<span class="symbol">&#x27;static</span> <span class="type">u8</span> &#123;</span><br><span class="line">n</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, *<span class="title function_ invoke__">f</span>(&amp;<span class="number">12</span>));</span><br></pre></td></tr></table></figure><p>将会生成编译错误：“lifetime of reference outlives lifetime of borrowed content…”。这是不合法的，返回值不是一个指向静态对象的引用；它实际上是接收参数的值，该返回值租借了函数参数引用对象的同一个对象。</p><p>生命周期指示器可以定义成列表的形式，如下</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">f</span>&lt;<span class="symbol">&#x27;a</span>, <span class="symbol">&#x27;b</span>&gt;(x: &amp;<span class="symbol">&#x27;a</span> <span class="type">i32</span>, y: &amp;<span class="symbol">&#x27;b</span> <span class="type">i32</span>) <span class="punctuation">-&gt;</span> (&amp;<span class="symbol">&#x27;b</span> <span class="type">i32</span>, <span class="type">bool</span>, &amp;<span class="symbol">&#x27;a</span> <span class="type">i32</span>) &#123;</span><br><span class="line">(y, <span class="literal">true</span>, x)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">i</span> = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">j</span> = <span class="number">13</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">r</span> = <span class="title function_ invoke__">f</span>(&amp;i, &amp;j);</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125; &#123;&#125;&quot;</span>, *r.<span class="number">0</span>, r.<span class="number">1</span>, *r.<span class="number">2</span>);</span><br></pre></td></tr></table></figure><p>结果将打印：“13 true 12”。这是有效的，因为tuple中返回的第一个字段引用的时<code>y</code>表达式的值，以<code>y</code>参数和返回值的第一个字段有同样的生命周期指示器(lifetime specifier)；它们的生命周期指示器都是<code>'b</code>。返回值的第三个字段和参数<code>x</code>一样有同一个生命周期指示器<code>'a</code>。</p><p>相反，下面</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">f</span>&lt;<span class="symbol">&#x27;a</span>, <span class="symbol">&#x27;b</span>&gt;(x: &amp;<span class="symbol">&#x27;a</span> <span class="type">i32</span>, y: &amp;<span class="symbol">&#x27;b</span> <span class="type">i32</span>) <span class="punctuation">-&gt;</span> (&amp;<span class="symbol">&#x27;b</span> <span class="type">i32</span>, <span class="type">bool</span>, &amp;<span class="symbol">&#x27;a</span> <span class="type">i32</span>) &#123;</span><br><span class="line">(x, <span class="literal">true</span>, y)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">i</span> = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">j</span> = <span class="number">13</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">r</span> = <span class="title function_ invoke__">f</span>(&amp;i, &amp;j);</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125; &#123;&#125;&quot;</span>, *r.<span class="number">0</span>, r.<span class="number">1</span>, *r.<span class="number">2</span>);</span><br></pre></td></tr></table></figure><p>会产生两个编译错误，两个错误都是：“lifetime mismatch”。实际上，返回值的第一个字段和第三个字段都有生命周期指示器，但不是对应它们函数签名。</p><p>注意到，多个返回字段可能仅用了一个生命周期指示器：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">f</span>&lt;<span class="symbol">&#x27;a</span>&gt;(x: &amp;<span class="symbol">&#x27;a</span> <span class="type">i32</span>, y: &amp;<span class="symbol">&#x27;a</span> <span class="type">i32</span>) <span class="punctuation">-&gt;</span> (&amp;<span class="symbol">&#x27;a</span> <span class="type">i32</span>, <span class="type">bool</span>, &amp;<span class="symbol">&#x27;a</span> <span class="type">i32</span>) &#123;</span><br><span class="line">(x, <span class="literal">true</span>, y)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">i</span> = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">j</span> = <span class="number">13</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">r</span> = <span class="title function_ invoke__">f</span>(&amp;i, &amp;j);</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125; &#123;&#125;&quot;</span>, *r.<span class="number">0</span>, r.<span class="number">1</span>, *r.<span class="number">2</span>);</span><br></pre></td></tr></table></figure><p>这里，<code>'b</code>被替换为<code>'a</code>。但味道完全不一样。</p><p>原来的版本是，参数列表指示了会有两个独立的生命周期；这个版本，它们共享生命周期。</p><p>这个改动对于租借检查器(borrow checker)来说不简单。让我们考虑一个更复杂的函数体：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">f</span>&lt;<span class="symbol">&#x27;a</span>&gt;(n: <span class="type">i32</span>, x: &amp;<span class="symbol">&#x27;a</span> <span class="type">Vec</span>&lt;<span class="type">u8</span>&gt;, y: &amp;<span class="type">Vec</span>&lt;<span class="type">u8</span>&gt;) <span class="punctuation">-&gt;</span> &amp;<span class="symbol">&#x27;a</span> <span class="type">u8</span> &#123;</span><br><span class="line"><span class="keyword">if</span> n == <span class="number">0</span> &#123; <span class="keyword">return</span> &amp;x[<span class="number">0</span>]; &#125;</span><br><span class="line"><span class="keyword">if</span> n &lt; <span class="number">0</span> &#123; &amp;x[<span class="number">1</span>] &#125; <span class="keyword">else</span> &#123; &amp;x[<span class="number">2</span>] &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>该函数是有效的。函数体有三个可能的表达式返回值，所有表达式都租借了参数<code>x</code>的对象。返回值有和参数等同的生命周期，所以满足borrow checker。</p><p>相反，下面</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">f</span>&lt;<span class="symbol">&#x27;a</span>&gt;(n: <span class="type">i32</span>, x: &amp;<span class="symbol">&#x27;a</span> <span class="type">Vec</span>&lt;<span class="type">u8</span>&gt;, y: &amp;<span class="type">Vec</span>&lt;<span class="type">u8</span>&gt;) <span class="punctuation">-&gt;</span> &amp;<span class="symbol">&#x27;a</span> <span class="type">u8</span> &#123;</span><br><span class="line"><span class="keyword">if</span> n == <span class="number">0</span> &#123; <span class="keyword">return</span> &amp;x[<span class="number">0</span>]; &#125;</span><br><span class="line"><span class="keyword">if</span> n &lt; <span class="number">0</span> &#123; &amp;x[<span class="number">1</span>] &#125; <span class="keyword">else</span> &#123; &amp;y[<span class="number">2</span>] &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>一个可能的返回值，会是表达式<code>&amp;y[2]</code>，该对象租借自<code>y</code>，这个参数没有生命周期指示器，所以该代码是不合法的。</p><p>即使下面代码也是不合法的，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">f</span>&lt;<span class="symbol">&#x27;a</span>&gt;(x: &amp;<span class="symbol">&#x27;a</span> <span class="type">Vec</span>&lt;<span class="type">u8</span>&gt;, y: &amp;<span class="type">Vec</span>&lt;<span class="type">u8</span>&gt;) <span class="punctuation">-&gt;</span> &amp;<span class="symbol">&#x27;a</span> <span class="type">u8</span> &#123;</span><br><span class="line"><span class="keyword">if</span> <span class="literal">true</span> &#123; &amp;x[<span class="number">0</span>] &#125; <span class="keyword">else</span> &#123; &amp;y[<span class="number">0</span>] &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当处理数据流分析时，编译器会探测到<code>y</code>从不被返回值租借；但borrow checker坚持因为<code>&amp;y[0]</code>是一个可能返回值，所以该段程序被认为是无效的。</p><h2 id="Using-the-Lifetime-Specifiers-of-Invoked-Functions"><a class="header-anchor" href="#Using-the-Lifetime-Specifiers-of-Invoked-Functions">¶</a>Using the Lifetime Specifiers of Invoked Functions</h2><p>上一章节的开始部分说过，borrow checker有两项工作，编译函数时进行检查函数体是否有效，统计函数体内任意被调用函数的签名。</p><p>沿用上一节的代码示例。根据租借的规则，“missing lifetime specifier”表示缺少lifetime specifier，我们将原来的加上生命周期指示器，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">v1</span> = <span class="built_in">vec!</span>[<span class="number">11u8</span>, <span class="number">22</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">result</span>;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">v2</span> = <span class="built_in">vec!</span>[<span class="number">33u8</span>];</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">func</span>&lt;<span class="symbol">&#x27;a</span>&gt;(_x1: &amp;<span class="symbol">&#x27;a</span> <span class="type">Vec</span>&lt;<span class="type">u8</span>&gt;, _x2: &amp;<span class="type">Vec</span>&lt;<span class="type">u8</span>&gt;) <span class="punctuation">-&gt;</span> &amp;<span class="symbol">&#x27;a</span> <span class="type">Vec</span>&lt;<span class="type">u8</span>&gt; &#123;</span><br><span class="line">_x1</span><br><span class="line">&#125;</span><br><span class="line">result = <span class="title function_ invoke__">func</span>(&amp;v1, &amp;v2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, *result);</span><br></pre></td></tr></table></figure><p>第二个例子改为，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">v1</span> = <span class="built_in">vec!</span>[<span class="number">11u8</span>, <span class="number">22</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">result</span>;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">v2</span> = <span class="built_in">vec!</span>[<span class="number">33u8</span>];</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">func</span>&lt;<span class="symbol">&#x27;a</span>&gt;(_x1: &amp;<span class="type">Vec</span>&lt;<span class="type">u8</span>&gt;, _x2: &amp;<span class="symbol">&#x27;a</span> <span class="type">Vec</span>&lt;<span class="type">u8</span>&gt;) <span class="punctuation">-&gt;</span> &amp;<span class="symbol">&#x27;a</span> <span class="type">Vec</span>&lt;<span class="type">u8</span>&gt; &#123;</span><br><span class="line">_x2</span><br><span class="line">&#125;</span><br><span class="line">result = <span class="title function_ invoke__">func</span>(&amp;v1, &amp;v2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, *result);</span><br></pre></td></tr></table></figure><p>第一个程序是有效的，结果会打印：“<code>[11, 22]</code>”，第二个会有编译错误：“<code>v2</code> does not live long enough”。</p><p>为什么<code>func</code>这些写法会产生编译错误，前面小节已经解析过了。</p><p>让我们看看<code>main</code>函数在第一个程序如何工作的。当<code>func</code>被调用，存活<code>v1</code>、<code>result</code>和<code>v2</code>，按顺序声明，以及<code>v1</code>和<code>v2</code>早已被初始化。<code>func</code>的签名说结果值和第一个参数有相同的lifetime specifier，这意味着<code>result</code>的值不会存活得比<code>v1</code>长。以及，<code>result</code>在<code>v1</code>之后声明，因此它会先于<code>v1</code>销毁。</p><p>再看看为什么第二段程序的<code>main</code>函数是不合法的。这里，<code>func</code>的签名说返回值和第二个参数有相同的lifetime specifier，意味着<code>result</code>存活不会比<code>v2</code>长。但<code>result</code>在<code>v2</code>之前声明，而它会在其后被销毁。</p><p>这是因为只使用了一个lifetime specifiter，下面改为两个指示器，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">f</span>&lt;<span class="symbol">&#x27;a</span>, <span class="symbol">&#x27;b</span>&gt;(x: &amp;<span class="symbol">&#x27;a</span> <span class="type">i32</span>, y: &amp;<span class="symbol">&#x27;b</span> <span class="type">i32</span>) <span class="punctuation">-&gt;</span> (&amp;<span class="symbol">&#x27;b</span> <span class="type">i32</span>, <span class="type">bool</span>, &amp;<span class="symbol">&#x27;a</span> <span class="type">i32</span>) &#123;</span><br><span class="line">    (x, <span class="literal">true</span>, y)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">i1</span> = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">i2</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">j1</span> = <span class="number">13</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">j2</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">r</span> = <span class="title function_ invoke__">f</span>(&amp;i1, &amp;j1);</span><br><span class="line">i2 = r.<span class="number">0</span>;</span><br><span class="line">j2 = r.<span class="number">2</span>;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125; &#123;&#125;&quot;</span>, *i2, r.<span class="number">1</span>, *j2);</span><br></pre></td></tr></table></figure><p>结果将打印“12 true 13”。</p><p>相反，如果仅用一个lifetime specifier时，是不合法的，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">f</span>&lt;<span class="symbol">&#x27;a</span>&gt;(x: &amp;<span class="symbol">&#x27;a</span> <span class="type">i32</span>, y: &amp;<span class="symbol">&#x27;a</span> <span class="type">i32</span>) <span class="punctuation">-&gt;</span> (&amp;<span class="symbol">&#x27;a</span> <span class="type">i32</span>, <span class="type">bool</span>, &amp;<span class="symbol">&#x27;a</span> <span class="type">i32</span>) &#123;</span><br><span class="line">(x, <span class="literal">true</span>, y)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">i1</span> = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">i2</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">j1</span> = <span class="number">13</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">j2</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">r</span> = <span class="title function_ invoke__">f</span>(&amp;i1, &amp;j1);</span><br><span class="line">i2 = r.<span class="number">0</span>;</span><br><span class="line">j2 = r.<span class="number">2</span>;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125; &#123;&#125;&quot;</span>, *i2, r.<span class="number">1</span>, *j2);</span><br></pre></td></tr></table></figure><p>这会产生编译错误：“<code>j1</code> does not live long enough”。</p><p>在这两个版本中，函数<code>f</code>都会接收<code>i1</code>和<code>j1</code>的引用，首先返回变量<code>r</code>存储的值，然后分别地初始化<code>i2</code>和<code>j2</code>变量。</p><p>在第一个版本中，第一个参数和返回值的第一个字段拥有相同的lifetime specifier，这导致了<code>i2</code>必须存活少于<code>i1</code>。类似地，<code>j2</code>必须存活少于<code>j1</code>。实际上，变量的声明顺序需要满足这些要求。</p><p>第二个版本，由于只有一个lifetime specifier，所以<code>i2</code>和<code>j2</code>必须存活少于<code>i1</code>和<code>j1</code>。实际上，<code>i2</code>被声明在<code>j1</code>前，不能满足这些要求。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;本章覆盖有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;“租借，borrowing”和“生命周期，lifetime”的概念&lt;/li&gt;
&lt;li&gt;困扰系统软件的租借典型错误是哪些&lt;/li&gt;
&lt;li&gt;如何通过租借checker，Rust的严格语法来避免这种典型错误&lt;/li&gt;
&lt;li&gt;如何通过插入语句块来约束租借的作用域(scope)&lt;/li&gt;
&lt;li&gt;为什么函数返回的引用需要生命周期指示符(specifiers)&lt;/li&gt;
&lt;li&gt;如何给函数使用生命周期指示符(lifetime specifiers)，它们表示什么&lt;/li&gt;
&lt;li&gt;租借checker的任务是什么&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    <content src="https://galudisu.info/%3Cp%3E%E6%9C%AC%E7%AB%A0%E8%A6%86%E7%9B%96%E6%9C%89%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%E2%80%9C%E7%A7%9F%E5%80%9F%EF%BC%8Cborrowing%E2%80%9D%E5%92%8C%E2%80%9C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%8Clifetime%E2%80%9D%E7%9A%84%E6%A6%82%E5%BF%B5%3C/li%3E%3Cli%3E%E5%9B%B0%E6%89%B0%E7%B3%BB%E7%BB%9F%E8%BD%AF%E4%BB%B6%E7%9A%84%E7%A7%9F%E5%80%9F%E5%85%B8%E5%9E%8B%E9%94%99%E8%AF%AF%E6%98%AF%E5%93%AA%E4%BA%9B%3C/li%3E%3Cli%3E%E5%A6%82%E4%BD%95%E9%80%9A%E8%BF%87%E7%A7%9F%E5%80%9Fchecker%EF%BC%8CRust%E7%9A%84%E4%B8%A5%E6%A0%BC%E8%AF%AD%E6%B3%95%E6%9D%A5%E9%81%BF%E5%85%8D%E8%BF%99%E7%A7%8D%E5%85%B8%E5%9E%8B%E9%94%99%E8%AF%AF%3C/li%3E%3Cli%3E%E5%A6%82%E4%BD%95%E9%80%9A%E8%BF%87%E6%8F%92%E5%85%A5%E8%AF%AD%E5%8F%A5%E5%9D%97%E6%9D%A5%E7%BA%A6%E6%9D%9F%E7%A7%9F%E5%80%9F%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F(scope)%3C/li%3E%3Cli%3E%E4%B8%BA%E4%BB%80%E4%B9%88%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E7%9A%84%E5%BC%95%E7%94%A8%E9%9C%80%E8%A6%81%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E7%AC%A6(specifiers)%3C/li%3E%3Cli%3E%E5%A6%82%E4%BD%95%E7%BB%99%E5%87%BD%E6%95%B0%E4%BD%BF%E7%94%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E7%AC%A6(lifetime%20specifiers)%EF%BC%8C%E5%AE%83%E4%BB%AC%E8%A1%A8%E7%A4%BA%E4%BB%80%E4%B9%88%3C/li%3E%3Cli%3E%E7%A7%9F%E5%80%9Fchecker%E7%9A%84%E4%BB%BB%E5%8A%A1%E6%98%AF%E4%BB%80%E4%B9%88%3C/li%3E%3C/ul%3E%3Cspan%20id=%22more%22%3E%3C/span%3E%3Ch2%20id=%22Ownership-and-Borrowing%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Ownership-and-Borrowing%22%3E%C2%B6%3C/a%3EOwnership%20and%20Borrowing%3C/h2%3E%3Cp%3E%E4%B8%8A%E4%B8%80%E7%AB%A0%E4%BB%8B%E7%BB%8D%E5%88%B0%EF%BC%8C%E5%BD%93%E5%B0%86%E5%8F%98%E9%87%8F%3Ccode%3Ea%3C/code%3E%E8%B5%8B%E5%80%BC%E7%BB%99%3Ccode%3Eb%3C/code%3E%E6%97%B6%EF%BC%8C%E4%BC%9A%E6%9C%89%E4%B8%A4%E7%A7%8D%E6%83%85%E5%86%B5%EF%BC%9A%E5%A6%82%E6%9E%9C%E5%AE%83%E4%BB%AC%E7%B1%BB%E5%9E%8B%E6%98%AF%E5%8F%AF%E6%8B%B7%E8%B4%9D%E7%9A%84(copyable)%EF%BC%8C%E5%AE%83%E5%B0%B1%E5%AE%9E%E7%8E%B0%E4%BA%86%3Ccode%3ECopy%3C/code%3E%E7%89%B9%E8%B4%A8(%E5%BD%93%E7%84%B6%E4%B9%9F%E8%82%AF%E5%AE%9A%E5%AE%9E%E7%8E%B0%E4%BA%86%3Ccode%3EClone%3C/code%3E)%EF%BC%9B%E5%A6%82%E6%9E%9C%E5%AE%83%E4%BB%AC%E7%9A%84%E7%B1%BB%E5%9E%8B%E4%B8%8D%E5%8F%AF%E6%8B%B7%E8%B4%9D(non-copyable)%EF%BC%8C%E5%88%99%E6%B2%A1%E6%9C%89%E5%AE%9E%E7%8E%B0%3Ccode%3ECopy%3C/code%3E(%3Ccode%3EClone%3C/code%3E%E5%8F%AF%E8%83%BD%E5%AE%9E%E7%8E%B0%EF%BC%8C%E4%B9%9F%E5%8F%AF%E8%83%BD%E6%B2%A1%E6%9C%89)%E3%80%82%3C/p%3E%3Cp%3E%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%83%85%E5%86%B5%EF%BC%8C%E7%94%A8%E5%88%B0%E6%8B%B7%E8%B4%9D%E8%AF%AD%E4%B9%89(copy%20semantics)%E3%80%82%E6%84%8F%E5%91%B3%E7%9D%80%EF%BC%8C%E5%9C%A8%E8%B5%8B%E5%80%BC%E8%BF%87%E7%A8%8B%E4%B8%AD%EF%BC%8C%E5%BD%93%3Ccode%3Ea%3C/code%3E%E4%BF%9D%E7%95%99%E5%AE%83%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%89%80%E6%9C%89%E6%9D%83(ownership)%EF%BC%8C%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E5%AF%B9%E8%B1%A1%E8%A2%AB%E5%88%9B%E5%BB%BA%EF%BC%8C%E5%88%9D%E5%A7%8B%E5%8C%96%E5%80%BC%E7%AD%89%E5%90%8C%E4%BA%8E%3Ccode%3Ea%3C/code%3E%E7%9A%84%E5%80%BC%EF%BC%8C%E4%BB%A5%E5%8F%8A%3Ccode%3Eb%3C/code%3E%E8%8E%B7%E5%BE%97%E8%BF%99%E4%BA%9B%E6%96%B0%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%89%80%E6%9C%89%E6%9D%83%E3%80%82%E5%BD%93%3Ccode%3Ea%3C/code%3E%E5%92%8C%3Ccode%3Eb%3C/code%3E%E7%A6%BB%E5%BC%80%E5%AE%83%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%97%B6%EF%BC%8C%E5%AE%83%E4%BB%AC%E6%8B%A5%E6%9C%89%E7%9A%84%E5%AF%B9%E8%B1%A1%E8%A2%AB%E9%94%80%E6%AF%81(%E5%8F%88%E5%8F%ABdropped)%E3%80%82%3C/p%3E%3Cp%3E%E7%9B%B8%E5%8F%8D%EF%BC%8C%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%83%85%E5%86%B5%EF%BC%8C%E7%94%A8%E5%88%B0%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89(move%20semantics)%E3%80%82%E6%84%8F%E5%91%B3%E7%9D%80%EF%BC%8C%E5%9C%A8%E8%B5%8B%E5%80%BC%E8%BF%87%E7%A8%8B%E4%B8%AD%EF%BC%8C%3Ccode%3Ea%3C/code%3E%E5%B0%86%E5%AE%83%E7%9A%84%E6%89%80%E6%9C%89%E6%9D%83%E7%A7%BB%E4%BA%A4%E7%BB%99%E4%BA%86%3Ccode%3Eb%3C/code%3E%EF%BC%8C%E4%B8%8D%E4%BC%9A%E6%9C%89%E6%96%B0%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA%EF%BC%8C%3Ccode%3Ea%3C/code%3E%E4%B8%8D%E5%86%8D%E5%8F%AF%E8%AE%BF%E9%97%AE%E3%80%82%E5%BD%93%3Ccode%3Eb%3C/code%3E%E7%A6%BB%E5%BC%80%E5%AE%83%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%97%B6%EF%BC%8C%E5%AE%83%E6%8B%A5%E6%9C%89%E7%9A%84%E5%AF%B9%E8%B1%A1%E8%A2%AB%E9%94%80%E6%AF%81%E3%80%82%E5%BD%93%3Ccode%3Ea%3C/code%3E%E7%A6%BB%E5%BC%80%E5%AE%83%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%EF%BC%8C%E4%B8%8D%E5%8F%91%E7%94%9F%E4%BB%BB%E4%BD%95%E4%BA%8B%E6%83%85%E3%80%82%3C/p%3E%3Cp%3E%E6%89%80%E6%9C%89%E8%BF%99%E4%BA%9B%E4%BF%9D%E8%AF%81%E4%BA%86%E5%90%88%E9%80%82%E7%9A%84%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%EF%BC%8C%E5%8F%AA%E8%A6%81%E6%B2%A1%E6%9C%89%E5%BC%95%E7%94%A8%E8%A2%AB%E4%BD%BF%E7%94%A8%E5%88%B0%E3%80%82%3C/p%3E%3Cp%3E%E4%BD%86%E7%9C%8B%E7%9C%8B%E8%BF%99%E4%B8%AA%E4%BB%A3%E7%A0%81%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3En%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Eref_to_n%3C/span%3E%20=%20&amp;amp;n;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%AC%AC%E4%B8%80%E6%9D%A1%E8%AF%AD%E5%8F%A5%E5%90%8E%EF%BC%8C%E5%8F%98%E9%87%8F%3Ccode%3En%3C/code%3E%E6%8B%A5%E6%9C%89%E4%B8%80%E4%B8%AA%E6%95%B0%E3%80%82%3C/p%3E%3Cp%3E%E7%AC%AC%E4%BA%8C%E6%9D%A1%E8%AF%AD%E5%8F%A5%E5%90%8E%EF%BC%8C%E5%8F%98%E9%87%8F%3Ccode%3Eref_to_n%3C/code%3E%E6%8B%A5%E6%9C%89%E4%B8%80%E4%B8%AA%E5%BC%95%E7%94%A8%EF%BC%8C%E8%AF%A5%E5%BC%95%E7%94%A8%E6%8C%87%E5%90%91%E5%90%8C%E4%B8%80%E4%B8%AA%E7%94%B1%3Ccode%3En%3C/code%3E%E5%BC%95%E7%94%A8%E7%9A%84%E6%95%B0%E3%80%82%E5%AE%83%E6%98%AF%E4%B8%80%E4%B8%AA%E6%89%80%E6%9C%89%E6%9D%83%E5%90%97%EF%BC%9F%3C/p%3E%3Cp%3E%E5%AE%83%E4%B8%8D%E8%83%BD%E4%BD%9C%E4%B8%BA%E4%B8%80%E4%B8%AA%E6%89%80%E6%9C%89%E6%9D%83%EF%BC%8C%E5%9B%A0%E4%B8%BA%E8%BF%99%E4%B8%AA%E6%95%B0%E6%97%A9%E5%B7%B2%E7%BB%8F%E7%94%B1%3Ccode%3En%3C/code%3E%E6%89%80%E6%8B%A5%E6%9C%89%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%90%8C%E6%97%B6%E8%A2%AB%E8%BF%99%E4%B8%AA%E5%BC%95%E7%94%A8%E6%89%80%E2%80%9C%E6%8B%A5%E6%9C%89%E2%80%9D%EF%BC%8C%E5%AE%83%E5%B0%86%E4%BC%9A%E8%A2%AB%E9%94%80%E6%AF%81%E4%B8%A4%E6%AC%A1%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8C%E7%B1%BB%E4%BC%BC%E8%BF%99%E6%A0%B7%E7%9A%84%E5%BC%95%E7%94%A8%E4%B8%8D%E8%83%BD%E2%80%9C%E6%8B%A5%E6%9C%89%E2%80%9D%E5%AF%B9%E8%B1%A1%E3%80%82%3C/p%3E%3Cp%3E%E8%A1%A8%E8%BE%BE%E5%BC%8F%3Ccode%3En%3C/code%3E%E5%92%8C%3Ccode%3E*ref_to_n%3C/code%3E%E6%8C%87%E5%90%91%E5%90%8C%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%EF%BC%8C%E4%BD%86%E4%BB%85%3Ccode%3En%3C/code%3E%E6%8B%A5%E6%9C%89%E8%BF%99%E4%B8%AA%E5%AF%B9%E8%B1%A1%E3%80%82%E5%8F%98%E9%87%8F%3Ccode%3Eref_to_n%3C/code%3E%E5%8F%AF%E4%BB%A5%E8%AE%BF%E9%97%AE%E8%BF%99%E4%B8%AA%E5%AF%B9%E8%B1%A1%EF%BC%8C%E4%BD%86%E4%B8%8D%E6%98%AF%E2%80%9C%E6%8B%A5%E6%9C%89%E2%80%9D%E8%BF%99%E4%B8%AA%E5%AF%B9%E8%B1%A1%E3%80%82%E8%BF%99%E7%A7%8D%E6%A6%82%E5%BF%B5%E7%A7%B0%E4%B8%BA%3Cstrong%3E%E7%A7%9F%E5%80%9F%EF%BC%8Cborrowing%3C/strong%3E%E3%80%82%E6%88%91%E4%BB%AC%E8%AF%B4%3Ccode%3Eref_to_n%3C/code%3E%E5%80%9F%E4%BA%86%3Ccode%3En%3C/code%3E%E6%8B%A5%E6%9C%89%E7%9A%84%E6%95%B0%E3%80%82%E8%BF%99%E7%A7%8D%E7%A7%9F%E5%80%9F%EF%BC%8C%E5%BC%80%E5%A7%8B%E4%BA%8E%E5%BC%95%E7%94%A8%E6%8C%87%E5%90%91%E8%AF%A5%E5%AF%B9%E8%B1%A1%EF%BC%8C%E7%BB%93%E6%9D%9F%E4%BA%8E%E8%AF%A5%E5%AF%B9%E8%B1%A1%E7%9A%84%E9%94%80%E6%AF%81%E3%80%82%3C/p%3E%3Cp%3E%E5%85%B3%E4%BA%8E%E5%8F%AF%E5%8F%98%E6%80%A7(mutability)%EF%BC%8C%E6%9C%89%E4%B8%A4%E7%A7%8D%E7%B1%BB%E5%9E%8B%E7%9A%84borrowing%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3En%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Eref1_to_n%3C/span%3E%20=%20&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20n;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Eref2_to_n%3C/span%3E%20=%20&amp;amp;n;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%BF%99%E6%AE%B5%E7%A8%8B%E5%BA%8F%E4%B8%AD%EF%BC%8C%3Ccode%3Eref1_to_n%3C/code%3E%E5%B0%86%3Ccode%3En%3C/code%3E%E6%8B%A5%E6%9C%89%E7%9A%84%E5%80%BC%EF%BC%8C%E7%A7%9F%E5%80%9F%E4%B8%BA%20%3Cstrong%3Emutably%3C/strong%3E%20%E7%9A%84%E5%80%BC%EF%BC%8C%E4%BB%A5%E5%8F%8A%3Ccode%3Eref2_to_n%3C/code%3E%E7%A7%9F%E5%80%9F%E4%B8%BA%20%3Cstrong%3Eimmutably%3C/strong%3E%20%E7%9A%84%E5%80%BC%E3%80%82%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%98%AF%E5%8F%AF%E5%8F%98%E7%A7%9F%E5%80%9F(mutable%20borrowing)%EF%BC%8C%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%98%AF%E4%B8%8D%E5%8F%AF%E5%8F%98%E7%A7%9F%E5%80%9F(immutable%20borrowing)%E3%80%82%E5%8F%AF%E5%8F%98%E7%A7%9F%E5%80%9F%E4%BB%85%E8%83%BD%E4%BB%8E%E5%8F%AF%E5%8F%98%E5%8F%98%E9%87%8F%E4%B8%AD%E8%8E%B7%E5%8F%96%E3%80%82%3C/p%3E%3Ch2%20id=%22Object-Lifetimes%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Object-Lifetimes%22%3E%C2%B6%3C/a%3EObject%20Lifetimes%3C/h2%3E%3Cp%3E%E6%B3%A8%E6%84%8F%E5%88%B0%EF%BC%8C%E2%80%9C%E4%BD%9C%E7%94%A8%E5%9F%9F%EF%BC%8Cscope%E2%80%9D%E7%9A%84%E6%A6%82%E5%BF%B5%E4%BD%9C%E7%94%A8%E4%BA%8E%E7%BC%96%E8%AF%91%E6%9C%9F%E7%9A%84%E5%8F%98%E9%87%8F%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AF%E8%BF%90%E8%A1%8C%E6%9C%9F%E7%9A%84%E5%AF%B9%E8%B1%A1%E3%80%82%E5%AF%B9%E5%BA%94%E8%BF%90%E8%A1%8C%E6%9C%9F%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%A6%82%E5%BF%B5%E5%8F%AB%E2%80%9C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%8Clifetime%E2%80%9D%E3%80%82%E5%9C%A8Rust%E4%B8%AD%EF%BC%8C%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%8C%E6%8C%87%E7%9A%84%E6%98%AF%E4%B8%80%E7%B3%BB%E5%88%97%E6%89%A7%E8%A1%8C%E6%8C%87%E4%BB%A4%EF%BC%8C%E4%BB%8E%E6%89%A7%E8%A1%8C%E6%8C%87%E4%BB%A4%E7%9A%84%E5%88%9B%E5%BB%BA%EF%BC%8C%E5%88%B0%E6%89%A7%E8%A1%8C%E6%8C%87%E4%BB%A4%E7%9A%84%E9%94%80%E6%AF%81%E3%80%82%E5%9C%A8%E8%AF%A5%E6%97%B6%E9%97%B4%E6%AE%B5%EF%BC%8C%E8%AF%A5%E5%AF%B9%E8%B1%A1%E5%8F%AB%E5%81%9A%E2%80%9C%E5%AD%98%E6%B4%BB%EF%BC%8Cto%20live%EF%BC%8Cto%20be%20alive%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E5%BD%93%E7%84%B6%EF%BC%8C%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%AD%98%E5%9C%A8%E4%B8%80%E5%AE%9A%E5%85%B3%E7%B3%BB%EF%BC%8C%E4%BD%86%E5%AE%83%E4%BB%AC%E4%B8%8D%E6%98%AF%E5%90%8C%E4%B8%80%E4%B8%AA%E6%A6%82%E5%BF%B5%E3%80%82%E4%BE%8B%E5%A6%82%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ea%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ea%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20a);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%AF%A5%E7%A8%8B%E5%BA%8F%E4%B8%AD%EF%BC%8C%E5%8F%98%E9%87%8F%3Ccode%3Ea%3C/code%3E%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%BC%80%E5%A7%8B%E4%BA%8E%E7%AC%AC%E4%B8%80%E8%A1%8C%EF%BC%8C%E8%80%8C%3Ccode%3Ea%3C/code%3E%E6%8B%A5%E6%9C%89%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%BC%80%E5%A7%8B%E4%BA%8E%E7%AC%AC%E4%BA%8C%E8%A1%8C%E3%80%82%E9%80%9A%E5%B8%B8%E8%AE%A4%E4%B8%BA%EF%BC%8C%E5%8F%98%E9%87%8F%3Ccode%3Ea%3C/code%3E%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%BC%80%E5%A7%8B%E4%BA%8E%E5%AE%83%E7%9A%84%E5%A3%B0%E6%98%8E%EF%BC%8C%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%BC%80%E5%A7%8B%E4%BA%8E%E8%AF%A5%E5%AF%B9%E8%B1%A1%E6%8E%A5%E6%94%B6%E4%B8%80%E4%B8%AA%E5%80%BC%E3%80%82%3C/p%3E%3Cp%3E%E5%8D%B3%E4%BD%BF%E6%98%AF%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F(scope)%E7%9A%84%E7%BB%93%E6%9D%9F%EF%BC%8C%E8%B7%9F%E5%AF%B9%E8%B1%A1%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F(lifetime)%E7%9A%84%E7%BB%93%E6%9D%9F%E4%B9%9F%E4%B8%8D%E6%98%AF%E5%90%8C%E6%97%B6%E5%8F%91%E7%94%9F%E7%9A%84%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ea%3C/span%3E%20=%20%3Cspan%20class=%22string%22%3E&amp;quot;Hello&amp;quot;%3C/span%3E.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eto_string%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Eb%3C/span%3E%20=%20a;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;,%20&amp;quot;%3C/span%3E,%20b);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ea%20=%20%3Cspan%20class=%22string%22%3E&amp;quot;world&amp;quot;%3C/span%3E.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eto_string%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;!&amp;quot;%3C/span%3E,%20a);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Eb%20=%20a;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BB%93%E6%9E%9C%E5%B0%86%E8%BE%93%E5%87%BA%EF%BC%9A%E2%80%9CHello,%20world!%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E5%9C%A8%E7%AC%AC%E4%B8%80%E6%9D%A1%E8%AF%AD%E5%8F%A5%EF%BC%8C%E5%8F%98%E9%87%8F%3Ccode%3Ea%3C/code%3E%E8%A2%AB%E5%A3%B0%E6%98%8E%E4%BB%A5%E5%8F%8A%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82%E5%9B%A0%E6%AD%A4%3Ccode%3Ea%3C/code%3E%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%BC%80%E5%A7%8B%EF%BC%8C%E6%8E%A5%E7%9D%80%3Ccode%3Ea%3C/code%3E%E6%8B%A5%E6%9C%89%E7%9A%84%E5%AF%B9%E8%B1%A1%E8%A2%AB%E5%88%9B%E5%BB%BA%EF%BC%8C%3Ccode%3Ea%3C/code%3E%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%BC%80%E5%A7%8B%E3%80%82%3C/p%3E%3Cp%3E%E5%9C%A8%E7%AC%AC%E4%BA%8C%E6%9D%A1%E8%AF%AD%E5%8F%A5%EF%BC%8C%E5%8F%98%E9%87%8F%3Ccode%3Eb%3C/code%3E%E8%A2%AB%E5%A3%B0%E6%98%8E%EF%BC%8C%E7%94%B1%3Ccode%3Ea%3C/code%3E%E7%A7%BB%E5%8A%A8%E5%AF%B9%E8%B1%A1%E8%BF%9B%E8%A1%8C%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8C%3Ccode%3Eb%3C/code%3E%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%BC%80%E5%A7%8B%EF%BC%8C%3Ccode%3Ea%3C/code%3E%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%E8%A2%AB%E6%82%AC%E6%8C%82(suspended)%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%AE%83%E8%A2%AB%E7%A7%BB%E5%8A%A8%E4%BA%86%EF%BC%8C%E6%89%80%E4%BB%A5%E5%AE%83%E4%B8%8D%E5%8F%AF%E5%86%8D%E8%A2%AB%E8%AE%BF%E9%97%AE%E3%80%82%3Ccode%3Eb%3C/code%3E%E6%8B%A5%E6%9C%89%E7%9A%84%E5%AF%B9%E8%B1%A1%E4%B8%8D%E7%94%A8%E5%88%9B%E5%BB%BA%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%AE%83%E5%B0%B1%E6%98%AF%E5%85%88%E5%89%8D%E5%88%9B%E5%BB%BA%E7%9A%84%E5%AF%B9%E8%B1%A1%E3%80%82%3C/p%3E%3Cp%3E%E5%9C%A8%E7%AC%AC%E4%B8%89%E6%9D%A1%E8%AF%AD%E5%8F%A5%EF%BC%8C%3Ccode%3Eb%3C/code%3E%E8%A2%AB%E8%AE%BF%E9%97%AE%E3%80%82%3C/p%3E%3Cp%3E%E5%9C%A8%E7%AC%AC%E5%9B%9B%E6%9D%A1%E8%AF%AD%E5%8F%A5%EF%BC%8C%E5%8F%98%E9%87%8F%3Ccode%3Ea%3C/code%3E%E9%80%9A%E8%BF%87%3Ccode%3Enew%3C/code%3E%E6%9E%84%E9%80%A0%E5%99%A8%EF%BC%8C%E6%8C%87%E6%B4%BE%E6%96%B0%E7%9A%84%E5%80%BC%E3%80%82%E8%BF%99%E9%87%8C%EF%BC%8C%3Ccode%3Ea%3C/code%3E%E6%81%A2%E5%A4%8D(resume)%E5%AE%83%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F(scope)%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%AE%83%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%E8%BF%98%E6%B2%A1%E6%9C%89%E7%BB%93%E6%9D%9F%E3%80%82%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E5%AF%B9%E8%B1%A1%E8%A2%AB%E5%88%9B%E5%BB%BA%EF%BC%8C%E8%AF%A5%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%BC%80%E5%A7%8B%E3%80%82%E5%89%8D%E9%9D%A2%E7%94%B1%E4%BA%8E%E5%8F%98%E9%87%8F%3Ccode%3Ea%3C/code%3E%E8%A2%AB%E2%80%9C%E7%A7%BB%E5%8A%A8%E2%80%9D%E4%BA%86%EF%BC%8C%E6%89%80%E4%BB%A5%E5%AE%83%E4%B8%8D%E2%80%9C%E6%8B%A5%E6%9C%89%E2%80%9D%E4%BB%BB%E4%BD%95%E5%AF%B9%E8%B1%A1%E3%80%82%E6%89%80%E4%BB%A5%E8%BF%99%E9%87%8C%E7%9A%84%E8%AF%AD%E5%8F%A5%E7%B1%BB%E4%BC%BC%E4%BA%8E%E4%B8%80%E4%B8%AA%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82%3C/p%3E%3Cp%3E%E5%9C%A8%E7%AC%AC%E4%BA%94%E6%9D%A1%E8%AF%AD%E5%8F%A5%EF%BC%8C%3Ccode%3Ea%3C/code%3E(%E6%8B%A5%E6%9C%89%E5%AF%B9%E8%B1%A1)%E5%8F%AF%E8%A2%AB%E8%AE%BF%E9%97%AE%E4%BA%86%E3%80%82%3C/p%3E%3Cp%3E%E5%9C%A8%E7%AC%AC%E5%85%AD%E6%9D%A1%E8%AF%AD%E5%8F%A5%EF%BC%8C%3Ccode%3Ea%3C/code%3E%E5%86%8D%E6%AC%A1%E8%A2%AB%E7%A7%BB%E5%8A%A8%E5%88%B0%3Ccode%3Eb%3C/code%3E%EF%BC%8C%E5%AE%83%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%86%8D%E6%AC%A1%E8%A2%AB%E6%82%AC%E6%8C%82(suspended)%E3%80%82%E7%9B%B8%E5%8F%8D%EF%BC%8C%3Ccode%3Eb%3C/code%3E%E4%B8%80%E7%9B%B4%E6%98%AF%E6%B4%BB%E5%8A%A8%E7%9A%84(active)%EF%BC%8C%E5%AE%83%E6%8B%A5%E6%9C%89%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%94%B1%E7%A7%BB%E5%8A%A8%E7%9A%84%3Ccode%3Ea%3C/code%3E%E6%9B%BF%E6%8D%A2%EF%BC%8C%E5%9B%A0%E6%AD%A4%EF%BC%8C%E5%8E%9F%E5%85%88%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%9C%A8%E8%BF%99%E9%87%8C%E8%A2%AB%E9%94%80%E6%AF%81%EF%BC%8C%E4%BB%A5%E5%8F%8A%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%BB%93%E6%9D%9F%E3%80%82%E5%A6%82%E6%9E%9C%E8%AF%A5%E5%AF%B9%E8%B1%A1%E5%AE%9E%E7%8E%B0%E4%BA%86%3Ccode%3EDrop%3C/code%3E%EF%BC%8C%E5%9C%A8%E8%BF%99%E9%87%8C%EF%BC%8C%E5%AE%83%E7%9A%84%3Ccode%3Edrop%3C/code%3E%E6%96%B9%E6%B3%95%E4%BC%9A%E8%A2%AB%E8%B0%83%E7%94%A8%E3%80%82%3C/p%3E%3Cp%3E%E6%9C%80%E5%90%8E%EF%BC%8C%3Ccode%3Eb%3C/code%3E%E5%92%8C%3Ccode%3Ea%3C/code%3E%E9%99%86%E7%BB%AD%E9%80%80%E5%87%BA%E5%AE%83%E4%BB%AC%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%E3%80%82%E5%8F%98%E9%87%8F%3Ccode%3Eb%3C/code%3E%E6%8B%A5%E6%9C%89%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%EF%BC%8C%E8%AF%A5%E5%AF%B9%E8%B1%A1%E8%A2%AB%E9%94%80%E6%AF%81%EF%BC%8C%E4%BB%A5%E5%8F%8A%E7%BB%93%E6%9D%9F%E5%AE%83%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E3%80%82%E7%9B%B8%E5%8F%8D%EF%BC%8C%E5%8F%98%E9%87%8F%3Ccode%3Ea%3C/code%3E%E8%A2%AB%E2%80%9C%E7%A7%BB%E5%8A%A8%E2%80%9D%E4%BA%86%EF%BC%8C%E4%B8%8D%E5%86%8D%E6%8B%A5%E6%9C%89%E4%BB%BB%E4%BD%95%E5%AF%B9%E8%B1%A1%EF%BC%8C%E4%B9%9F%E5%B0%B1%E4%B8%8D%E4%BC%9A%E6%9C%89%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8F%91%E7%94%9F%E3%80%82%3C/p%3E%3Ch2%20id=%22Errors-Regarding-Borrowing%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Errors-Regarding-Borrowing%22%3E%C2%B6%3C/a%3EErrors%20Regarding%20Borrowing%3C/h2%3E%3Cp%3EC%E5%92%8CC++%E7%A8%8B%E5%BA%8F%E7%BC%96%E5%86%99%E6%80%BB%E6%98%AF%E8%A2%AB%E5%90%84%E7%A7%8D%E9%94%99%E8%AF%AF%E5%9B%B0%E6%89%B0%EF%BC%8C%E8%80%8CRust%E5%88%99%E9%80%9A%E8%BF%87%E8%AE%BE%E8%AE%A1%E6%9D%A5%E9%81%BF%E5%85%8D%E8%BF%99%E4%B8%80%E7%B1%BB%E9%97%AE%E9%A2%98%E3%80%82Rust%E7%9A%84%E4%B8%80%E7%A7%8D%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF%E6%98%AF%E2%80%9Cuse%20after%20move%E2%80%9D%EF%BC%8C%E5%89%8D%E9%9D%A2%E4%BB%8B%E7%BB%8D%E8%BF%87%E3%80%82%E5%8F%A6%E4%B8%80%E7%A7%8D%E9%94%99%E8%AF%AF%E5%A6%82%E4%B8%8B%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Eref_to_n%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3En%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20ref_to_n%20=%20&amp;amp;n;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;quot;%3C/span%3E,%20*ref_to_n);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20*ref_to_n);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E9%A6%96%E5%85%88%EF%BC%8C%E5%8F%98%E9%87%8F%3Ccode%3Eref_to_n%3C/code%3E%E8%A2%AB%E5%A3%B0%E6%98%8E%EF%BC%8C%E4%BD%86%E6%B2%A1%E6%9C%89%E8%A2%AB%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82%E7%84%B6%E5%90%8E%EF%BC%8C%E5%9C%A8%E8%AF%AD%E5%8F%A5%E5%9D%97%E5%86%85%EF%BC%8C%E5%8F%AF%E5%8F%98%E5%8F%98%E9%87%8F%3Ccode%3En%3C/code%3E%E8%A2%AB%E5%A3%B0%E6%98%8E%E5%B9%B6%E5%88%9D%E5%A7%8B%E5%8C%96%EF%BC%8C%E5%AE%83%E5%88%86%E9%85%8D%E4%B8%80%E4%B8%AA%E6%95%B0%E5%9C%A8%E6%A0%88%E4%B8%8A%EF%BC%8C%E5%80%BC%E4%B8%BA12%E3%80%82%3C/p%3E%3Cp%3E%E7%84%B6%E5%90%8E%EF%BC%8C%E5%8E%9F%E5%85%88%E7%9A%84%E5%8F%98%E9%87%8F%EF%BC%8C%E7%94%A8%E4%B8%80%E4%B8%AA%E6%8C%87%E5%90%91%3Ccode%3En%3C/code%3E%E7%9A%84%E5%BC%95%E7%94%A8%E8%BF%9B%E8%A1%8C%E5%88%9D%E5%A7%8B%E5%8C%96%EF%BC%8C%E5%AE%83%E7%A7%9F%E5%80%9F(borrow)%E4%BA%86%E8%BF%99%E4%B8%AA%E5%AF%B9%E8%B1%A1%E3%80%82%3C/p%3E%3Cp%3E%E6%8E%A5%E7%9D%80%EF%BC%8C%E5%8F%98%E9%87%8F%3Ccode%3Eref_to_n%3C/code%3E%E6%8C%87%E5%90%91%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%8D%B3%E5%80%BC%E4%B8%BA12%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%89%93%E5%8D%B0%E8%BE%93%E5%87%BA%E3%80%82%3C/p%3E%3Cp%3E%E6%8E%A5%E7%9D%80%EF%BC%8C%E8%AF%AD%E5%8F%A5%E5%9D%97%E7%BB%93%E6%9D%9F%EF%BC%8C%E5%86%85%E9%83%A8%E5%8F%98%E9%87%8F%3Ccode%3En%3C/code%3E%E7%BB%93%E6%9D%9F%E4%BA%86%E5%AE%83%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%EF%BC%8C%E5%AE%83%E7%9A%84%E5%AF%B9%E8%B1%A1%E8%A2%AB%E9%94%80%E6%AF%81%E3%80%82%3C/p%3E%3Cp%3E%E6%8E%A5%E7%9D%80%EF%BC%8C%E5%8F%98%E9%87%8F%3Ccode%3Eref_to_n%3C/code%3E%E6%8C%87%E5%90%91%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%86%8D%E6%AC%A1%E8%A2%AB%E6%89%93%E5%8D%B0%E3%80%82%E4%BD%86%E8%AF%A5%E5%AF%B9%E8%B1%A1%E5%8E%9F%E5%85%88%E8%A2%AB%3Ccode%3En%3C/code%3E%E2%80%9C%E6%8B%A5%E6%9C%89%E2%80%9D%EF%BC%8C%E5%AE%83%E7%8E%B0%E5%9C%A8%E4%B8%8D%E5%AD%98%E5%9C%A8%E4%BA%86%EF%BC%81%3C/p%3E%3Cp%3E%E5%B9%B8%E8%BF%90%E7%9A%84%E6%98%AF%EF%BC%8CRust%E7%BC%96%E8%AF%91%E5%99%A8%E6%8B%92%E7%BB%9D%E8%AF%A5%E4%BB%A3%E7%A0%81%EF%BC%8C%E4%BA%A7%E7%94%9F%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF%E2%80%9C%3Ccode%3En%3C/code%3E%20does%20not%20live%20long%20enough%E2%80%9D%E3%80%82%E8%AF%A5%E6%B6%88%E6%81%AF%E8%A1%A8%E7%A4%BA%EF%BC%8C%E5%8F%98%E9%87%8F%3Ccode%3En%3C/code%3E%E6%AD%BB%E4%BA%86(dying)%EF%BC%8C%E4%BD%86%E4%BB%8D%E7%84%B6%E6%9C%89%E6%8C%87%E5%90%91%E5%AE%83%E2%80%9C%E6%8B%A5%E6%9C%89%E2%80%9D%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%BC%95%E7%94%A8%EF%BC%8C%E5%AE%83%E5%BA%94%E8%AF%A5%E6%B4%BB%E6%9B%B4%E9%95%BF%E4%B8%80%E4%BA%9B%EF%BC%9B%E8%87%B3%E5%B0%91%E5%BA%94%E8%AF%A5%E8%B7%9F%E7%A7%9F%E5%80%9F%E5%AE%83%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%A7%9F%E5%80%9F%E6%96%B9%E4%B8%80%E6%A0%B7%E9%95%BF%E3%80%82%3C/p%3E%3Cp%3E%E9%A1%BA%E4%BE%BF%EF%BC%8CC%E6%88%96C++%E5%AF%B9%E5%BA%94%E7%9A%84%E4%BB%A3%E7%A0%81%E5%A6%82%E4%B8%8B%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20c%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22meta%22%3E#%3Cspan%20class=%22keyword%22%3Einclude%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;lt;stdio.h&amp;gt;%3C/span%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Emain%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E*%20ref_to_n;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20n%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20ref_to_n%20&amp;amp;n;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22built_in%22%3Eprintf%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;%d%20&amp;quot;%3C/span%3E,%20*ref_to_n);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Eprintf%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;%d&amp;quot;%3C/span%3E,%20*ref_to_n);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%BF%99%E6%AE%B5%E7%A8%8B%E5%BA%8F%E5%8F%AF%E8%A2%ABC%E5%92%8CC++%E7%BC%96%E8%AF%91%E5%99%A8%E6%8E%A5%E5%8F%97%E3%80%82%E7%BB%93%E6%9E%9C%E4%BC%9A%E6%89%93%E5%8D%B0%E2%80%9C12%E2%80%9D%EF%BC%8C%E4%B9%8B%E5%90%8E%E7%9A%84%E8%A1%8C%E4%B8%BA%E4%BC%9A%E5%8F%98%E5%BE%97%E4%B8%8D%E5%8F%AF%E9%A2%84%E6%B5%8B%E3%80%82%3C/p%3E%3Cp%3E%E8%BF%99%E7%B1%BB%E7%A8%8B%E5%BA%8F%E9%94%99%E8%AF%AF%EF%BC%8C%E6%88%91%E4%BB%AC%E7%A7%B0%E4%B9%8B%E4%B8%BA%E2%80%9Cuse%20after%20drop%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E6%9C%89%E5%8F%A6%E4%B8%80%E7%A7%8D%E5%8F%AF%E9%81%BF%E5%85%8D%E7%9A%84Rust%E9%94%99%E8%AF%AF%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ev%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22number%22%3E12%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Eref_to_first%3C/span%3E%20=%20&amp;amp;v[%3Cspan%20class=%22number%22%3E0%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epush%3C/span%3E(%3Cspan%20class=%22number%22%3E13%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20ref_to_first);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%AF%B9%E5%BA%94%E7%9A%84C%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%E6%98%AF%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20c%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22meta%22%3E#%3Cspan%20class=%22keyword%22%3Einclude%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;lt;stdio.h&amp;gt;%3C/span%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22meta%22%3E#%3Cspan%20class=%22keyword%22%3Einclude%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;lt;stdlib.h&amp;gt;%3C/span%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Emain%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E*%20v%20=%20%3Cspan%20class=%22built_in%22%3Emalloc%3C/span%3E(%3Cspan%20class=%22number%22%3E1%3C/span%3E%20*%20%3Cspan%20class=%22keyword%22%3Esizeof%3C/span%3E%20(%3Cspan%20class=%22type%22%3Eint%3C/span%3E));%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20v[%3Cspan%20class=%22number%22%3E0%3C/span%3E]%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22type%22%3Econst%3C/span%3E%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E*%20ref_to_first%20=%20&amp;amp;v[%3Cspan%20class=%22number%22%3E0%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20v%20=%20%3Cspan%20class=%22built_in%22%3Erealloc%3C/span%3E(v,%20%3Cspan%20class=%22number%22%3E2%3C/span%3E%20*%20%3Cspan%20class=%22keyword%22%3Esizeof%3C/span%3E%20(%3Cspan%20class=%22type%22%3Eint%3C/span%3E));%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20v[%3Cspan%20class=%22number%22%3E1%3C/span%3E]%20=%20%3Cspan%20class=%22number%22%3E13%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Eprintf%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;%d&amp;quot;%3C/span%3E,%20*ref_to_first);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Efree%3C/span%3E(v);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E4%BB%A5%E5%8F%8AC++%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%98%AF%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20cpp%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22meta%22%3E#%3Cspan%20class=%22keyword%22%3Einclude%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;lt;iostream&amp;gt;%3C/span%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22meta%22%3E#%3Cspan%20class=%22keyword%22%3Einclude%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;lt;vector&amp;gt;%3C/span%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22function%22%3E%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%22%3Emain%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20%3C/span%3E&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20std::vector&amp;lt;%3Cspan%20class=%22type%22%3Eint%3C/span%3E&amp;gt;%20v%20&amp;#123;%20%3Cspan%20class=%22number%22%3E12%3C/span%3E%20&amp;#125;;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22type%22%3Econst%3C/span%3E%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E&amp;amp;%20ref_to_first%20=%20v[%3Cspan%20class=%22number%22%3E0%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20v.%3Cspan%20class=%22built_in%22%3Epush_back%3C/span%3E(%3Cspan%20class=%22number%22%3E13%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20std::cout%20&amp;lt;&amp;lt;%20ref_to_first;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E4%B8%8D%E7%94%A8%E5%A4%9A%E8%AF%B4%EF%BC%8C%E6%9C%80%E5%90%8E%E4%B8%A4%E4%B8%AA%E7%A8%8B%E5%BA%8F%E4%BC%9A%E8%A2%AB%E5%90%84%E8%87%AA%E7%9A%84%E7%BC%96%E8%AF%91%E5%99%A8%E6%8E%A5%E5%8F%97%EF%BC%8C%E5%8D%B3%E4%BD%BF%E5%AE%83%E4%BB%AC%E7%9A%84%E8%A1%8C%E4%B8%BA%E6%98%AF%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E3%80%82%E7%9B%B8%E5%8F%8D%EF%BC%8CRust%E7%BC%96%E8%AF%91%E5%99%A8%E4%BC%9A%E6%8B%92%E7%BB%9D%E5%B9%B6%E6%8A%9B%E5%87%BA%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF%E2%80%9Ccannot%20borrow%20%3Ccode%3Ev%3C/code%3E%20as%20mutable%20because%20it%20is%20also%20borrowed%20as%20immutable%E2%80%9D%E3%80%82%E8%AE%A9%E6%88%91%E4%BB%AC%E7%9C%8B%E7%9C%8B%E8%AF%A5%E7%A8%8B%E5%BA%8F%E6%9C%89%E4%BB%80%E4%B9%88%E9%94%99%E8%AF%AF%E3%80%82%3C/p%3E%3Cp%3E%E9%A6%96%E5%85%88%EF%BC%8C%E5%8F%AF%E5%8F%98(mutable)%E5%8F%98%E9%87%8F%3Ccode%3Ev%3C/code%3E%EF%BC%8C%E7%94%A8%E4%B8%80%E4%B8%AA%E4%BB%85%E5%B8%A6%E6%95%B012%E7%9A%84vector%E5%A3%B0%E6%98%8E%E5%92%8C%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82%3C/p%3E%3Cp%3E%E7%84%B6%E5%90%8E%EF%BC%8C%E5%8F%98%E9%87%8F%3Ccode%3Eref_to_first%3C/code%3E%E7%94%A8%E5%8E%9F%E5%85%88%E6%8C%87%E5%90%91%3Ccode%3Ev%3C/code%3E%E7%9A%84%E5%BC%95%E7%94%A8%E5%A3%B0%E6%98%8E%E5%92%8C%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82%E5%BC%95%E7%94%A8%E6%8C%87%E5%90%91%E7%9A%84%E5%80%BC%E5%8C%85%E5%90%AB%E6%95%B012%E3%80%82%3C/p%3E%3Cp%3E%E7%84%B6%E5%90%8E%EF%BC%8C%E5%8F%A6%E4%B8%80%E4%B8%AA%E6%95%B013%E8%A2%AB%E6%B7%BB%E5%8A%A0%E5%88%B0vector%E3%80%82%E4%BD%86%E8%BF%99%E7%A7%8D%E6%8F%92%E5%85%A5%E4%BC%9A%E5%AF%BC%E8%87%B4%E7%BC%93%E5%86%B2%E5%8C%BA%E7%9A%84%E9%87%8D%E6%96%B0%E5%88%86%E9%85%8D%E3%80%82%E5%8D%B3%E4%BD%BF%E5%9C%A8%E8%BF%99%E4%B8%AA%E4%BE%8B%E5%AD%90%EF%BC%8C%3Ccode%3Eref_to_first%3C/code%3E%E4%BB%8D%E4%BC%9A%E7%BB%A7%E7%BB%AD%E6%8C%87%E5%90%91%E6%97%A7%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E4%B8%8D%E6%98%AF%E6%9C%89%E6%95%88%E7%9A%84%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80%E3%80%82%3C/p%3E%3Cp%3E%E6%9C%80%E5%90%8E%EF%BC%8C%E8%BF%99%E4%B8%AA%E6%97%A7%E7%9A%84%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80%EF%BC%8C%E5%8F%AF%E8%83%BD%E6%98%AF%E9%94%99%E8%AF%AF%E7%9A%84%EF%BC%8C%E8%AF%BB%E5%8F%96%E7%9A%84%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80%E7%9A%84%E5%80%BC%E6%89%93%E5%8D%B0%E5%90%8E%EF%BC%8C%E6%98%AF%E4%B8%8D%E5%8F%AF%E9%A2%84%E6%B5%8B%E7%9A%84%E7%BB%93%E6%9E%9C%E3%80%82%3C/p%3E%3Cp%3E%E7%94%B1%E4%BA%8E%E4%BB%8E%E4%B8%80%E4%B8%AAvector%E6%8F%92%E5%85%A5%E6%88%96%E6%B7%BB%E5%8A%A0%E5%85%83%E7%B4%A0%E6%97%B6%EF%BC%8C%E6%89%80%E6%9C%89%E6%8C%87%E5%90%91vector%E7%9A%84%E5%BC%95%E7%94%A8%E9%83%BD%E2%80%9C%E5%A4%B1%E6%95%88%E2%80%9D%EF%BC%8C%E5%AF%BC%E8%87%B4%E8%BF%99%E7%A7%8D%E9%94%99%E8%AF%AF%E7%9A%84%E5%87%BA%E7%8E%B0%E3%80%82%E9%80%9A%E5%B8%B8%EF%BC%8C%E8%BF%99%E7%A7%8D%E9%94%99%E8%AF%AF%E5%B1%9E%E4%BA%8E%E5%B9%BF%E4%B9%89%E7%9A%84%E9%94%99%E8%AF%AF%E7%B1%BB%E5%88%AB%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E4%B8%80%E4%B8%AA%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%8C%E9%80%9A%E8%BF%87%E5%87%A0%E7%A7%8D%E8%B7%AF%E5%BE%84%E3%80%81%E6%88%96%E5%88%AB%E5%90%8D%E8%AE%BF%E9%97%AE%EF%BC%8C%E5%BD%93%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E8%A2%AB%E5%85%B6%E4%B8%AD%E4%B8%80%E4%B8%AA%E5%88%AB%E5%90%8D%E4%BF%AE%E6%94%B9%E6%97%B6%EF%BC%8C%E4%B8%8D%E8%83%BD%E8%A2%AB%E5%8F%A6%E4%B8%80%E4%B8%AA%E5%88%AB%E5%90%8D%E4%BD%BF%E7%94%A8%E3%80%82%3C/p%3E%3Cp%3E%E6%88%91%E4%BB%AC%E5%B0%86%E8%BF%99%E7%B1%BB%E7%BC%96%E7%A8%8B%E9%94%99%E8%AF%AF%E5%91%BD%E5%90%8D%E4%B8%BA%E2%80%9Cuse%20after%20change%20by%20an%20alias%E2%80%9D%E3%80%82%3C/p%3E%3Ch2%20id=%22How-to-Prevent-%E2%80%9CUse-After-Drop%E2%80%9D-Errors%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#How-to-Prevent-%E2%80%9CUse-After-Drop%E2%80%9D-Errors%22%3E%C2%B6%3C/a%3EHow%20to%20Prevent%20%E2%80%9CUse%20After%20Drop%E2%80%9D%20Errors%3C/h2%3E%3Cp%3ERust%E9%98%B2%E6%AD%A2%E4%BD%BF%E7%94%A8%E2%80%9C%E8%84%B1%E8%90%BD%EF%BC%8Cdropped%E2%80%9D%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%8A%80%E6%9C%AF%E6%98%AF%E7%AE%80%E5%8D%95%E7%9A%84%E3%80%82%3C/p%3E%3Cp%3E%E6%8A%8A%E8%AF%A5%E5%AF%B9%E8%B1%A1%E7%9C%8B%E5%81%9A%E6%98%AF%E8%A2%AB%E4%B8%80%E4%B8%AA%E5%8F%98%E9%87%8F%E6%8C%87%E5%90%91%EF%BC%8C%E9%81%B5%E5%BE%AA%E6%A0%88%E5%88%86%E9%85%8D%E7%9A%84%E8%A7%84%E5%88%99%EF%BC%8C%E4%BC%9A%E6%8C%89%E7%85%A7%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E%E7%9A%84%E5%8F%8D%E5%90%91%E9%A1%BA%E5%BA%8F%E8%A2%AB%E8%84%B1%E8%90%BD%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AF%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%E5%8F%8D%E5%90%91%E9%A1%BA%E5%BA%8F%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EX%3C/span%3E(%3Cspan%20class=%22type%22%3Echar%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eimpl%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EDrop%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EX%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Edrop%3C/span%3E(&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E.%3Cspan%20class=%22number%22%3E0%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_a%3C/span%3E%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3EX%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;#x27;a&amp;#x27;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_b%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_c%3C/span%3E%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3EX%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;#x27;c&amp;#x27;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E_b%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3EX%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;#x27;b&amp;#x27;%3C/span%3E);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%AF%A5%E7%A8%8B%E5%BA%8F%E4%BC%9A%E6%89%93%E5%8D%B0%E2%80%9Ccba%E2%80%9D%E3%80%82%E8%BF%99%E4%B8%89%E4%B8%AA%E5%AF%B9%E8%B1%A1%E6%8C%89%E7%85%A7%E9%A1%BA%E5%BA%8F%E2%80%9Cacb%E2%80%9D%E8%A2%AB%E6%9E%84%E9%80%A0%EF%BC%8C%E4%BD%86%E4%B8%89%E4%B8%AA%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%86%E9%85%8D%E9%A1%BA%E5%BA%8F%E6%98%AF%E2%80%9Cabc%E2%80%9D%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%9B%9E%E6%94%B6%E4%BB%A5%E5%8F%8A%E8%84%B1%E8%90%BD%E7%9A%84%E6%8C%89%E7%9B%B8%E5%8F%8D%E7%9A%84%E9%A1%BA%E5%BA%8F%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%BA%E4%BA%86%E9%81%BF%E5%85%8D%E4%BD%BF%E7%94%A8%E8%84%B1%E8%90%BD%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%89%80%E6%9C%89%E5%8F%98%E9%87%8F%EF%BC%8C%E7%A7%9F%E5%80%9F%E5%85%B6%E5%AE%83%E5%8F%98%E9%87%8F%E6%8B%A5%E6%9C%89%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%BF%85%E9%A1%BB%E5%9C%A8%E8%AF%A5%E5%8F%98%E9%87%8F%E7%9A%84%20%3Cstrong%3E%E5%90%8E%E9%9D%A2%3C/strong%3E%20%E5%A3%B0%E6%98%8E%E3%80%82%3C/p%3E%3Cp%3E%E4%BE%8B%E5%A6%82%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3En%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3E_r%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Em%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E13%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E_r%20=%20&amp;amp;m;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E_r%20=%20&amp;amp;n;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%BF%99%E6%AE%B5%E4%BB%A3%E7%A0%81%E4%BC%9A%E4%BA%A7%E7%94%9F%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF%EF%BC%9A%E2%80%9C%3Ccode%3Em%3C/code%3E%20does%20not%20live%20long%20enough%E2%80%9D%E3%80%82%E8%BF%99%E6%98%AF%E5%9B%A0%E4%B8%BA%3Ccode%3E_r%3C/code%3E%E5%90%8C%E6%97%B6%E4%BB%8E%3Ccode%3Em%3C/code%3E%E5%92%8C%3Ccode%3En%3C/code%3E%E8%BF%9B%E8%A1%8Cborrow%EF%BC%8C%E8%99%BD%E7%84%B6%E4%B8%8D%E5%9C%A8%E5%90%8C%E4%B8%80%E6%97%B6%E5%88%BB%E6%8C%87%E5%90%91%E4%B8%A4%E8%80%85%EF%BC%8C%E4%BD%86%E5%AE%83%E5%9C%A8%3Ccode%3Em%3C/code%3E%E4%B9%8B%E5%89%8D%E5%A3%B0%E6%98%8E%E4%BA%86%E3%80%82%E8%A6%81%E6%9B%B4%E6%AD%A3%E8%BF%99%E6%AE%B5%E4%BB%A3%E7%A0%81%EF%BC%8C%E6%94%B9%E4%B8%BA%E5%A6%82%E4%B8%8B%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3En%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Em%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E13%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3E_r%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E_r%20=%20&amp;amp;m;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E_r%20=%20&amp;amp;n;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%BF%99%E6%AE%B5%E4%BB%A3%E7%A0%81%E6%98%AF%E5%90%88%E6%B3%95%E7%9A%84%EF%BC%8C%E5%BD%93%3Ccode%3Em%3C/code%3E%E5%92%8C%3Ccode%3En%3C/code%3E%E6%8B%A5%E6%9C%89%E7%9A%84%E5%AF%B9%E8%B1%A1%E8%A2%ABdropped%E6%97%B6%EF%BC%8C%E4%B8%8D%E4%BC%9A%E5%86%8D%E6%9C%89%E6%8C%87%E5%90%91%E5%AE%83%E4%BB%AC%E7%9A%84%E5%BC%95%E7%94%A8%E3%80%82%3C/p%3E%3Ch2%20id=%22How-to-Prevent-%E2%80%9CUse-After-Change-by-an-Alias%E2%80%9D-Errors%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#How-to-Prevent-%E2%80%9CUse-After-Change-by-an-Alias%E2%80%9D-Errors%22%3E%C2%B6%3C/a%3EHow%20to%20Prevent%20%E2%80%9CUse%20After%20Change%20by%20an%20Alias%E2%80%9D%20Errors%3C/h2%3E%3Cp%3E%E7%94%B1%E4%BA%8E%E5%85%B6%E5%AE%83%E5%8F%98%E9%87%8F%E5%BC%95%E8%B5%B7%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%94%B9%E5%8F%98%EF%BC%8C%E5%AF%BC%E8%87%B4%E5%BD%93%E5%89%8D%E5%8F%98%E9%87%8F%E4%BD%BF%E7%94%A8%E8%AF%A5%E5%AF%B9%E8%B1%A1%E5%87%BA%E7%8E%B0%E9%94%99%E8%AF%AF%E3%80%82%E8%A6%81%E9%81%BF%E5%85%8D%E8%BF%99%E7%A7%8D%E9%94%99%E8%AF%AF%EF%BC%8C%E4%BD%BF%E7%94%A8%E7%9A%84%E8%A7%84%E5%88%99%E6%9C%89%E5%87%A0%E5%88%86%E5%A4%8D%E6%9D%82%E3%80%82%3C/p%3E%3Cp%3E%E9%A6%96%E5%85%88%EF%BC%8C%E8%A6%81%E6%B1%82%E8%80%83%E8%99%91%E4%BB%BB%E4%BD%95%E8%AF%AD%E5%8F%A5%E4%BC%9A%E8%AF%BB%E8%BF%99%E4%B8%AA%E5%AF%B9%E8%B1%A1%EF%BC%8C%E4%B8%8D%E4%BC%9A%E6%9C%89%E5%86%99%E6%93%8D%E4%BD%9C%EF%BC%8C%E5%B0%B1%E5%83%8F%E6%98%AF%E8%AF%A5%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%B8%80%E4%B8%AA%20%3Cstrong%3E%E4%B8%B4%E6%97%B6%E4%B8%8D%E5%8F%AF%E5%8F%98%E7%A7%9F%E5%80%9F(temporary%20immutable%20borrowing)%3C/strong%3E%EF%BC%9B%E4%BB%BB%E4%BD%95%E8%AF%AD%E5%8F%A5%E5%8F%98%E6%9B%B4%E8%BF%99%E4%B8%AA%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%B0%B1%E5%83%8F%E6%98%AF%E8%AF%A5%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%B8%80%E4%B8%AA%20%3Cstrong%3E%E4%B8%B4%E6%97%B6%E5%8F%AF%E5%8F%98%E7%A7%9F%E5%80%9F(temporary%20mutable%20borrowing)%3C/strong%3E%E3%80%82%E8%BF%99%E7%A7%8D%E7%A7%9F%E5%80%9F%E7%9A%84%E5%87%BA%E7%8E%B0%E5%92%8C%E7%BB%93%E6%9D%9F%E5%9C%A8%E8%AF%A5%E8%AF%AD%E5%8F%A5%E7%9A%84%E5%86%85%E9%83%A8%E8%BF%9B%E8%A1%8C%E3%80%82%3C/p%3E%3Cp%3E%E7%84%B6%E5%90%8E%EF%BC%8C%E7%A7%9F%E5%80%9F%E5%BC%80%E5%A7%8B%E4%BA%8E%EF%BC%8C%E8%8E%B7%E5%8F%96%E6%8C%87%E5%90%91%E8%AF%A5%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%BC%95%E7%94%A8%EF%BC%8C%E5%B9%B6%E5%88%86%E9%85%8D%E7%BB%99%E4%B8%80%E4%B8%AA%E5%8F%98%E9%87%8F%EF%BC%9B%E7%BB%93%E6%9D%9F%E4%BA%8E%EF%BC%8C%E8%AF%A5%E5%8F%98%E9%87%8F%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F(scope)%E7%BB%93%E6%9D%9F%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%8B%E9%9D%A2%E6%98%AF%E4%B8%80%E4%B8%AA%E4%BE%8B%E5%AD%90%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ea%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Eb%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E13%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;quot;%3C/span%3E,%20a);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ec%3C/span%3E%20=%20&amp;amp;a;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ed%3C/span%3E%20=%20&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20b;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;%20&amp;quot;%3C/span%3E,%20c,%20d);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Eb%20+=%20%3Cspan%20class=%22number%22%3E1%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20b);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BB%93%E6%9E%9C%E4%BC%9A%E6%89%93%E5%8D%B0%EF%BC%9A%E2%80%9C12%2012%2013%2014%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E5%9C%A8%E7%AC%AC3%E8%A1%8C%E5%92%8C%E6%9C%80%E5%90%8E%E4%B8%80%E8%A1%8C%EF%BC%8C%E4%B8%80%E4%B8%AA%E5%8F%AF%E5%8F%98%E7%A7%9F%E5%80%9F%E5%BC%80%E5%A7%8B%E5%B9%B6%E7%BB%93%E6%9D%9F%E3%80%82%E5%9C%A8%E7%AC%AC5%E8%A1%8C%EF%BC%8C%E4%B8%80%E4%B8%AA%E4%B8%8D%E5%8F%AF%E5%8F%98%E7%A7%9F%E5%80%9F%E5%BC%80%E5%A7%8B%EF%BC%8C%E7%AC%AC6%E8%A1%8C%EF%BC%8C%E4%B8%80%E4%B8%AA%E5%8F%AF%E5%8F%98%E7%A7%9F%E5%80%9F%E5%BC%80%E5%A7%8B%EF%BC%9B%E5%AE%83%E4%BB%AC%E5%9C%A8%E8%AF%AD%E5%8F%A5%E5%9D%97%E6%9C%AB%E5%B0%BE%E7%BB%93%E6%9D%9F%E3%80%82%E5%9C%A8%E7%AC%AC9%E8%A1%8C%EF%BC%8C%E4%B8%80%E4%B8%AA%E5%8F%AF%E5%8F%98%E7%A7%9F%E5%80%9F%E5%BC%80%E5%A7%8B%E5%B9%B6%E7%BB%93%E6%9D%9F%E3%80%82%3C/p%3E%3Cp%3E%E8%BF%99%E7%A7%8D%E8%A7%84%E5%88%99%E8%A6%81%E6%B1%82%EF%BC%8C%E5%90%8C%E4%B8%80%E6%97%B6%E5%88%BB%EF%BC%8C%E5%8F%AF%E5%8F%98%E7%A7%9F%E5%80%9F(%E5%8D%B3%EF%BC%8C&amp;amp;mut%20)%E7%9A%84%E5%87%BA%E7%8E%B0%E4%B8%8D%E8%83%BD%E5%92%8C%E5%85%B6%E5%AE%83%E7%A7%9F%E5%80%9F%E5%B9%B6%E5%AD%98%E3%80%82%3C/p%3E%3Cp%3E%E6%8D%A2%E5%8F%A5%E8%AF%9D%E8%AF%B4%EF%BC%8C%E5%90%8C%E4%B8%80%E6%97%B6%E5%88%BB%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%E6%B2%A1%E6%9C%89%E7%A7%9F%E5%80%9F%3C/li%3E%3Cli%3E%E6%88%96%EF%BC%8C%E4%B8%80%E4%B8%AA%E5%8D%95%E4%B8%80%E7%9A%84%E5%8F%AF%E5%8F%98(mutable)%E7%A7%9F%E5%80%9F%3C/li%3E%3Cli%3E%E6%88%96%EF%BC%8C%E4%B8%80%E4%B8%AA%E5%8D%95%E4%B8%80%E7%9A%84%E4%B8%8D%E5%8F%AF%E5%8F%98(immutable)%E7%A7%9F%E5%80%9F%3C/li%3E%3Cli%3E%E6%88%96%EF%BC%8C%E5%87%A0%E4%B8%AA%E4%B8%8D%E5%8F%AF%E5%8F%98(immutable)%E7%A7%9F%E5%80%9F%3C/li%3E%3C/ul%3E%3Cp%3E%E4%B8%8D%E8%83%BD%E6%9C%89%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%E5%87%A0%E4%B8%AA%E5%8F%AF%E5%8F%98(mutable)%E7%A7%9F%E5%80%9F%3C/li%3E%3Cli%3E%E4%B8%8D%E8%83%BD%E6%9C%89%E4%B8%80%E4%B8%AA%E5%8D%95%E4%B8%80%E7%9A%84%E5%8F%AF%E5%8F%98(mutable)%E7%A7%9F%E5%80%9F%E5%92%8C%E4%B8%80%E4%B8%AA%E6%88%96%E5%A4%9A%E4%B8%AA%E4%B8%8D%E5%8F%AF%E5%8F%98(immutable)%E7%A7%9F%E5%80%9F%3C/li%3E%3C/ul%3E%3Ch2%20id=%22Listing-the-Possible-Cases-of-Multiple-Borrowings%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Listing-the-Possible-Cases-of-Multiple-Borrowings%22%3E%C2%B6%3C/a%3EListing%20the%20Possible%20Cases%20of%20Multiple%20Borrowings%3C/h2%3E%3Cp%3E%E4%B8%8B%E9%9D%A2%E7%BD%97%E5%88%97%E5%85%AD%E7%A7%8D%E5%85%81%E8%AE%B8%E7%9A%84%E6%83%85%E5%86%B5%E3%80%82%3C/p%3E%3Cp%3E%E7%AC%AC%E4%B8%80%E7%A7%8D%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ea%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_b%3C/span%3E%20=%20&amp;amp;a;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_c%3C/span%3E%20=%20&amp;amp;a;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E6%9C%89%E4%B8%A4%E4%B8%AA%E4%B8%8D%E5%8F%AF%E5%8F%98%E7%A7%9F%E5%80%9F%EF%BC%8C%E7%9B%B4%E5%88%B0%E7%BB%93%E6%9D%9F%E4%B8%BA%E6%AD%A2%E8%A2%AB%E6%8C%81%E6%9C%89%E3%80%82%3C/p%3E%3Cp%3E%E7%AC%AC%E4%BA%8C%E7%A7%8D%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ea%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_b%3C/span%3E%20=%20&amp;amp;a;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20a);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%AC%AC%E4%B8%89%E7%A7%8D%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ea%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ea%20=%20%3Cspan%20class=%22number%22%3E13%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_b%3C/span%3E%20=%20&amp;amp;a;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E4%B8%80%E4%B8%AA%E4%B8%8D%E5%8F%AF%E5%8F%98%E7%A7%9F%E5%80%9F%EF%BC%8C%E7%B4%A7%E9%9A%8F%E5%90%8E%E4%B8%80%E4%B8%AA%E4%B8%B4%E6%97%B6%E5%8F%AF%E5%8F%98%E7%A7%9F%E5%80%9F%E3%80%82%3C/p%3E%3Cp%3E%E7%AC%AC%E5%9B%9B%E7%A7%8D%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ea%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ea%20=%20%3Cspan%20class=%22number%22%3E13%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_b%3C/span%3E%20=%20&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20a;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E4%B8%80%E4%B8%AA%E5%8F%AF%E5%8F%98%E7%A7%9F%E5%80%9F%EF%BC%8C%E7%B4%A7%E9%9A%8F%E5%90%8E%E4%B8%80%E4%B8%AA%E4%B8%B4%E6%97%B6%E5%8F%AF%E5%8F%98%E7%A7%9F%E5%80%9F%E3%80%82%3C/p%3E%3Cp%3E%E7%AC%AC%E4%BA%94%E7%A7%8D%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ea%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20a);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_b%3C/span%3E%20=%20&amp;amp;a;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E4%B8%80%E4%B8%AA%E4%B8%8D%E5%8F%AF%E5%8F%98%E7%A7%9F%E5%80%9F%EF%BC%8C%E7%B4%A7%E9%9A%8F%E5%90%8E%E4%B8%80%E4%B8%AA%E4%B8%B4%E6%97%B6%E4%B8%8D%E5%8F%AF%E5%8F%98%E7%A7%9F%E5%80%9F%E3%80%82%3C/p%3E%3Cp%3E%E7%AC%AC%E5%85%AD%E7%A7%8D%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ea%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20a);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_b%3C/span%3E%20=%20&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20a;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E4%B8%80%E4%B8%AA%E5%8F%AF%E5%8F%98%E7%A7%9F%E5%80%9F%EF%BC%8C%E7%B4%A7%E9%9A%8F%E5%90%8E%E4%B8%80%E4%B8%AA%E4%B8%B4%E6%97%B6%E4%B8%8D%E5%8F%AF%E7%A7%9F%E5%80%9F%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%8B%E9%9D%A2%E6%98%AF%E5%85%AD%E7%A7%8D%E4%B8%8D%E5%90%88%E6%B3%95%E6%83%85%E5%86%B5%E3%80%82%3C/p%3E%3Cp%3E%E7%AC%AC%E4%B8%80%E7%A7%8D%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ea%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_b%3C/span%3E%20=%20&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20a;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_c%3C/span%3E%20=%20&amp;amp;a;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BC%96%E8%AF%91%E5%87%BA%E9%94%99%E2%80%9Ccannot%20borrow%20%3Ccode%3Ea%3C/code%3E%20as%20immutable%20because%20it%20is%20also%20borrowed%20as%20mutable%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E7%AC%AC%E4%BA%8C%E7%A7%8D%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ea%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_b%3C/span%3E%20=%20&amp;amp;a;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_c%3C/span%3E%20=%20&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20a;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BC%96%E8%AF%91%E5%87%BA%E9%94%99%E2%80%9Ccannot%20borrow%20%3Ccode%3Ea%3C/code%3E%20as%20mutable%20because%20it%20is%20also%20borrowed%20as%20immutable%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E7%AC%AC%E4%B8%89%E7%A7%8D%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ea%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_b%3C/span%3E%20=%20&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20a;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_c%3C/span%3E%20=%20&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20a;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BC%96%E8%AF%91%E5%87%BA%E9%94%99%E2%80%9Ccannot%20borrow%20%3Ccode%3Ea%3C/code%3E%20as%20mutable%20more%20than%20once%20at%20a%20time%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E7%AC%AC%E5%9B%9B%E7%A7%8D%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ea%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_b%3C/span%3E%20=%20&amp;amp;a;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ea%20=%20%3Cspan%20class=%22number%22%3E13%3C/span%3E;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BC%96%E8%AF%91%E5%87%BA%E9%94%99%E2%80%9Ccannot%20assign%20to%20%3Ccode%3Ea%3C/code%3E%20because%20it%20is%20borrowed%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E7%AC%AC%E4%BA%94%E7%A7%8D%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ea%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_b%3C/span%3E%20=%20&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20a;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ea%20=%20%3Cspan%20class=%22number%22%3E13%3C/span%3E;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BC%96%E8%AF%91%E5%87%BA%E9%94%99%E2%80%9Ccannot%20assign%20to%20%3Ccode%3Ea%3C/code%3E%20because%20it%20is%20borrowed%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E7%AC%AC%E5%85%AD%E7%A7%8D%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ea%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_b%3C/span%3E%20=%20&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20a;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20a);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BC%96%E8%AF%91%E5%87%BA%E9%94%99%E2%80%9Ccannot%20borrow%20%3Ccode%3Ea%3C/code%3E%20as%20immutable%20because%20it%20is%20also%20borrowed%20as%20mutable%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E6%A2%B3%E7%90%86%E4%B8%80%E4%B8%8B%E3%80%82%E5%AF%B9%E4%BA%8E%E5%BD%93%E5%89%8D%E5%B0%9A%E6%9C%AA%E8%A2%ABborrowed%E7%9A%84%E5%AF%B9%E8%B1%A1%E6%9D%A5%E8%AF%B4%EF%BC%8C%E5%85%81%E8%AE%B8%E7%9A%84%E6%93%8D%E4%BD%9C%E6%98%AF%EF%BC%9A%3C/p%3E%3Col%3E%3Cli%3E%E4%BB%85%E5%8F%AF%E8%A2%AB%E4%B8%8D%E5%8F%AF%E5%8F%98%E7%A7%9F%E5%80%9F(immutablely%20borrowed)%E6%95%B0%E6%AC%A1%EF%BC%8C%E7%84%B6%E5%90%8E%E5%8F%AF%E4%BB%A5%E7%94%B1%E6%89%80%E6%9C%89%E8%80%85(owner)%E5%92%8C%E4%BB%BB%E4%BD%95%E7%A7%9F%E5%80%9F%E6%96%B9(borrower)%E8%AF%BB%E5%8F%96%E3%80%82%3C/li%3E%3Cli%3E%E4%BB%85%E5%8F%AF%E8%A2%AB%E5%8F%AF%E5%8F%98%E7%A7%9F%E5%80%9F(mutably%20borrowed)%E4%B8%80%E6%AC%A1%EF%BC%8C%E7%84%B6%E5%90%8E%E6%9C%89%E4%B8%94%E4%BB%85%E8%83%BD%E7%94%B1%E8%BF%99%E4%B8%AA%E7%A7%9F%E5%80%9F%E6%96%B9(borrower)%E8%AF%BB%E5%8F%96%E5%92%8C%E4%BF%AE%E6%94%B9%E3%80%82%3C/li%3E%3C/ol%3E%3Ch2%20id=%22Using-a-Bock-to-Restrict-Borrowing-Scope%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Using-a-Bock-to-Restrict-Borrowing-Scope%22%3E%C2%B6%3C/a%3EUsing%20a%20Bock%20to%20Restrict%20Borrowing%20Scope%3C/h2%3E%3Cp%3E%E5%BD%93%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%A7%9F%E5%80%9F%E7%BB%93%E6%9D%9F%E5%90%8E%EF%BC%8C%E5%AF%B9%E8%B1%A1%E5%AF%B9%E5%85%B6%E5%AE%83%E7%A7%9F%E5%80%9F%E5%8F%88%E5%8F%98%E5%BE%97%E5%8F%AF%E7%94%A8%E4%BA%86%E3%80%82%E4%BB%BB%E4%BD%95%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%A7%9F%E5%80%9F%E9%83%BD%E5%8F%AF%E9%99%90%E5%88%B6%E5%9C%A8%E8%AF%AD%E5%8F%A5%E5%9D%97%E5%86%85%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ea%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Eb%3C/span%3E%20=%20&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20a;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E*b%20+=%20%3Cspan%20class=%22number%22%3E1%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ec%3C/span%3E%20=%20&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20a;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E*c%20+=%20%3Cspan%20class=%22number%22%3E2%3C/span%3E;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%BF%99%E6%98%AF%E5%85%81%E8%AE%B8%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%E7%A7%9F%E5%80%9F%E5%8F%91%E7%94%9F%E5%9C%A8%E7%AC%AC%E4%B8%89%E8%A1%8C%EF%BC%8C%E8%AF%AD%E5%8F%A5%E5%9D%97%E7%BB%93%E6%9D%9F%E5%90%8E%EF%BC%8C%E7%A7%9F%E5%80%9F%E4%B9%9F%E7%BB%93%E6%9D%9F%E4%BA%86%EF%BC%8C%E5%9B%A0%E6%AD%A4%E7%AC%AC7%E8%A1%8C%E7%9A%84%3Ccode%3Ea%3C/code%3E%E5%8F%AF%E4%BB%A5%E7%94%A8%E4%BA%8E%E5%85%B6%E5%AE%83%E7%A7%9F%E5%80%9F%E3%80%82%3C/p%3E%3Cp%3E%E7%B1%BB%E4%BC%BC%E5%9C%B0%EF%BC%8C%E5%AF%B9%E4%BA%8E%E5%87%BD%E6%95%B0%E4%B9%9F%E4%B8%80%E6%A0%B7%EF%BC%8C%E5%9C%A8%E5%87%BD%E6%95%B0%E7%BB%93%E6%9D%9F%E5%90%8E%EF%BC%8C%E5%AF%B9%E8%B1%A1%E5%86%8D%E6%AC%A1%E5%8F%98%E5%BE%97%E5%8F%AF%E7%94%A8%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ea%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E*b:%20&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E*b%20+=%20%3Cspan%20class=%22number%22%3E1%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22title%20function_%20invoke__%22%3Ef%3C/span%3E(&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20a);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ec%3C/span%3E%20=%20&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20a;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E*c%20+=%20%3Cspan%20class=%22number%22%3E2%3C/span%3E;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%BF%99%E7%A7%8D%E8%A7%84%E5%88%99%EF%BC%8C%E9%80%82%E7%94%A8%E4%BA%8ERust%E7%A1%AE%E4%BF%9D%E5%8F%AF%E4%BB%A5%E8%87%AA%E5%8A%A8%E5%9C%B0%E5%86%B3%E5%AE%9A%E5%86%85%E5%AD%98%E7%9A%84%E5%9B%9E%E6%94%B6%EF%BC%8C%E9%81%BF%E5%85%8D%E4%B8%8D%E5%90%88%E6%B3%95%E7%9A%84%E5%BC%95%E7%94%A8%EF%BC%9B%E8%BF%99%E7%A7%8D%E8%A7%84%E5%88%99%E5%85%81%E8%AE%B8Rust%E5%AE%9E%E7%8E%B0%E6%97%A0%E6%95%B0%E6%8D%AE%E7%AB%9E%E4%BA%89(data-race-free)%E7%9A%84%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E3%80%82%3C/p%3E%3Ch2%20id=%22The-Need-of-Lifetime-Specifiers-for-Returned-References%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#The-Need-of-Lifetime-Specifiers-for-Returned-References%22%3E%C2%B6%3C/a%3EThe%20Need%20of%20Lifetime%20Specifiers%20for%20Returned%20References%3C/h2%3E%3Cp%3E%E5%85%88%E7%9C%8B%E8%BF%99%E6%AE%B5%E4%BB%A3%E7%A0%81%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev1%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22number%22%3E11u8%3C/span%3E,%20%3Cspan%20class=%22number%22%3E22%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Eresult%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev2%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22number%22%3E33u8%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Eresult%20=%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_x1%3C/span%3E:%20&amp;amp;%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E&amp;gt;%20=%20&amp;amp;v1;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_x2%3C/span%3E:%20&amp;amp;%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E&amp;gt;%20=%20&amp;amp;v2;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E_x1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;:?&amp;#125;&amp;quot;%3C/span%3E,%20*result);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BB%93%E6%9E%9C%E5%B0%86%E4%BC%9A%E8%BE%93%E5%87%BA%EF%BC%9A%E2%80%9C%3Ccode%3E[11,%2022]%3C/code%3E%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E5%8F%98%E9%87%8F%3Ccode%3Ev1%3C/code%3E%E5%92%8C%3Ccode%3Ev2%3C/code%3E%E5%90%84%E8%87%AA%E6%8B%A5%E6%9C%89vector%E3%80%82%E6%8E%A5%E7%9D%80%E8%A2%AB%E4%B8%A4%E4%B8%AA%E5%BC%95%E7%94%A8borrowed%E4%BA%86%EF%BC%8C%E5%88%86%E5%88%AB%E8%A2%AB%3Ccode%3E_x1%3C/code%3E%E5%92%8C%3Ccode%3E_x2%3C/code%3E%E6%8B%A5%E6%9C%89%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8C%E5%9C%A8%E7%AC%AC7%E8%A1%8C%E5%90%8E%EF%BC%8C%3Ccode%3E_x1%3C/code%3E%E7%A7%9F%E5%80%9F%E4%BA%86%E5%8F%98%E9%87%8F%3Ccode%3Ev1%3C/code%3E%E6%8B%A5%E6%9C%89%E7%9A%84vector%EF%BC%8C%3Ccode%3E_x2%3C/code%3E%E7%A7%9F%E5%80%9F%E4%BA%86%E5%8F%98%E9%87%8F%3Ccode%3Ev2%3C/code%3E%E6%8B%A5%E6%9C%89%E7%9A%84vector%E3%80%82%E8%BF%99%E6%98%AF%E8%A2%AB%E5%85%81%E8%AE%B8%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%3Ccode%3E_x1%3C/code%3E%E5%9C%A8%3Ccode%3Ev1%3C/code%3E%E4%B9%8B%E5%90%8E%E5%A3%B0%E6%98%8E%EF%BC%8C%3Ccode%3E_x2%3C/code%3E%E5%9C%A8%3Ccode%3Ev2%3C/code%3E%E4%B9%8B%E5%90%8E%E5%A3%B0%E6%98%8E%EF%BC%8C%E8%BF%99%E4%BA%9B%E5%BC%95%E7%94%A8%E6%AF%94%E5%AE%83%E4%BB%AC%E7%A7%9F%E5%80%9F%E5%AF%B9%E8%B1%A1%E5%AD%98%E6%B4%BB%E6%97%B6%E9%97%B4%E7%9F%AD%E3%80%82%3C/p%3E%3Cp%3E%E5%9C%A8%E7%AC%AC%E5%85%AB%E8%A1%8C%EF%BC%8C%E6%9C%89%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E8%A1%A8%E8%BE%BE%E5%BC%8F%3Ccode%3E_x1%3C/code%3E%E3%80%82%E5%9B%A0%E4%B8%BA%E5%AE%83%E6%98%AF%E8%AF%AD%E5%8F%A5%E5%9D%97%E7%9A%84%E6%9C%80%E5%90%8E%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%8C%E8%AF%A5%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E5%80%BC%E6%88%90%E4%B8%BA%E8%AF%AD%E5%8F%A5%E7%9A%84%E5%80%BC%EF%BC%8C%E5%9B%A0%E6%AD%A4%E8%AF%A5%E5%80%BC%E8%A2%AB%E7%94%A8%E6%9D%A5%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8F%98%E9%87%8F%3Ccode%3Eresult%3C/code%3E%E3%80%82%E8%AF%A5%E5%80%BC%E6%98%AF%E4%B8%80%E4%B8%AA%E6%8C%87%E5%90%91%3Ccode%3Ev1%3C/code%3E%E7%9A%84%E5%BC%95%E7%94%A8%EF%BC%8C%3Ccode%3Eresult%3C/code%3E%E5%8F%98%E9%87%8F%E7%A7%9F%E5%80%9F%E4%BA%86vector%E3%80%82%E8%BF%99%E6%98%AF%E8%A2%AB%E5%85%81%E8%AE%B8%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%3Ccode%3Eresult%3C/code%3E%E7%9A%84%E5%A3%B0%E6%98%8E%E5%9C%A8%3Ccode%3Ev1%3C/code%3E%E4%B9%8B%E5%90%8E%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%8F%AF%E4%BB%A5%E7%A7%9F%E5%80%9F%3Ccode%3Ev1%3C/code%3E%E6%8B%A5%E6%9C%89%E7%9A%84%E5%AF%B9%E8%B1%A1%E3%80%82%3C/p%3E%3Cp%3E%E7%8E%B0%E5%9C%A8%EF%BC%8C%E5%B0%8F%E5%B0%8F%E7%9A%84%E6%94%B9%E5%8A%A8%EF%BC%9A%E5%9C%A8%E7%AC%AC%E5%85%AB%E8%A1%8C%E6%9B%BF%E6%8D%A2&amp;quot;1&amp;quot;%E5%92%8C&amp;quot;2&amp;quot;%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev1%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22number%22%3E11u8%3C/span%3E,%20%3Cspan%20class=%22number%22%3E22%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Eresult%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev2%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22number%22%3E33u8%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20result%20=%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_x1%3C/span%3E:%20&amp;amp;%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E&amp;gt;%20=%20&amp;amp;v1;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_x2%3C/span%3E:%20&amp;amp;%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E&amp;gt;%20=%20&amp;amp;v2;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20_x2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;:?&amp;#125;&amp;quot;%3C/span%3E,%20*result);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%BF%99%E4%BC%9A%E4%BA%A7%E7%94%9F%E7%BC%96%E8%AF%91%E9%94%99%E8%AF%AF%EF%BC%9A%E2%80%9C%3Ccode%3Ev2%3C/code%3E%20does%20not%20live%20long%20enough%E2%80%9D%E3%80%82%E5%9B%A0%E4%B8%BA%3Ccode%3Eresult%3C/code%3E%E7%9A%84%E5%80%BC%E6%9D%A5%E8%87%AA%E4%BA%8E%3Ccode%3E_x2%3C/code%3E%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%8C%E7%94%B1%E4%BA%8E%3Ccode%3E_x2%3C/code%3E%E7%A7%9F%E5%80%9F%E4%BA%86%3Ccode%3Ev2%3C/code%3E%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%89%80%E4%BB%A5%3Ccode%3Eresult%3C/code%3E%E7%A7%9F%E5%80%9F%E4%BA%86vector%E3%80%82%E5%9B%A0%E4%B8%BA%3Ccode%3Eresult%3C/code%3E%E5%9C%A8%3Ccode%3Ev2%3C/code%3E%E4%B9%8B%E5%89%8D%E5%A3%B0%E6%98%8E%EF%BC%8C%E5%9B%A0%E6%AD%A4%E4%B8%8D%E8%83%BD%E7%A7%9F%E5%80%9F%E5%AE%83%E7%9A%84%E5%AF%B9%E8%B1%A1%E3%80%82%3C/p%3E%3Cp%3ERust%E7%BC%96%E8%AF%91%E5%99%A8%E8%87%B4%E5%8A%9B%E4%BA%8E%E8%BF%99%E7%A7%8D%E6%8E%A8%E7%90%86%E7%9A%84%E9%83%A8%E5%88%86%E7%A7%B0%E4%BD%9C%E2%80%9C%E7%A7%9F%E5%80%9F%E6%A3%80%E6%9F%A5%EF%BC%8C%3Cstrong%3Eborrow%20checker%3C/strong%3E%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E7%8E%B0%E5%9C%A8%EF%BC%8C%E8%AE%A9%E6%88%91%E4%BB%AC%E5%B0%9D%E8%AF%95%E8%BD%AC%E6%8D%A2%E5%89%8D%E9%9D%A2%E4%B8%A4%E4%B8%AA%E4%BB%A3%E7%A0%81%EF%BC%8C%E5%B0%86%E5%86%85%E9%83%A8%E8%AF%AD%E5%8F%A5%E8%BD%AC%E6%8D%A2%E4%B8%BA%E4%B8%80%E4%B8%AA%E5%87%BD%E6%95%B0%E3%80%82%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8F%98%E4%B8%BA%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev1%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22number%22%3E118%3C/span%3E,%20%3Cspan%20class=%22number%22%3E22%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Eresult%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev2%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22number%22%3E33u8%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Efunc%3C/span%3E(_x1:%20&amp;amp;%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E&amp;gt;,%20_x2:%20&amp;amp;%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E&amp;gt;)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20&amp;amp;%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E&amp;gt;%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20_x1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20result%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Efunc%3C/span%3E(&amp;amp;v1,%20&amp;amp;v2);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;:?&amp;#125;&amp;quot;%3C/span%3E,%20*result);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%8F%98%E4%B8%BA%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev1%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22number%22%3E11u8%3C/span%3E,%20%3Cspan%20class=%22number%22%3E22%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Eresult%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev2%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22number%22%3E33u8%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Efunc%3C/span%3E(_x1:%20&amp;amp;%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E&amp;gt;,%20_x2:%20&amp;amp;%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E&amp;gt;)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20&amp;amp;%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E&amp;gt;%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20_x2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20result%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Efunc%3C/span%3E(&amp;amp;v1,%20&amp;amp;v2);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;:?&amp;#125;&amp;quot;%3C/span%3E,%20*result);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E4%B8%A4%E8%80%85%E5%94%AF%E4%B8%80%E4%B8%8D%E5%90%8C%E7%9A%84%E6%98%AF%3Ccode%3Efunc%3C/code%3E%E5%87%BD%E6%95%B0%E4%BD%93%E3%80%82%3C/p%3E%3Cp%3E%E6%A0%B9%E6%8D%AE%E4%B9%8B%E5%89%8D%E7%9A%84%E8%A7%84%E5%88%99%EF%BC%8C%E7%AC%AC%E4%B8%80%E4%B8%AA%E7%A8%8B%E5%BA%8F%E7%9C%8B%E8%B5%B7%E6%9D%A5%E6%98%AF%E5%90%88%E6%B3%95%E7%9A%84%EF%BC%8C%E7%AC%AC%E4%BA%8C%E4%B8%AA%E4%B8%8D%E5%90%88%E6%B3%95%E3%80%82%E4%B8%A4%E4%B8%AA%3Ccode%3Efunc%3C/code%3E%E5%87%BD%E6%95%B0%E6%9C%AC%E8%BA%AB%E6%98%AF%E5%90%88%E6%B3%95%E7%9A%84%E3%80%82%E4%BD%86borrow%20checker%E4%BC%9A%E6%9F%A5%E6%89%BE%E5%AE%83%E4%BB%AC%E4%B8%8D%E5%85%BC%E5%AE%B9%E7%9A%84%E5%85%B7%E4%BD%93%E7%94%A8%E6%B3%95%E3%80%82%3C/p%3E%3Cp%3E%E6%B3%9B%E5%9E%8B%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%82%E6%95%B0%E8%BE%B9%E7%95%8C%E4%BD%BF%E7%94%A8traits%EF%BC%8C%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E6%98%AF%E5%90%A6%E6%9C%89%E6%95%88%EF%BC%8C%E4%BE%9D%E6%8D%AE%E8%AF%A5%E5%87%BD%E6%95%B0%E4%BD%93%E7%9A%84%E5%86%85%E5%AE%B9%EF%BC%8C%E8%BF%99%E4%B8%8D%E6%98%AF%E5%A5%BD%E4%BA%8B%E3%80%82%E4%B8%BB%E8%A6%81%E6%98%AF%E5%9B%A0%E4%B8%BA%E4%B8%8D%E8%83%BD%E4%BB%8E%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF%E7%90%86%E8%A7%A3%E5%87%BA%E9%94%99%E7%9A%84%E5%8E%9F%E5%9B%A0%EF%BC%8C%E9%99%A4%E9%9D%9E%E4%BD%A0%E6%B8%85%E6%A5%9A%E5%87%BD%E6%95%B0%E4%BD%93%E7%9A%84%E5%86%85%E9%83%A8%E4%BB%A3%E7%A0%81%E3%80%82%E5%8F%A6%E4%B8%80%E4%B8%AA%E5%8E%9F%E5%9B%A0%E6%98%AF%EF%BC%8C%E5%87%BD%E6%95%B0%E8%A2%AB%E8%B0%83%E7%94%A8%E6%97%B6%EF%BC%8C%E5%A6%82%E6%9E%9C%E8%AF%A5%E5%87%BD%E6%95%B0%E4%BD%93%E5%86%85%E4%BB%BB%E6%84%8F%E8%B0%83%E7%94%A8%E4%BA%86%E5%85%B6%E5%AE%83%E5%87%BD%E6%95%B0%EF%BC%8C%E7%A1%AE%E4%BF%9D%3Ccode%3Emain%3C/code%3E%E5%87%BD%E6%95%B0%E6%98%AF%E5%90%88%E6%B3%95%E7%9A%84%EF%BC%8Cborrow%20checker%E9%9C%80%E8%A6%81%E5%88%86%E6%9E%90%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%89%80%E6%9C%89%E5%87%BD%E6%95%B0%E3%80%82%E8%BF%99%E7%A7%8D%E6%95%B4%E4%B8%AA%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%88%86%E6%9E%90%E5%B8%A6%E6%9D%A5%E4%BA%86%E8%BF%87%E5%BA%A6%E7%9A%84%E5%A4%8D%E6%9D%82%E3%80%82%3C/p%3E%3Cp%3E%E5%9B%A0%E6%AD%A4%EF%BC%8C%E7%B1%BB%E4%BC%BC%E4%BA%8E%E6%B3%9B%E5%9E%8B%E5%87%BD%E6%95%B0%EF%BC%8C%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E5%BC%95%E7%94%A8%E7%9A%84%E5%87%BD%E6%95%B0%EF%BC%8C%E5%BF%85%E9%A1%BB%E5%9C%A8%E5%87%BD%E6%95%B0%E7%AD%BE%E5%90%8D%E9%98%88%E5%B0%86borrow-checking%E9%9A%94%E7%A6%BB%EF%BC%81%E5%87%BD%E6%95%B0%E7%9A%84borrow-check%EF%BC%8C%E4%BB%85%E8%80%83%E8%99%91%E7%AD%BE%E5%90%8D%EF%BC%8C%E5%87%BD%E6%95%B0%E4%BD%93%EF%BC%8C%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E7%9A%84%E7%AD%BE%E5%90%8D%EF%BC%8C%E8%80%8C%E4%B8%8D%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E5%87%BD%E6%95%B0%E4%BD%93%E8%B0%83%E7%94%A8%E5%85%B6%E5%AE%83%E5%87%BD%E6%95%B0%E3%80%82%3C/p%3E%3Cp%3E%E5%9B%A0%E6%AD%A4%EF%BC%8C%E5%89%8D%E9%9D%A2%E7%9A%84%E4%B8%A4%E4%B8%AA%E7%A8%8B%E5%BA%8F%E9%83%BD%E4%BC%9A%E5%87%BA%E7%8E%B0%E7%BC%96%E8%AF%91%E9%94%99%E8%AF%AF%EF%BC%9A%E2%80%9Cmissing%20lifetime%20specifier%E2%80%9D%E3%80%82%E2%80%9C%E5%A3%B0%E6%98%8E%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8%EF%BC%8C%3Cstrong%3Elifetime%20specifier%3C/strong%3E%E2%80%9D%E6%98%AF%E4%B8%80%E4%B8%AA%E5%87%BD%E6%95%B0%E7%AD%BE%E5%90%8D%E7%9A%84%E4%B8%80%E4%B8%AA%E8%A3%85%E9%A5%B0%EF%BC%8C%E5%AE%83%E5%85%81%E8%AE%B8borrow%20checker%E5%AF%B9%E5%87%BD%E6%95%B0%E4%BD%93%E5%92%8C%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E5%88%86%E7%A6%BB%E6%A3%80%E6%9F%A5%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%8D%E7%AE%A1%E6%80%8E%E6%A0%B7%EF%BC%8C%E5%87%BD%E6%95%B0%E6%88%96%E8%AF%AD%E5%8F%A5%E4%BD%93%E7%9A%84%E7%A7%9F%E5%80%9F%E8%A1%8C%E4%B8%BA%E5%BA%94%E8%AF%A5%E6%98%AF%E2%80%9C%E5%88%B0%E6%AD%A4%E4%B8%BA%E6%AD%A2%E2%80%9D%EF%BC%8C%E4%B8%8D%E5%BA%94%E8%AF%A5%E5%86%8D%E5%B0%86%E5%AE%83%E8%BF%9B%E4%B8%80%E6%AD%A5%E4%BC%A0%E9%80%92%E7%BB%99%E5%85%B6%E5%AE%83%E5%87%BD%E6%95%B0%E6%88%96%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%8C%E4%BB%A5%E9%81%BF%E5%85%8D%E5%B8%A6%E6%9D%A5%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84%E5%89%AF%E4%BD%9C%E7%94%A8%EF%BC%8C%E6%9C%AA%E7%9F%A5%E7%9A%84%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF%E3%80%82%3C/p%3E%3Ch2%20id=%22Usage-and-Meaning-of-Lifetime-Specifiers%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Usage-and-Meaning-of-Lifetime-Specifiers%22%3E%C2%B6%3C/a%3EUsage%20and%20Meaning%20of%20Lifetime%20Specifiers%3C/h2%3E%3Cp%3E%E8%AE%A8%E8%AE%BA%E5%88%B0%E5%87%BD%E6%95%B0%E7%9A%84%E8%B0%83%E7%94%A8%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%8C%E4%B8%8B%E9%9D%A2%E6%98%AF%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E4%BE%8B%E5%AD%90%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Efunc%3C/span%3E(v1:%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu32%3C/span%3E&amp;gt;,%20v2:%20&amp;amp;%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Ebool%3C/span%3E&amp;gt;)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Es%3C/span%3E%20=%20%3Cspan%20class=%22string%22%3E&amp;quot;Hello&amp;quot;%3C/span%3E.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eto_string%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%9C%A8%E4%BB%BB%E4%BD%95Rust%E5%87%BD%E6%95%B0%E5%86%85%EF%BC%8C%E4%BB%85%E5%8F%AF%E4%BB%A5%E5%8F%82%E8%80%83%E7%9A%84%E6%9C%89%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E6%8B%A5%E6%9C%89%E7%9A%84%E5%AF%B9%E8%B1%A1(%3Ccode%3Ev1%3C/code%3E%E6%8B%A5%E6%9C%89%E7%9A%84vector)%EF%BC%9B%3C/li%3E%3Cli%3E%E6%9C%AC%E5%9C%B0%E5%8F%98%E9%87%8F%E6%8B%A5%E6%9C%89%E7%9A%84%E5%AF%B9%E8%B1%A1(%3Ccode%3Es%3C/code%3E%E6%8B%A5%E6%9C%89%E7%9A%84%E5%8A%A8%E6%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2)%EF%BC%9B%3C/li%3E%3Cli%3E%E4%B8%B4%E6%97%B6%E5%AF%B9%E8%B1%A1(%E5%8A%A8%E6%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%A1%A8%E8%BE%BE%E5%BC%8F%3Ccode%3E&amp;quot;Hello&amp;quot;.to_string()%3C/code%3E)%EF%BC%9B%3C/li%3E%3Cli%3E%E9%9D%99%E6%80%81%E5%AF%B9%E8%B1%A1(%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%AD%97%E9%9D%A2%E9%87%8F%3Ccode%3E&amp;quot;Hello&amp;quot;%3C/code%3E)%EF%BC%9B%3C/li%3E%3Cli%3E%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E7%A7%9F%E5%80%9F%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E7%94%B1%E9%A2%84%E5%85%88%E5%AD%98%E5%9C%A8%E7%9A%84%E6%9F%90%E4%BA%9B%E5%8F%98%E9%87%8F%E6%8B%A5%E6%9C%89%EF%BC%8C%E5%8F%91%E7%94%9F%E5%9C%A8%E5%BD%93%E5%89%8D%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E5%A4%84(%3Ccode%3Ev2%3C/code%3E%E7%A7%9F%E5%80%9F%E8%BF%87%E6%9D%A5%E7%9A%84%E5%AF%B9%E8%B1%A1)%E3%80%82%3C/li%3E%3C/ul%3E%3Cp%3E%E5%BD%93%E4%B8%80%E4%B8%AA%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E5%BC%95%E7%94%A8%EF%BC%8C%E8%BF%99%E4%B8%AA%E5%BC%95%E7%94%A8%E7%9A%84%E5%AF%B9%E8%B1%A1%E4%B8%8D%E8%83%BD%E6%8E%A8%E6%96%AD%E6%98%AF%E7%94%B1%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E6%8B%A5%E6%9C%89%EF%BC%8C%E8%BF%98%E6%98%AF%E7%94%B1%E6%9C%AC%E5%9C%B0%E5%8F%98%E9%87%8F%E6%8B%A5%E6%9C%89%EF%BC%8C%E8%BF%98%E6%98%AF%E7%94%B1%E4%B8%B4%E6%97%B6%E5%AF%B9%E8%B1%A1%E6%8B%A5%E6%9C%89%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%BD%93%E5%87%BD%E6%95%B0return%E6%97%B6%EF%BC%8C%E6%9C%AC%E5%9C%B0%E5%8F%98%E9%87%8F%EF%BC%8C%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%EF%BC%8C%E4%B8%B4%E6%97%B6%E5%8F%98%E9%87%8F%E9%83%BD%E4%BC%9A%E8%A2%AB%E9%94%80%E6%AF%81%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8C%E8%BF%99%E4%B8%AA%E5%BC%95%E7%94%A8%E5%B0%86%E8%A2%AB%E6%82%AC%E6%8C%82%E3%80%82%3C/p%3E%3Cp%3E%E7%9B%B8%E5%8F%8D%EF%BC%8C%E8%BF%99%E4%B8%AA%E5%BC%95%E7%94%A8%E5%8D%B4%E5%8F%AF%E4%BB%A5%E6%8E%A8%E6%96%AD%E5%BE%97%E7%9F%A5%E6%98%AF%E9%9D%99%E6%80%81%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%88%96%E6%98%AF%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E7%A7%9F%E5%80%9F%E7%9A%84%E5%AF%B9%E8%B1%A1%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%8B%E9%9D%A2%E6%98%AF%E8%BF%99%E4%B8%A4%E7%A7%8D%E6%83%85%E5%86%B5%E7%9A%84%E4%B8%AD%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%83%85%E5%86%B5%E7%9A%84%E7%A4%BA%E4%BE%8B(%E5%B0%BD%E7%AE%A1%E4%BB%A3%E7%A0%81%E5%9C%A8Rust%E4%B8%8D%E8%A2%AB%E5%85%81%E8%AE%B8)%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Efunc%3C/span%3E()%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20&amp;amp;%3Cspan%20class=%22type%22%3Estr%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22string%22%3E&amp;quot;Hello&amp;quot;%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Efunc%3C/span%3E(v:%20&amp;amp;%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E&amp;gt;)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20&amp;amp;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;amp;v[%3Cspan%20class=%22number%22%3E3%3C/span%3E]%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3Eborrow%20checker%E4%BB%85%E5%AF%B9%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E5%BC%95%E7%94%A8%E6%84%9F%E5%85%B4%E8%B6%A3%EF%BC%8C%E8%AF%A5%E5%BC%95%E7%94%A8%E6%9C%89%E4%B8%A4%E7%A7%8D%EF%BC%9A%E6%8C%87%E5%90%91%E9%9D%99%E6%80%81%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%88%96%E6%8E%A5%E6%94%B6%E7%9A%84%E5%8F%82%E6%95%B0%E7%9A%84%E7%A7%9F%E5%80%9F%E5%AF%B9%E8%B1%A1%E3%80%82borrow%20checker%E9%9C%80%E8%A6%81%E7%9F%A5%E9%81%93%E5%93%AA%E4%BA%9B%E5%BC%95%E7%94%A8%E6%98%AF%E6%8C%87%E5%90%91%E9%9D%99%E6%80%81%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%93%AA%E4%BA%9B%E6%98%AF%E7%A7%9F%E5%80%9F%E7%9A%84%E5%8F%82%E6%95%B0%E5%AF%B9%E8%B1%A1%EF%BC%9B%E5%A6%82%E6%9E%9C%E6%9C%89%E5%87%A0%E4%B8%AA%E5%8F%82%E6%95%B0%E7%A7%9F%E5%80%9F%E5%AF%B9%E8%B1%A1%EF%BC%8C%E9%9C%80%E8%A6%81%E7%9F%A5%E9%81%93%E5%AE%83%E4%BB%AC%E4%B8%AD%E5%93%AA%E4%BA%9B%E7%A7%9F%E5%80%9F%E4%BA%86%E9%9D%9E%E9%9D%99%E6%80%81%E8%BF%94%E5%9B%9E%E7%9A%84%E5%BC%95%E7%94%A8%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%8D%E5%B8%A6lifetime%20specifer%E7%9A%84%E5%87%BD%E6%95%B0%E7%AD%BE%E5%90%8D%E6%98%AF%E4%B8%8D%E5%90%88%E6%B3%95%E7%9A%84%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Etrait%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ETr%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E(flag:%20%3Cspan%20class=%22type%22%3Ebool%3C/span%3E,%20b:%20&amp;amp;%3Cspan%20class=%22type%22%3Ei32%3C/span%3E,%20c:%20(%3Cspan%20class=%22type%22%3Echar%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22type%22%3Ei32%3C/span%3E))%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20(&amp;amp;%3Cspan%20class=%22type%22%3Ei32%3C/span%3E,%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22type%22%3Ei32%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%87%BD%E6%95%B0%E7%AD%BE%E5%90%8D%E5%8F%82%E6%95%B0%E4%B8%AD%E6%9C%89%E4%B8%A4%E4%B8%AA%E5%BC%95%E7%94%A8%EF%BC%8C%E8%BF%94%E5%9B%9E%E5%80%BC%E7%B1%BB%E5%9E%8B%E4%B9%9F%E5%8C%85%E5%90%AB%E6%9C%89%E4%B8%A4%E4%B8%AA%E5%BC%95%E7%94%A8%E3%80%82%E5%90%8E%E4%B8%A4%E4%B8%AA%E5%BC%95%E7%94%A8%E5%8F%AF%E8%83%BD%E6%8C%87%E5%90%91%E9%9D%99%E6%80%81%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%88%96%E8%80%85%E5%8F%82%E6%95%B0%3Ccode%3Eb%3C/code%3E%E7%9A%84%E7%A7%9F%E5%80%9F%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%88%96%E8%80%85%E5%8F%82%E6%95%B0%3Ccode%3Ec%3C/code%3E%E7%9A%84%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%9A%84%E7%A7%9F%E5%80%9F%E5%AF%B9%E8%B1%A1%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%8B%E9%9D%A2%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%8C%87%E5%AE%9A%E4%BA%86%E4%B8%80%E7%A7%8D%E5%8F%AF%E8%83%BD%E7%9A%84%E6%83%85%E5%86%B5%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Etrait%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ETr%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E&amp;gt;(flag:%20%3Cspan%20class=%22type%22%3Ebool%3C/span%3E,%20b:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E,%20c:%20(%3Cspan%20class=%22type%22%3Echar%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E))%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20(&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E,%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;static%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%92%8C%E6%B3%9B%E5%9E%8B%E5%87%BD%E6%95%B0%E7%94%A8%E6%B3%95%E4%B8%80%E6%A0%B7%EF%BC%8C%E5%9C%A8%E5%87%BD%E6%95%B0%E5%90%8D%E5%90%8E%E9%9D%A2%EF%BC%8C%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0%E5%88%97%E8%A1%A8%E3%80%82%E5%A6%82%E5%85%B6%E8%AF%B4%E6%98%AF%E4%B8%80%E4%B8%AA%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0%EF%BC%8C%E5%AE%9E%E9%99%85%E4%B8%8A%E5%AE%83%E6%98%AF%E4%B8%80%E4%B8%AA%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8(lifetime%20specifier)%E3%80%82%3C/p%3E%3Cp%3E%E4%BB%8E%E5%8F%A5%3Ccode%3E&amp;lt;&#39;a&amp;gt;%3C/code%3E%E6%98%AF%E4%B8%80%E4%B8%AA%E5%A3%B0%E6%98%8E%E3%80%82%E5%AE%83%E8%A1%A8%E7%A4%BA%EF%BC%9A%3Ccode%3E&amp;lt;&amp;lt;In%20this%20function%20signature,%20a%20lifetime%20specifier%20is%20used;%20its%20name%20is%20&amp;quot;a&amp;quot;&amp;gt;&amp;gt;%3C/code%3E%E3%80%82%E5%90%8D%E5%AD%97&amp;quot;a&amp;quot;%E6%98%AF%E4%BB%BB%E6%84%8F%E7%9A%84%E3%80%82%E5%AE%83%E7%AE%80%E5%8D%95%E8%A1%A8%E7%A4%BA%E6%89%80%E6%9C%89%E5%87%BA%E7%8E%B0%E7%9A%84%E6%83%85%E5%86%B5%EF%BC%8C%E2%80%9C%E5%8C%B9%E9%85%8D%E2%80%9D%E8%BF%99%E7%A7%8D%E5%87%BA%E7%8E%B0%E3%80%82%E5%AE%83%E7%B1%BB%E4%BC%BC%E6%B3%9B%E5%9E%8B%E5%87%BD%E6%95%B0%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0%EF%BC%8C%E4%B8%8D%E5%90%8C%E7%9A%84%E5%9C%B0%E6%96%B9%E5%9C%A8%E4%BA%8E%EF%BC%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8%E5%89%8D%E7%BC%80%E4%BD%BF%E7%94%A8%E5%8D%95%E5%BC%95%E5%8F%B7%EF%BC%8C%E5%8F%A6%E5%A4%96%EF%BC%8C%E6%8C%89%E7%85%A7%E7%BA%A6%E5%AE%9A%EF%BC%8C%E6%B3%9B%E5%9E%8B%E5%8F%82%E6%95%B0%E9%A6%96%E5%AD%97%E6%AF%8D%E4%BD%BF%E7%94%A8%E5%A4%A7%E5%86%99%EF%BC%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8%E4%BD%BF%E7%94%A8%E4%B8%80%E4%B8%AA%E5%B0%8F%E5%86%99%E5%AD%97%E6%AF%8D%EF%BC%8C%E5%A6%82a%EF%BC%8Cb%EF%BC%8Cc%EF%BC%8C%E2%80%A6%E3%80%82%3C/p%3E%3Cp%3E%E7%84%B6%E5%90%8E%EF%BC%8C%E5%87%BD%E6%95%B0%E7%AD%BE%E5%90%8D%E5%8C%85%E5%90%AB%E5%85%B6%E5%AE%83%E4%B8%89%E4%B8%AA%3Ccode%3E&#39;a%3C/code%3E%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8%E7%9A%84%E5%87%BA%E7%8E%B0%EF%BC%8C%3Ccode%3Eb%3C/code%3E%E5%8F%82%E6%95%B0%E7%9A%84%E7%B1%BB%E5%9E%8B%E3%80%81%3Ccode%3Ec%3C/code%3E%E5%8F%82%E6%95%B0%E7%9A%84%E7%AC%AC%E4%BA%8C%E5%AD%97%E6%AE%B5%E7%9A%84%E7%B1%BB%E5%9E%8B%E3%80%81%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%9A%84%E7%B1%BB%E5%9E%8B%E3%80%82%E7%9B%B8%E5%8F%8D%EF%BC%8C%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E7%AC%AC%E4%B8%89%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%B1%BB%E5%9E%8B%E7%94%A8%E4%BA%86%3Ccode%3Estatic%3C/code%3E%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%A0%87%E8%AF%86%E3%80%82%3C/p%3E%3Cp%3E%E8%AF%A5%3Ccode%3Ea%3C/code%3E%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8%E7%9A%84%E7%94%A8%E6%B3%95%E8%A1%A8%E7%A4%BA%EF%BC%9A%E2%80%9C%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%A7%9F%E5%80%9F%E5%B7%B2%E5%AD%98%E5%9C%A8%E7%9A%84%3Ccode%3Eb%3C/code%3E%E5%8F%82%E6%95%B0%E5%92%8C%3Ccode%3Ec%3C/code%3E%E5%8F%82%E6%95%B0%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%AE%83%E5%AD%98%E6%B4%BB%E6%AF%94%E8%AF%A5%E5%AF%B9%E8%B1%A1%E8%A6%81%E7%9F%AD%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E7%9B%B8%E5%8F%8D%EF%BC%8C%3Ccode%3Estatic%3C/code%3E%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8%E7%9A%84%E7%94%A8%E6%B3%95%E8%A1%A8%E7%A4%BA%EF%BC%9A%E2%80%9C%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E7%AC%AC%E4%B8%89%E4%B8%AA%E5%AD%97%E6%AE%B5%E6%8C%87%E5%90%91%E4%B8%80%E4%B8%AA%E9%9D%99%E6%80%81%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%AE%83%E5%8F%AF%E4%BB%A5%E5%AD%98%E6%B4%BB%E5%9C%A8%E4%BB%BB%E4%BD%95%E6%97%B6%E9%97%B4%EF%BC%8C%E7%94%9A%E8%87%B3%E5%92%8C%E6%95%B4%E4%B8%AA%E8%BF%9B%E7%A8%8B%E4%B8%80%E6%A0%B7%E9%95%BF%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E5%BD%93%E7%84%B6%EF%BC%8C%E8%BF%99%E4%BB%85%E6%98%AF%E4%B8%80%E7%A7%8D%E5%8F%AF%E8%83%BD%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%B3%A8%E8%A7%A3%EF%BC%8C%E4%B8%8B%E9%9D%A2%E6%98%AF%E5%8F%A6%E4%B8%80%E7%A7%8D%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Etrait%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ETr%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E&amp;gt;(flag:%20%3Cspan%20class=%22type%22%3Ebool%3C/span%3E,%20b:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E,%20c:%20(%3Cspan%20class=%22type%22%3Echar%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22type%22%3Ei32%3C/span%3E))%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20(&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;static%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E,%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Ccode%3Ec%3C/code%3E%E5%8F%82%E6%95%B0%E4%B8%8D%E5%B8%A6%E6%B3%A8%E8%A7%A3%EF%BC%8C%E5%BC%95%E7%94%A8%E7%9A%84%E5%AF%B9%E8%B1%A1%E4%B8%8D%E7%A7%9F%E5%80%9F%E7%BB%99%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E5%BC%95%E7%94%A8%EF%BC%8C%3C/p%3E%3Cp%3E%E8%BF%98%E6%9C%89%E5%8F%A6%E4%B8%80%E7%A7%8D%E5%8F%AF%E8%83%BD%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%B3%A8%E8%A7%A3%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Etrait%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ETr%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E,%20%3Cspan%20class=%22symbol%22%3E&amp;#x27;b%3C/span%3E,%20T1,%20T2&amp;gt;(flag:%20%3Cspan%20class=%22type%22%3Ebool%3C/span%3E,%20b:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20T1,%20c:%20(%3Cspan%20class=%22type%22%3Echar%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;b%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E))%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20(&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;b%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E,%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20T2);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E6%B3%9B%E5%9E%8B%E5%87%BD%E6%95%B0%E6%9C%89%E4%B8%A4%E4%B8%AA%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8%E5%92%8C%E4%B8%A4%E4%B8%AA%E6%B3%9B%E5%9E%8B%E5%8F%82%E6%95%B0%E3%80%82%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%8F%82%E6%95%B0%3Ccode%3Ea%3C/code%3E%E6%8C%87%E5%AE%9A%E4%BA%86%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E7%AC%AC%E4%B8%89%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%A7%9F%E5%80%9F%E4%BA%86%E5%8F%82%E6%95%B0%3Ccode%3Eb%3C/code%3E%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E4%BB%A5%E5%8F%8A%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%8F%82%E6%95%B0%3Ccode%3Eb%3C/code%3E%E6%8C%87%E5%AE%9A%E4%BA%86%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%A7%9F%E5%80%9F%E4%BA%86%E5%8F%82%E6%95%B0%3Ccode%3Ec%3C/code%3E%E7%9A%84%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%9A%84%E5%AF%B9%E8%B1%A1%E3%80%82%E5%8F%A6%E5%A4%96%EF%BC%8C%E5%87%BD%E6%95%B0%E6%9C%89%E4%B8%A4%E4%B8%AA%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0%3Ccode%3ET1%3C/code%3E%E5%92%8C%3Ccode%3ET2%3C/code%3E%EF%BC%8C%E4%B8%8D%E5%B8%A6trait%E8%BE%B9%E7%95%8C%E3%80%82%3C/p%3E%3Ch2%20id=%22Checking-the-Validity-of-Lifetime-Specifiers%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Checking-the-Validity-of-Lifetime-Specifiers%22%3E%C2%B6%3C/a%3EChecking%20the%20Validity%20of%20Lifetime%20Specifiers%3C/h2%3E%3Cp%3E%E7%BC%96%E8%AF%91%E4%BB%BB%E4%BD%95%E5%87%BD%E6%95%B0%E6%97%B6%EF%BC%8Cborrow%20checker%E6%9C%89%E4%B8%A4%E4%B8%AA%E5%B7%A5%E4%BD%9C%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%E9%80%9A%E8%BF%87%E5%87%BD%E6%95%B0%E8%87%AA%E8%BA%AB%E5%92%8C%E5%87%BD%E6%95%B0%E4%BD%93%EF%BC%8C%E6%A3%80%E6%9F%A5%E5%87%BD%E6%95%B0%E7%AD%BE%E5%90%8D%E6%98%AF%E5%90%A6%E6%9C%89%E6%95%88%E3%80%82%3C/li%3E%3Cli%3E%E6%A3%80%E6%9F%A5%E5%87%BD%E6%95%B0%E4%BD%93%E6%98%AF%E5%90%A6%E5%90%88%E6%B3%95%EF%BC%8C%E7%BB%9F%E8%AE%A1%E8%AF%A5%E5%87%BD%E6%95%B0%E8%A2%AB%E8%B0%83%E7%94%A8%E6%AC%A1%E6%95%B0%E3%80%82%3C/li%3E%3C/ul%3E%3Cp%3E%E6%9C%AC%E5%B0%8F%E8%8A%82%EF%BC%8C%E5%85%88%E7%9C%8B%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%83%85%E5%86%B5%E3%80%82%3C/p%3E%3Cp%3E%E5%A6%82%E6%9E%9C%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E5%80%BC%E6%B2%A1%E6%9C%89%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%EF%BC%8Cborrow%20checker%E4%B8%8D%E5%81%9A%E4%BB%BB%E4%BD%95%E5%A4%84%E7%90%86%E3%80%82%3C/p%3E%3Cp%3E%E5%90%A6%E5%88%99%EF%BC%8C%E6%AF%8F%E4%B8%AA%E8%BF%94%E5%9B%9E%E5%80%BC%E5%BC%95%E7%94%A8%EF%BC%8C%E5%BF%85%E9%A1%BB%E6%A3%80%E6%9F%A5%E6%98%AF%E5%90%A6%E6%9C%89%E6%AD%A3%E7%A1%AE%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8(lifetime%20specifier)%E3%80%82%3C/p%3E%3Cp%3E%E8%BF%99%E6%A0%B7%E4%B8%80%E4%B8%AA%E6%8C%87%E7%A4%BA%E5%99%A8(specifier)%E5%8F%AF%E4%BB%A5%E6%98%AF%E2%80%9C%3Ccode%3E&#39;static%3C/code%3E%E2%80%9D%E3%80%82%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%EF%BC%8C%E5%BC%95%E7%94%A8%E5%BF%85%E9%A1%BB%E6%8C%87%E5%90%91%E4%B8%80%E4%B8%AA%E9%9D%99%E6%80%81%E5%AF%B9%E8%B1%A1%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estatic%3C/span%3E%20FOUR:%20%3Cspan%20class=%22type%22%3Eu8%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E4%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E()%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20(%3Cspan%20class=%22type%22%3Ebool%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;static%3C/span%3E%20%3Cspan%20class=%22type%22%3Eu8%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;static%3C/span%3E%20%3Cspan%20class=%22type%22%3Estr%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;static%3C/span%3E%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20(%3Cspan%20class=%22literal%22%3Etrue%3C/span%3E,%20&amp;amp;FOUR,%20%3Cspan%20class=%22string%22%3E&amp;quot;Hello&amp;quot;%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22number%22%3E3.14%3C/span%3E)%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Ef%3C/span%3E().%3Cspan%20class=%22number%22%3E0%3C/span%3E,%20*%3Cspan%20class=%22title%20function_%20invoke__%22%3Ef%3C/span%3E().%3Cspan%20class=%22number%22%3E1%3C/span%3E,%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Ef%3C/span%3E().%3Cspan%20class=%22number%22%3E2%3C/span%3E,%20*%3Cspan%20class=%22title%20function_%20invoke__%22%3Ef%3C/span%3E().%3Cspan%20class=%22number%22%3E3%3C/span%3E);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BB%93%E6%9E%9C%E5%B0%86%E4%BC%9A%E6%89%93%E5%8D%B0%EF%BC%9A%E2%80%9C%3Ccode%3Etrue%204%20Hello%203.14%3C/code%3E%E2%80%9D%E3%80%82%E8%AF%A5%E7%A8%8B%E5%BA%8F%E6%98%AF%E5%90%88%E6%B3%95%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%E4%B8%89%E4%B8%AA%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E5%BC%95%E7%94%A8%E9%83%BD%E6%98%AF%E9%9D%99%E6%80%81%E5%AF%B9%E8%B1%A1%E3%80%82%3C/p%3E%3Cp%3E%E7%9B%B8%E5%8F%8D%EF%BC%8C%E4%B8%8B%E9%9D%A2%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E(n:%20&amp;amp;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;static%3C/span%3E%20%3Cspan%20class=%22type%22%3Eu8%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3En%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20*%3Cspan%20class=%22title%20function_%20invoke__%22%3Ef%3C/span%3E(&amp;amp;%3Cspan%20class=%22number%22%3E12%3C/span%3E));%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%B0%86%E4%BC%9A%E7%94%9F%E6%88%90%E7%BC%96%E8%AF%91%E9%94%99%E8%AF%AF%EF%BC%9A%E2%80%9Clifetime%20of%20reference%20outlives%20lifetime%20of%20borrowed%20content%E2%80%A6%E2%80%9D%E3%80%82%E8%BF%99%E6%98%AF%E4%B8%8D%E5%90%88%E6%B3%95%E7%9A%84%EF%BC%8C%E8%BF%94%E5%9B%9E%E5%80%BC%E4%B8%8D%E6%98%AF%E4%B8%80%E4%B8%AA%E6%8C%87%E5%90%91%E9%9D%99%E6%80%81%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%BC%95%E7%94%A8%EF%BC%9B%E5%AE%83%E5%AE%9E%E9%99%85%E4%B8%8A%E6%98%AF%E6%8E%A5%E6%94%B6%E5%8F%82%E6%95%B0%E7%9A%84%E5%80%BC%EF%BC%8C%E8%AF%A5%E8%BF%94%E5%9B%9E%E5%80%BC%E7%A7%9F%E5%80%9F%E4%BA%86%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E5%BC%95%E7%94%A8%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%90%8C%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%E3%80%82%3C/p%3E%3Cp%3E%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8%E5%8F%AF%E4%BB%A5%E5%AE%9A%E4%B9%89%E6%88%90%E5%88%97%E8%A1%A8%E7%9A%84%E5%BD%A2%E5%BC%8F%EF%BC%8C%E5%A6%82%E4%B8%8B%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E,%20%3Cspan%20class=%22symbol%22%3E&amp;#x27;b%3C/span%3E&amp;gt;(x:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E,%20y:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;b%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20(&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;b%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E,%20%3Cspan%20class=%22type%22%3Ebool%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E(y,%20%3Cspan%20class=%22literal%22%3Etrue%3C/span%3E,%20x)%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ej%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E13%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Er%3C/span%3E%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Ef%3C/span%3E(&amp;amp;i,%20&amp;amp;j);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20*r.%3Cspan%20class=%22number%22%3E0%3C/span%3E,%20r.%3Cspan%20class=%22number%22%3E1%3C/span%3E,%20*r.%3Cspan%20class=%22number%22%3E2%3C/span%3E);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BB%93%E6%9E%9C%E5%B0%86%E6%89%93%E5%8D%B0%EF%BC%9A%E2%80%9C13%20true%2012%E2%80%9D%E3%80%82%E8%BF%99%E6%98%AF%E6%9C%89%E6%95%88%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BAtuple%E4%B8%AD%E8%BF%94%E5%9B%9E%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AE%B5%E5%BC%95%E7%94%A8%E7%9A%84%E6%97%B6%3Ccode%3Ey%3C/code%3E%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E5%80%BC%EF%BC%8C%E4%BB%A5%3Ccode%3Ey%3C/code%3E%E5%8F%82%E6%95%B0%E5%92%8C%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AE%B5%E6%9C%89%E5%90%8C%E6%A0%B7%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8(lifetime%20specifier)%EF%BC%9B%E5%AE%83%E4%BB%AC%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8%E9%83%BD%E6%98%AF%3Ccode%3E&#39;b%3C/code%3E%E3%80%82%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E7%AC%AC%E4%B8%89%E4%B8%AA%E5%AD%97%E6%AE%B5%E5%92%8C%E5%8F%82%E6%95%B0%3Ccode%3Ex%3C/code%3E%E4%B8%80%E6%A0%B7%E6%9C%89%E5%90%8C%E4%B8%80%E4%B8%AA%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8%3Ccode%3E&#39;a%3C/code%3E%E3%80%82%3C/p%3E%3Cp%3E%E7%9B%B8%E5%8F%8D%EF%BC%8C%E4%B8%8B%E9%9D%A2%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E,%20%3Cspan%20class=%22symbol%22%3E&amp;#x27;b%3C/span%3E&amp;gt;(x:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E,%20y:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;b%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20(&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;b%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E,%20%3Cspan%20class=%22type%22%3Ebool%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E(x,%20%3Cspan%20class=%22literal%22%3Etrue%3C/span%3E,%20y)%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ej%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E13%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Er%3C/span%3E%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Ef%3C/span%3E(&amp;amp;i,%20&amp;amp;j);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20*r.%3Cspan%20class=%22number%22%3E0%3C/span%3E,%20r.%3Cspan%20class=%22number%22%3E1%3C/span%3E,%20*r.%3Cspan%20class=%22number%22%3E2%3C/span%3E);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E4%BC%9A%E4%BA%A7%E7%94%9F%E4%B8%A4%E4%B8%AA%E7%BC%96%E8%AF%91%E9%94%99%E8%AF%AF%EF%BC%8C%E4%B8%A4%E4%B8%AA%E9%94%99%E8%AF%AF%E9%83%BD%E6%98%AF%EF%BC%9A%E2%80%9Clifetime%20mismatch%E2%80%9D%E3%80%82%E5%AE%9E%E9%99%85%E4%B8%8A%EF%BC%8C%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AE%B5%E5%92%8C%E7%AC%AC%E4%B8%89%E4%B8%AA%E5%AD%97%E6%AE%B5%E9%83%BD%E6%9C%89%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8%EF%BC%8C%E4%BD%86%E4%B8%8D%E6%98%AF%E5%AF%B9%E5%BA%94%E5%AE%83%E4%BB%AC%E5%87%BD%E6%95%B0%E7%AD%BE%E5%90%8D%E3%80%82%3C/p%3E%3Cp%3E%E6%B3%A8%E6%84%8F%E5%88%B0%EF%BC%8C%E5%A4%9A%E4%B8%AA%E8%BF%94%E5%9B%9E%E5%AD%97%E6%AE%B5%E5%8F%AF%E8%83%BD%E4%BB%85%E7%94%A8%E4%BA%86%E4%B8%80%E4%B8%AA%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E&amp;gt;(x:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E,%20y:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20(&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E,%20%3Cspan%20class=%22type%22%3Ebool%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E(x,%20%3Cspan%20class=%22literal%22%3Etrue%3C/span%3E,%20y)%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ej%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E13%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Er%3C/span%3E%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Ef%3C/span%3E(&amp;amp;i,%20&amp;amp;j);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20*r.%3Cspan%20class=%22number%22%3E0%3C/span%3E,%20r.%3Cspan%20class=%22number%22%3E1%3C/span%3E,%20*r.%3Cspan%20class=%22number%22%3E2%3C/span%3E);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%BF%99%E9%87%8C%EF%BC%8C%3Ccode%3E&#39;b%3C/code%3E%E8%A2%AB%E6%9B%BF%E6%8D%A2%E4%B8%BA%3Ccode%3E&#39;a%3C/code%3E%E3%80%82%E4%BD%86%E5%91%B3%E9%81%93%E5%AE%8C%E5%85%A8%E4%B8%8D%E4%B8%80%E6%A0%B7%E3%80%82%3C/p%3E%3Cp%3E%E5%8E%9F%E6%9D%A5%E7%9A%84%E7%89%88%E6%9C%AC%E6%98%AF%EF%BC%8C%E5%8F%82%E6%95%B0%E5%88%97%E8%A1%A8%E6%8C%87%E7%A4%BA%E4%BA%86%E4%BC%9A%E6%9C%89%E4%B8%A4%E4%B8%AA%E7%8B%AC%E7%AB%8B%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%9B%E8%BF%99%E4%B8%AA%E7%89%88%E6%9C%AC%EF%BC%8C%E5%AE%83%E4%BB%AC%E5%85%B1%E4%BA%AB%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E3%80%82%3C/p%3E%3Cp%3E%E8%BF%99%E4%B8%AA%E6%94%B9%E5%8A%A8%E5%AF%B9%E4%BA%8E%E7%A7%9F%E5%80%9F%E6%A3%80%E6%9F%A5%E5%99%A8(borrow%20checker)%E6%9D%A5%E8%AF%B4%E4%B8%8D%E7%AE%80%E5%8D%95%E3%80%82%E8%AE%A9%E6%88%91%E4%BB%AC%E8%80%83%E8%99%91%E4%B8%80%E4%B8%AA%E6%9B%B4%E5%A4%8D%E6%9D%82%E7%9A%84%E5%87%BD%E6%95%B0%E4%BD%93%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E&amp;gt;(n:%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E,%20x:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E&amp;gt;,%20y:%20&amp;amp;%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E&amp;gt;)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Eu8%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20n%20==%20%3Cspan%20class=%22number%22%3E0%3C/span%3E%20&amp;#123;%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20&amp;amp;x[%3Cspan%20class=%22number%22%3E0%3C/span%3E];%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20n%20&amp;lt;%20%3Cspan%20class=%22number%22%3E0%3C/span%3E%20&amp;#123;%20&amp;amp;x[%3Cspan%20class=%22number%22%3E1%3C/span%3E]%20&amp;#125;%20%3Cspan%20class=%22keyword%22%3Eelse%3C/span%3E%20&amp;#123;%20&amp;amp;x[%3Cspan%20class=%22number%22%3E2%3C/span%3E]%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%AF%A5%E5%87%BD%E6%95%B0%E6%98%AF%E6%9C%89%E6%95%88%E7%9A%84%E3%80%82%E5%87%BD%E6%95%B0%E4%BD%93%E6%9C%89%E4%B8%89%E4%B8%AA%E5%8F%AF%E8%83%BD%E7%9A%84%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BF%94%E5%9B%9E%E5%80%BC%EF%BC%8C%E6%89%80%E6%9C%89%E8%A1%A8%E8%BE%BE%E5%BC%8F%E9%83%BD%E7%A7%9F%E5%80%9F%E4%BA%86%E5%8F%82%E6%95%B0%3Ccode%3Ex%3C/code%3E%E7%9A%84%E5%AF%B9%E8%B1%A1%E3%80%82%E8%BF%94%E5%9B%9E%E5%80%BC%E6%9C%89%E5%92%8C%E5%8F%82%E6%95%B0%E7%AD%89%E5%90%8C%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%8C%E6%89%80%E4%BB%A5%E6%BB%A1%E8%B6%B3borrow%20checker%E3%80%82%3C/p%3E%3Cp%3E%E7%9B%B8%E5%8F%8D%EF%BC%8C%E4%B8%8B%E9%9D%A2%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E&amp;gt;(n:%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E,%20x:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E&amp;gt;,%20y:%20&amp;amp;%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E&amp;gt;)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Eu8%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20n%20==%20%3Cspan%20class=%22number%22%3E0%3C/span%3E%20&amp;#123;%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E%20&amp;amp;x[%3Cspan%20class=%22number%22%3E0%3C/span%3E];%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20n%20&amp;lt;%20%3Cspan%20class=%22number%22%3E0%3C/span%3E%20&amp;#123;%20&amp;amp;x[%3Cspan%20class=%22number%22%3E1%3C/span%3E]%20&amp;#125;%20%3Cspan%20class=%22keyword%22%3Eelse%3C/span%3E%20&amp;#123;%20&amp;amp;y[%3Cspan%20class=%22number%22%3E2%3C/span%3E]%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E4%B8%80%E4%B8%AA%E5%8F%AF%E8%83%BD%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC%EF%BC%8C%E4%BC%9A%E6%98%AF%E8%A1%A8%E8%BE%BE%E5%BC%8F%3Ccode%3E&amp;amp;y[2]%3C/code%3E%EF%BC%8C%E8%AF%A5%E5%AF%B9%E8%B1%A1%E7%A7%9F%E5%80%9F%E8%87%AA%3Ccode%3Ey%3C/code%3E%EF%BC%8C%E8%BF%99%E4%B8%AA%E5%8F%82%E6%95%B0%E6%B2%A1%E6%9C%89%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8%EF%BC%8C%E6%89%80%E4%BB%A5%E8%AF%A5%E4%BB%A3%E7%A0%81%E6%98%AF%E4%B8%8D%E5%90%88%E6%B3%95%E7%9A%84%E3%80%82%3C/p%3E%3Cp%3E%E5%8D%B3%E4%BD%BF%E4%B8%8B%E9%9D%A2%E4%BB%A3%E7%A0%81%E4%B9%9F%E6%98%AF%E4%B8%8D%E5%90%88%E6%B3%95%E7%9A%84%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E&amp;gt;(x:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E&amp;gt;,%20y:%20&amp;amp;%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E&amp;gt;)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Eu8%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20%3Cspan%20class=%22literal%22%3Etrue%3C/span%3E%20&amp;#123;%20&amp;amp;x[%3Cspan%20class=%22number%22%3E0%3C/span%3E]%20&amp;#125;%20%3Cspan%20class=%22keyword%22%3Eelse%3C/span%3E%20&amp;#123;%20&amp;amp;y[%3Cspan%20class=%22number%22%3E0%3C/span%3E]%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%BD%93%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E6%B5%81%E5%88%86%E6%9E%90%E6%97%B6%EF%BC%8C%E7%BC%96%E8%AF%91%E5%99%A8%E4%BC%9A%E6%8E%A2%E6%B5%8B%E5%88%B0%3Ccode%3Ey%3C/code%3E%E4%BB%8E%E4%B8%8D%E8%A2%AB%E8%BF%94%E5%9B%9E%E5%80%BC%E7%A7%9F%E5%80%9F%EF%BC%9B%E4%BD%86borrow%20checker%E5%9D%9A%E6%8C%81%E5%9B%A0%E4%B8%BA%3Ccode%3E&amp;amp;y[0]%3C/code%3E%E6%98%AF%E4%B8%80%E4%B8%AA%E5%8F%AF%E8%83%BD%E8%BF%94%E5%9B%9E%E5%80%BC%EF%BC%8C%E6%89%80%E4%BB%A5%E8%AF%A5%E6%AE%B5%E7%A8%8B%E5%BA%8F%E8%A2%AB%E8%AE%A4%E4%B8%BA%E6%98%AF%E6%97%A0%E6%95%88%E7%9A%84%E3%80%82%3C/p%3E%3Ch2%20id=%22Using-the-Lifetime-Specifiers-of-Invoked-Functions%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Using-the-Lifetime-Specifiers-of-Invoked-Functions%22%3E%C2%B6%3C/a%3EUsing%20the%20Lifetime%20Specifiers%20of%20Invoked%20Functions%3C/h2%3E%3Cp%3E%E4%B8%8A%E4%B8%80%E7%AB%A0%E8%8A%82%E7%9A%84%E5%BC%80%E5%A7%8B%E9%83%A8%E5%88%86%E8%AF%B4%E8%BF%87%EF%BC%8Cborrow%20checker%E6%9C%89%E4%B8%A4%E9%A1%B9%E5%B7%A5%E4%BD%9C%EF%BC%8C%E7%BC%96%E8%AF%91%E5%87%BD%E6%95%B0%E6%97%B6%E8%BF%9B%E8%A1%8C%E6%A3%80%E6%9F%A5%E5%87%BD%E6%95%B0%E4%BD%93%E6%98%AF%E5%90%A6%E6%9C%89%E6%95%88%EF%BC%8C%E7%BB%9F%E8%AE%A1%E5%87%BD%E6%95%B0%E4%BD%93%E5%86%85%E4%BB%BB%E6%84%8F%E8%A2%AB%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0%E7%9A%84%E7%AD%BE%E5%90%8D%E3%80%82%3C/p%3E%3Cp%3E%E6%B2%BF%E7%94%A8%E4%B8%8A%E4%B8%80%E8%8A%82%E7%9A%84%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B%E3%80%82%E6%A0%B9%E6%8D%AE%E7%A7%9F%E5%80%9F%E7%9A%84%E8%A7%84%E5%88%99%EF%BC%8C%E2%80%9Cmissing%20lifetime%20specifier%E2%80%9D%E8%A1%A8%E7%A4%BA%E7%BC%BA%E5%B0%91lifetime%20specifier%EF%BC%8C%E6%88%91%E4%BB%AC%E5%B0%86%E5%8E%9F%E6%9D%A5%E7%9A%84%E5%8A%A0%E4%B8%8A%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%87%E7%A4%BA%E5%99%A8%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev1%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22number%22%3E11u8%3C/span%3E,%20%3Cspan%20class=%22number%22%3E22%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Eresult%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev2%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22number%22%3E33u8%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Efunc%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E&amp;gt;(_x1:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E&amp;gt;,%20_x2:%20&amp;amp;%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E&amp;gt;)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E&amp;gt;%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E_x1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Eresult%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Efunc%3C/span%3E(&amp;amp;v1,%20&amp;amp;v2);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;:?&amp;#125;&amp;quot;%3C/span%3E,%20*result);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%AC%AC%E4%BA%8C%E4%B8%AA%E4%BE%8B%E5%AD%90%E6%94%B9%E4%B8%BA%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev1%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22number%22%3E11u8%3C/span%3E,%20%3Cspan%20class=%22number%22%3E22%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Eresult%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev2%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22number%22%3E33u8%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Efunc%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E&amp;gt;(_x1:%20&amp;amp;%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E&amp;gt;,%20_x2:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E&amp;gt;)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Eu8%3C/span%3E&amp;gt;%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E_x2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Eresult%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Efunc%3C/span%3E(&amp;amp;v1,%20&amp;amp;v2);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;:?&amp;#125;&amp;quot;%3C/span%3E,%20*result);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%AC%AC%E4%B8%80%E4%B8%AA%E7%A8%8B%E5%BA%8F%E6%98%AF%E6%9C%89%E6%95%88%E7%9A%84%EF%BC%8C%E7%BB%93%E6%9E%9C%E4%BC%9A%E6%89%93%E5%8D%B0%EF%BC%9A%E2%80%9C%3Ccode%3E[11,%2022]%3C/code%3E%E2%80%9D%EF%BC%8C%E7%AC%AC%E4%BA%8C%E4%B8%AA%E4%BC%9A%E6%9C%89%E7%BC%96%E8%AF%91%E9%94%99%E8%AF%AF%EF%BC%9A%E2%80%9C%3Ccode%3Ev2%3C/code%3E%20does%20not%20live%20long%20enough%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%BA%E4%BB%80%E4%B9%88%3Ccode%3Efunc%3C/code%3E%E8%BF%99%E4%BA%9B%E5%86%99%E6%B3%95%E4%BC%9A%E4%BA%A7%E7%94%9F%E7%BC%96%E8%AF%91%E9%94%99%E8%AF%AF%EF%BC%8C%E5%89%8D%E9%9D%A2%E5%B0%8F%E8%8A%82%E5%B7%B2%E7%BB%8F%E8%A7%A3%E6%9E%90%E8%BF%87%E4%BA%86%E3%80%82%3C/p%3E%3Cp%3E%E8%AE%A9%E6%88%91%E4%BB%AC%E7%9C%8B%E7%9C%8B%3Ccode%3Emain%3C/code%3E%E5%87%BD%E6%95%B0%E5%9C%A8%E7%AC%AC%E4%B8%80%E4%B8%AA%E7%A8%8B%E5%BA%8F%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C%E7%9A%84%E3%80%82%E5%BD%93%3Ccode%3Efunc%3C/code%3E%E8%A2%AB%E8%B0%83%E7%94%A8%EF%BC%8C%E5%AD%98%E6%B4%BB%3Ccode%3Ev1%3C/code%3E%E3%80%81%3Ccode%3Eresult%3C/code%3E%E5%92%8C%3Ccode%3Ev2%3C/code%3E%EF%BC%8C%E6%8C%89%E9%A1%BA%E5%BA%8F%E5%A3%B0%E6%98%8E%EF%BC%8C%E4%BB%A5%E5%8F%8A%3Ccode%3Ev1%3C/code%3E%E5%92%8C%3Ccode%3Ev2%3C/code%3E%E6%97%A9%E5%B7%B2%E8%A2%AB%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82%3Ccode%3Efunc%3C/code%3E%E7%9A%84%E7%AD%BE%E5%90%8D%E8%AF%B4%E7%BB%93%E6%9E%9C%E5%80%BC%E5%92%8C%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0%E6%9C%89%E7%9B%B8%E5%90%8C%E7%9A%84lifetime%20specifier%EF%BC%8C%E8%BF%99%E6%84%8F%E5%91%B3%E7%9D%80%3Ccode%3Eresult%3C/code%3E%E7%9A%84%E5%80%BC%E4%B8%8D%E4%BC%9A%E5%AD%98%E6%B4%BB%E5%BE%97%E6%AF%94%3Ccode%3Ev1%3C/code%3E%E9%95%BF%E3%80%82%E4%BB%A5%E5%8F%8A%EF%BC%8C%3Ccode%3Eresult%3C/code%3E%E5%9C%A8%3Ccode%3Ev1%3C/code%3E%E4%B9%8B%E5%90%8E%E5%A3%B0%E6%98%8E%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%AE%83%E4%BC%9A%E5%85%88%E4%BA%8E%3Ccode%3Ev1%3C/code%3E%E9%94%80%E6%AF%81%E3%80%82%3C/p%3E%3Cp%3E%E5%86%8D%E7%9C%8B%E7%9C%8B%E4%B8%BA%E4%BB%80%E4%B9%88%E7%AC%AC%E4%BA%8C%E6%AE%B5%E7%A8%8B%E5%BA%8F%E7%9A%84%3Ccode%3Emain%3C/code%3E%E5%87%BD%E6%95%B0%E6%98%AF%E4%B8%8D%E5%90%88%E6%B3%95%E7%9A%84%E3%80%82%E8%BF%99%E9%87%8C%EF%BC%8C%3Ccode%3Efunc%3C/code%3E%E7%9A%84%E7%AD%BE%E5%90%8D%E8%AF%B4%E8%BF%94%E5%9B%9E%E5%80%BC%E5%92%8C%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%8F%82%E6%95%B0%E6%9C%89%E7%9B%B8%E5%90%8C%E7%9A%84lifetime%20specifier%EF%BC%8C%E6%84%8F%E5%91%B3%E7%9D%80%3Ccode%3Eresult%3C/code%3E%E5%AD%98%E6%B4%BB%E4%B8%8D%E4%BC%9A%E6%AF%94%3Ccode%3Ev2%3C/code%3E%E9%95%BF%E3%80%82%E4%BD%86%3Ccode%3Eresult%3C/code%3E%E5%9C%A8%3Ccode%3Ev2%3C/code%3E%E4%B9%8B%E5%89%8D%E5%A3%B0%E6%98%8E%EF%BC%8C%E8%80%8C%E5%AE%83%E4%BC%9A%E5%9C%A8%E5%85%B6%E5%90%8E%E8%A2%AB%E9%94%80%E6%AF%81%E3%80%82%3C/p%3E%3Cp%3E%E8%BF%99%E6%98%AF%E5%9B%A0%E4%B8%BA%E5%8F%AA%E4%BD%BF%E7%94%A8%E4%BA%86%E4%B8%80%E4%B8%AAlifetime%20specifiter%EF%BC%8C%E4%B8%8B%E9%9D%A2%E6%94%B9%E4%B8%BA%E4%B8%A4%E4%B8%AA%E6%8C%87%E7%A4%BA%E5%99%A8%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E,%20%3Cspan%20class=%22symbol%22%3E&amp;#x27;b%3C/span%3E&amp;gt;(x:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E,%20y:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;b%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20(&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;b%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E,%20%3Cspan%20class=%22type%22%3Ebool%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20(x,%20%3Cspan%20class=%22literal%22%3Etrue%3C/span%3E,%20y)%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei1%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei2%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ej1%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E13%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ej2%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Er%3C/span%3E%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Ef%3C/span%3E(&amp;amp;i1,%20&amp;amp;j1);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ei2%20=%20r.%3Cspan%20class=%22number%22%3E0%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ej2%20=%20r.%3Cspan%20class=%22number%22%3E2%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20*i2,%20r.%3Cspan%20class=%22number%22%3E1%3C/span%3E,%20*j2);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BB%93%E6%9E%9C%E5%B0%86%E6%89%93%E5%8D%B0%E2%80%9C12%20true%2013%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E7%9B%B8%E5%8F%8D%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%BB%85%E7%94%A8%E4%B8%80%E4%B8%AAlifetime%20specifier%E6%97%B6%EF%BC%8C%E6%98%AF%E4%B8%8D%E5%90%88%E6%B3%95%E7%9A%84%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E&amp;lt;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E&amp;gt;(x:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E,%20y:%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20(&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E,%20%3Cspan%20class=%22type%22%3Ebool%3C/span%3E,%20&amp;amp;%3Cspan%20class=%22symbol%22%3E&amp;#x27;a%3C/span%3E%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E(x,%20%3Cspan%20class=%22literal%22%3Etrue%3C/span%3E,%20y)%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei1%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E12%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei2%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ej1%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E13%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ej2%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Er%3C/span%3E%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Ef%3C/span%3E(&amp;amp;i1,%20&amp;amp;j1);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ei2%20=%20r.%3Cspan%20class=%22number%22%3E0%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ej2%20=%20r.%3Cspan%20class=%22number%22%3E2%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20*i2,%20r.%3Cspan%20class=%22number%22%3E1%3C/span%3E,%20*j2);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%BF%99%E4%BC%9A%E4%BA%A7%E7%94%9F%E7%BC%96%E8%AF%91%E9%94%99%E8%AF%AF%EF%BC%9A%E2%80%9C%3Ccode%3Ej1%3C/code%3E%20does%20not%20live%20long%20enough%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E5%9C%A8%E8%BF%99%E4%B8%A4%E4%B8%AA%E7%89%88%E6%9C%AC%E4%B8%AD%EF%BC%8C%E5%87%BD%E6%95%B0%3Ccode%3Ef%3C/code%3E%E9%83%BD%E4%BC%9A%E6%8E%A5%E6%94%B6%3Ccode%3Ei1%3C/code%3E%E5%92%8C%3Ccode%3Ej1%3C/code%3E%E7%9A%84%E5%BC%95%E7%94%A8%EF%BC%8C%E9%A6%96%E5%85%88%E8%BF%94%E5%9B%9E%E5%8F%98%E9%87%8F%3Ccode%3Er%3C/code%3E%E5%AD%98%E5%82%A8%E7%9A%84%E5%80%BC%EF%BC%8C%E7%84%B6%E5%90%8E%E5%88%86%E5%88%AB%E5%9C%B0%E5%88%9D%E5%A7%8B%E5%8C%96%3Ccode%3Ei2%3C/code%3E%E5%92%8C%3Ccode%3Ej2%3C/code%3E%E5%8F%98%E9%87%8F%E3%80%82%3C/p%3E%3Cp%3E%E5%9C%A8%E7%AC%AC%E4%B8%80%E4%B8%AA%E7%89%88%E6%9C%AC%E4%B8%AD%EF%BC%8C%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0%E5%92%8C%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AE%B5%E6%8B%A5%E6%9C%89%E7%9B%B8%E5%90%8C%E7%9A%84lifetime%20specifier%EF%BC%8C%E8%BF%99%E5%AF%BC%E8%87%B4%E4%BA%86%3Ccode%3Ei2%3C/code%3E%E5%BF%85%E9%A1%BB%E5%AD%98%E6%B4%BB%E5%B0%91%E4%BA%8E%3Ccode%3Ei1%3C/code%3E%E3%80%82%E7%B1%BB%E4%BC%BC%E5%9C%B0%EF%BC%8C%3Ccode%3Ej2%3C/code%3E%E5%BF%85%E9%A1%BB%E5%AD%98%E6%B4%BB%E5%B0%91%E4%BA%8E%3Ccode%3Ej1%3C/code%3E%E3%80%82%E5%AE%9E%E9%99%85%E4%B8%8A%EF%BC%8C%E5%8F%98%E9%87%8F%E7%9A%84%E5%A3%B0%E6%98%8E%E9%A1%BA%E5%BA%8F%E9%9C%80%E8%A6%81%E6%BB%A1%E8%B6%B3%E8%BF%99%E4%BA%9B%E8%A6%81%E6%B1%82%E3%80%82%3C/p%3E%3Cp%3E%E7%AC%AC%E4%BA%8C%E4%B8%AA%E7%89%88%E6%9C%AC%EF%BC%8C%E7%94%B1%E4%BA%8E%E5%8F%AA%E6%9C%89%E4%B8%80%E4%B8%AAlifetime%20specifier%EF%BC%8C%E6%89%80%E4%BB%A5%3Ccode%3Ei2%3C/code%3E%E5%92%8C%3Ccode%3Ej2%3C/code%3E%E5%BF%85%E9%A1%BB%E5%AD%98%E6%B4%BB%E5%B0%91%E4%BA%8E%3Ccode%3Ei1%3C/code%3E%E5%92%8C%3Ccode%3Ej1%3C/code%3E%E3%80%82%E5%AE%9E%E9%99%85%E4%B8%8A%EF%BC%8C%3Ccode%3Ei2%3C/code%3E%E8%A2%AB%E5%A3%B0%E6%98%8E%E5%9C%A8%3Ccode%3Ej1%3C/code%3E%E5%89%8D%EF%BC%8C%E4%B8%8D%E8%83%BD%E6%BB%A1%E8%B6%B3%E8%BF%99%E4%BA%9B%E8%A6%81%E6%B1%82%E3%80%82%3C/p%3E" type="image"/>
    
    
    <category term="learning" scheme="https://galudisu.info/categories/learning/"/>
    
    
    <category term="rust" scheme="https://galudisu.info/tags/rust/"/>
    
  </entry>
  
  <entry>
    <title>rust基础入门[21] - Drops, Moves, and Copies</title>
    <link href="https://galudisu.info/2023/01/21/rust/beginning/chapter21_Drops,%20Moves,%20and%20Copies/"/>
    <id>https://galudisu.info/2023/01/21/rust/beginning/chapter21_Drops,%20Moves,%20and%20Copies/</id>
    <published>2023-01-21T07:50:46.000Z</published>
    <updated>2025-04-27T11:59:08.282Z</updated>
    
    <content type="html"><![CDATA[<p>本章覆盖有：</p><ul><li>为什么决定性的(deterministic)、隐式(implicit)的对象销毁是Rust的一大亮点</li><li>对象所有者(ownership)的概念</li><li>为什么自定义销毁可能有用，怎么创建</li><li>三种赋值语义：共享(share)、拷贝(copy)、移动(move)</li><li>为什么隐式共享对软件正确性是糟糕的</li><li>为什么对象的移动(move semantics)比起拷贝(copy semantics)可能有更好的性能</li><li>为什么某些类型需要拷贝(copy semantics)，某些不需要，怎么区分</li><li>为什么某些类型需要是不可复制的(non-cloneable)，怎么区分</li></ul><span id="more"></span><h2 id="Deterministic-Destruction"><a class="header-anchor" href="#Deterministic-Destruction">¶</a>Deterministic Destruction</h2><p>前面，我们看到有几种内存分配对象的方式，这些分配都是在stack和heap发生：</p><ul><li>临时表达式，分配在stack；</li><li>变量(包括数组)，分配在stack；</li><li>函数和闭包的参数，分配在stack；</li><li><code>Box</code>对象，引用分配在stack，引用的对象分配在heap；</li><li>动态字符串和集合(包括vector）,header分配在stack，数据分配在heap。</li></ul><p>对象“<strong>真实</strong>”的瞬时分配是很难预测的，因为它取决于编译器优化。因此，我们考虑“<strong>概念</strong>”上的瞬时分配情况。</p><p>概念上，当对应表达式第一次出现在代码时发生stack分配，因此：</p><ul><li>临时表达式，变量，数组在它们第一次出现在代码时被分配；</li><li>函数和闭包的参数，在函数/闭包被调用时被分配；</li><li><code>Box</code>对象，动态字符串，集合header，在代码第一出现时被分配。</li></ul><p>heap的当需要这些数据时，进行heap分配。因此：</p><ul><li><code>Box</code>对象的分配，由<code>Box::new</code>函数触发；</li><li>动态字符串的字符分配，在字符被添加到该字符串时触发；</li><li>集合内容的分配，出现在有数据被添加到集合时。</li></ul><p>上面这些跟大多数编程语言没不同之处。那么数据的销毁在什么时候发生？</p><p>概念上，在Rust中，当这些数据不再可被访问时，自动销毁。因此：</p><ul><li>临时表达式被回收，当它在语句的结束位置(即，在下一个<code>;</code>位置或当前scope的结束位置)；</li><li>变量(包括数组)被回收，当它在scope的声明结束；</li><li>函数/闭包的参数的回收，出现在函数/闭包体结束；</li><li><code>Box</code>对象的回收，在当前scope的声明结束；</li><li>动态字符串的字符被回收，出现在从字符串中删除该字符时，或者整个字符串删除时；</li><li>集合中的条目被回收，出现在从集合中删除该条目时，或者整个集合被删除时。</li></ul><p>这一概念使得Rust和大部分语言区分开来。任何语言都有临时对象或栈分配(stack-allocated)对象，这种对象是自动回收的。但堆分配(heap-allocated)对象的回收，不同语言各不相同。</p><p>在某些语言中，诸如Pascal，C，C++，heap上的对象通常仅能显式地调用类似<code>free</code>或<code>delete</code>这些函数进行回收。另一些语言，诸如Java，JavaScript，C+，Python，堆上的对象不可访问时，并没有立即进行回收，而是有一个定期的行程，用来查找heap不可达对象，并回收这些对象。这种机制称为“垃圾回收”，因为它类似城市的清理系统：它定期清理城镇，当有垃圾堆积。</p><p>因此，在C++和类似语言中，heap回收既是<code>决定性的，deterministic</code>，也是<code>显式的，explicit</code>。决定性的，因为它在源代码的定义位置，以及是显式的，因为它要求程序员编写指定的回收语句。决定性的好处在于，可能有更好的性能，程序员可能更好地控制。但显式的却不好，因为不能避免出现错误的回收，丑陋的bug结果。</p><p>相反，在Java和类似语言中，heap回收既是<code>非决定性的，non-deterministic</code>，也是<code>隐式的，implicit</code>。非决定性的，因为它出现未知的执行瞬时，以及是隐式的，因为它不需要指定回收语句。非决定性是糟糕的，但隐式的美好的。</p><p>区别于这两种技术，在Rust中，通常，heap的回收既是<code>决定性的，deterministic</code>，也是<code>隐式的，implicit</code>，这是Rust比起其它语言更大的优势。</p><p>这种可能性的实现，是因为遵循了基于“<code>所有者，ownership</code>”的概念，</p><h2 id="Ownership"><a class="header-anchor" href="#Ownership">¶</a>Ownership</h2><p>首先介绍术语“<strong><code>to own</code></strong>”。在计算机科学中，对于一个标识符或一个对象A，拥有(to own)对象B，意味着A可以对B进行回收，它有两个意义：</p><ul><li>Only A can deallocate B.</li><li>When A becomes unreachable, A must deallocate B.</li></ul><p>在Rust中没有显示的回收机制，因此这种定义可以复述为“A owns B means that B is deallocated  when and only when A becomes unreachable”。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">a</span> = <span class="number">3</span>;</span><br><span class="line">a = <span class="number">4</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">b</span> = <span class="built_in">vec!</span>[<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>];</span><br></pre></td></tr></table></figure><p>该程序，变量<code>a</code>拥有一个对象初始化值3，因为当<code>a</code>离开了它的scope，变成不可访问，该初始化值为3的对象被回收。我们也可以这样说“<code>a</code>是一个对象的所有者，它由值3初始化”。尽管，我们不能说“<code>a</code>拥有3”，因为3是一个值，不是对象；仅对象才能被拥有(owned)。在内存中，有很多对象值是3的，<code>a</code>拥有其中一个。在第二条语句中，该对象的值变为4；但它的拥有者没有变。</p><p>在最后一条语句中，<code>b</code>由一个5个元素的vector初始化。这个vector由一个头(header)和一个数据缓冲区(data buffer)；header的实现由一个结构体三个filed表示：一个执行data buffer的指针，两个数(capacity、len)；数据缓冲区包含5个条目，另外可能有额外的空间。这里我们可以说“<code>b</code>拥有vector的header，以及一个指针，该指针包含数据缓冲区的拥有者头(header)”。实际上，当<code>b</code>离开了它的scope，vector的头被回收；当vector的header被回收后，它包含的指针不可访问；当前的vector表示为一个空，因此缓冲区的条目被回收。</p><p>不是每个引用所有者是一个对象，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">a</span> = <span class="number">3</span>;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">a_ref</span> = &amp;a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, a);</span><br></pre></td></tr></table></figure><p>这里的<code>a_ref</code>变量拥有一个引用，但这个引用什么都没有。实际上，在这个嵌入块的结束位置，<code>a_ref</code>变量离开了它的scope，该引用被回收，但引用对象，即这个包含值3的对象，没有立即被回收，因为它必须在最后一条语句打印输出。</p><p>为了确保每个对象自动回收，Rust中有一个简单规则，在每个执行的瞬时，每个对象有且仅能有一个“owner”。当这个owner被回收，该对象自身被回收。如果一个对象有几个owner，这个对象可能被回收几次，这是不被允许的。如果对象没有owner，该对象从不被回收，这种情况叫做“内存泄露，memory leak”。</p><h2 id="Destructors"><a class="header-anchor" href="#Destructors">¶</a>Destructors</h2><p>我们看到对象的创建有两步：给对象分配内存，初始化这个内存空间的值。对于复杂对象，初始化是如此复杂，通常需要使用一个函数实现。这个函数叫“构造器”，用来“构造”一个新的对象。</p><p>我们刚看到，当一个对象被回收，会发生一些复杂情况。如果在heap中一个对象引用另一个对象，一个级联(cascade)的回收可能会发生。因此，对象的“销毁”可能需要由一个函数处理，称作“destructor，焚烧炉，销毁装置”。</p><p>通常销毁器是属于标准库的一部分，但有时你可能需要在对象回收时做一些cleanup code操作，所以你需要写一个destructor。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">CommunicationChannel</span> &#123;</span><br><span class="line">    address: <span class="type">String</span>,</span><br><span class="line">    port: <span class="type">u16</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Drop</span> <span class="keyword">for</span> <span class="title class_">CommunicationChannel</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">drop</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Closing port &#123;&#125;:&#123;&#125;&quot;</span>, <span class="keyword">self</span>.address, <span class="keyword">self</span>.port);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">CommunicationChannel</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">create</span>(address: &amp;<span class="type">str</span>, port: <span class="type">u16</span>) <span class="punctuation">-&gt;</span> CommunicationChannel &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Operning port &#123;&#125;:&#123;&#125;&quot;</span>, address, port);</span><br><span class="line">        CommunicationChannel &#123;</span><br><span class="line">            address: address.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">            port: port,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">send</span>(&amp;<span class="keyword">self</span>, msg: &amp;<span class="type">str</span>) &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Sent to &#123;&#125;:&#123;&#125; the message &#x27;&#123;&#125;&#x27;&quot;</span>, <span class="keyword">self</span>.address, <span class="keyword">self</span>.port, msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">channel</span> = CommunicationChannel::<span class="title function_ invoke__">create</span>(<span class="string">&quot;usb4&quot;</span>, <span class="number">879</span>);</span><br><span class="line">channel.<span class="title function_ invoke__">send</span>(<span class="string">&quot;Message 1&quot;</span>);</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">channel</span> = CommunicationChannel::<span class="title function_ invoke__">create</span>(<span class="string">&quot;eth1&quot;</span>, <span class="number">12000</span>);</span><br><span class="line">channel.<span class="title function_ invoke__">send</span>(<span class="string">&quot;Message 2&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">channel.<span class="title function_ invoke__">send</span>(<span class="string">&quot;Message 3&quot;</span>);</span><br></pre></td></tr></table></figure><p>该程序将打印：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Operning port usb4:879</span><br><span class="line">Sent to usb4:879 the message &#x27;Message 1&#x27;</span><br><span class="line">Operning port eth1:12000</span><br><span class="line">Sent to eth1:12000 the message &#x27;Message 2&#x27;</span><br><span class="line">Closing port eth1:12000</span><br><span class="line">Sent to usb4:879 the message &#x27;Message 3&#x27;</span><br><span class="line">Closing port usb4:879</span><br></pre></td></tr></table></figure><p>第二条语句声明新的类型CommunicationChannel用于实现<code>Drop</code>。这个trait有一个特有的方法<code>drop</code>，它会在对象被回收时自动被调用，因此它是一个“destructor”。通常，给一个类型创建一个销毁器，为该类型实现这个<code>Drop</code>trait即可。因为任何没有被定义的trait，不能在程序外部实现。</p><p>第三条语句是一个语句块，为结构体定义了两个方法：<code>create</code>构造器，<code>send</code>方法。</p><p>最后是应用代码。创建了一个CommunicationChannel，这个创建会打印一行内容。接着调用了send方法，打印第二行内容。接着是内嵌语句块，创建了另一个channel，打印第三、四行内容。</p><p>嵌套语句块内的变量名跟存在的变量名相同，这会导致变量投影(shadow)。</p><p>接着嵌套语句结束。这发生率内部变量被销毁，因此它的<code>drop</code>方法被调用，于是打印第五行。</p><p>现在，嵌套语句块结束后，第一个变量再次可见。<code>send</code>方法再次调用，打印一行。</p><p>最后，变量被销毁，打印最后一行。</p><p>在Rust中，内存早已由语言和标准库释放掉了，因此没有必要像C语言那样调用<code>free</code>函数，或像C++那样调用<code>delete</code>。但其他资源不会自动释放。因此销毁器(destructor)对于那些副作用的实现非常有用：诸如文件处理，通讯处理，GUI窗口，图形资源等，标准库中早已为资源的处理的任何类型提供了<code>Drop</code>实现。</p><p>销毁器可以更好地理解内存的管理。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> ( <span class="type">i32</span> );</span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Drop</span> <span class="keyword">for</span> <span class="title class_">S</span> &#123;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">drop</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;Dropped &#123;&#125;&quot;</span>, <span class="keyword">self</span>.<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_a</span> = <span class="title function_ invoke__">S</span> (<span class="number">1</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_b</span> = <span class="title function_ invoke__">S</span> (<span class="number">2</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_c</span> = <span class="title function_ invoke__">S</span> (<span class="number">3</span>);</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_d</span> = <span class="title function_ invoke__">S</span> (<span class="number">4</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_e</span> = <span class="title function_ invoke__">S</span> (<span class="number">5</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_f</span> = <span class="title function_ invoke__">S</span> (<span class="number">6</span>);</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;INNER&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;OUTER&quot;</span>);</span><br></pre></td></tr></table></figure><p>结果打印：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">INNER</span><br><span class="line">Dropped 6</span><br><span class="line">Dropped 5</span><br><span class="line">Dropped 4</span><br><span class="line">OUTER</span><br><span class="line">Dropped 3</span><br><span class="line">Dropped 2</span><br><span class="line">Dropped 1</span><br></pre></td></tr></table></figure><p>注意到对象的销毁的顺序跟构造顺序相反，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> ( <span class="type">i32</span> );</span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Drop</span> <span class="keyword">for</span> <span class="title class_">S</span> &#123;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">drop</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;Dropped &#123;&#125;&quot;</span>, <span class="keyword">self</span>.<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_</span> = <span class="title function_ invoke__">S</span> (<span class="number">1</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_</span> = <span class="title function_ invoke__">S</span> (<span class="number">2</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_</span> = <span class="title function_ invoke__">S</span> (<span class="number">3</span>);</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_</span> = <span class="title function_ invoke__">S</span> (<span class="number">4</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_</span> = <span class="title function_ invoke__">S</span> (<span class="number">5</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_</span> = <span class="title function_ invoke__">S</span> (<span class="number">6</span>);</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;INNER&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;OUTER&quot;</span>);</span><br></pre></td></tr></table></figure><p>结果将打印：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Dropped 1</span><br><span class="line">Dropped 2</span><br><span class="line">Dropped 3</span><br><span class="line">Dropped 4</span><br><span class="line">Dropped 5</span><br><span class="line">Dropped 6</span><br><span class="line">INNER</span><br><span class="line">OUTER</span><br></pre></td></tr></table></figure><p>因为只有占位符，因此所有对象都是临时的。临时对象在它们语句结束位置就销毁了，即统计到分号(<code>;</code>)立即销毁。</p><p>上面的程序和下面的是等价的，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> ( <span class="type">i32</span> );</span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Drop</span> <span class="keyword">for</span> <span class="title class_">S</span> &#123;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">drop</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;Dropped &#123;&#125;&quot;</span>, <span class="keyword">self</span>.<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_ invoke__">s</span> (<span class="number">1</span>);</span><br><span class="line"><span class="title function_ invoke__">S</span> (<span class="number">2</span>);</span><br><span class="line"><span class="title function_ invoke__">S</span> (<span class="number">3</span>);</span><br><span class="line">&#123;</span><br><span class="line"><span class="title function_ invoke__">S</span> (<span class="number">4</span>);</span><br><span class="line"><span class="title function_ invoke__">S</span> (<span class="number">5</span>);</span><br><span class="line"><span class="title function_ invoke__">S</span> (<span class="number">6</span>);</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;INNER&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;OUTER&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="Assignment-Semantics"><a class="header-anchor" href="#Assignment-Semantics">¶</a>Assignment Semantics</h2><p>下面程序做了什么？</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">v1</span> = <span class="built_in">vec!</span>[<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">v2</span> = v1;</span><br></pre></td></tr></table></figure><p>概念上，</p><p>首先，<code>v1</code>的标头(header)被分配到了栈。然后，<code>v1</code>的内容，会在堆为该内容分配一个缓冲区，<code>v1</code>的元素之被拷贝到这个缓冲区。然后标头(header)被初始化，作为引用指向新分配的堆缓冲。</p><p>然后，<code>v2</code>的标头被分配在栈。接着，用<code>v1</code>的值初始化<code>v2</code>。但，这是如何实现的？</p><p>通常至少有三种方式实现这种操作：</p><ul><li><p><strong><code>Share semantics</code></strong>：<code>v1</code>的标头被拷贝到<code>v2</code>的标头，其它不发生任何操作。因此，可以用<code>v1</code>，也可以用<code>v2</code>，它们都同时指向相同的堆缓冲区；因此，它们指向同样的内容，不是相等的，而是唯一的。这种术语的常见于垃圾回收语言，比如Java。</p></li><li><p><strong><code>Copy semantics</code></strong>：分配另外的堆缓冲。它和<code>v1</code>使用的缓冲区有同样的大小，并将先存的缓冲区内容拷贝到新的缓冲区。然后<code>v2</code>的标头被初始化指向新分配的缓冲区。因此，两个变量指向两个不同的缓冲区并且初始化的内容相同。这种实现，是C++的默认机制。</p></li><li><p><strong><code>Move semantics</code></strong>：<code>v1</code>的标头被拷贝到<code>v2</code>的标头，其它不发生任何操作。因此，<code>v2</code>可以使用，它的标头指向原先<code>v1</code>分配的堆缓冲区，但<code>v1</code>不能再被使用。这种实现，是Rust的默认机制。</p></li></ul><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">v1</span> = <span class="built_in">vec!</span>[<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">v2</span> = v1;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, v1.<span class="title function_ invoke__">len</span>());</span><br></pre></td></tr></table></figure><p>该代码产生编译错误：“use of moved value: <code>v1</code>”。当<code>v1</code>的值指派给<code>v2</code>是，变量<code>v1</code>终止并退出。再次使用是不被编译器允许的。</p><p>先看看，为什么Rust不实现<strong>share semantics</strong>。首先，如果变量是可变的，这种语义(semnatics)会有几分迷惑。在共享术语(share semantics)，通过一个变量更改一个条目，这个条目也可以被其它变量更改和访问。这不是直觉，可能是bug的根源。因此，共享术语(share senantics)仅在只读数据(read-only data)能被接收。</p><p>但这里有个大问题，对于内存回收。如果使用共享术语，<code>v1</code>和<code>v2</code>都将会拥有同一个单一的数据缓冲区，因此当他们被回收时，同样的堆缓冲区会被回收两次。一个缓冲区不能被分配两次，而不导致内存损耗以及引起程序崩溃(program malfunction)。要解决这个问题，语言本身需要在scope结束时不对变量使用的内进行回收，而是凭借GC处理。</p><p>相反，拷贝语义(copy semantics)和移动语义(move semantics)都是正确的。实际上，Rust规则上把回收看做是任何对象必须有且仅有一个owner。当使用拷贝语义时，原来的vector缓冲区还是原来的owner，即变量<code>v1</code>的标头，新创建的缓冲区，有新的owner引用，即<code>v2</code>的标头。另一方面，当使用移动语义时，原来单一vector缓冲区更改它的owner：分配之前，缓冲区的所有者是<code>v1</code>的标头reference，分配之后，所有者更改为<code>v2</code>的标头reference。在分配之前，<code>v2</code>的标头并不存在，分配之后，<code>v1</code>的标头不再存在。</p><p>那为什么Rust不实现拷贝语义(copy semantics)？</p><p>实际上，某些情况下，使用拷贝语义更合适，另一些情况下，使用移动语义更适合。甚至C++，从2011年开始，允许同时拷贝语义和移动语义。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">auto</span> v1 = std::vector&lt;<span class="type">int</span>&gt; &#123;<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>&#125;;</span><br><span class="line"><span class="type">const</span> <span class="keyword">auto</span> v2 = v1;</span><br><span class="line"><span class="type">const</span> <span class="keyword">auto</span> v3 = <span class="built_in">move</span>(v1);</span><br><span class="line">std::count &lt;&lt; v<span class="number">1.</span><span class="built_in">size</span>() &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; v<span class="number">2.</span><span class="built_in">size</span>() &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; v<span class="number">3.</span><span class="built_in">size</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这段C<ins>程序会打印：0 3 3。<code>v1</code>首先被拷贝到<code>v2</code>，然后移动到<code>v3</code>。C</ins>标准函数<code>move</code>会清空vector但不会让其undefined。因此，在最后，<code>v2</code>有三个元素的拷贝，<code>v3</code>就是原来的<code>v1</code>，<code>v1</code>变为空。</p><p>Rust中也允许拷贝语义和移动语义。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">v1</span> = <span class="built_in">vec!</span>[<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">v2</span> = v1.<span class="title function_ invoke__">clone</span>();</span><br><span class="line"><span class="keyword">let</span> <span class="variable">v3</span> = v1;</span><br><span class="line"><span class="comment">// ILLEGAL: print!(&quot;&#123;&#125; &quot;, v1.len());</span></span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125;&quot;</span>, v2.<span class="title function_ invoke__">len</span>(), v3.<span class="title function_ invoke__">len</span>());</span><br></pre></td></tr></table></figure><p>将会打印：3 3。</p><p>这段程序和C<ins>类似，但不能再访问<code>v1</code>了，因为它被移动了。因为C</ins>的默认语义是拷贝语义(copy semantics)，所以需要调用<code>move</code>标准函数来进行对象移动；而Rust的默认语义是移动语义(move semantics)，所以需要调用标准函数<code>clone</code>进行拷贝。</p><p>另外，<code>v1</code>虽已被移动，但仍然可访问，只不过内容为空，Rust中被移动的变量不可再被访问。</p><h2 id="Copying-vs-Moving-Performance"><a class="header-anchor" href="#Copying-vs-Moving-Performance">¶</a>Copying vs. Moving Performance</h2><p>Rust偏向于移动语义的选择是从性能方面考量的。对于拥有堆缓冲区的对象，比如vector，移动比拷贝要快，因为移动的仅是header，然而如果是拷贝一个vector，要求分配和初始化一个可能的堆缓冲区，它最终会被回收。</p><p>在C++中，被移动的对象意味着不在被使用了，但语言为了对遗留代码做后向兼容(backward-compatible)，被移动的对象仍然可以访问，这可能会给开发者再次使用该对象的机会。另外，清空一个被移动的vector有较小的消耗，即当一个vector被销毁，会检测它是否为空，这也有较小消耗。Rust被设计避免手动移动对象，因此不会有不正当的移动vector，因为编译器知道vector被移动了，可以产生更好的代码。</p><p>我们可以通过下面代码度量性能的影响，这并不简单，因为编译优化器会移除loop内的工作。</p><p>下面代码使用了拷贝语义。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::time::Instant;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">elapsed_ms</span>(t1: Instant, t2: Instant) <span class="punctuation">-&gt;</span> <span class="type">f64</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">t</span> = t2 - t1;</span><br><span class="line">    t.<span class="title function_ invoke__">as_secs</span>() <span class="keyword">as</span> <span class="type">f64</span> * <span class="number">1000</span>. + t.<span class="title function_ invoke__">subsec_nanos</span>() <span class="keyword">as</span> <span class="type">f64</span> / <span class="number">1e6</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> N_ITER: <span class="type">usize</span> = <span class="number">100_000_000</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">start_time</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..N_ITER &#123;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">v1</span> = <span class="built_in">vec!</span>[<span class="number">11</span>, <span class="number">22</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">v2</span> = v1.<span class="title function_ invoke__">clone</span>();    <span class="comment">// Copy semantics is used</span></span><br><span class="line">v2.<span class="title function_ invoke__">push</span>(i);</span><br><span class="line"><span class="keyword">if</span> v1[<span class="number">1</span>] + v2[<span class="number">2</span>] == v2[<span class="number">0</span>] &#123;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;Error&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">finish_time</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; ns per iteration\n&quot;</span>, <span class="title function_ invoke__">elapsed_ms</span>(start_time, finish_time) * <span class="number">1e6</span> / N_ITER <span class="keyword">as</span> <span class="type">f64</span>);</span><br></pre></td></tr></table></figure><p>下面是C++的等价实现，</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> n_iter = <span class="number">100000000</span>;</span><br><span class="line"><span class="keyword">auto</span> start_time = <span class="built_in">clock</span>();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n_iter; ++i) &#123;</span><br><span class="line"><span class="keyword">auto</span> v1 = std::vector&lt;<span class="type">int</span>&gt; &#123; <span class="number">11</span>, <span class="number">22</span> &#125;;</span><br><span class="line"><span class="keyword">auto</span> v2 = v1;<span class="comment">// Copy semantics is used</span></span><br><span class="line">v<span class="number">2.</span><span class="built_in">push_back</span>(i);</span><br><span class="line"><span class="keyword">if</span> (v2[<span class="number">1</span>] + v2[<span class="number">2</span>] = v2[<span class="number">0</span>]) &#123; std::cout &lt;&lt; <span class="string">&quot;Error&quot;</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">auto</span> finish_time = <span class="built_in">clock</span>();</span><br><span class="line">std::cout &lt;&lt; (finish_time - start_time) * <span class="number">1.e9</span> / CLOCKS_PER_SEC / n_iter &lt;&lt; <span class="string">&quot; ns per iteration\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>下面Rust程序使用了移动术语，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::time::Instant;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">elapsed_ms</span>(t1: Instant, t2: Instant) <span class="punctuation">-&gt;</span> <span class="type">f64</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">t</span> = t2 - t1;</span><br><span class="line">    t.<span class="title function_ invoke__">as_secs</span>() <span class="keyword">as</span> <span class="type">f64</span> * <span class="number">1000</span>. + t.<span class="title function_ invoke__">subsec_nanos</span>() <span class="keyword">as</span> <span class="type">f64</span> / <span class="number">1e6</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> N_ITER: <span class="type">usize</span> = <span class="number">100_000_000</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">start_time</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..N_ITER &#123;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">v1</span> = <span class="built_in">vec!</span>[<span class="number">11</span>, <span class="number">22</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">v2</span> = v1;    <span class="comment">// Move semantics is used</span></span><br><span class="line">v2.<span class="title function_ invoke__">push</span>(i);</span><br><span class="line"><span class="keyword">if</span> v1[<span class="number">1</span>] + v2[<span class="number">2</span>] == v2[<span class="number">0</span>] &#123;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;Error&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">finish_time</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; ns per iteration\n&quot;</span>, <span class="title function_ invoke__">elapsed_ms</span>(start_time, finish_time) * <span class="number">1e6</span> / N_ITER <span class="keyword">as</span> <span class="type">f64</span>);</span><br></pre></td></tr></table></figure><p>C++的等价实现为，</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> n_iter = <span class="number">100000000</span>;</span><br><span class="line"><span class="keyword">auto</span> start_time = <span class="built_in">clock</span>();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n_iter; ++i) &#123;</span><br><span class="line"><span class="keyword">auto</span> v1 = std::vector&lt;<span class="type">int</span>&gt; &#123; <span class="number">11</span>, <span class="number">22</span> &#125;;</span><br><span class="line"><span class="keyword">auto</span> v2 = <span class="built_in">move</span>(v1);<span class="comment">// Move semantics is used</span></span><br><span class="line">v<span class="number">2.</span><span class="built_in">push_back</span>(i);</span><br><span class="line"><span class="keyword">if</span> (v2[<span class="number">1</span>] + v2[<span class="number">2</span>] = v2[<span class="number">0</span>]) &#123; std::cout &lt;&lt; <span class="string">&quot;Error&quot;</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">auto</span> finish_time = <span class="built_in">clock</span>();</span><br><span class="line">std::cout &lt;&lt; (finish_time - start_time) * <span class="number">1.e9</span> / CLOCKS_PER_SEC / n_iter &lt;&lt; <span class="string">&quot; ns per iteration\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>下面是编译优化后的大致的时间损耗，</p><table><thead><tr><th></th><th>Rust</th><th>C++</th></tr></thead><tbody><tr><td>Copy semantics</td><td>157</td><td>87</td></tr><tr><td>Move semantics</td><td>67</td><td>67</td></tr></tbody></table><p>不管是在C<ins>还是Rust中，移动术语都要比拷贝术语要快。在这方面，移动术语两者都差不多，拷贝术语方面C</ins>要比Rust好很多。</p><h2 id="Moving-and-Destroying-Objects"><a class="header-anchor" href="#Moving-and-Destroying-Objects">¶</a>Moving and Destroying Objects</h2><p>所有这些概念不单是对vector，任何有缓冲区引用的对象都适用，譬如<code>String</code>或<code>Box</code>。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">s1</span> = <span class="string">&quot;abcd&quot;</span>.<span class="title function_ invoke__">to_string</span>();</span><br><span class="line"><span class="keyword">let</span> <span class="variable">s2</span> = s1.<span class="title function_ invoke__">clone</span>();</span><br><span class="line"><span class="keyword">let</span> <span class="variable">s3</span> = s1;</span><br><span class="line"><span class="comment">// ILLEGAL: print!(&quot;&#123;&#125; &quot;, s1.len());</span></span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125;&quot;</span>, s2.<span class="title function_ invoke__">len</span>(), s3.<span class="title function_ invoke__">len</span>());</span><br></pre></td></tr></table></figure><p>这和C++类似，</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">auto</span> s1 = std::string &#123; <span class="string">&quot;abcd&quot;</span> &#125;;</span><br><span class="line"><span class="type">const</span> <span class="keyword">auto</span> s2 = s1;</span><br><span class="line"><span class="type">const</span> <span class="keyword">auto</span> s3 = <span class="built_in">move</span>(s1);</span><br><span class="line">std::cout &lt;&lt; s<span class="number">1.</span><span class="built_in">size</span>() &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; s<span class="number">2.</span><span class="built_in">size</span>() &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; s<span class="number">3.</span><span class="built_in">size</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>前面说过，被移动的对象不能再访问，因此<code>s1</code>访问时会导致编译错误；而对于C++，原来的<code>s1</code>会置为空，所以会输出0 4 4。</p><p>对于<code>Box</code>类型，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">i1</span> = <span class="type">Box</span>::<span class="title function_ invoke__">new</span>(<span class="number">12345i16</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">i2</span> = i1.<span class="title function_ invoke__">clone</span>();</span><br><span class="line"><span class="keyword">let</span> <span class="variable">i3</span> = i1;</span><br><span class="line"><span class="comment">// ILLEGAL: print!(&quot;&#123;&#125; &quot;, i1);</span></span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125;&quot;</span>, i2, i3);</span><br></pre></td></tr></table></figure><p>对应的C++，</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">auto</span> i1 = std::unique_ptr&lt;<span class="type">short</span>&gt; &#123;</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">short</span>(<span class="number">12345</span>)</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">const</span> <span class="keyword">auto</span> i2 = std::unique_ptr&lt;<span class="type">short</span>&gt; &#123;</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">short</span>(*i1)</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">const</span> <span class="keyword">auto</span> i3 = <span class="built_in">move</span>(i1);</span><br><span class="line">std::cout &lt;&lt; (<span class="type">bool</span>)i1 &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; (<span class="type">bool</span>)i2 &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; (<span class="type">bool</span>)i3 &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; *i2 &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; *i3;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Rust程序会输出12345 12345，任何访问<code>i1</code>都会导致编译错误。C++会输出0 1 1 12345 12345。因为仅<code>i1</code>是null，它被移动到<code>i3</code>了。</p><p>仅当他们被用于初始化一个变量，给一个有值的变量重新赋值，对象不被移动，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">v1</span> = <span class="built_in">vec!</span>[<span class="literal">false</span>; <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">v2</span> = <span class="built_in">vec!</span>[<span class="literal">false</span>; <span class="number">2</span>];</span><br><span class="line">v2 = v1;</span><br><span class="line">v1;</span><br></pre></td></tr></table></figure><p>以及给函数参数传递值时，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">f</span>(v2: <span class="type">Vec</span>&lt;<span class="type">bool</span>&gt;) &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">v1</span> = <span class="built_in">vec!</span>[<span class="literal">false</span>; <span class="number">3</span>];</span><br><span class="line"><span class="title function_ invoke__">f</span>(v1);</span><br><span class="line">v1;</span><br></pre></td></tr></table></figure><p>以及指派的对象在当前没有实际堆分配时，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">v1</span> = <span class="built_in">vec!</span>[<span class="literal">false</span>; <span class="number">0</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">v2</span> = <span class="built_in">vec!</span>[<span class="literal">false</span>; <span class="number">0</span>];</span><br><span class="line">v2 = v1;</span><br><span class="line">v1;</span><br></pre></td></tr></table></figure><p>编译上面任何三条程序，最后一个语句都会导致“use of a moved value”的编译错误，</p><p>尤其是，在程序最后，<code>v1</code>被移动到<code>v2</code>，即使他们都为空，因此它们没有堆空间被使用。为什么？因为移动规则由编译器提供，因此它在运行期必须是独立的内容。</p><p>下面的代码，最后一行也会导致编译错误，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">s1</span> = S &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">s2</span> = s1;</span><br><span class="line">s1;</span><br></pre></td></tr></table></figure><p>编译器可以确切知道这个引用不会指向heap，但仍然编译报错。为什么Rust不为该类型使用拷贝语义？</p><p>它的基本原理是这样的。用户定义的类型<code>S</code>现在没有引用内存，但在将来软件维护的时候，指向堆的引用可能会被添加，即<code>S</code>可能会被作为字段(field)等。因此，如果为<code>S</code>实现了拷贝语义，当程序源被更改，一个<code>String</code>、<code>Box</code>、或集合，直接或间接地添加到<code>S</code>，会导致很多错误。因此，作为规则，最后保留移动语义。</p><h2 id="Need-for-Copy-Semantics"><a class="header-anchor" href="#Need-for-Copy-Semantics">¶</a>Need for Copy Semantics</h2><p>我们看到很多类型使用移动语义，包括vector，动态字符串，boxes，结构体… 下面的程序是合法的，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">i1</span> = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_i2</span> = i1;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">s1</span> = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_s2</span> = s1;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">r1</span> = &amp;i1;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_r2</span> = r1;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125; &#123;&#125;&quot;</span>, i1, s1, r1);</span><br></pre></td></tr></table></figure><p>结果将打印：“123 abc 123”。怎么来的？</p><p>首先，对于原生类型，静态字符串，引用，Rust不使用移动语义。对于这些数据类型，Rust使用拷贝语义。</p><p>为什么？前面看到，如果一个对象可以“拥有”一个或多个堆对象，它的类型应该实现移动语义；但如果不能“拥有”任何堆内存，它仅可以实现拷贝语义。移动语义对于原生类型来说是个麻烦的东西，而且它也不适合于被改变来“拥有”某些堆对象。因此，对于这些类型来说，拷贝语义是安全的、高效的、并且更方便。</p><p>因此，Rust中的某些类型实现了拷贝语义，另一些实现了移动语义。另外，numbers、Booleans、static strings、arrays、tuples、references实现了拷贝语义。相反，dynamic strings、boxes、集合(包括vectors)、enums、structs、tuple-structs均默认实现了移动语义。</p><h2 id="Cloning-Objects"><a class="header-anchor" href="#Cloning-Objects">¶</a>Cloning Objects</h2><p>然而，对于对象的拷贝，有另一种重要的区分。所有实现拷贝语义的类型可以通过指派的方式简单地拷贝；但对于移动语义的对象来说也可以进行拷贝，但需要使用标准库的<code>clone</code>。对于动态字符串、boxed对象、vector可以使用<code>clone</code>函数。但对于某些类型，不能使用<code>clone</code>函数，因为没有合适的拷贝类型。例如一个文件处理，一个GUI窗口处理，或一个互斥锁处理。如果你拷贝了它，然后销毁某一份拷贝，源资源会被释放，其它拷贝的处理会前后不一致：</p><p>因此，关于可被拷贝的能力，会有三种不同的对象：</p><ul><li>对象不“拥有”任何东西，拷贝是廉价的、容易的。</li><li>对象“拥有”某些堆对象，但不“拥有”内部资源，所以可以被拷贝，但运行期有较大损耗。</li><li>对象“拥有”内部资源，譬如文件处理、GUI窗口处理，所以它不能被拷贝。</li></ul><p>第一类对象，称为“可拷贝对象，copyable objects”，因为对于这类对象来说，拷贝更加高效。</p><p>第二种对象，称为“克隆而非拷贝对象，cloneable but non-copyable objects”，顾名思义，这类对象可以实现拷贝语义，但也应该实现移动语义，以避免运行期非必要的副本消耗。甚至，需要显式提供一个方法进行复制。</p><p>第三种类型，应该实现移动语义，但不应该提供复制方法，因为它拥有的资源不能在Rust代码复制，这种资源仅能有一个“owner”，所以这类称之为“不可拷贝对象，non-cloneable objects”。</p><p>当然，任何对象可自动被拷贝也可显式地被拷贝，所以任何可拷贝对象(copyable object)也是一个可克隆对象(cloneable object)。</p><p>总结，某些对象不能被克隆(如文件处理)，某些可以拷贝(显式地)，某些可以隐式拷贝(如数字)，某些不能拷贝(如集合)。</p><p>为了区分这三者，Rust标准库包含有两个特殊的trait：<code>Copy</code>和<code>Clone</code>。任何类型实现了<code>Copy</code>的是可拷贝的；任何类型实现了<code>Clone</code>是可克隆的。</p><p>因此，这三种可以文字描述为如下：</p><ul><li>对象实现了<code>Copy</code>和<code>Clone</code>的，包含拷贝语义，也可以显式克隆。例如原生类型。</li><li>对象实现了<code>Clone</code>，但没有实现<code>Copy</code>的，它们实现了移动语义，可以显式克隆。例如集合类型。</li><li>既没有实现<code>Copy</code>，也没有实现<code>Clone</code>的，属于不可复制，它们实现了移动语义，例如文件处理等。</li><li>没有对象是实现了<code>Copy</code>，却没有<code>Clone</code>的。这意味着对象的拷贝是隐式的，却不能显式调用，这是无意义的。</li></ul><p>下面例子展示所有的情况，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">a1</span> = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">b1</span> = a1.<span class="title function_ invoke__">clone</span>();</span><br><span class="line"><span class="keyword">let</span> <span class="variable">c1</span> = b1;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125; &#123;&#125;&quot;</span>, a1, b1, c1);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">a2</span> = <span class="type">Vec</span>::&lt;<span class="type">bool</span>&gt;::<span class="title function_ invoke__">new</span>();</span><br><span class="line"><span class="keyword">let</span> <span class="variable">b2</span> = a2.<span class="title function_ invoke__">clone</span>();</span><br><span class="line"><span class="keyword">let</span> <span class="variable">c2</span> = b2;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot; &#123;:?&#125;&quot;</span>, a2);</span><br><span class="line"><span class="comment">// ILLEGAL: print!(&quot; &#123;:?&#125;&quot;, b2);</span></span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot; &#123;:?&#125;&quot;</span>, c2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">a3</span> = std::fs::File::<span class="title function_ invoke__">open</span>(<span class="string">&quot;.&quot;</span>).<span class="title function_ invoke__">unwrap</span>();</span><br><span class="line"><span class="comment">// ILLEGAL: let b3 = a3.clone();</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">c3</span> = a3;</span><br><span class="line"><span class="comment">// ILLEGAL: print!(&quot; &#123;:?&#125;&quot;, a3);</span></span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot; &#123;:?&#125;&quot;</span>, c3);</span><br></pre></td></tr></table></figure><p>结果打印：“<code>123 123 123 [] [] File</code>”。</p><p>此处三处注释的地方是不合法的语句。</p><p>首先，<code>a1</code>是原生类型，所以这种类型可以隐式拷贝，也可以显式克隆(clone)。所以此处三个对象有同样的值，并打印输出。</p><p>因为<code>a2</code>是一个集合类型，这种类型可以克隆，但不能拷贝，所以<code>b2</code>可以通过<code>a2</code>显式克隆，对<code>b2</code>到<code>c2</code>的赋值是移动语义，<code>b2</code>不可再访问。</p><p>对于<code>a3</code>而言，它是一个文件handle，这种类型不能被克隆，尝试编译<code>a3.clone()</code>会出现编译错误，以及对<code>a3</code>到<code>c3</code>的赋值是移动语义，对象被移动了，<code>a3</code>不可再访问。</p><h2 id="Making-Types-Cloneable-or-Copyable"><a class="header-anchor" href="#Making-Types-Cloneable-or-Copyable">¶</a>Making Types Cloneable or Copyable</h2><p>前面说过，枚举，结构体，元组-结构体，默认都没有实现<code>Copy</code>和<code>Clone</code>。因此它是不可克隆的。因此，你可能需要仅实现<code>Clone</code>，又或<code>Copy</code>和<code>Clone</code>都需要有。</p><p>下面代码是不合法的，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">s</span> = S &#123;&#125;;</span><br><span class="line">s.<span class="title function_ invoke__">clone</span>();</span><br></pre></td></tr></table></figure><p>所以你会为其实现<code>Clone</code>，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> &#123;&#125; </span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Clone</span> <span class="keyword">for</span> <span class="title class_">S</span> &#123;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">clone</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123; <span class="keyword">Self</span> &#123;&#125; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">s</span> = S &#123;&#125;;</span><br><span class="line">s.<span class="title function_ invoke__">clone</span>();</span><br></pre></td></tr></table></figure><p>这些实现写法，在前面面向对象编程介绍过，你需要为其实现<code>clone</code>方法，</p><p>另外，实现的<code>Clone</code>方法，不能隐式使用拷贝语义，所以下面代码是不合法的，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> &#123;&#125;</span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Clone</span> <span class="keyword">for</span> <span class="title class_">S</span> &#123;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">clone</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123; <span class="keyword">Self</span> &#123;&#125; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">s</span> = S &#123;&#125;;</span><br><span class="line">s.<span class="title function_ invoke__">clone</span>();</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_s2</span> = s;</span><br><span class="line">s;</span><br></pre></td></tr></table></figure><p>所以，你需要实现<code>Copy</code>，使其合法，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> &#123;&#125;</span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Clone</span> <span class="keyword">for</span> <span class="title class_">S</span> &#123;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">clone</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123; <span class="keyword">Self</span> &#123;&#125; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Copy</span> <span class="keyword">for</span> <span class="title class_">S</span> &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">s</span> = S &#123;&#125;;</span><br><span class="line">s.<span class="title function_ invoke__">clone</span>();</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_s2</span> = s;</span><br><span class="line">s;</span><br></pre></td></tr></table></figure><p>主要到<code>Copy</code>的实现可以为空；只要声明了<code>Copy</code>的实现，拷贝语义就激活了。</p><p>下面写法却是不合法的，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> &#123;&#125;</span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Copy</span> <span class="keyword">for</span> <span class="title class_">S</span> &#123;&#125;</span><br></pre></td></tr></table></figure><p>编译器会抱怨：“<code>the trait bound </code>main::S:std::clone::Clone<code> is not satisfied</code>”。<code>Copy</code>的实现，前提条件是<code>Clone</code>也实现了，</p><p>但下面写法也是不合法的，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> &#123; x: <span class="type">Vec</span>&lt;<span class="type">i32</span>&gt; &#125;</span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Copy</span> <span class="keyword">for</span> <span class="title class_">S</span> &#123;&#125;</span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Clone</span> <span class="keyword">for</span> <span class="title class_">S</span> &#123;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">clone</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123; * <span class="keyword">self</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译产生错误信息，“the trait <code>Copy</code> may not be implemented for this type”。告诉你<code>Vec&lt;i2&gt;</code>类型没有实现<code>Copy</code>。</p><p>Rust允许实现<code>Copy</code>，仅能允许其类型是包含可拷贝对象的，因为拷贝对象，意味着会拷贝它的所有成员(members)。这里，<code>Vec</code>没有实现<code>Copy</code>，所以<code>S</code>也不能实现拷贝语义。</p><p>相反，下面代码是合法的，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">S</span> &#123; x: <span class="type">Vec</span>&lt;<span class="type">i32</span>&gt; &#125;</span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Clone</span> <span class="keyword">for</span> <span class="title class_">S</span> &#123;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">clone</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123;</span><br><span class="line">S &#123; x: <span class="keyword">self</span>.x.<span class="title function_ invoke__">clone</span>() &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">s1</span> = S &#123; x: <span class="built_in">vec!</span>[<span class="number">12</span>] &#125;;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">s2</span> = s1.<span class="title function_ invoke__">clone</span>();</span><br><span class="line">s1.x[<span class="number">0</span>] += <span class="number">1</span>;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125;&quot;</span>, s1.x[<span class="number">0</span>], s2.x[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure><p>结果将打印：“13 12”。</p><p>这里，<code>S</code>结构体不是可拷贝的，但却是可克隆的(clonable)，因为它实现了<code>Clone</code>。因此，<code>s1</code>可以对<code>s2</code>赋值。<code>s1</code>被修改，两者输出内容不同。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;本章覆盖有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;为什么决定性的(deterministic)、隐式(implicit)的对象销毁是Rust的一大亮点&lt;/li&gt;
&lt;li&gt;对象所有者(ownership)的概念&lt;/li&gt;
&lt;li&gt;为什么自定义销毁可能有用，怎么创建&lt;/li&gt;
&lt;li&gt;三种赋值语义：共享(share)、拷贝(copy)、移动(move)&lt;/li&gt;
&lt;li&gt;为什么隐式共享对软件正确性是糟糕的&lt;/li&gt;
&lt;li&gt;为什么对象的移动(move semantics)比起拷贝(copy semantics)可能有更好的性能&lt;/li&gt;
&lt;li&gt;为什么某些类型需要拷贝(copy semantics)，某些不需要，怎么区分&lt;/li&gt;
&lt;li&gt;为什么某些类型需要是不可复制的(non-cloneable)，怎么区分&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    <content src="https://galudisu.info/%3Cp%3E%E6%9C%AC%E7%AB%A0%E8%A6%86%E7%9B%96%E6%9C%89%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%E4%B8%BA%E4%BB%80%E4%B9%88%E5%86%B3%E5%AE%9A%E6%80%A7%E7%9A%84(deterministic)%E3%80%81%E9%9A%90%E5%BC%8F(implicit)%E7%9A%84%E5%AF%B9%E8%B1%A1%E9%94%80%E6%AF%81%E6%98%AFRust%E7%9A%84%E4%B8%80%E5%A4%A7%E4%BA%AE%E7%82%B9%3C/li%3E%3Cli%3E%E5%AF%B9%E8%B1%A1%E6%89%80%E6%9C%89%E8%80%85(ownership)%E7%9A%84%E6%A6%82%E5%BF%B5%3C/li%3E%3Cli%3E%E4%B8%BA%E4%BB%80%E4%B9%88%E8%87%AA%E5%AE%9A%E4%B9%89%E9%94%80%E6%AF%81%E5%8F%AF%E8%83%BD%E6%9C%89%E7%94%A8%EF%BC%8C%E6%80%8E%E4%B9%88%E5%88%9B%E5%BB%BA%3C/li%3E%3Cli%3E%E4%B8%89%E7%A7%8D%E8%B5%8B%E5%80%BC%E8%AF%AD%E4%B9%89%EF%BC%9A%E5%85%B1%E4%BA%AB(share)%E3%80%81%E6%8B%B7%E8%B4%9D(copy)%E3%80%81%E7%A7%BB%E5%8A%A8(move)%3C/li%3E%3Cli%3E%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9A%90%E5%BC%8F%E5%85%B1%E4%BA%AB%E5%AF%B9%E8%BD%AF%E4%BB%B6%E6%AD%A3%E7%A1%AE%E6%80%A7%E6%98%AF%E7%B3%9F%E7%B3%95%E7%9A%84%3C/li%3E%3Cli%3E%E4%B8%BA%E4%BB%80%E4%B9%88%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%A7%BB%E5%8A%A8(move%20semantics)%E6%AF%94%E8%B5%B7%E6%8B%B7%E8%B4%9D(copy%20semantics)%E5%8F%AF%E8%83%BD%E6%9C%89%E6%9B%B4%E5%A5%BD%E7%9A%84%E6%80%A7%E8%83%BD%3C/li%3E%3Cli%3E%E4%B8%BA%E4%BB%80%E4%B9%88%E6%9F%90%E4%BA%9B%E7%B1%BB%E5%9E%8B%E9%9C%80%E8%A6%81%E6%8B%B7%E8%B4%9D(copy%20semantics)%EF%BC%8C%E6%9F%90%E4%BA%9B%E4%B8%8D%E9%9C%80%E8%A6%81%EF%BC%8C%E6%80%8E%E4%B9%88%E5%8C%BA%E5%88%86%3C/li%3E%3Cli%3E%E4%B8%BA%E4%BB%80%E4%B9%88%E6%9F%90%E4%BA%9B%E7%B1%BB%E5%9E%8B%E9%9C%80%E8%A6%81%E6%98%AF%E4%B8%8D%E5%8F%AF%E5%A4%8D%E5%88%B6%E7%9A%84(non-cloneable)%EF%BC%8C%E6%80%8E%E4%B9%88%E5%8C%BA%E5%88%86%3C/li%3E%3C/ul%3E%3Cspan%20id=%22more%22%3E%3C/span%3E%3Ch2%20id=%22Deterministic-Destruction%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Deterministic-Destruction%22%3E%C2%B6%3C/a%3EDeterministic%20Destruction%3C/h2%3E%3Cp%3E%E5%89%8D%E9%9D%A2%EF%BC%8C%E6%88%91%E4%BB%AC%E7%9C%8B%E5%88%B0%E6%9C%89%E5%87%A0%E7%A7%8D%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%8C%E8%BF%99%E4%BA%9B%E5%88%86%E9%85%8D%E9%83%BD%E6%98%AF%E5%9C%A8stack%E5%92%8Cheap%E5%8F%91%E7%94%9F%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%E4%B8%B4%E6%97%B6%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%8C%E5%88%86%E9%85%8D%E5%9C%A8stack%EF%BC%9B%3C/li%3E%3Cli%3E%E5%8F%98%E9%87%8F(%E5%8C%85%E6%8B%AC%E6%95%B0%E7%BB%84)%EF%BC%8C%E5%88%86%E9%85%8D%E5%9C%A8stack%EF%BC%9B%3C/li%3E%3Cli%3E%E5%87%BD%E6%95%B0%E5%92%8C%E9%97%AD%E5%8C%85%E7%9A%84%E5%8F%82%E6%95%B0%EF%BC%8C%E5%88%86%E9%85%8D%E5%9C%A8stack%EF%BC%9B%3C/li%3E%3Cli%3E%3Ccode%3EBox%3C/code%3E%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%BC%95%E7%94%A8%E5%88%86%E9%85%8D%E5%9C%A8stack%EF%BC%8C%E5%BC%95%E7%94%A8%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%88%86%E9%85%8D%E5%9C%A8heap%EF%BC%9B%3C/li%3E%3Cli%3E%E5%8A%A8%E6%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E9%9B%86%E5%90%88(%E5%8C%85%E6%8B%ACvector%EF%BC%89,header%E5%88%86%E9%85%8D%E5%9C%A8stack%EF%BC%8C%E6%95%B0%E6%8D%AE%E5%88%86%E9%85%8D%E5%9C%A8heap%E3%80%82%3C/li%3E%3C/ul%3E%3Cp%3E%E5%AF%B9%E8%B1%A1%E2%80%9C%3Cstrong%3E%E7%9C%9F%E5%AE%9E%3C/strong%3E%E2%80%9D%E7%9A%84%E7%9E%AC%E6%97%B6%E5%88%86%E9%85%8D%E6%98%AF%E5%BE%88%E9%9A%BE%E9%A2%84%E6%B5%8B%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%AE%83%E5%8F%96%E5%86%B3%E4%BA%8E%E7%BC%96%E8%AF%91%E5%99%A8%E4%BC%98%E5%8C%96%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8C%E6%88%91%E4%BB%AC%E8%80%83%E8%99%91%E2%80%9C%3Cstrong%3E%E6%A6%82%E5%BF%B5%3C/strong%3E%E2%80%9D%E4%B8%8A%E7%9A%84%E7%9E%AC%E6%97%B6%E5%88%86%E9%85%8D%E6%83%85%E5%86%B5%E3%80%82%3C/p%3E%3Cp%3E%E6%A6%82%E5%BF%B5%E4%B8%8A%EF%BC%8C%E5%BD%93%E5%AF%B9%E5%BA%94%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%87%BA%E7%8E%B0%E5%9C%A8%E4%BB%A3%E7%A0%81%E6%97%B6%E5%8F%91%E7%94%9Fstack%E5%88%86%E9%85%8D%EF%BC%8C%E5%9B%A0%E6%AD%A4%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%E4%B8%B4%E6%97%B6%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%8C%E5%8F%98%E9%87%8F%EF%BC%8C%E6%95%B0%E7%BB%84%E5%9C%A8%E5%AE%83%E4%BB%AC%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%87%BA%E7%8E%B0%E5%9C%A8%E4%BB%A3%E7%A0%81%E6%97%B6%E8%A2%AB%E5%88%86%E9%85%8D%EF%BC%9B%3C/li%3E%3Cli%3E%E5%87%BD%E6%95%B0%E5%92%8C%E9%97%AD%E5%8C%85%E7%9A%84%E5%8F%82%E6%95%B0%EF%BC%8C%E5%9C%A8%E5%87%BD%E6%95%B0/%E9%97%AD%E5%8C%85%E8%A2%AB%E8%B0%83%E7%94%A8%E6%97%B6%E8%A2%AB%E5%88%86%E9%85%8D%EF%BC%9B%3C/li%3E%3Cli%3E%3Ccode%3EBox%3C/code%3E%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%8A%A8%E6%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8C%E9%9B%86%E5%90%88header%EF%BC%8C%E5%9C%A8%E4%BB%A3%E7%A0%81%E7%AC%AC%E4%B8%80%E5%87%BA%E7%8E%B0%E6%97%B6%E8%A2%AB%E5%88%86%E9%85%8D%E3%80%82%3C/li%3E%3C/ul%3E%3Cp%3Eheap%E7%9A%84%E5%BD%93%E9%9C%80%E8%A6%81%E8%BF%99%E4%BA%9B%E6%95%B0%E6%8D%AE%E6%97%B6%EF%BC%8C%E8%BF%9B%E8%A1%8Cheap%E5%88%86%E9%85%8D%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%3Ccode%3EBox%3C/code%3E%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%86%E9%85%8D%EF%BC%8C%E7%94%B1%3Ccode%3EBox::new%3C/code%3E%E5%87%BD%E6%95%B0%E8%A7%A6%E5%8F%91%EF%BC%9B%3C/li%3E%3Cli%3E%E5%8A%A8%E6%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%AD%97%E7%AC%A6%E5%88%86%E9%85%8D%EF%BC%8C%E5%9C%A8%E5%AD%97%E7%AC%A6%E8%A2%AB%E6%B7%BB%E5%8A%A0%E5%88%B0%E8%AF%A5%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%97%B6%E8%A7%A6%E5%8F%91%EF%BC%9B%3C/li%3E%3Cli%3E%E9%9B%86%E5%90%88%E5%86%85%E5%AE%B9%E7%9A%84%E5%88%86%E9%85%8D%EF%BC%8C%E5%87%BA%E7%8E%B0%E5%9C%A8%E6%9C%89%E6%95%B0%E6%8D%AE%E8%A2%AB%E6%B7%BB%E5%8A%A0%E5%88%B0%E9%9B%86%E5%90%88%E6%97%B6%E3%80%82%3C/li%3E%3C/ul%3E%3Cp%3E%E4%B8%8A%E9%9D%A2%E8%BF%99%E4%BA%9B%E8%B7%9F%E5%A4%A7%E5%A4%9A%E6%95%B0%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E6%B2%A1%E4%B8%8D%E5%90%8C%E4%B9%8B%E5%A4%84%E3%80%82%E9%82%A3%E4%B9%88%E6%95%B0%E6%8D%AE%E7%9A%84%E9%94%80%E6%AF%81%E5%9C%A8%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E5%8F%91%E7%94%9F%EF%BC%9F%3C/p%3E%3Cp%3E%E6%A6%82%E5%BF%B5%E4%B8%8A%EF%BC%8C%E5%9C%A8Rust%E4%B8%AD%EF%BC%8C%E5%BD%93%E8%BF%99%E4%BA%9B%E6%95%B0%E6%8D%AE%E4%B8%8D%E5%86%8D%E5%8F%AF%E8%A2%AB%E8%AE%BF%E9%97%AE%E6%97%B6%EF%BC%8C%E8%87%AA%E5%8A%A8%E9%94%80%E6%AF%81%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%E4%B8%B4%E6%97%B6%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%A2%AB%E5%9B%9E%E6%94%B6%EF%BC%8C%E5%BD%93%E5%AE%83%E5%9C%A8%E8%AF%AD%E5%8F%A5%E7%9A%84%E7%BB%93%E6%9D%9F%E4%BD%8D%E7%BD%AE(%E5%8D%B3%EF%BC%8C%E5%9C%A8%E4%B8%8B%E4%B8%80%E4%B8%AA%3Ccode%3E;%3C/code%3E%E4%BD%8D%E7%BD%AE%E6%88%96%E5%BD%93%E5%89%8Dscope%E7%9A%84%E7%BB%93%E6%9D%9F%E4%BD%8D%E7%BD%AE)%EF%BC%9B%3C/li%3E%3Cli%3E%E5%8F%98%E9%87%8F(%E5%8C%85%E6%8B%AC%E6%95%B0%E7%BB%84)%E8%A2%AB%E5%9B%9E%E6%94%B6%EF%BC%8C%E5%BD%93%E5%AE%83%E5%9C%A8scope%E7%9A%84%E5%A3%B0%E6%98%8E%E7%BB%93%E6%9D%9F%EF%BC%9B%3C/li%3E%3Cli%3E%E5%87%BD%E6%95%B0/%E9%97%AD%E5%8C%85%E7%9A%84%E5%8F%82%E6%95%B0%E7%9A%84%E5%9B%9E%E6%94%B6%EF%BC%8C%E5%87%BA%E7%8E%B0%E5%9C%A8%E5%87%BD%E6%95%B0/%E9%97%AD%E5%8C%85%E4%BD%93%E7%BB%93%E6%9D%9F%EF%BC%9B%3C/li%3E%3Cli%3E%3Ccode%3EBox%3C/code%3E%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%9B%9E%E6%94%B6%EF%BC%8C%E5%9C%A8%E5%BD%93%E5%89%8Dscope%E7%9A%84%E5%A3%B0%E6%98%8E%E7%BB%93%E6%9D%9F%EF%BC%9B%3C/li%3E%3Cli%3E%E5%8A%A8%E6%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%AD%97%E7%AC%A6%E8%A2%AB%E5%9B%9E%E6%94%B6%EF%BC%8C%E5%87%BA%E7%8E%B0%E5%9C%A8%E4%BB%8E%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E5%88%A0%E9%99%A4%E8%AF%A5%E5%AD%97%E7%AC%A6%E6%97%B6%EF%BC%8C%E6%88%96%E8%80%85%E6%95%B4%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%88%A0%E9%99%A4%E6%97%B6%EF%BC%9B%3C/li%3E%3Cli%3E%E9%9B%86%E5%90%88%E4%B8%AD%E7%9A%84%E6%9D%A1%E7%9B%AE%E8%A2%AB%E5%9B%9E%E6%94%B6%EF%BC%8C%E5%87%BA%E7%8E%B0%E5%9C%A8%E4%BB%8E%E9%9B%86%E5%90%88%E4%B8%AD%E5%88%A0%E9%99%A4%E8%AF%A5%E6%9D%A1%E7%9B%AE%E6%97%B6%EF%BC%8C%E6%88%96%E8%80%85%E6%95%B4%E4%B8%AA%E9%9B%86%E5%90%88%E8%A2%AB%E5%88%A0%E9%99%A4%E6%97%B6%E3%80%82%3C/li%3E%3C/ul%3E%3Cp%3E%E8%BF%99%E4%B8%80%E6%A6%82%E5%BF%B5%E4%BD%BF%E5%BE%97Rust%E5%92%8C%E5%A4%A7%E9%83%A8%E5%88%86%E8%AF%AD%E8%A8%80%E5%8C%BA%E5%88%86%E5%BC%80%E6%9D%A5%E3%80%82%E4%BB%BB%E4%BD%95%E8%AF%AD%E8%A8%80%E9%83%BD%E6%9C%89%E4%B8%B4%E6%97%B6%E5%AF%B9%E8%B1%A1%E6%88%96%E6%A0%88%E5%88%86%E9%85%8D(stack-allocated)%E5%AF%B9%E8%B1%A1%EF%BC%8C%E8%BF%99%E7%A7%8D%E5%AF%B9%E8%B1%A1%E6%98%AF%E8%87%AA%E5%8A%A8%E5%9B%9E%E6%94%B6%E7%9A%84%E3%80%82%E4%BD%86%E5%A0%86%E5%88%86%E9%85%8D(heap-allocated)%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%9B%9E%E6%94%B6%EF%BC%8C%E4%B8%8D%E5%90%8C%E8%AF%AD%E8%A8%80%E5%90%84%E4%B8%8D%E7%9B%B8%E5%90%8C%E3%80%82%3C/p%3E%3Cp%3E%E5%9C%A8%E6%9F%90%E4%BA%9B%E8%AF%AD%E8%A8%80%E4%B8%AD%EF%BC%8C%E8%AF%B8%E5%A6%82Pascal%EF%BC%8CC%EF%BC%8CC++%EF%BC%8Cheap%E4%B8%8A%E7%9A%84%E5%AF%B9%E8%B1%A1%E9%80%9A%E5%B8%B8%E4%BB%85%E8%83%BD%E6%98%BE%E5%BC%8F%E5%9C%B0%E8%B0%83%E7%94%A8%E7%B1%BB%E4%BC%BC%3Ccode%3Efree%3C/code%3E%E6%88%96%3Ccode%3Edelete%3C/code%3E%E8%BF%99%E4%BA%9B%E5%87%BD%E6%95%B0%E8%BF%9B%E8%A1%8C%E5%9B%9E%E6%94%B6%E3%80%82%E5%8F%A6%E4%B8%80%E4%BA%9B%E8%AF%AD%E8%A8%80%EF%BC%8C%E8%AF%B8%E5%A6%82Java%EF%BC%8CJavaScript%EF%BC%8CC+%EF%BC%8CPython%EF%BC%8C%E5%A0%86%E4%B8%8A%E7%9A%84%E5%AF%B9%E8%B1%A1%E4%B8%8D%E5%8F%AF%E8%AE%BF%E9%97%AE%E6%97%B6%EF%BC%8C%E5%B9%B6%E6%B2%A1%E6%9C%89%E7%AB%8B%E5%8D%B3%E8%BF%9B%E8%A1%8C%E5%9B%9E%E6%94%B6%EF%BC%8C%E8%80%8C%E6%98%AF%E6%9C%89%E4%B8%80%E4%B8%AA%E5%AE%9A%E6%9C%9F%E7%9A%84%E8%A1%8C%E7%A8%8B%EF%BC%8C%E7%94%A8%E6%9D%A5%E6%9F%A5%E6%89%BEheap%E4%B8%8D%E5%8F%AF%E8%BE%BE%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%B9%B6%E5%9B%9E%E6%94%B6%E8%BF%99%E4%BA%9B%E5%AF%B9%E8%B1%A1%E3%80%82%E8%BF%99%E7%A7%8D%E6%9C%BA%E5%88%B6%E7%A7%B0%E4%B8%BA%E2%80%9C%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E2%80%9D%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%AE%83%E7%B1%BB%E4%BC%BC%E5%9F%8E%E5%B8%82%E7%9A%84%E6%B8%85%E7%90%86%E7%B3%BB%E7%BB%9F%EF%BC%9A%E5%AE%83%E5%AE%9A%E6%9C%9F%E6%B8%85%E7%90%86%E5%9F%8E%E9%95%87%EF%BC%8C%E5%BD%93%E6%9C%89%E5%9E%83%E5%9C%BE%E5%A0%86%E7%A7%AF%E3%80%82%3C/p%3E%3Cp%3E%E5%9B%A0%E6%AD%A4%EF%BC%8C%E5%9C%A8C++%E5%92%8C%E7%B1%BB%E4%BC%BC%E8%AF%AD%E8%A8%80%E4%B8%AD%EF%BC%8Cheap%E5%9B%9E%E6%94%B6%E6%97%A2%E6%98%AF%3Ccode%3E%E5%86%B3%E5%AE%9A%E6%80%A7%E7%9A%84%EF%BC%8Cdeterministic%3C/code%3E%EF%BC%8C%E4%B9%9F%E6%98%AF%3Ccode%3E%E6%98%BE%E5%BC%8F%E7%9A%84%EF%BC%8Cexplicit%3C/code%3E%E3%80%82%E5%86%B3%E5%AE%9A%E6%80%A7%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%AE%83%E5%9C%A8%E6%BA%90%E4%BB%A3%E7%A0%81%E7%9A%84%E5%AE%9A%E4%B9%89%E4%BD%8D%E7%BD%AE%EF%BC%8C%E4%BB%A5%E5%8F%8A%E6%98%AF%E6%98%BE%E5%BC%8F%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%AE%83%E8%A6%81%E6%B1%82%E7%A8%8B%E5%BA%8F%E5%91%98%E7%BC%96%E5%86%99%E6%8C%87%E5%AE%9A%E7%9A%84%E5%9B%9E%E6%94%B6%E8%AF%AD%E5%8F%A5%E3%80%82%E5%86%B3%E5%AE%9A%E6%80%A7%E7%9A%84%E5%A5%BD%E5%A4%84%E5%9C%A8%E4%BA%8E%EF%BC%8C%E5%8F%AF%E8%83%BD%E6%9C%89%E6%9B%B4%E5%A5%BD%E7%9A%84%E6%80%A7%E8%83%BD%EF%BC%8C%E7%A8%8B%E5%BA%8F%E5%91%98%E5%8F%AF%E8%83%BD%E6%9B%B4%E5%A5%BD%E5%9C%B0%E6%8E%A7%E5%88%B6%E3%80%82%E4%BD%86%E6%98%BE%E5%BC%8F%E7%9A%84%E5%8D%B4%E4%B8%8D%E5%A5%BD%EF%BC%8C%E5%9B%A0%E4%B8%BA%E4%B8%8D%E8%83%BD%E9%81%BF%E5%85%8D%E5%87%BA%E7%8E%B0%E9%94%99%E8%AF%AF%E7%9A%84%E5%9B%9E%E6%94%B6%EF%BC%8C%E4%B8%91%E9%99%8B%E7%9A%84bug%E7%BB%93%E6%9E%9C%E3%80%82%3C/p%3E%3Cp%3E%E7%9B%B8%E5%8F%8D%EF%BC%8C%E5%9C%A8Java%E5%92%8C%E7%B1%BB%E4%BC%BC%E8%AF%AD%E8%A8%80%E4%B8%AD%EF%BC%8Cheap%E5%9B%9E%E6%94%B6%E6%97%A2%E6%98%AF%3Ccode%3E%E9%9D%9E%E5%86%B3%E5%AE%9A%E6%80%A7%E7%9A%84%EF%BC%8Cnon-deterministic%3C/code%3E%EF%BC%8C%E4%B9%9F%E6%98%AF%3Ccode%3E%E9%9A%90%E5%BC%8F%E7%9A%84%EF%BC%8Cimplicit%3C/code%3E%E3%80%82%E9%9D%9E%E5%86%B3%E5%AE%9A%E6%80%A7%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%AE%83%E5%87%BA%E7%8E%B0%E6%9C%AA%E7%9F%A5%E7%9A%84%E6%89%A7%E8%A1%8C%E7%9E%AC%E6%97%B6%EF%BC%8C%E4%BB%A5%E5%8F%8A%E6%98%AF%E9%9A%90%E5%BC%8F%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%AE%83%E4%B8%8D%E9%9C%80%E8%A6%81%E6%8C%87%E5%AE%9A%E5%9B%9E%E6%94%B6%E8%AF%AD%E5%8F%A5%E3%80%82%E9%9D%9E%E5%86%B3%E5%AE%9A%E6%80%A7%E6%98%AF%E7%B3%9F%E7%B3%95%E7%9A%84%EF%BC%8C%E4%BD%86%E9%9A%90%E5%BC%8F%E7%9A%84%E7%BE%8E%E5%A5%BD%E7%9A%84%E3%80%82%3C/p%3E%3Cp%3E%E5%8C%BA%E5%88%AB%E4%BA%8E%E8%BF%99%E4%B8%A4%E7%A7%8D%E6%8A%80%E6%9C%AF%EF%BC%8C%E5%9C%A8Rust%E4%B8%AD%EF%BC%8C%E9%80%9A%E5%B8%B8%EF%BC%8Cheap%E7%9A%84%E5%9B%9E%E6%94%B6%E6%97%A2%E6%98%AF%3Ccode%3E%E5%86%B3%E5%AE%9A%E6%80%A7%E7%9A%84%EF%BC%8Cdeterministic%3C/code%3E%EF%BC%8C%E4%B9%9F%E6%98%AF%3Ccode%3E%E9%9A%90%E5%BC%8F%E7%9A%84%EF%BC%8Cimplicit%3C/code%3E%EF%BC%8C%E8%BF%99%E6%98%AFRust%E6%AF%94%E8%B5%B7%E5%85%B6%E5%AE%83%E8%AF%AD%E8%A8%80%E6%9B%B4%E5%A4%A7%E7%9A%84%E4%BC%98%E5%8A%BF%E3%80%82%3C/p%3E%3Cp%3E%E8%BF%99%E7%A7%8D%E5%8F%AF%E8%83%BD%E6%80%A7%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%8C%E6%98%AF%E5%9B%A0%E4%B8%BA%E9%81%B5%E5%BE%AA%E4%BA%86%E5%9F%BA%E4%BA%8E%E2%80%9C%3Ccode%3E%E6%89%80%E6%9C%89%E8%80%85%EF%BC%8Cownership%3C/code%3E%E2%80%9D%E7%9A%84%E6%A6%82%E5%BF%B5%EF%BC%8C%3C/p%3E%3Ch2%20id=%22Ownership%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Ownership%22%3E%C2%B6%3C/a%3EOwnership%3C/h2%3E%3Cp%3E%E9%A6%96%E5%85%88%E4%BB%8B%E7%BB%8D%E6%9C%AF%E8%AF%AD%E2%80%9C%3Cstrong%3E%3Ccode%3Eto%20own%3C/code%3E%3C/strong%3E%E2%80%9D%E3%80%82%E5%9C%A8%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%AD%EF%BC%8C%E5%AF%B9%E4%BA%8E%E4%B8%80%E4%B8%AA%E6%A0%87%E8%AF%86%E7%AC%A6%E6%88%96%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1A%EF%BC%8C%E6%8B%A5%E6%9C%89(to%20own)%E5%AF%B9%E8%B1%A1B%EF%BC%8C%E6%84%8F%E5%91%B3%E7%9D%80A%E5%8F%AF%E4%BB%A5%E5%AF%B9B%E8%BF%9B%E8%A1%8C%E5%9B%9E%E6%94%B6%EF%BC%8C%E5%AE%83%E6%9C%89%E4%B8%A4%E4%B8%AA%E6%84%8F%E4%B9%89%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3EOnly%20A%20can%20deallocate%20B.%3C/li%3E%3Cli%3EWhen%20A%20becomes%20unreachable,%20A%20must%20deallocate%20B.%3C/li%3E%3C/ul%3E%3Cp%3E%E5%9C%A8Rust%E4%B8%AD%E6%B2%A1%E6%9C%89%E6%98%BE%E7%A4%BA%E7%9A%84%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6%EF%BC%8C%E5%9B%A0%E6%AD%A4%E8%BF%99%E7%A7%8D%E5%AE%9A%E4%B9%89%E5%8F%AF%E4%BB%A5%E5%A4%8D%E8%BF%B0%E4%B8%BA%E2%80%9CA%20owns%20B%20means%20that%20B%20is%20deallocated%20%20when%20and%20only%20when%20A%20becomes%20unreachable%E2%80%9D%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ea%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E3%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ea%20=%20%3Cspan%20class=%22number%22%3E4%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Eb%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22number%22%3E11%3C/span%3E,%20%3Cspan%20class=%22number%22%3E22%3C/span%3E,%20%3Cspan%20class=%22number%22%3E33%3C/span%3E,%20%3Cspan%20class=%22number%22%3E44%3C/span%3E,%20%3Cspan%20class=%22number%22%3E55%3C/span%3E];%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%AF%A5%E7%A8%8B%E5%BA%8F%EF%BC%8C%E5%8F%98%E9%87%8F%3Ccode%3Ea%3C/code%3E%E6%8B%A5%E6%9C%89%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%E5%88%9D%E5%A7%8B%E5%8C%96%E5%80%BC3%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%BD%93%3Ccode%3Ea%3C/code%3E%E7%A6%BB%E5%BC%80%E4%BA%86%E5%AE%83%E7%9A%84scope%EF%BC%8C%E5%8F%98%E6%88%90%E4%B8%8D%E5%8F%AF%E8%AE%BF%E9%97%AE%EF%BC%8C%E8%AF%A5%E5%88%9D%E5%A7%8B%E5%8C%96%E5%80%BC%E4%B8%BA3%E7%9A%84%E5%AF%B9%E8%B1%A1%E8%A2%AB%E5%9B%9E%E6%94%B6%E3%80%82%E6%88%91%E4%BB%AC%E4%B9%9F%E5%8F%AF%E4%BB%A5%E8%BF%99%E6%A0%B7%E8%AF%B4%E2%80%9C%3Ccode%3Ea%3C/code%3E%E6%98%AF%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%89%80%E6%9C%89%E8%80%85%EF%BC%8C%E5%AE%83%E7%94%B1%E5%80%BC3%E5%88%9D%E5%A7%8B%E5%8C%96%E2%80%9D%E3%80%82%E5%B0%BD%E7%AE%A1%EF%BC%8C%E6%88%91%E4%BB%AC%E4%B8%8D%E8%83%BD%E8%AF%B4%E2%80%9C%3Ccode%3Ea%3C/code%3E%E6%8B%A5%E6%9C%893%E2%80%9D%EF%BC%8C%E5%9B%A0%E4%B8%BA3%E6%98%AF%E4%B8%80%E4%B8%AA%E5%80%BC%EF%BC%8C%E4%B8%8D%E6%98%AF%E5%AF%B9%E8%B1%A1%EF%BC%9B%E4%BB%85%E5%AF%B9%E8%B1%A1%E6%89%8D%E8%83%BD%E8%A2%AB%E6%8B%A5%E6%9C%89(owned)%E3%80%82%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%EF%BC%8C%E6%9C%89%E5%BE%88%E5%A4%9A%E5%AF%B9%E8%B1%A1%E5%80%BC%E6%98%AF3%E7%9A%84%EF%BC%8C%3Ccode%3Ea%3C/code%3E%E6%8B%A5%E6%9C%89%E5%85%B6%E4%B8%AD%E4%B8%80%E4%B8%AA%E3%80%82%E5%9C%A8%E7%AC%AC%E4%BA%8C%E6%9D%A1%E8%AF%AD%E5%8F%A5%E4%B8%AD%EF%BC%8C%E8%AF%A5%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%80%BC%E5%8F%98%E4%B8%BA4%EF%BC%9B%E4%BD%86%E5%AE%83%E7%9A%84%E6%8B%A5%E6%9C%89%E8%80%85%E6%B2%A1%E6%9C%89%E5%8F%98%E3%80%82%3C/p%3E%3Cp%3E%E5%9C%A8%E6%9C%80%E5%90%8E%E4%B8%80%E6%9D%A1%E8%AF%AD%E5%8F%A5%E4%B8%AD%EF%BC%8C%3Ccode%3Eb%3C/code%3E%E7%94%B1%E4%B8%80%E4%B8%AA5%E4%B8%AA%E5%85%83%E7%B4%A0%E7%9A%84vector%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82%E8%BF%99%E4%B8%AAvector%E7%94%B1%E4%B8%80%E4%B8%AA%E5%A4%B4(header)%E5%92%8C%E4%B8%80%E4%B8%AA%E6%95%B0%E6%8D%AE%E7%BC%93%E5%86%B2%E5%8C%BA(data%20buffer)%EF%BC%9Bheader%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%94%B1%E4%B8%80%E4%B8%AA%E7%BB%93%E6%9E%84%E4%BD%93%E4%B8%89%E4%B8%AAfiled%E8%A1%A8%E7%A4%BA%EF%BC%9A%E4%B8%80%E4%B8%AA%E6%89%A7%E8%A1%8Cdata%20buffer%E7%9A%84%E6%8C%87%E9%92%88%EF%BC%8C%E4%B8%A4%E4%B8%AA%E6%95%B0(capacity%E3%80%81len)%EF%BC%9B%E6%95%B0%E6%8D%AE%E7%BC%93%E5%86%B2%E5%8C%BA%E5%8C%85%E5%90%AB5%E4%B8%AA%E6%9D%A1%E7%9B%AE%EF%BC%8C%E5%8F%A6%E5%A4%96%E5%8F%AF%E8%83%BD%E6%9C%89%E9%A2%9D%E5%A4%96%E7%9A%84%E7%A9%BA%E9%97%B4%E3%80%82%E8%BF%99%E9%87%8C%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E8%AF%B4%E2%80%9C%3Ccode%3Eb%3C/code%3E%E6%8B%A5%E6%9C%89vector%E7%9A%84header%EF%BC%8C%E4%BB%A5%E5%8F%8A%E4%B8%80%E4%B8%AA%E6%8C%87%E9%92%88%EF%BC%8C%E8%AF%A5%E6%8C%87%E9%92%88%E5%8C%85%E5%90%AB%E6%95%B0%E6%8D%AE%E7%BC%93%E5%86%B2%E5%8C%BA%E7%9A%84%E6%8B%A5%E6%9C%89%E8%80%85%E5%A4%B4(header)%E2%80%9D%E3%80%82%E5%AE%9E%E9%99%85%E4%B8%8A%EF%BC%8C%E5%BD%93%3Ccode%3Eb%3C/code%3E%E7%A6%BB%E5%BC%80%E4%BA%86%E5%AE%83%E7%9A%84scope%EF%BC%8Cvector%E7%9A%84%E5%A4%B4%E8%A2%AB%E5%9B%9E%E6%94%B6%EF%BC%9B%E5%BD%93vector%E7%9A%84header%E8%A2%AB%E5%9B%9E%E6%94%B6%E5%90%8E%EF%BC%8C%E5%AE%83%E5%8C%85%E5%90%AB%E7%9A%84%E6%8C%87%E9%92%88%E4%B8%8D%E5%8F%AF%E8%AE%BF%E9%97%AE%EF%BC%9B%E5%BD%93%E5%89%8D%E7%9A%84vector%E8%A1%A8%E7%A4%BA%E4%B8%BA%E4%B8%80%E4%B8%AA%E7%A9%BA%EF%BC%8C%E5%9B%A0%E6%AD%A4%E7%BC%93%E5%86%B2%E5%8C%BA%E7%9A%84%E6%9D%A1%E7%9B%AE%E8%A2%AB%E5%9B%9E%E6%94%B6%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%8D%E6%98%AF%E6%AF%8F%E4%B8%AA%E5%BC%95%E7%94%A8%E6%89%80%E6%9C%89%E8%80%85%E6%98%AF%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ea%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E3%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ea_ref%3C/span%3E%20=%20&amp;amp;a;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20a);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%BF%99%E9%87%8C%E7%9A%84%3Ccode%3Ea_ref%3C/code%3E%E5%8F%98%E9%87%8F%E6%8B%A5%E6%9C%89%E4%B8%80%E4%B8%AA%E5%BC%95%E7%94%A8%EF%BC%8C%E4%BD%86%E8%BF%99%E4%B8%AA%E5%BC%95%E7%94%A8%E4%BB%80%E4%B9%88%E9%83%BD%E6%B2%A1%E6%9C%89%E3%80%82%E5%AE%9E%E9%99%85%E4%B8%8A%EF%BC%8C%E5%9C%A8%E8%BF%99%E4%B8%AA%E5%B5%8C%E5%85%A5%E5%9D%97%E7%9A%84%E7%BB%93%E6%9D%9F%E4%BD%8D%E7%BD%AE%EF%BC%8C%3Ccode%3Ea_ref%3C/code%3E%E5%8F%98%E9%87%8F%E7%A6%BB%E5%BC%80%E4%BA%86%E5%AE%83%E7%9A%84scope%EF%BC%8C%E8%AF%A5%E5%BC%95%E7%94%A8%E8%A2%AB%E5%9B%9E%E6%94%B6%EF%BC%8C%E4%BD%86%E5%BC%95%E7%94%A8%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%8D%B3%E8%BF%99%E4%B8%AA%E5%8C%85%E5%90%AB%E5%80%BC3%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%B2%A1%E6%9C%89%E7%AB%8B%E5%8D%B3%E8%A2%AB%E5%9B%9E%E6%94%B6%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%AE%83%E5%BF%85%E9%A1%BB%E5%9C%A8%E6%9C%80%E5%90%8E%E4%B8%80%E6%9D%A1%E8%AF%AD%E5%8F%A5%E6%89%93%E5%8D%B0%E8%BE%93%E5%87%BA%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%BA%E4%BA%86%E7%A1%AE%E4%BF%9D%E6%AF%8F%E4%B8%AA%E5%AF%B9%E8%B1%A1%E8%87%AA%E5%8A%A8%E5%9B%9E%E6%94%B6%EF%BC%8CRust%E4%B8%AD%E6%9C%89%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E8%A7%84%E5%88%99%EF%BC%8C%E5%9C%A8%E6%AF%8F%E4%B8%AA%E6%89%A7%E8%A1%8C%E7%9A%84%E7%9E%AC%E6%97%B6%EF%BC%8C%E6%AF%8F%E4%B8%AA%E5%AF%B9%E8%B1%A1%E6%9C%89%E4%B8%94%E4%BB%85%E8%83%BD%E6%9C%89%E4%B8%80%E4%B8%AA%E2%80%9Cowner%E2%80%9D%E3%80%82%E5%BD%93%E8%BF%99%E4%B8%AAowner%E8%A2%AB%E5%9B%9E%E6%94%B6%EF%BC%8C%E8%AF%A5%E5%AF%B9%E8%B1%A1%E8%87%AA%E8%BA%AB%E8%A2%AB%E5%9B%9E%E6%94%B6%E3%80%82%E5%A6%82%E6%9E%9C%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%E6%9C%89%E5%87%A0%E4%B8%AAowner%EF%BC%8C%E8%BF%99%E4%B8%AA%E5%AF%B9%E8%B1%A1%E5%8F%AF%E8%83%BD%E8%A2%AB%E5%9B%9E%E6%94%B6%E5%87%A0%E6%AC%A1%EF%BC%8C%E8%BF%99%E6%98%AF%E4%B8%8D%E8%A2%AB%E5%85%81%E8%AE%B8%E7%9A%84%E3%80%82%E5%A6%82%E6%9E%9C%E5%AF%B9%E8%B1%A1%E6%B2%A1%E6%9C%89owner%EF%BC%8C%E8%AF%A5%E5%AF%B9%E8%B1%A1%E4%BB%8E%E4%B8%8D%E8%A2%AB%E5%9B%9E%E6%94%B6%EF%BC%8C%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%E5%8F%AB%E5%81%9A%E2%80%9C%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%EF%BC%8Cmemory%20leak%E2%80%9D%E3%80%82%3C/p%3E%3Ch2%20id=%22Destructors%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Destructors%22%3E%C2%B6%3C/a%3EDestructors%3C/h2%3E%3Cp%3E%E6%88%91%E4%BB%AC%E7%9C%8B%E5%88%B0%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA%E6%9C%89%E4%B8%A4%E6%AD%A5%EF%BC%9A%E7%BB%99%E5%AF%B9%E8%B1%A1%E5%88%86%E9%85%8D%E5%86%85%E5%AD%98%EF%BC%8C%E5%88%9D%E5%A7%8B%E5%8C%96%E8%BF%99%E4%B8%AA%E5%86%85%E5%AD%98%E7%A9%BA%E9%97%B4%E7%9A%84%E5%80%BC%E3%80%82%E5%AF%B9%E4%BA%8E%E5%A4%8D%E6%9D%82%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%88%9D%E5%A7%8B%E5%8C%96%E6%98%AF%E5%A6%82%E6%AD%A4%E5%A4%8D%E6%9D%82%EF%BC%8C%E9%80%9A%E5%B8%B8%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8%E4%B8%80%E4%B8%AA%E5%87%BD%E6%95%B0%E5%AE%9E%E7%8E%B0%E3%80%82%E8%BF%99%E4%B8%AA%E5%87%BD%E6%95%B0%E5%8F%AB%E2%80%9C%E6%9E%84%E9%80%A0%E5%99%A8%E2%80%9D%EF%BC%8C%E7%94%A8%E6%9D%A5%E2%80%9C%E6%9E%84%E9%80%A0%E2%80%9D%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E5%AF%B9%E8%B1%A1%E3%80%82%3C/p%3E%3Cp%3E%E6%88%91%E4%BB%AC%E5%88%9A%E7%9C%8B%E5%88%B0%EF%BC%8C%E5%BD%93%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%E8%A2%AB%E5%9B%9E%E6%94%B6%EF%BC%8C%E4%BC%9A%E5%8F%91%E7%94%9F%E4%B8%80%E4%BA%9B%E5%A4%8D%E6%9D%82%E6%83%85%E5%86%B5%E3%80%82%E5%A6%82%E6%9E%9C%E5%9C%A8heap%E4%B8%AD%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%E5%BC%95%E7%94%A8%E5%8F%A6%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%EF%BC%8C%E4%B8%80%E4%B8%AA%E7%BA%A7%E8%81%94(cascade)%E7%9A%84%E5%9B%9E%E6%94%B6%E5%8F%AF%E8%83%BD%E4%BC%9A%E5%8F%91%E7%94%9F%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8C%E5%AF%B9%E8%B1%A1%E7%9A%84%E2%80%9C%E9%94%80%E6%AF%81%E2%80%9D%E5%8F%AF%E8%83%BD%E9%9C%80%E8%A6%81%E7%94%B1%E4%B8%80%E4%B8%AA%E5%87%BD%E6%95%B0%E5%A4%84%E7%90%86%EF%BC%8C%E7%A7%B0%E4%BD%9C%E2%80%9Cdestructor%EF%BC%8C%E7%84%9A%E7%83%A7%E7%82%89%EF%BC%8C%E9%94%80%E6%AF%81%E8%A3%85%E7%BD%AE%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E9%80%9A%E5%B8%B8%E9%94%80%E6%AF%81%E5%99%A8%E6%98%AF%E5%B1%9E%E4%BA%8E%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%E4%B8%80%E9%83%A8%E5%88%86%EF%BC%8C%E4%BD%86%E6%9C%89%E6%97%B6%E4%BD%A0%E5%8F%AF%E8%83%BD%E9%9C%80%E8%A6%81%E5%9C%A8%E5%AF%B9%E8%B1%A1%E5%9B%9E%E6%94%B6%E6%97%B6%E5%81%9A%E4%B8%80%E4%BA%9Bcleanup%20code%E6%93%8D%E4%BD%9C%EF%BC%8C%E6%89%80%E4%BB%A5%E4%BD%A0%E9%9C%80%E8%A6%81%E5%86%99%E4%B8%80%E4%B8%AAdestructor%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E18%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E19%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E21%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E22%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E23%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E24%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E25%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E26%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E27%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E28%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ECommunicationChannel%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20address:%20%3Cspan%20class=%22type%22%3EString%3C/span%3E,%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20port:%20%3Cspan%20class=%22type%22%3Eu16%3C/span%3E,%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eimpl%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EDrop%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ECommunicationChannel%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Edrop%3C/span%3E(&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;Closing%20port%20&amp;#123;&amp;#125;:&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E.address,%20%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E.port);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eimpl%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ECommunicationChannel%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ecreate%3C/span%3E(address:%20&amp;amp;%3Cspan%20class=%22type%22%3Estr%3C/span%3E,%20port:%20%3Cspan%20class=%22type%22%3Eu16%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20CommunicationChannel%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;Operning%20port%20&amp;#123;&amp;#125;:&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20address,%20port);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20CommunicationChannel%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20address:%20address.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eto_string%3C/span%3E(),%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%20%20%20%20port:%20port,%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Esend%3C/span%3E(&amp;amp;%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E,%20msg:%20&amp;amp;%3Cspan%20class=%22type%22%3Estr%3C/span%3E)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;Sent%20to%20&amp;#123;&amp;#125;:&amp;#123;&amp;#125;%20the%20message%20&amp;#x27;&amp;#123;&amp;#125;&amp;#x27;&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E.address,%20%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E.port,%20msg);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Echannel%3C/span%3E%20=%20CommunicationChannel::%3Cspan%20class=%22title%20function_%20invoke__%22%3Ecreate%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;usb4&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22number%22%3E879%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Echannel.%3Cspan%20class=%22title%20function_%20invoke__%22%3Esend%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;Message%201&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Echannel%3C/span%3E%20=%20CommunicationChannel::%3Cspan%20class=%22title%20function_%20invoke__%22%3Ecreate%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;eth1&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22number%22%3E12000%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Echannel.%3Cspan%20class=%22title%20function_%20invoke__%22%3Esend%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;Message%202&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Echannel.%3Cspan%20class=%22title%20function_%20invoke__%22%3Esend%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;Message%203&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%AF%A5%E7%A8%8B%E5%BA%8F%E5%B0%86%E6%89%93%E5%8D%B0%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20plaintext%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3EOperning%20port%20usb4:879%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3ESent%20to%20usb4:879%20the%20message%20&amp;#x27;Message%201&amp;#x27;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EOperning%20port%20eth1:12000%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3ESent%20to%20eth1:12000%20the%20message%20&amp;#x27;Message%202&amp;#x27;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EClosing%20port%20eth1:12000%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3ESent%20to%20usb4:879%20the%20message%20&amp;#x27;Message%203&amp;#x27;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EClosing%20port%20usb4:879%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%AC%AC%E4%BA%8C%E6%9D%A1%E8%AF%AD%E5%8F%A5%E5%A3%B0%E6%98%8E%E6%96%B0%E7%9A%84%E7%B1%BB%E5%9E%8BCommunicationChannel%E7%94%A8%E4%BA%8E%E5%AE%9E%E7%8E%B0%3Ccode%3EDrop%3C/code%3E%E3%80%82%E8%BF%99%E4%B8%AAtrait%E6%9C%89%E4%B8%80%E4%B8%AA%E7%89%B9%E6%9C%89%E7%9A%84%E6%96%B9%E6%B3%95%3Ccode%3Edrop%3C/code%3E%EF%BC%8C%E5%AE%83%E4%BC%9A%E5%9C%A8%E5%AF%B9%E8%B1%A1%E8%A2%AB%E5%9B%9E%E6%94%B6%E6%97%B6%E8%87%AA%E5%8A%A8%E8%A2%AB%E8%B0%83%E7%94%A8%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%AE%83%E6%98%AF%E4%B8%80%E4%B8%AA%E2%80%9Cdestructor%E2%80%9D%E3%80%82%E9%80%9A%E5%B8%B8%EF%BC%8C%E7%BB%99%E4%B8%80%E4%B8%AA%E7%B1%BB%E5%9E%8B%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E9%94%80%E6%AF%81%E5%99%A8%EF%BC%8C%E4%B8%BA%E8%AF%A5%E7%B1%BB%E5%9E%8B%E5%AE%9E%E7%8E%B0%E8%BF%99%E4%B8%AA%3Ccode%3EDrop%3C/code%3Etrait%E5%8D%B3%E5%8F%AF%E3%80%82%E5%9B%A0%E4%B8%BA%E4%BB%BB%E4%BD%95%E6%B2%A1%E6%9C%89%E8%A2%AB%E5%AE%9A%E4%B9%89%E7%9A%84trait%EF%BC%8C%E4%B8%8D%E8%83%BD%E5%9C%A8%E7%A8%8B%E5%BA%8F%E5%A4%96%E9%83%A8%E5%AE%9E%E7%8E%B0%E3%80%82%3C/p%3E%3Cp%3E%E7%AC%AC%E4%B8%89%E6%9D%A1%E8%AF%AD%E5%8F%A5%E6%98%AF%E4%B8%80%E4%B8%AA%E8%AF%AD%E5%8F%A5%E5%9D%97%EF%BC%8C%E4%B8%BA%E7%BB%93%E6%9E%84%E4%BD%93%E5%AE%9A%E4%B9%89%E4%BA%86%E4%B8%A4%E4%B8%AA%E6%96%B9%E6%B3%95%EF%BC%9A%3Ccode%3Ecreate%3C/code%3E%E6%9E%84%E9%80%A0%E5%99%A8%EF%BC%8C%3Ccode%3Esend%3C/code%3E%E6%96%B9%E6%B3%95%E3%80%82%3C/p%3E%3Cp%3E%E6%9C%80%E5%90%8E%E6%98%AF%E5%BA%94%E7%94%A8%E4%BB%A3%E7%A0%81%E3%80%82%E5%88%9B%E5%BB%BA%E4%BA%86%E4%B8%80%E4%B8%AACommunicationChannel%EF%BC%8C%E8%BF%99%E4%B8%AA%E5%88%9B%E5%BB%BA%E4%BC%9A%E6%89%93%E5%8D%B0%E4%B8%80%E8%A1%8C%E5%86%85%E5%AE%B9%E3%80%82%E6%8E%A5%E7%9D%80%E8%B0%83%E7%94%A8%E4%BA%86send%E6%96%B9%E6%B3%95%EF%BC%8C%E6%89%93%E5%8D%B0%E7%AC%AC%E4%BA%8C%E8%A1%8C%E5%86%85%E5%AE%B9%E3%80%82%E6%8E%A5%E7%9D%80%E6%98%AF%E5%86%85%E5%B5%8C%E8%AF%AD%E5%8F%A5%E5%9D%97%EF%BC%8C%E5%88%9B%E5%BB%BA%E4%BA%86%E5%8F%A6%E4%B8%80%E4%B8%AAchannel%EF%BC%8C%E6%89%93%E5%8D%B0%E7%AC%AC%E4%B8%89%E3%80%81%E5%9B%9B%E8%A1%8C%E5%86%85%E5%AE%B9%E3%80%82%3C/p%3E%3Cp%3E%E5%B5%8C%E5%A5%97%E8%AF%AD%E5%8F%A5%E5%9D%97%E5%86%85%E7%9A%84%E5%8F%98%E9%87%8F%E5%90%8D%E8%B7%9F%E5%AD%98%E5%9C%A8%E7%9A%84%E5%8F%98%E9%87%8F%E5%90%8D%E7%9B%B8%E5%90%8C%EF%BC%8C%E8%BF%99%E4%BC%9A%E5%AF%BC%E8%87%B4%E5%8F%98%E9%87%8F%E6%8A%95%E5%BD%B1(shadow)%E3%80%82%3C/p%3E%3Cp%3E%E6%8E%A5%E7%9D%80%E5%B5%8C%E5%A5%97%E8%AF%AD%E5%8F%A5%E7%BB%93%E6%9D%9F%E3%80%82%E8%BF%99%E5%8F%91%E7%94%9F%E7%8E%87%E5%86%85%E9%83%A8%E5%8F%98%E9%87%8F%E8%A2%AB%E9%94%80%E6%AF%81%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%AE%83%E7%9A%84%3Ccode%3Edrop%3C/code%3E%E6%96%B9%E6%B3%95%E8%A2%AB%E8%B0%83%E7%94%A8%EF%BC%8C%E4%BA%8E%E6%98%AF%E6%89%93%E5%8D%B0%E7%AC%AC%E4%BA%94%E8%A1%8C%E3%80%82%3C/p%3E%3Cp%3E%E7%8E%B0%E5%9C%A8%EF%BC%8C%E5%B5%8C%E5%A5%97%E8%AF%AD%E5%8F%A5%E5%9D%97%E7%BB%93%E6%9D%9F%E5%90%8E%EF%BC%8C%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8F%98%E9%87%8F%E5%86%8D%E6%AC%A1%E5%8F%AF%E8%A7%81%E3%80%82%3Ccode%3Esend%3C/code%3E%E6%96%B9%E6%B3%95%E5%86%8D%E6%AC%A1%E8%B0%83%E7%94%A8%EF%BC%8C%E6%89%93%E5%8D%B0%E4%B8%80%E8%A1%8C%E3%80%82%3C/p%3E%3Cp%3E%E6%9C%80%E5%90%8E%EF%BC%8C%E5%8F%98%E9%87%8F%E8%A2%AB%E9%94%80%E6%AF%81%EF%BC%8C%E6%89%93%E5%8D%B0%E6%9C%80%E5%90%8E%E4%B8%80%E8%A1%8C%E3%80%82%3C/p%3E%3Cp%3E%E5%9C%A8Rust%E4%B8%AD%EF%BC%8C%E5%86%85%E5%AD%98%E6%97%A9%E5%B7%B2%E7%94%B1%E8%AF%AD%E8%A8%80%E5%92%8C%E6%A0%87%E5%87%86%E5%BA%93%E9%87%8A%E6%94%BE%E6%8E%89%E4%BA%86%EF%BC%8C%E5%9B%A0%E6%AD%A4%E6%B2%A1%E6%9C%89%E5%BF%85%E8%A6%81%E5%83%8FC%E8%AF%AD%E8%A8%80%E9%82%A3%E6%A0%B7%E8%B0%83%E7%94%A8%3Ccode%3Efree%3C/code%3E%E5%87%BD%E6%95%B0%EF%BC%8C%E6%88%96%E5%83%8FC++%E9%82%A3%E6%A0%B7%E8%B0%83%E7%94%A8%3Ccode%3Edelete%3C/code%3E%E3%80%82%E4%BD%86%E5%85%B6%E4%BB%96%E8%B5%84%E6%BA%90%E4%B8%8D%E4%BC%9A%E8%87%AA%E5%8A%A8%E9%87%8A%E6%94%BE%E3%80%82%E5%9B%A0%E6%AD%A4%E9%94%80%E6%AF%81%E5%99%A8(destructor)%E5%AF%B9%E4%BA%8E%E9%82%A3%E4%BA%9B%E5%89%AF%E4%BD%9C%E7%94%A8%E7%9A%84%E5%AE%9E%E7%8E%B0%E9%9D%9E%E5%B8%B8%E6%9C%89%E7%94%A8%EF%BC%9A%E8%AF%B8%E5%A6%82%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86%EF%BC%8C%E9%80%9A%E8%AE%AF%E5%A4%84%E7%90%86%EF%BC%8CGUI%E7%AA%97%E5%8F%A3%EF%BC%8C%E5%9B%BE%E5%BD%A2%E8%B5%84%E6%BA%90%E7%AD%89%EF%BC%8C%E6%A0%87%E5%87%86%E5%BA%93%E4%B8%AD%E6%97%A9%E5%B7%B2%E4%B8%BA%E8%B5%84%E6%BA%90%E7%9A%84%E5%A4%84%E7%90%86%E7%9A%84%E4%BB%BB%E4%BD%95%E7%B1%BB%E5%9E%8B%E6%8F%90%E4%BE%9B%E4%BA%86%3Ccode%3EDrop%3C/code%3E%E5%AE%9E%E7%8E%B0%E3%80%82%3C/p%3E%3Cp%3E%E9%94%80%E6%AF%81%E5%99%A8%E5%8F%AF%E4%BB%A5%E6%9B%B4%E5%A5%BD%E5%9C%B0%E7%90%86%E8%A7%A3%E5%86%85%E5%AD%98%E7%9A%84%E7%AE%A1%E7%90%86%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20(%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E%20);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eimpl%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EDrop%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Edrop%3C/span%3E(&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;Dropped%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E.%3Cspan%20class=%22number%22%3E0%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_a%3C/span%3E%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3ES%3C/span%3E%20(%3Cspan%20class=%22number%22%3E1%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_b%3C/span%3E%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3ES%3C/span%3E%20(%3Cspan%20class=%22number%22%3E2%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_c%3C/span%3E%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3ES%3C/span%3E%20(%3Cspan%20class=%22number%22%3E3%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_d%3C/span%3E%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3ES%3C/span%3E%20(%3Cspan%20class=%22number%22%3E4%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_e%3C/span%3E%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3ES%3C/span%3E%20(%3Cspan%20class=%22number%22%3E5%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_f%3C/span%3E%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3ES%3C/span%3E%20(%3Cspan%20class=%22number%22%3E6%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;INNER&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;OUTER&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BB%93%E6%9E%9C%E6%89%93%E5%8D%B0%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20plaintext%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3EINNER%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EDropped%206%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EDropped%205%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EDropped%204%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EOUTER%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EDropped%203%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EDropped%202%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EDropped%201%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E6%B3%A8%E6%84%8F%E5%88%B0%E5%AF%B9%E8%B1%A1%E7%9A%84%E9%94%80%E6%AF%81%E7%9A%84%E9%A1%BA%E5%BA%8F%E8%B7%9F%E6%9E%84%E9%80%A0%E9%A1%BA%E5%BA%8F%E7%9B%B8%E5%8F%8D%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20(%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E%20);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eimpl%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EDrop%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Edrop%3C/span%3E(&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;Dropped%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E.%3Cspan%20class=%22number%22%3E0%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_%3C/span%3E%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3ES%3C/span%3E%20(%3Cspan%20class=%22number%22%3E1%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_%3C/span%3E%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3ES%3C/span%3E%20(%3Cspan%20class=%22number%22%3E2%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_%3C/span%3E%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3ES%3C/span%3E%20(%3Cspan%20class=%22number%22%3E3%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_%3C/span%3E%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3ES%3C/span%3E%20(%3Cspan%20class=%22number%22%3E4%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_%3C/span%3E%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3ES%3C/span%3E%20(%3Cspan%20class=%22number%22%3E5%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_%3C/span%3E%20=%20%3Cspan%20class=%22title%20function_%20invoke__%22%3ES%3C/span%3E%20(%3Cspan%20class=%22number%22%3E6%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;INNER&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;OUTER&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BB%93%E6%9E%9C%E5%B0%86%E6%89%93%E5%8D%B0%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20plaintext%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3EDropped%201%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EDropped%202%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EDropped%203%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EDropped%204%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EDropped%205%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EDropped%206%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EINNER%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EOUTER%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%9B%A0%E4%B8%BA%E5%8F%AA%E6%9C%89%E5%8D%A0%E4%BD%8D%E7%AC%A6%EF%BC%8C%E5%9B%A0%E6%AD%A4%E6%89%80%E6%9C%89%E5%AF%B9%E8%B1%A1%E9%83%BD%E6%98%AF%E4%B8%B4%E6%97%B6%E7%9A%84%E3%80%82%E4%B8%B4%E6%97%B6%E5%AF%B9%E8%B1%A1%E5%9C%A8%E5%AE%83%E4%BB%AC%E8%AF%AD%E5%8F%A5%E7%BB%93%E6%9D%9F%E4%BD%8D%E7%BD%AE%E5%B0%B1%E9%94%80%E6%AF%81%E4%BA%86%EF%BC%8C%E5%8D%B3%E7%BB%9F%E8%AE%A1%E5%88%B0%E5%88%86%E5%8F%B7(%3Ccode%3E;%3C/code%3E)%E7%AB%8B%E5%8D%B3%E9%94%80%E6%AF%81%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%8A%E9%9D%A2%E7%9A%84%E7%A8%8B%E5%BA%8F%E5%92%8C%E4%B8%8B%E9%9D%A2%E7%9A%84%E6%98%AF%E7%AD%89%E4%BB%B7%E7%9A%84%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20(%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E%20);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eimpl%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EDrop%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Edrop%3C/span%3E(&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;Dropped%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E.%3Cspan%20class=%22number%22%3E0%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22title%20function_%20invoke__%22%3Es%3C/span%3E%20(%3Cspan%20class=%22number%22%3E1%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22title%20function_%20invoke__%22%3ES%3C/span%3E%20(%3Cspan%20class=%22number%22%3E2%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22title%20function_%20invoke__%22%3ES%3C/span%3E%20(%3Cspan%20class=%22number%22%3E3%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22title%20function_%20invoke__%22%3ES%3C/span%3E%20(%3Cspan%20class=%22number%22%3E4%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22title%20function_%20invoke__%22%3ES%3C/span%3E%20(%3Cspan%20class=%22number%22%3E5%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22title%20function_%20invoke__%22%3ES%3C/span%3E%20(%3Cspan%20class=%22number%22%3E6%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;INNER&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;OUTER&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Ch2%20id=%22Assignment-Semantics%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Assignment-Semantics%22%3E%C2%B6%3C/a%3EAssignment%20Semantics%3C/h2%3E%3Cp%3E%E4%B8%8B%E9%9D%A2%E7%A8%8B%E5%BA%8F%E5%81%9A%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev1%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22number%22%3E11%3C/span%3E,%20%3Cspan%20class=%22number%22%3E22%3C/span%3E,%20%3Cspan%20class=%22number%22%3E33%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev2%3C/span%3E%20=%20v1;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E6%A6%82%E5%BF%B5%E4%B8%8A%EF%BC%8C%3C/p%3E%3Cp%3E%E9%A6%96%E5%85%88%EF%BC%8C%3Ccode%3Ev1%3C/code%3E%E7%9A%84%E6%A0%87%E5%A4%B4(header)%E8%A2%AB%E5%88%86%E9%85%8D%E5%88%B0%E4%BA%86%E6%A0%88%E3%80%82%E7%84%B6%E5%90%8E%EF%BC%8C%3Ccode%3Ev1%3C/code%3E%E7%9A%84%E5%86%85%E5%AE%B9%EF%BC%8C%E4%BC%9A%E5%9C%A8%E5%A0%86%E4%B8%BA%E8%AF%A5%E5%86%85%E5%AE%B9%E5%88%86%E9%85%8D%E4%B8%80%E4%B8%AA%E7%BC%93%E5%86%B2%E5%8C%BA%EF%BC%8C%3Ccode%3Ev1%3C/code%3E%E7%9A%84%E5%85%83%E7%B4%A0%E4%B9%8B%E8%A2%AB%E6%8B%B7%E8%B4%9D%E5%88%B0%E8%BF%99%E4%B8%AA%E7%BC%93%E5%86%B2%E5%8C%BA%E3%80%82%E7%84%B6%E5%90%8E%E6%A0%87%E5%A4%B4(header)%E8%A2%AB%E5%88%9D%E5%A7%8B%E5%8C%96%EF%BC%8C%E4%BD%9C%E4%B8%BA%E5%BC%95%E7%94%A8%E6%8C%87%E5%90%91%E6%96%B0%E5%88%86%E9%85%8D%E7%9A%84%E5%A0%86%E7%BC%93%E5%86%B2%E3%80%82%3C/p%3E%3Cp%3E%E7%84%B6%E5%90%8E%EF%BC%8C%3Ccode%3Ev2%3C/code%3E%E7%9A%84%E6%A0%87%E5%A4%B4%E8%A2%AB%E5%88%86%E9%85%8D%E5%9C%A8%E6%A0%88%E3%80%82%E6%8E%A5%E7%9D%80%EF%BC%8C%E7%94%A8%3Ccode%3Ev1%3C/code%3E%E7%9A%84%E5%80%BC%E5%88%9D%E5%A7%8B%E5%8C%96%3Ccode%3Ev2%3C/code%3E%E3%80%82%E4%BD%86%EF%BC%8C%E8%BF%99%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%9A%84%EF%BC%9F%3C/p%3E%3Cp%3E%E9%80%9A%E5%B8%B8%E8%87%B3%E5%B0%91%E6%9C%89%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0%E8%BF%99%E7%A7%8D%E6%93%8D%E4%BD%9C%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%3Cp%3E%3Cstrong%3E%3Ccode%3EShare%20semantics%3C/code%3E%3C/strong%3E%EF%BC%9A%3Ccode%3Ev1%3C/code%3E%E7%9A%84%E6%A0%87%E5%A4%B4%E8%A2%AB%E6%8B%B7%E8%B4%9D%E5%88%B0%3Ccode%3Ev2%3C/code%3E%E7%9A%84%E6%A0%87%E5%A4%B4%EF%BC%8C%E5%85%B6%E5%AE%83%E4%B8%8D%E5%8F%91%E7%94%9F%E4%BB%BB%E4%BD%95%E6%93%8D%E4%BD%9C%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%94%A8%3Ccode%3Ev1%3C/code%3E%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E7%94%A8%3Ccode%3Ev2%3C/code%3E%EF%BC%8C%E5%AE%83%E4%BB%AC%E9%83%BD%E5%90%8C%E6%97%B6%E6%8C%87%E5%90%91%E7%9B%B8%E5%90%8C%E7%9A%84%E5%A0%86%E7%BC%93%E5%86%B2%E5%8C%BA%EF%BC%9B%E5%9B%A0%E6%AD%A4%EF%BC%8C%E5%AE%83%E4%BB%AC%E6%8C%87%E5%90%91%E5%90%8C%E6%A0%B7%E7%9A%84%E5%86%85%E5%AE%B9%EF%BC%8C%E4%B8%8D%E6%98%AF%E7%9B%B8%E7%AD%89%E7%9A%84%EF%BC%8C%E8%80%8C%E6%98%AF%E5%94%AF%E4%B8%80%E7%9A%84%E3%80%82%E8%BF%99%E7%A7%8D%E6%9C%AF%E8%AF%AD%E7%9A%84%E5%B8%B8%E8%A7%81%E4%BA%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E8%AF%AD%E8%A8%80%EF%BC%8C%E6%AF%94%E5%A6%82Java%E3%80%82%3C/p%3E%3C/li%3E%3Cli%3E%3Cp%3E%3Cstrong%3E%3Ccode%3ECopy%20semantics%3C/code%3E%3C/strong%3E%EF%BC%9A%E5%88%86%E9%85%8D%E5%8F%A6%E5%A4%96%E7%9A%84%E5%A0%86%E7%BC%93%E5%86%B2%E3%80%82%E5%AE%83%E5%92%8C%3Ccode%3Ev1%3C/code%3E%E4%BD%BF%E7%94%A8%E7%9A%84%E7%BC%93%E5%86%B2%E5%8C%BA%E6%9C%89%E5%90%8C%E6%A0%B7%E7%9A%84%E5%A4%A7%E5%B0%8F%EF%BC%8C%E5%B9%B6%E5%B0%86%E5%85%88%E5%AD%98%E7%9A%84%E7%BC%93%E5%86%B2%E5%8C%BA%E5%86%85%E5%AE%B9%E6%8B%B7%E8%B4%9D%E5%88%B0%E6%96%B0%E7%9A%84%E7%BC%93%E5%86%B2%E5%8C%BA%E3%80%82%E7%84%B6%E5%90%8E%3Ccode%3Ev2%3C/code%3E%E7%9A%84%E6%A0%87%E5%A4%B4%E8%A2%AB%E5%88%9D%E5%A7%8B%E5%8C%96%E6%8C%87%E5%90%91%E6%96%B0%E5%88%86%E9%85%8D%E7%9A%84%E7%BC%93%E5%86%B2%E5%8C%BA%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8C%E4%B8%A4%E4%B8%AA%E5%8F%98%E9%87%8F%E6%8C%87%E5%90%91%E4%B8%A4%E4%B8%AA%E4%B8%8D%E5%90%8C%E7%9A%84%E7%BC%93%E5%86%B2%E5%8C%BA%E5%B9%B6%E4%B8%94%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%E5%86%85%E5%AE%B9%E7%9B%B8%E5%90%8C%E3%80%82%E8%BF%99%E7%A7%8D%E5%AE%9E%E7%8E%B0%EF%BC%8C%E6%98%AFC++%E7%9A%84%E9%BB%98%E8%AE%A4%E6%9C%BA%E5%88%B6%E3%80%82%3C/p%3E%3C/li%3E%3Cli%3E%3Cp%3E%3Cstrong%3E%3Ccode%3EMove%20semantics%3C/code%3E%3C/strong%3E%EF%BC%9A%3Ccode%3Ev1%3C/code%3E%E7%9A%84%E6%A0%87%E5%A4%B4%E8%A2%AB%E6%8B%B7%E8%B4%9D%E5%88%B0%3Ccode%3Ev2%3C/code%3E%E7%9A%84%E6%A0%87%E5%A4%B4%EF%BC%8C%E5%85%B6%E5%AE%83%E4%B8%8D%E5%8F%91%E7%94%9F%E4%BB%BB%E4%BD%95%E6%93%8D%E4%BD%9C%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8C%3Ccode%3Ev2%3C/code%3E%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%EF%BC%8C%E5%AE%83%E7%9A%84%E6%A0%87%E5%A4%B4%E6%8C%87%E5%90%91%E5%8E%9F%E5%85%88%3Ccode%3Ev1%3C/code%3E%E5%88%86%E9%85%8D%E7%9A%84%E5%A0%86%E7%BC%93%E5%86%B2%E5%8C%BA%EF%BC%8C%E4%BD%86%3Ccode%3Ev1%3C/code%3E%E4%B8%8D%E8%83%BD%E5%86%8D%E8%A2%AB%E4%BD%BF%E7%94%A8%E3%80%82%E8%BF%99%E7%A7%8D%E5%AE%9E%E7%8E%B0%EF%BC%8C%E6%98%AFRust%E7%9A%84%E9%BB%98%E8%AE%A4%E6%9C%BA%E5%88%B6%E3%80%82%3C/p%3E%3C/li%3E%3C/ul%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev1%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22number%22%3E11%3C/span%3E,%20%3Cspan%20class=%22number%22%3E22%3C/span%3E,%20%3Cspan%20class=%22number%22%3E33%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev2%3C/span%3E%20=%20v1;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20v1.%3Cspan%20class=%22title%20function_%20invoke__%22%3Elen%3C/span%3E());%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%AF%A5%E4%BB%A3%E7%A0%81%E4%BA%A7%E7%94%9F%E7%BC%96%E8%AF%91%E9%94%99%E8%AF%AF%EF%BC%9A%E2%80%9Cuse%20of%20moved%20value:%20%3Ccode%3Ev1%3C/code%3E%E2%80%9D%E3%80%82%E5%BD%93%3Ccode%3Ev1%3C/code%3E%E7%9A%84%E5%80%BC%E6%8C%87%E6%B4%BE%E7%BB%99%3Ccode%3Ev2%3C/code%3E%E6%98%AF%EF%BC%8C%E5%8F%98%E9%87%8F%3Ccode%3Ev1%3C/code%3E%E7%BB%88%E6%AD%A2%E5%B9%B6%E9%80%80%E5%87%BA%E3%80%82%E5%86%8D%E6%AC%A1%E4%BD%BF%E7%94%A8%E6%98%AF%E4%B8%8D%E8%A2%AB%E7%BC%96%E8%AF%91%E5%99%A8%E5%85%81%E8%AE%B8%E7%9A%84%E3%80%82%3C/p%3E%3Cp%3E%E5%85%88%E7%9C%8B%E7%9C%8B%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88Rust%E4%B8%8D%E5%AE%9E%E7%8E%B0%3Cstrong%3Eshare%20semantics%3C/strong%3E%E3%80%82%E9%A6%96%E5%85%88%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%8F%98%E9%87%8F%E6%98%AF%E5%8F%AF%E5%8F%98%E7%9A%84%EF%BC%8C%E8%BF%99%E7%A7%8D%E8%AF%AD%E4%B9%89(semnatics)%E4%BC%9A%E6%9C%89%E5%87%A0%E5%88%86%E8%BF%B7%E6%83%91%E3%80%82%E5%9C%A8%E5%85%B1%E4%BA%AB%E6%9C%AF%E8%AF%AD(share%20semantics)%EF%BC%8C%E9%80%9A%E8%BF%87%E4%B8%80%E4%B8%AA%E5%8F%98%E9%87%8F%E6%9B%B4%E6%94%B9%E4%B8%80%E4%B8%AA%E6%9D%A1%E7%9B%AE%EF%BC%8C%E8%BF%99%E4%B8%AA%E6%9D%A1%E7%9B%AE%E4%B9%9F%E5%8F%AF%E4%BB%A5%E8%A2%AB%E5%85%B6%E5%AE%83%E5%8F%98%E9%87%8F%E6%9B%B4%E6%94%B9%E5%92%8C%E8%AE%BF%E9%97%AE%E3%80%82%E8%BF%99%E4%B8%8D%E6%98%AF%E7%9B%B4%E8%A7%89%EF%BC%8C%E5%8F%AF%E8%83%BD%E6%98%AFbug%E7%9A%84%E6%A0%B9%E6%BA%90%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8C%E5%85%B1%E4%BA%AB%E6%9C%AF%E8%AF%AD(share%20senantics)%E4%BB%85%E5%9C%A8%E5%8F%AA%E8%AF%BB%E6%95%B0%E6%8D%AE(read-only%20data)%E8%83%BD%E8%A2%AB%E6%8E%A5%E6%94%B6%E3%80%82%3C/p%3E%3Cp%3E%E4%BD%86%E8%BF%99%E9%87%8C%E6%9C%89%E4%B8%AA%E5%A4%A7%E9%97%AE%E9%A2%98%EF%BC%8C%E5%AF%B9%E4%BA%8E%E5%86%85%E5%AD%98%E5%9B%9E%E6%94%B6%E3%80%82%E5%A6%82%E6%9E%9C%E4%BD%BF%E7%94%A8%E5%85%B1%E4%BA%AB%E6%9C%AF%E8%AF%AD%EF%BC%8C%3Ccode%3Ev1%3C/code%3E%E5%92%8C%3Ccode%3Ev2%3C/code%3E%E9%83%BD%E5%B0%86%E4%BC%9A%E6%8B%A5%E6%9C%89%E5%90%8C%E4%B8%80%E4%B8%AA%E5%8D%95%E4%B8%80%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BC%93%E5%86%B2%E5%8C%BA%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%BD%93%E4%BB%96%E4%BB%AC%E8%A2%AB%E5%9B%9E%E6%94%B6%E6%97%B6%EF%BC%8C%E5%90%8C%E6%A0%B7%E7%9A%84%E5%A0%86%E7%BC%93%E5%86%B2%E5%8C%BA%E4%BC%9A%E8%A2%AB%E5%9B%9E%E6%94%B6%E4%B8%A4%E6%AC%A1%E3%80%82%E4%B8%80%E4%B8%AA%E7%BC%93%E5%86%B2%E5%8C%BA%E4%B8%8D%E8%83%BD%E8%A2%AB%E5%88%86%E9%85%8D%E4%B8%A4%E6%AC%A1%EF%BC%8C%E8%80%8C%E4%B8%8D%E5%AF%BC%E8%87%B4%E5%86%85%E5%AD%98%E6%8D%9F%E8%80%97%E4%BB%A5%E5%8F%8A%E5%BC%95%E8%B5%B7%E7%A8%8B%E5%BA%8F%E5%B4%A9%E6%BA%83(program%20malfunction)%E3%80%82%E8%A6%81%E8%A7%A3%E5%86%B3%E8%BF%99%E4%B8%AA%E9%97%AE%E9%A2%98%EF%BC%8C%E8%AF%AD%E8%A8%80%E6%9C%AC%E8%BA%AB%E9%9C%80%E8%A6%81%E5%9C%A8scope%E7%BB%93%E6%9D%9F%E6%97%B6%E4%B8%8D%E5%AF%B9%E5%8F%98%E9%87%8F%E4%BD%BF%E7%94%A8%E7%9A%84%E5%86%85%E8%BF%9B%E8%A1%8C%E5%9B%9E%E6%94%B6%EF%BC%8C%E8%80%8C%E6%98%AF%E5%87%AD%E5%80%9FGC%E5%A4%84%E7%90%86%E3%80%82%3C/p%3E%3Cp%3E%E7%9B%B8%E5%8F%8D%EF%BC%8C%E6%8B%B7%E8%B4%9D%E8%AF%AD%E4%B9%89(copy%20semantics)%E5%92%8C%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89(move%20semantics)%E9%83%BD%E6%98%AF%E6%AD%A3%E7%A1%AE%E7%9A%84%E3%80%82%E5%AE%9E%E9%99%85%E4%B8%8A%EF%BC%8CRust%E8%A7%84%E5%88%99%E4%B8%8A%E6%8A%8A%E5%9B%9E%E6%94%B6%E7%9C%8B%E5%81%9A%E6%98%AF%E4%BB%BB%E4%BD%95%E5%AF%B9%E8%B1%A1%E5%BF%85%E9%A1%BB%E6%9C%89%E4%B8%94%E4%BB%85%E6%9C%89%E4%B8%80%E4%B8%AAowner%E3%80%82%E5%BD%93%E4%BD%BF%E7%94%A8%E6%8B%B7%E8%B4%9D%E8%AF%AD%E4%B9%89%E6%97%B6%EF%BC%8C%E5%8E%9F%E6%9D%A5%E7%9A%84vector%E7%BC%93%E5%86%B2%E5%8C%BA%E8%BF%98%E6%98%AF%E5%8E%9F%E6%9D%A5%E7%9A%84owner%EF%BC%8C%E5%8D%B3%E5%8F%98%E9%87%8F%3Ccode%3Ev1%3C/code%3E%E7%9A%84%E6%A0%87%E5%A4%B4%EF%BC%8C%E6%96%B0%E5%88%9B%E5%BB%BA%E7%9A%84%E7%BC%93%E5%86%B2%E5%8C%BA%EF%BC%8C%E6%9C%89%E6%96%B0%E7%9A%84owner%E5%BC%95%E7%94%A8%EF%BC%8C%E5%8D%B3%3Ccode%3Ev2%3C/code%3E%E7%9A%84%E6%A0%87%E5%A4%B4%E3%80%82%E5%8F%A6%E4%B8%80%E6%96%B9%E9%9D%A2%EF%BC%8C%E5%BD%93%E4%BD%BF%E7%94%A8%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%E6%97%B6%EF%BC%8C%E5%8E%9F%E6%9D%A5%E5%8D%95%E4%B8%80vector%E7%BC%93%E5%86%B2%E5%8C%BA%E6%9B%B4%E6%94%B9%E5%AE%83%E7%9A%84owner%EF%BC%9A%E5%88%86%E9%85%8D%E4%B9%8B%E5%89%8D%EF%BC%8C%E7%BC%93%E5%86%B2%E5%8C%BA%E7%9A%84%E6%89%80%E6%9C%89%E8%80%85%E6%98%AF%3Ccode%3Ev1%3C/code%3E%E7%9A%84%E6%A0%87%E5%A4%B4reference%EF%BC%8C%E5%88%86%E9%85%8D%E4%B9%8B%E5%90%8E%EF%BC%8C%E6%89%80%E6%9C%89%E8%80%85%E6%9B%B4%E6%94%B9%E4%B8%BA%3Ccode%3Ev2%3C/code%3E%E7%9A%84%E6%A0%87%E5%A4%B4reference%E3%80%82%E5%9C%A8%E5%88%86%E9%85%8D%E4%B9%8B%E5%89%8D%EF%BC%8C%3Ccode%3Ev2%3C/code%3E%E7%9A%84%E6%A0%87%E5%A4%B4%E5%B9%B6%E4%B8%8D%E5%AD%98%E5%9C%A8%EF%BC%8C%E5%88%86%E9%85%8D%E4%B9%8B%E5%90%8E%EF%BC%8C%3Ccode%3Ev1%3C/code%3E%E7%9A%84%E6%A0%87%E5%A4%B4%E4%B8%8D%E5%86%8D%E5%AD%98%E5%9C%A8%E3%80%82%3C/p%3E%3Cp%3E%E9%82%A3%E4%B8%BA%E4%BB%80%E4%B9%88Rust%E4%B8%8D%E5%AE%9E%E7%8E%B0%E6%8B%B7%E8%B4%9D%E8%AF%AD%E4%B9%89(copy%20semantics)%EF%BC%9F%3C/p%3E%3Cp%3E%E5%AE%9E%E9%99%85%E4%B8%8A%EF%BC%8C%E6%9F%90%E4%BA%9B%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8C%E4%BD%BF%E7%94%A8%E6%8B%B7%E8%B4%9D%E8%AF%AD%E4%B9%89%E6%9B%B4%E5%90%88%E9%80%82%EF%BC%8C%E5%8F%A6%E4%B8%80%E4%BA%9B%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8C%E4%BD%BF%E7%94%A8%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%E6%9B%B4%E9%80%82%E5%90%88%E3%80%82%E7%94%9A%E8%87%B3C++%EF%BC%8C%E4%BB%8E2011%E5%B9%B4%E5%BC%80%E5%A7%8B%EF%BC%8C%E5%85%81%E8%AE%B8%E5%90%8C%E6%97%B6%E6%8B%B7%E8%B4%9D%E8%AF%AD%E4%B9%89%E5%92%8C%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20cpp%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22meta%22%3E#%3Cspan%20class=%22keyword%22%3Einclude%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;lt;iostream&amp;gt;%3C/span%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22meta%22%3E#%3Cspan%20class=%22keyword%22%3Einclude%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;lt;vector&amp;gt;%3C/span%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22function%22%3E%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%22%3Emain%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20%3C/span%3E&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eauto%3C/span%3E%20v1%20=%20std::vector&amp;lt;%3Cspan%20class=%22type%22%3Eint%3C/span%3E&amp;gt;%20&amp;#123;%3Cspan%20class=%22number%22%3E11%3C/span%3E,%20%3Cspan%20class=%22number%22%3E22%3C/span%3E,%20%3Cspan%20class=%22number%22%3E33%3C/span%3E&amp;#125;;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22type%22%3Econst%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eauto%3C/span%3E%20v2%20=%20v1;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22type%22%3Econst%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eauto%3C/span%3E%20v3%20=%20%3Cspan%20class=%22built_in%22%3Emove%3C/span%3E(v1);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Estd::count%20&amp;lt;&amp;lt;%20v%3Cspan%20class=%22number%22%3E1.%3C/span%3E%3Cspan%20class=%22built_in%22%3Esize%3C/span%3E()%20&amp;lt;&amp;lt;%20%3Cspan%20class=%22string%22%3E&amp;quot;%20&amp;quot;%3C/span%3E%20&amp;lt;&amp;lt;%20v%3Cspan%20class=%22number%22%3E2.%3C/span%3E%3Cspan%20class=%22built_in%22%3Esize%3C/span%3E()%20&amp;lt;&amp;lt;%20%3Cspan%20class=%22string%22%3E&amp;quot;%20&amp;quot;%3C/span%3E%20&amp;lt;&amp;lt;%20v%3Cspan%20class=%22number%22%3E3.%3C/span%3E%3Cspan%20class=%22built_in%22%3Esize%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%BF%99%E6%AE%B5C%3Cins%3E%E7%A8%8B%E5%BA%8F%E4%BC%9A%E6%89%93%E5%8D%B0%EF%BC%9A0%203%203%E3%80%82%3Ccode%3Ev1%3C/code%3E%E9%A6%96%E5%85%88%E8%A2%AB%E6%8B%B7%E8%B4%9D%E5%88%B0%3Ccode%3Ev2%3C/code%3E%EF%BC%8C%E7%84%B6%E5%90%8E%E7%A7%BB%E5%8A%A8%E5%88%B0%3Ccode%3Ev3%3C/code%3E%E3%80%82C%3C/ins%3E%E6%A0%87%E5%87%86%E5%87%BD%E6%95%B0%3Ccode%3Emove%3C/code%3E%E4%BC%9A%E6%B8%85%E7%A9%BAvector%E4%BD%86%E4%B8%8D%E4%BC%9A%E8%AE%A9%E5%85%B6undefined%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8C%E5%9C%A8%E6%9C%80%E5%90%8E%EF%BC%8C%3Ccode%3Ev2%3C/code%3E%E6%9C%89%E4%B8%89%E4%B8%AA%E5%85%83%E7%B4%A0%E7%9A%84%E6%8B%B7%E8%B4%9D%EF%BC%8C%3Ccode%3Ev3%3C/code%3E%E5%B0%B1%E6%98%AF%E5%8E%9F%E6%9D%A5%E7%9A%84%3Ccode%3Ev1%3C/code%3E%EF%BC%8C%3Ccode%3Ev1%3C/code%3E%E5%8F%98%E4%B8%BA%E7%A9%BA%E3%80%82%3C/p%3E%3Cp%3ERust%E4%B8%AD%E4%B9%9F%E5%85%81%E8%AE%B8%E6%8B%B7%E8%B4%9D%E8%AF%AD%E4%B9%89%E5%92%8C%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev1%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22number%22%3E11%3C/span%3E,%20%3Cspan%20class=%22number%22%3E22%3C/span%3E,%20%3Cspan%20class=%22number%22%3E33%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev2%3C/span%3E%20=%20v1.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eclone%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev3%3C/span%3E%20=%20v1;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22comment%22%3E/%20ILLEGAL:%20print!(&amp;quot;&amp;#123;&amp;#125;%20&amp;quot;,%20v1.len());%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20v2.%3Cspan%20class=%22title%20function_%20invoke__%22%3Elen%3C/span%3E(),%20v3.%3Cspan%20class=%22title%20function_%20invoke__%22%3Elen%3C/span%3E());%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%B0%86%E4%BC%9A%E6%89%93%E5%8D%B0%EF%BC%9A3%203%E3%80%82%3C/p%3E%3Cp%3E%E8%BF%99%E6%AE%B5%E7%A8%8B%E5%BA%8F%E5%92%8CC%3Cins%3E%E7%B1%BB%E4%BC%BC%EF%BC%8C%E4%BD%86%E4%B8%8D%E8%83%BD%E5%86%8D%E8%AE%BF%E9%97%AE%3Ccode%3Ev1%3C/code%3E%E4%BA%86%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%AE%83%E8%A2%AB%E7%A7%BB%E5%8A%A8%E4%BA%86%E3%80%82%E5%9B%A0%E4%B8%BAC%3C/ins%3E%E7%9A%84%E9%BB%98%E8%AE%A4%E8%AF%AD%E4%B9%89%E6%98%AF%E6%8B%B7%E8%B4%9D%E8%AF%AD%E4%B9%89(copy%20semantics)%EF%BC%8C%E6%89%80%E4%BB%A5%E9%9C%80%E8%A6%81%E8%B0%83%E7%94%A8%3Ccode%3Emove%3C/code%3E%E6%A0%87%E5%87%86%E5%87%BD%E6%95%B0%E6%9D%A5%E8%BF%9B%E8%A1%8C%E5%AF%B9%E8%B1%A1%E7%A7%BB%E5%8A%A8%EF%BC%9B%E8%80%8CRust%E7%9A%84%E9%BB%98%E8%AE%A4%E8%AF%AD%E4%B9%89%E6%98%AF%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89(move%20semantics)%EF%BC%8C%E6%89%80%E4%BB%A5%E9%9C%80%E8%A6%81%E8%B0%83%E7%94%A8%E6%A0%87%E5%87%86%E5%87%BD%E6%95%B0%3Ccode%3Eclone%3C/code%3E%E8%BF%9B%E8%A1%8C%E6%8B%B7%E8%B4%9D%E3%80%82%3C/p%3E%3Cp%3E%E5%8F%A6%E5%A4%96%EF%BC%8C%3Ccode%3Ev1%3C/code%3E%E8%99%BD%E5%B7%B2%E8%A2%AB%E7%A7%BB%E5%8A%A8%EF%BC%8C%E4%BD%86%E4%BB%8D%E7%84%B6%E5%8F%AF%E8%AE%BF%E9%97%AE%EF%BC%8C%E5%8F%AA%E4%B8%8D%E8%BF%87%E5%86%85%E5%AE%B9%E4%B8%BA%E7%A9%BA%EF%BC%8CRust%E4%B8%AD%E8%A2%AB%E7%A7%BB%E5%8A%A8%E7%9A%84%E5%8F%98%E9%87%8F%E4%B8%8D%E5%8F%AF%E5%86%8D%E8%A2%AB%E8%AE%BF%E9%97%AE%E3%80%82%3C/p%3E%3Ch2%20id=%22Copying-vs-Moving-Performance%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Copying-vs-Moving-Performance%22%3E%C2%B6%3C/a%3ECopying%20vs.%20Moving%20Performance%3C/h2%3E%3Cp%3ERust%E5%81%8F%E5%90%91%E4%BA%8E%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%E7%9A%84%E9%80%89%E6%8B%A9%E6%98%AF%E4%BB%8E%E6%80%A7%E8%83%BD%E6%96%B9%E9%9D%A2%E8%80%83%E9%87%8F%E7%9A%84%E3%80%82%E5%AF%B9%E4%BA%8E%E6%8B%A5%E6%9C%89%E5%A0%86%E7%BC%93%E5%86%B2%E5%8C%BA%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%AF%94%E5%A6%82vector%EF%BC%8C%E7%A7%BB%E5%8A%A8%E6%AF%94%E6%8B%B7%E8%B4%9D%E8%A6%81%E5%BF%AB%EF%BC%8C%E5%9B%A0%E4%B8%BA%E7%A7%BB%E5%8A%A8%E7%9A%84%E4%BB%85%E6%98%AFheader%EF%BC%8C%E7%84%B6%E8%80%8C%E5%A6%82%E6%9E%9C%E6%98%AF%E6%8B%B7%E8%B4%9D%E4%B8%80%E4%B8%AAvector%EF%BC%8C%E8%A6%81%E6%B1%82%E5%88%86%E9%85%8D%E5%92%8C%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%80%E4%B8%AA%E5%8F%AF%E8%83%BD%E7%9A%84%E5%A0%86%E7%BC%93%E5%86%B2%E5%8C%BA%EF%BC%8C%E5%AE%83%E6%9C%80%E7%BB%88%E4%BC%9A%E8%A2%AB%E5%9B%9E%E6%94%B6%E3%80%82%3C/p%3E%3Cp%3E%E5%9C%A8C++%E4%B8%AD%EF%BC%8C%E8%A2%AB%E7%A7%BB%E5%8A%A8%E7%9A%84%E5%AF%B9%E8%B1%A1%E6%84%8F%E5%91%B3%E7%9D%80%E4%B8%8D%E5%9C%A8%E8%A2%AB%E4%BD%BF%E7%94%A8%E4%BA%86%EF%BC%8C%E4%BD%86%E8%AF%AD%E8%A8%80%E4%B8%BA%E4%BA%86%E5%AF%B9%E9%81%97%E7%95%99%E4%BB%A3%E7%A0%81%E5%81%9A%E5%90%8E%E5%90%91%E5%85%BC%E5%AE%B9(backward-compatible)%EF%BC%8C%E8%A2%AB%E7%A7%BB%E5%8A%A8%E7%9A%84%E5%AF%B9%E8%B1%A1%E4%BB%8D%E7%84%B6%E5%8F%AF%E4%BB%A5%E8%AE%BF%E9%97%AE%EF%BC%8C%E8%BF%99%E5%8F%AF%E8%83%BD%E4%BC%9A%E7%BB%99%E5%BC%80%E5%8F%91%E8%80%85%E5%86%8D%E6%AC%A1%E4%BD%BF%E7%94%A8%E8%AF%A5%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%9C%BA%E4%BC%9A%E3%80%82%E5%8F%A6%E5%A4%96%EF%BC%8C%E6%B8%85%E7%A9%BA%E4%B8%80%E4%B8%AA%E8%A2%AB%E7%A7%BB%E5%8A%A8%E7%9A%84vector%E6%9C%89%E8%BE%83%E5%B0%8F%E7%9A%84%E6%B6%88%E8%80%97%EF%BC%8C%E5%8D%B3%E5%BD%93%E4%B8%80%E4%B8%AAvector%E8%A2%AB%E9%94%80%E6%AF%81%EF%BC%8C%E4%BC%9A%E6%A3%80%E6%B5%8B%E5%AE%83%E6%98%AF%E5%90%A6%E4%B8%BA%E7%A9%BA%EF%BC%8C%E8%BF%99%E4%B9%9F%E6%9C%89%E8%BE%83%E5%B0%8F%E6%B6%88%E8%80%97%E3%80%82Rust%E8%A2%AB%E8%AE%BE%E8%AE%A1%E9%81%BF%E5%85%8D%E6%89%8B%E5%8A%A8%E7%A7%BB%E5%8A%A8%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%9B%A0%E6%AD%A4%E4%B8%8D%E4%BC%9A%E6%9C%89%E4%B8%8D%E6%AD%A3%E5%BD%93%E7%9A%84%E7%A7%BB%E5%8A%A8vector%EF%BC%8C%E5%9B%A0%E4%B8%BA%E7%BC%96%E8%AF%91%E5%99%A8%E7%9F%A5%E9%81%93vector%E8%A2%AB%E7%A7%BB%E5%8A%A8%E4%BA%86%EF%BC%8C%E5%8F%AF%E4%BB%A5%E4%BA%A7%E7%94%9F%E6%9B%B4%E5%A5%BD%E7%9A%84%E4%BB%A3%E7%A0%81%E3%80%82%3C/p%3E%3Cp%3E%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E4%B8%8B%E9%9D%A2%E4%BB%A3%E7%A0%81%E5%BA%A6%E9%87%8F%E6%80%A7%E8%83%BD%E7%9A%84%E5%BD%B1%E5%93%8D%EF%BC%8C%E8%BF%99%E5%B9%B6%E4%B8%8D%E7%AE%80%E5%8D%95%EF%BC%8C%E5%9B%A0%E4%B8%BA%E7%BC%96%E8%AF%91%E4%BC%98%E5%8C%96%E5%99%A8%E4%BC%9A%E7%A7%BB%E9%99%A4loop%E5%86%85%E7%9A%84%E5%B7%A5%E4%BD%9C%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%8B%E9%9D%A2%E4%BB%A3%E7%A0%81%E4%BD%BF%E7%94%A8%E4%BA%86%E6%8B%B7%E8%B4%9D%E8%AF%AD%E4%B9%89%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Euse%3C/span%3E%20std::time::Instant;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Eelapsed_ms%3C/span%3E(t1:%20Instant,%20t2:%20Instant)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et%3C/span%3E%20=%20t2%20-%20t1;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20t.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eas_secs%3C/span%3E()%20%3Cspan%20class=%22keyword%22%3Eas%3C/span%3E%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E%20*%20%3Cspan%20class=%22number%22%3E1000%3C/span%3E.%20+%20t.%3Cspan%20class=%22title%20function_%20invoke__%22%3Esubsec_nanos%3C/span%3E()%20%3Cspan%20class=%22keyword%22%3Eas%3C/span%3E%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E%20/%20%3Cspan%20class=%22number%22%3E1e6%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Econst%3C/span%3E%20N_ITER:%20%3Cspan%20class=%22type%22%3Eusize%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E100_000_000%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Estart_time%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E..N_ITER%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev1%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22number%22%3E11%3C/span%3E,%20%3Cspan%20class=%22number%22%3E22%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ev2%3C/span%3E%20=%20v1.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eclone%3C/span%3E();%20%20%20%20%3Cspan%20class=%22comment%22%3E/%20Copy%20semantics%20is%20used%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev2.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epush%3C/span%3E(i);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20v1[%3Cspan%20class=%22number%22%3E1%3C/span%3E]%20+%20v2[%3Cspan%20class=%22number%22%3E2%3C/span%3E]%20==%20v2[%3Cspan%20class=%22number%22%3E0%3C/span%3E]%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;Error&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Efinish_time%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20ns%20per%20iteration&#92;n&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Eelapsed_ms%3C/span%3E(start_time,%20finish_time)%20*%20%3Cspan%20class=%22number%22%3E1e6%3C/span%3E%20/%20N_ITER%20%3Cspan%20class=%22keyword%22%3Eas%3C/span%3E%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E4%B8%8B%E9%9D%A2%E6%98%AFC++%E7%9A%84%E7%AD%89%E4%BB%B7%E5%AE%9E%E7%8E%B0%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20cpp%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22meta%22%3E#%3Cspan%20class=%22keyword%22%3Einclude%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;lt;iostream&amp;gt;%3C/span%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22meta%22%3E#%3Cspan%20class=%22keyword%22%3Einclude%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;lt;vector&amp;gt;%3C/span%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22meta%22%3E#%3Cspan%20class=%22keyword%22%3Einclude%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;lt;ctime&amp;gt;%3C/span%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22function%22%3E%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%22%3Emain%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20%3C/span%3E&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22type%22%3Econst%3C/span%3E%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20n_iter%20=%20%3Cspan%20class=%22number%22%3E100000000%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eauto%3C/span%3E%20start_time%20=%20%3Cspan%20class=%22built_in%22%3Eclock%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20(%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20i%20=%20%3Cspan%20class=%22number%22%3E0%3C/span%3E;%20i%20&amp;lt;%20n_iter;%20++i)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eauto%3C/span%3E%20v1%20=%20std::vector&amp;lt;%3Cspan%20class=%22type%22%3Eint%3C/span%3E&amp;gt;%20&amp;#123;%20%3Cspan%20class=%22number%22%3E11%3C/span%3E,%20%3Cspan%20class=%22number%22%3E22%3C/span%3E%20&amp;#125;;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eauto%3C/span%3E%20v2%20=%20v1;%3Cspan%20class=%22comment%22%3E/%20Copy%20semantics%20is%20used%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev%3Cspan%20class=%22number%22%3E2.%3C/span%3E%3Cspan%20class=%22built_in%22%3Epush_back%3C/span%3E(i);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20(v2[%3Cspan%20class=%22number%22%3E1%3C/span%3E]%20+%20v2[%3Cspan%20class=%22number%22%3E2%3C/span%3E]%20=%20v2[%3Cspan%20class=%22number%22%3E0%3C/span%3E])%20&amp;#123;%20std::cout%20&amp;lt;&amp;lt;%20%3Cspan%20class=%22string%22%3E&amp;quot;Error&amp;quot;%3C/span%3E;%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eauto%3C/span%3E%20finish_time%20=%20%3Cspan%20class=%22built_in%22%3Eclock%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Estd::cout%20&amp;lt;&amp;lt;%20(finish_time%20-%20start_time)%20*%20%3Cspan%20class=%22number%22%3E1.e9%3C/span%3E%20/%20CLOCKS_PER_SEC%20/%20n_iter%20&amp;lt;&amp;lt;%20%3Cspan%20class=%22string%22%3E&amp;quot;%20ns%20per%20iteration&#92;n&amp;quot;%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E4%B8%8B%E9%9D%A2Rust%E7%A8%8B%E5%BA%8F%E4%BD%BF%E7%94%A8%E4%BA%86%E7%A7%BB%E5%8A%A8%E6%9C%AF%E8%AF%AD%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Euse%3C/span%3E%20std::time::Instant;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Eelapsed_ms%3C/span%3E(t1:%20Instant,%20t2:%20Instant)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et%3C/span%3E%20=%20t2%20-%20t1;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20t.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eas_secs%3C/span%3E()%20%3Cspan%20class=%22keyword%22%3Eas%3C/span%3E%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E%20*%20%3Cspan%20class=%22number%22%3E1000%3C/span%3E.%20+%20t.%3Cspan%20class=%22title%20function_%20invoke__%22%3Esubsec_nanos%3C/span%3E()%20%3Cspan%20class=%22keyword%22%3Eas%3C/span%3E%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E%20/%20%3Cspan%20class=%22number%22%3E1e6%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Econst%3C/span%3E%20N_ITER:%20%3Cspan%20class=%22type%22%3Eusize%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E100_000_000%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Estart_time%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E..N_ITER%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev1%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22number%22%3E11%3C/span%3E,%20%3Cspan%20class=%22number%22%3E22%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ev2%3C/span%3E%20=%20v1;%20%20%20%20%3Cspan%20class=%22comment%22%3E/%20Move%20semantics%20is%20used%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev2.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epush%3C/span%3E(i);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20v1[%3Cspan%20class=%22number%22%3E1%3C/span%3E]%20+%20v2[%3Cspan%20class=%22number%22%3E2%3C/span%3E]%20==%20v2[%3Cspan%20class=%22number%22%3E0%3C/span%3E]%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;Error&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Efinish_time%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20ns%20per%20iteration&#92;n&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Eelapsed_ms%3C/span%3E(start_time,%20finish_time)%20*%20%3Cspan%20class=%22number%22%3E1e6%3C/span%3E%20/%20N_ITER%20%3Cspan%20class=%22keyword%22%3Eas%3C/span%3E%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3EC++%E7%9A%84%E7%AD%89%E4%BB%B7%E5%AE%9E%E7%8E%B0%E4%B8%BA%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20cpp%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22meta%22%3E#%3Cspan%20class=%22keyword%22%3Einclude%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;lt;iostream&amp;gt;%3C/span%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22meta%22%3E#%3Cspan%20class=%22keyword%22%3Einclude%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;lt;vector&amp;gt;%3C/span%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22meta%22%3E#%3Cspan%20class=%22keyword%22%3Einclude%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;lt;ctime&amp;gt;%3C/span%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22function%22%3E%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%22%3Emain%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20%3C/span%3E&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22type%22%3Econst%3C/span%3E%20%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20n_iter%20=%20%3Cspan%20class=%22number%22%3E100000000%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eauto%3C/span%3E%20start_time%20=%20%3Cspan%20class=%22built_in%22%3Eclock%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20(%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20i%20=%20%3Cspan%20class=%22number%22%3E0%3C/span%3E;%20i%20&amp;lt;%20n_iter;%20++i)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eauto%3C/span%3E%20v1%20=%20std::vector&amp;lt;%3Cspan%20class=%22type%22%3Eint%3C/span%3E&amp;gt;%20&amp;#123;%20%3Cspan%20class=%22number%22%3E11%3C/span%3E,%20%3Cspan%20class=%22number%22%3E22%3C/span%3E%20&amp;#125;;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eauto%3C/span%3E%20v2%20=%20%3Cspan%20class=%22built_in%22%3Emove%3C/span%3E(v1);%3Cspan%20class=%22comment%22%3E/%20Move%20semantics%20is%20used%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev%3Cspan%20class=%22number%22%3E2.%3C/span%3E%3Cspan%20class=%22built_in%22%3Epush_back%3C/span%3E(i);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20(v2[%3Cspan%20class=%22number%22%3E1%3C/span%3E]%20+%20v2[%3Cspan%20class=%22number%22%3E2%3C/span%3E]%20=%20v2[%3Cspan%20class=%22number%22%3E0%3C/span%3E])%20&amp;#123;%20std::cout%20&amp;lt;&amp;lt;%20%3Cspan%20class=%22string%22%3E&amp;quot;Error&amp;quot;%3C/span%3E;%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eauto%3C/span%3E%20finish_time%20=%20%3Cspan%20class=%22built_in%22%3Eclock%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Estd::cout%20&amp;lt;&amp;lt;%20(finish_time%20-%20start_time)%20*%20%3Cspan%20class=%22number%22%3E1.e9%3C/span%3E%20/%20CLOCKS_PER_SEC%20/%20n_iter%20&amp;lt;&amp;lt;%20%3Cspan%20class=%22string%22%3E&amp;quot;%20ns%20per%20iteration&#92;n&amp;quot;%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E4%B8%8B%E9%9D%A2%E6%98%AF%E7%BC%96%E8%AF%91%E4%BC%98%E5%8C%96%E5%90%8E%E7%9A%84%E5%A4%A7%E8%87%B4%E7%9A%84%E6%97%B6%E9%97%B4%E6%8D%9F%E8%80%97%EF%BC%8C%3C/p%3E%3Ctable%3E%3Cthead%3E%3Ctr%3E%3Cth%3E%3C/th%3E%3Cth%3ERust%3C/th%3E%3Cth%3EC++%3C/th%3E%3C/tr%3E%3C/thead%3E%3Ctbody%3E%3Ctr%3E%3Ctd%3ECopy%20semantics%3C/td%3E%3Ctd%3E157%3C/td%3E%3Ctd%3E87%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%3EMove%20semantics%3C/td%3E%3Ctd%3E67%3C/td%3E%3Ctd%3E67%3C/td%3E%3C/tr%3E%3C/tbody%3E%3C/table%3E%3Cp%3E%E4%B8%8D%E7%AE%A1%E6%98%AF%E5%9C%A8C%3Cins%3E%E8%BF%98%E6%98%AFRust%E4%B8%AD%EF%BC%8C%E7%A7%BB%E5%8A%A8%E6%9C%AF%E8%AF%AD%E9%83%BD%E8%A6%81%E6%AF%94%E6%8B%B7%E8%B4%9D%E6%9C%AF%E8%AF%AD%E8%A6%81%E5%BF%AB%E3%80%82%E5%9C%A8%E8%BF%99%E6%96%B9%E9%9D%A2%EF%BC%8C%E7%A7%BB%E5%8A%A8%E6%9C%AF%E8%AF%AD%E4%B8%A4%E8%80%85%E9%83%BD%E5%B7%AE%E4%B8%8D%E5%A4%9A%EF%BC%8C%E6%8B%B7%E8%B4%9D%E6%9C%AF%E8%AF%AD%E6%96%B9%E9%9D%A2C%3C/ins%3E%E8%A6%81%E6%AF%94Rust%E5%A5%BD%E5%BE%88%E5%A4%9A%E3%80%82%3C/p%3E%3Ch2%20id=%22Moving-and-Destroying-Objects%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Moving-and-Destroying-Objects%22%3E%C2%B6%3C/a%3EMoving%20and%20Destroying%20Objects%3C/h2%3E%3Cp%3E%E6%89%80%E6%9C%89%E8%BF%99%E4%BA%9B%E6%A6%82%E5%BF%B5%E4%B8%8D%E5%8D%95%E6%98%AF%E5%AF%B9vector%EF%BC%8C%E4%BB%BB%E4%BD%95%E6%9C%89%E7%BC%93%E5%86%B2%E5%8C%BA%E5%BC%95%E7%94%A8%E7%9A%84%E5%AF%B9%E8%B1%A1%E9%83%BD%E9%80%82%E7%94%A8%EF%BC%8C%E8%AD%AC%E5%A6%82%3Ccode%3EString%3C/code%3E%E6%88%96%3Ccode%3EBox%3C/code%3E%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Es1%3C/span%3E%20=%20%3Cspan%20class=%22string%22%3E&amp;quot;abcd&amp;quot;%3C/span%3E.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eto_string%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Es2%3C/span%3E%20=%20s1.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eclone%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Es3%3C/span%3E%20=%20s1;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22comment%22%3E/%20ILLEGAL:%20print!(&amp;quot;&amp;#123;&amp;#125;%20&amp;quot;,%20s1.len());%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20s2.%3Cspan%20class=%22title%20function_%20invoke__%22%3Elen%3C/span%3E(),%20s3.%3Cspan%20class=%22title%20function_%20invoke__%22%3Elen%3C/span%3E());%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%BF%99%E5%92%8CC++%E7%B1%BB%E4%BC%BC%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20cpp%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22meta%22%3E#%3Cspan%20class=%22keyword%22%3Einclude%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;lt;iostream&amp;gt;%3C/span%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22meta%22%3E#%3Cspan%20class=%22keyword%22%3Einclude%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;lt;string&amp;gt;%3C/span%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22function%22%3E%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%22%3Emain%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20%3C/span%3E&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eauto%3C/span%3E%20s1%20=%20std::string%20&amp;#123;%20%3Cspan%20class=%22string%22%3E&amp;quot;abcd&amp;quot;%3C/span%3E%20&amp;#125;;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22type%22%3Econst%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eauto%3C/span%3E%20s2%20=%20s1;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22type%22%3Econst%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eauto%3C/span%3E%20s3%20=%20%3Cspan%20class=%22built_in%22%3Emove%3C/span%3E(s1);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Estd::cout%20&amp;lt;&amp;lt;%20s%3Cspan%20class=%22number%22%3E1.%3C/span%3E%3Cspan%20class=%22built_in%22%3Esize%3C/span%3E()%20&amp;lt;&amp;lt;%20%3Cspan%20class=%22string%22%3E&amp;quot;%20&amp;quot;%3C/span%3E%20&amp;lt;&amp;lt;%20s%3Cspan%20class=%22number%22%3E2.%3C/span%3E%3Cspan%20class=%22built_in%22%3Esize%3C/span%3E()%20&amp;lt;&amp;lt;%20%3Cspan%20class=%22string%22%3E&amp;quot;%20&amp;quot;%3C/span%3E%20&amp;lt;&amp;lt;%20s%3Cspan%20class=%22number%22%3E3.%3C/span%3E%3Cspan%20class=%22built_in%22%3Esize%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%89%8D%E9%9D%A2%E8%AF%B4%E8%BF%87%EF%BC%8C%E8%A2%AB%E7%A7%BB%E5%8A%A8%E7%9A%84%E5%AF%B9%E8%B1%A1%E4%B8%8D%E8%83%BD%E5%86%8D%E8%AE%BF%E9%97%AE%EF%BC%8C%E5%9B%A0%E6%AD%A4%3Ccode%3Es1%3C/code%3E%E8%AE%BF%E9%97%AE%E6%97%B6%E4%BC%9A%E5%AF%BC%E8%87%B4%E7%BC%96%E8%AF%91%E9%94%99%E8%AF%AF%EF%BC%9B%E8%80%8C%E5%AF%B9%E4%BA%8EC++%EF%BC%8C%E5%8E%9F%E6%9D%A5%E7%9A%84%3Ccode%3Es1%3C/code%3E%E4%BC%9A%E7%BD%AE%E4%B8%BA%E7%A9%BA%EF%BC%8C%E6%89%80%E4%BB%A5%E4%BC%9A%E8%BE%93%E5%87%BA0%204%204%E3%80%82%3C/p%3E%3Cp%3E%E5%AF%B9%E4%BA%8E%3Ccode%3EBox%3C/code%3E%E7%B1%BB%E5%9E%8B%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei1%3C/span%3E%20=%20%3Cspan%20class=%22type%22%3EBox%3C/span%3E::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enew%3C/span%3E(%3Cspan%20class=%22number%22%3E12345i16%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei2%3C/span%3E%20=%20i1.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eclone%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei3%3C/span%3E%20=%20i1;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22comment%22%3E/%20ILLEGAL:%20print!(&amp;quot;&amp;#123;&amp;#125;%20&amp;quot;,%20i1);%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20i2,%20i3);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%AF%B9%E5%BA%94%E7%9A%84C++%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20cpp%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22meta%22%3E#%3Cspan%20class=%22keyword%22%3Einclude%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;lt;iostream&amp;gt;%3C/span%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22meta%22%3E#%3Cspan%20class=%22keyword%22%3Einclude%3C/span%3E%20%3Cspan%20class=%22string%22%3E&amp;lt;memory&amp;gt;%3C/span%3E%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22function%22%3E%3Cspan%20class=%22type%22%3Eint%3C/span%3E%20%3Cspan%20class=%22title%22%3Emain%3C/span%3E%3Cspan%20class=%22params%22%3E()%3C/span%3E%20%3C/span%3E&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eauto%3C/span%3E%20i1%20=%20std::unique_ptr&amp;lt;%3Cspan%20class=%22type%22%3Eshort%3C/span%3E&amp;gt;%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22built_in%22%3Eshort%3C/span%3E(%3Cspan%20class=%22number%22%3E12345%3C/span%3E)%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22type%22%3Econst%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eauto%3C/span%3E%20i2%20=%20std::unique_ptr&amp;lt;%3Cspan%20class=%22type%22%3Eshort%3C/span%3E&amp;gt;%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Enew%3C/span%3E%20%3Cspan%20class=%22built_in%22%3Eshort%3C/span%3E(*i1)%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22type%22%3Econst%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Eauto%3C/span%3E%20i3%20=%20%3Cspan%20class=%22built_in%22%3Emove%3C/span%3E(i1);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Estd::cout%20&amp;lt;&amp;lt;%20(%3Cspan%20class=%22type%22%3Ebool%3C/span%3E)i1%20&amp;lt;&amp;lt;%20%3Cspan%20class=%22string%22%3E&amp;quot;%20&amp;quot;%3C/span%3E%20&amp;lt;&amp;lt;%20(%3Cspan%20class=%22type%22%3Ebool%3C/span%3E)i2%20&amp;lt;&amp;lt;%20%3Cspan%20class=%22string%22%3E&amp;quot;%20&amp;quot;%3C/span%3E%20&amp;lt;&amp;lt;%20(%3Cspan%20class=%22type%22%3Ebool%3C/span%3E)i3%20&amp;lt;&amp;lt;%20%3Cspan%20class=%22string%22%3E&amp;quot;%20&amp;quot;%3C/span%3E%20&amp;lt;&amp;lt;%20*i2%20&amp;lt;&amp;lt;%20%3Cspan%20class=%22string%22%3E&amp;quot;%20&amp;quot;%3C/span%3E%20&amp;lt;&amp;lt;%20*i3;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3ERust%E7%A8%8B%E5%BA%8F%E4%BC%9A%E8%BE%93%E5%87%BA12345%2012345%EF%BC%8C%E4%BB%BB%E4%BD%95%E8%AE%BF%E9%97%AE%3Ccode%3Ei1%3C/code%3E%E9%83%BD%E4%BC%9A%E5%AF%BC%E8%87%B4%E7%BC%96%E8%AF%91%E9%94%99%E8%AF%AF%E3%80%82C++%E4%BC%9A%E8%BE%93%E5%87%BA0%201%201%2012345%2012345%E3%80%82%E5%9B%A0%E4%B8%BA%E4%BB%85%3Ccode%3Ei1%3C/code%3E%E6%98%AFnull%EF%BC%8C%E5%AE%83%E8%A2%AB%E7%A7%BB%E5%8A%A8%E5%88%B0%3Ccode%3Ei3%3C/code%3E%E4%BA%86%E3%80%82%3C/p%3E%3Cp%3E%E4%BB%85%E5%BD%93%E4%BB%96%E4%BB%AC%E8%A2%AB%E7%94%A8%E4%BA%8E%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%80%E4%B8%AA%E5%8F%98%E9%87%8F%EF%BC%8C%E7%BB%99%E4%B8%80%E4%B8%AA%E6%9C%89%E5%80%BC%E7%9A%84%E5%8F%98%E9%87%8F%E9%87%8D%E6%96%B0%E8%B5%8B%E5%80%BC%EF%BC%8C%E5%AF%B9%E8%B1%A1%E4%B8%8D%E8%A2%AB%E7%A7%BB%E5%8A%A8%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev1%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22literal%22%3Efalse%3C/span%3E;%20%3Cspan%20class=%22number%22%3E3%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ev2%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22literal%22%3Efalse%3C/span%3E;%20%3Cspan%20class=%22number%22%3E2%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev2%20=%20v1;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev1;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E4%BB%A5%E5%8F%8A%E7%BB%99%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92%E5%80%BC%E6%97%B6%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ef%3C/span%3E(v2:%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Ebool%3C/span%3E&amp;gt;)%20&amp;#123;&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev1%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22literal%22%3Efalse%3C/span%3E;%20%3Cspan%20class=%22number%22%3E3%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22title%20function_%20invoke__%22%3Ef%3C/span%3E(v1);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev1;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E4%BB%A5%E5%8F%8A%E6%8C%87%E6%B4%BE%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%9C%A8%E5%BD%93%E5%89%8D%E6%B2%A1%E6%9C%89%E5%AE%9E%E9%99%85%E5%A0%86%E5%88%86%E9%85%8D%E6%97%B6%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ev1%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22literal%22%3Efalse%3C/span%3E;%20%3Cspan%20class=%22number%22%3E0%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ev2%3C/span%3E%20=%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22literal%22%3Efalse%3C/span%3E;%20%3Cspan%20class=%22number%22%3E0%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev2%20=%20v1;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev1;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BC%96%E8%AF%91%E4%B8%8A%E9%9D%A2%E4%BB%BB%E4%BD%95%E4%B8%89%E6%9D%A1%E7%A8%8B%E5%BA%8F%EF%BC%8C%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E8%AF%AD%E5%8F%A5%E9%83%BD%E4%BC%9A%E5%AF%BC%E8%87%B4%E2%80%9Cuse%20of%20a%20moved%20value%E2%80%9D%E7%9A%84%E7%BC%96%E8%AF%91%E9%94%99%E8%AF%AF%EF%BC%8C%3C/p%3E%3Cp%3E%E5%B0%A4%E5%85%B6%E6%98%AF%EF%BC%8C%E5%9C%A8%E7%A8%8B%E5%BA%8F%E6%9C%80%E5%90%8E%EF%BC%8C%3Ccode%3Ev1%3C/code%3E%E8%A2%AB%E7%A7%BB%E5%8A%A8%E5%88%B0%3Ccode%3Ev2%3C/code%3E%EF%BC%8C%E5%8D%B3%E4%BD%BF%E4%BB%96%E4%BB%AC%E9%83%BD%E4%B8%BA%E7%A9%BA%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%AE%83%E4%BB%AC%E6%B2%A1%E6%9C%89%E5%A0%86%E7%A9%BA%E9%97%B4%E8%A2%AB%E4%BD%BF%E7%94%A8%E3%80%82%E4%B8%BA%E4%BB%80%E4%B9%88%EF%BC%9F%E5%9B%A0%E4%B8%BA%E7%A7%BB%E5%8A%A8%E8%A7%84%E5%88%99%E7%94%B1%E7%BC%96%E8%AF%91%E5%99%A8%E6%8F%90%E4%BE%9B%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%AE%83%E5%9C%A8%E8%BF%90%E8%A1%8C%E6%9C%9F%E5%BF%85%E9%A1%BB%E6%98%AF%E7%8B%AC%E7%AB%8B%E7%9A%84%E5%86%85%E5%AE%B9%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BB%A3%E7%A0%81%EF%BC%8C%E6%9C%80%E5%90%8E%E4%B8%80%E8%A1%8C%E4%B9%9F%E4%BC%9A%E5%AF%BC%E8%87%B4%E7%BC%96%E8%AF%91%E9%94%99%E8%AF%AF%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Es1%3C/span%3E%20=%20S%20&amp;#123;&amp;#125;;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Es2%3C/span%3E%20=%20s1;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Es1;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BC%96%E8%AF%91%E5%99%A8%E5%8F%AF%E4%BB%A5%E7%A1%AE%E5%88%87%E7%9F%A5%E9%81%93%E8%BF%99%E4%B8%AA%E5%BC%95%E7%94%A8%E4%B8%8D%E4%BC%9A%E6%8C%87%E5%90%91heap%EF%BC%8C%E4%BD%86%E4%BB%8D%E7%84%B6%E7%BC%96%E8%AF%91%E6%8A%A5%E9%94%99%E3%80%82%E4%B8%BA%E4%BB%80%E4%B9%88Rust%E4%B8%8D%E4%B8%BA%E8%AF%A5%E7%B1%BB%E5%9E%8B%E4%BD%BF%E7%94%A8%E6%8B%B7%E8%B4%9D%E8%AF%AD%E4%B9%89%EF%BC%9F%3C/p%3E%3Cp%3E%E5%AE%83%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86%E6%98%AF%E8%BF%99%E6%A0%B7%E7%9A%84%E3%80%82%E7%94%A8%E6%88%B7%E5%AE%9A%E4%B9%89%E7%9A%84%E7%B1%BB%E5%9E%8B%3Ccode%3ES%3C/code%3E%E7%8E%B0%E5%9C%A8%E6%B2%A1%E6%9C%89%E5%BC%95%E7%94%A8%E5%86%85%E5%AD%98%EF%BC%8C%E4%BD%86%E5%9C%A8%E5%B0%86%E6%9D%A5%E8%BD%AF%E4%BB%B6%E7%BB%B4%E6%8A%A4%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E6%8C%87%E5%90%91%E5%A0%86%E7%9A%84%E5%BC%95%E7%94%A8%E5%8F%AF%E8%83%BD%E4%BC%9A%E8%A2%AB%E6%B7%BB%E5%8A%A0%EF%BC%8C%E5%8D%B3%3Ccode%3ES%3C/code%3E%E5%8F%AF%E8%83%BD%E4%BC%9A%E8%A2%AB%E4%BD%9C%E4%B8%BA%E5%AD%97%E6%AE%B5(field)%E7%AD%89%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%B8%BA%3Ccode%3ES%3C/code%3E%E5%AE%9E%E7%8E%B0%E4%BA%86%E6%8B%B7%E8%B4%9D%E8%AF%AD%E4%B9%89%EF%BC%8C%E5%BD%93%E7%A8%8B%E5%BA%8F%E6%BA%90%E8%A2%AB%E6%9B%B4%E6%94%B9%EF%BC%8C%E4%B8%80%E4%B8%AA%3Ccode%3EString%3C/code%3E%E3%80%81%3Ccode%3EBox%3C/code%3E%E3%80%81%E6%88%96%E9%9B%86%E5%90%88%EF%BC%8C%E7%9B%B4%E6%8E%A5%E6%88%96%E9%97%B4%E6%8E%A5%E5%9C%B0%E6%B7%BB%E5%8A%A0%E5%88%B0%3Ccode%3ES%3C/code%3E%EF%BC%8C%E4%BC%9A%E5%AF%BC%E8%87%B4%E5%BE%88%E5%A4%9A%E9%94%99%E8%AF%AF%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8C%E4%BD%9C%E4%B8%BA%E8%A7%84%E5%88%99%EF%BC%8C%E6%9C%80%E5%90%8E%E4%BF%9D%E7%95%99%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%E3%80%82%3C/p%3E%3Ch2%20id=%22Need-for-Copy-Semantics%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Need-for-Copy-Semantics%22%3E%C2%B6%3C/a%3ENeed%20for%20Copy%20Semantics%3C/h2%3E%3Cp%3E%E6%88%91%E4%BB%AC%E7%9C%8B%E5%88%B0%E5%BE%88%E5%A4%9A%E7%B1%BB%E5%9E%8B%E4%BD%BF%E7%94%A8%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%EF%BC%8C%E5%8C%85%E6%8B%ACvector%EF%BC%8C%E5%8A%A8%E6%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8Cboxes%EF%BC%8C%E7%BB%93%E6%9E%84%E4%BD%93%E2%80%A6%20%E4%B8%8B%E9%9D%A2%E7%9A%84%E7%A8%8B%E5%BA%8F%E6%98%AF%E5%90%88%E6%B3%95%E7%9A%84%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei1%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E123%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_i2%3C/span%3E%20=%20i1;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Es1%3C/span%3E%20=%20%3Cspan%20class=%22string%22%3E&amp;quot;abc&amp;quot;%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_s2%3C/span%3E%20=%20s1;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Er1%3C/span%3E%20=%20&amp;amp;i1;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_r2%3C/span%3E%20=%20r1;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20i1,%20s1,%20r1);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BB%93%E6%9E%9C%E5%B0%86%E6%89%93%E5%8D%B0%EF%BC%9A%E2%80%9C123%20abc%20123%E2%80%9D%E3%80%82%E6%80%8E%E4%B9%88%E6%9D%A5%E7%9A%84%EF%BC%9F%3C/p%3E%3Cp%3E%E9%A6%96%E5%85%88%EF%BC%8C%E5%AF%B9%E4%BA%8E%E5%8E%9F%E7%94%9F%E7%B1%BB%E5%9E%8B%EF%BC%8C%E9%9D%99%E6%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8C%E5%BC%95%E7%94%A8%EF%BC%8CRust%E4%B8%8D%E4%BD%BF%E7%94%A8%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%E3%80%82%E5%AF%B9%E4%BA%8E%E8%BF%99%E4%BA%9B%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%8CRust%E4%BD%BF%E7%94%A8%E6%8B%B7%E8%B4%9D%E8%AF%AD%E4%B9%89%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%BA%E4%BB%80%E4%B9%88%EF%BC%9F%E5%89%8D%E9%9D%A2%E7%9C%8B%E5%88%B0%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%E5%8F%AF%E4%BB%A5%E2%80%9C%E6%8B%A5%E6%9C%89%E2%80%9D%E4%B8%80%E4%B8%AA%E6%88%96%E5%A4%9A%E4%B8%AA%E5%A0%86%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%AE%83%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%BA%94%E8%AF%A5%E5%AE%9E%E7%8E%B0%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%EF%BC%9B%E4%BD%86%E5%A6%82%E6%9E%9C%E4%B8%8D%E8%83%BD%E2%80%9C%E6%8B%A5%E6%9C%89%E2%80%9D%E4%BB%BB%E4%BD%95%E5%A0%86%E5%86%85%E5%AD%98%EF%BC%8C%E5%AE%83%E4%BB%85%E5%8F%AF%E4%BB%A5%E5%AE%9E%E7%8E%B0%E6%8B%B7%E8%B4%9D%E8%AF%AD%E4%B9%89%E3%80%82%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%E5%AF%B9%E4%BA%8E%E5%8E%9F%E7%94%9F%E7%B1%BB%E5%9E%8B%E6%9D%A5%E8%AF%B4%E6%98%AF%E4%B8%AA%E9%BA%BB%E7%83%A6%E7%9A%84%E4%B8%9C%E8%A5%BF%EF%BC%8C%E8%80%8C%E4%B8%94%E5%AE%83%E4%B9%9F%E4%B8%8D%E9%80%82%E5%90%88%E4%BA%8E%E8%A2%AB%E6%94%B9%E5%8F%98%E6%9D%A5%E2%80%9C%E6%8B%A5%E6%9C%89%E2%80%9D%E6%9F%90%E4%BA%9B%E5%A0%86%E5%AF%B9%E8%B1%A1%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8C%E5%AF%B9%E4%BA%8E%E8%BF%99%E4%BA%9B%E7%B1%BB%E5%9E%8B%E6%9D%A5%E8%AF%B4%EF%BC%8C%E6%8B%B7%E8%B4%9D%E8%AF%AD%E4%B9%89%E6%98%AF%E5%AE%89%E5%85%A8%E7%9A%84%E3%80%81%E9%AB%98%E6%95%88%E7%9A%84%E3%80%81%E5%B9%B6%E4%B8%94%E6%9B%B4%E6%96%B9%E4%BE%BF%E3%80%82%3C/p%3E%3Cp%3E%E5%9B%A0%E6%AD%A4%EF%BC%8CRust%E4%B8%AD%E7%9A%84%E6%9F%90%E4%BA%9B%E7%B1%BB%E5%9E%8B%E5%AE%9E%E7%8E%B0%E4%BA%86%E6%8B%B7%E8%B4%9D%E8%AF%AD%E4%B9%89%EF%BC%8C%E5%8F%A6%E4%B8%80%E4%BA%9B%E5%AE%9E%E7%8E%B0%E4%BA%86%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%E3%80%82%E5%8F%A6%E5%A4%96%EF%BC%8Cnumbers%E3%80%81Booleans%E3%80%81static%20strings%E3%80%81arrays%E3%80%81tuples%E3%80%81references%E5%AE%9E%E7%8E%B0%E4%BA%86%E6%8B%B7%E8%B4%9D%E8%AF%AD%E4%B9%89%E3%80%82%E7%9B%B8%E5%8F%8D%EF%BC%8Cdynamic%20strings%E3%80%81boxes%E3%80%81%E9%9B%86%E5%90%88(%E5%8C%85%E6%8B%ACvectors)%E3%80%81enums%E3%80%81structs%E3%80%81tuple-structs%E5%9D%87%E9%BB%98%E8%AE%A4%E5%AE%9E%E7%8E%B0%E4%BA%86%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%E3%80%82%3C/p%3E%3Ch2%20id=%22Cloning-Objects%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Cloning-Objects%22%3E%C2%B6%3C/a%3ECloning%20Objects%3C/h2%3E%3Cp%3E%E7%84%B6%E8%80%8C%EF%BC%8C%E5%AF%B9%E4%BA%8E%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%8B%B7%E8%B4%9D%EF%BC%8C%E6%9C%89%E5%8F%A6%E4%B8%80%E7%A7%8D%E9%87%8D%E8%A6%81%E7%9A%84%E5%8C%BA%E5%88%86%E3%80%82%E6%89%80%E6%9C%89%E5%AE%9E%E7%8E%B0%E6%8B%B7%E8%B4%9D%E8%AF%AD%E4%B9%89%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E6%8C%87%E6%B4%BE%E7%9A%84%E6%96%B9%E5%BC%8F%E7%AE%80%E5%8D%95%E5%9C%B0%E6%8B%B7%E8%B4%9D%EF%BC%9B%E4%BD%86%E5%AF%B9%E4%BA%8E%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%E7%9A%84%E5%AF%B9%E8%B1%A1%E6%9D%A5%E8%AF%B4%E4%B9%9F%E5%8F%AF%E4%BB%A5%E8%BF%9B%E8%A1%8C%E6%8B%B7%E8%B4%9D%EF%BC%8C%E4%BD%86%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8%E6%A0%87%E5%87%86%E5%BA%93%E7%9A%84%3Ccode%3Eclone%3C/code%3E%E3%80%82%E5%AF%B9%E4%BA%8E%E5%8A%A8%E6%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E3%80%81boxed%E5%AF%B9%E8%B1%A1%E3%80%81vector%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%3Ccode%3Eclone%3C/code%3E%E5%87%BD%E6%95%B0%E3%80%82%E4%BD%86%E5%AF%B9%E4%BA%8E%E6%9F%90%E4%BA%9B%E7%B1%BB%E5%9E%8B%EF%BC%8C%E4%B8%8D%E8%83%BD%E4%BD%BF%E7%94%A8%3Ccode%3Eclone%3C/code%3E%E5%87%BD%E6%95%B0%EF%BC%8C%E5%9B%A0%E4%B8%BA%E6%B2%A1%E6%9C%89%E5%90%88%E9%80%82%E7%9A%84%E6%8B%B7%E8%B4%9D%E7%B1%BB%E5%9E%8B%E3%80%82%E4%BE%8B%E5%A6%82%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86%EF%BC%8C%E4%B8%80%E4%B8%AAGUI%E7%AA%97%E5%8F%A3%E5%A4%84%E7%90%86%EF%BC%8C%E6%88%96%E4%B8%80%E4%B8%AA%E4%BA%92%E6%96%A5%E9%94%81%E5%A4%84%E7%90%86%E3%80%82%E5%A6%82%E6%9E%9C%E4%BD%A0%E6%8B%B7%E8%B4%9D%E4%BA%86%E5%AE%83%EF%BC%8C%E7%84%B6%E5%90%8E%E9%94%80%E6%AF%81%E6%9F%90%E4%B8%80%E4%BB%BD%E6%8B%B7%E8%B4%9D%EF%BC%8C%E6%BA%90%E8%B5%84%E6%BA%90%E4%BC%9A%E8%A2%AB%E9%87%8A%E6%94%BE%EF%BC%8C%E5%85%B6%E5%AE%83%E6%8B%B7%E8%B4%9D%E7%9A%84%E5%A4%84%E7%90%86%E4%BC%9A%E5%89%8D%E5%90%8E%E4%B8%8D%E4%B8%80%E8%87%B4%EF%BC%9A%3C/p%3E%3Cp%3E%E5%9B%A0%E6%AD%A4%EF%BC%8C%E5%85%B3%E4%BA%8E%E5%8F%AF%E8%A2%AB%E6%8B%B7%E8%B4%9D%E7%9A%84%E8%83%BD%E5%8A%9B%EF%BC%8C%E4%BC%9A%E6%9C%89%E4%B8%89%E7%A7%8D%E4%B8%8D%E5%90%8C%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%E5%AF%B9%E8%B1%A1%E4%B8%8D%E2%80%9C%E6%8B%A5%E6%9C%89%E2%80%9D%E4%BB%BB%E4%BD%95%E4%B8%9C%E8%A5%BF%EF%BC%8C%E6%8B%B7%E8%B4%9D%E6%98%AF%E5%BB%89%E4%BB%B7%E7%9A%84%E3%80%81%E5%AE%B9%E6%98%93%E7%9A%84%E3%80%82%3C/li%3E%3Cli%3E%E5%AF%B9%E8%B1%A1%E2%80%9C%E6%8B%A5%E6%9C%89%E2%80%9D%E6%9F%90%E4%BA%9B%E5%A0%86%E5%AF%B9%E8%B1%A1%EF%BC%8C%E4%BD%86%E4%B8%8D%E2%80%9C%E6%8B%A5%E6%9C%89%E2%80%9D%E5%86%85%E9%83%A8%E8%B5%84%E6%BA%90%EF%BC%8C%E6%89%80%E4%BB%A5%E5%8F%AF%E4%BB%A5%E8%A2%AB%E6%8B%B7%E8%B4%9D%EF%BC%8C%E4%BD%86%E8%BF%90%E8%A1%8C%E6%9C%9F%E6%9C%89%E8%BE%83%E5%A4%A7%E6%8D%9F%E8%80%97%E3%80%82%3C/li%3E%3Cli%3E%E5%AF%B9%E8%B1%A1%E2%80%9C%E6%8B%A5%E6%9C%89%E2%80%9D%E5%86%85%E9%83%A8%E8%B5%84%E6%BA%90%EF%BC%8C%E8%AD%AC%E5%A6%82%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86%E3%80%81GUI%E7%AA%97%E5%8F%A3%E5%A4%84%E7%90%86%EF%BC%8C%E6%89%80%E4%BB%A5%E5%AE%83%E4%B8%8D%E8%83%BD%E8%A2%AB%E6%8B%B7%E8%B4%9D%E3%80%82%3C/li%3E%3C/ul%3E%3Cp%3E%E7%AC%AC%E4%B8%80%E7%B1%BB%E5%AF%B9%E8%B1%A1%EF%BC%8C%E7%A7%B0%E4%B8%BA%E2%80%9C%E5%8F%AF%E6%8B%B7%E8%B4%9D%E5%AF%B9%E8%B1%A1%EF%BC%8Ccopyable%20objects%E2%80%9D%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%AF%B9%E4%BA%8E%E8%BF%99%E7%B1%BB%E5%AF%B9%E8%B1%A1%E6%9D%A5%E8%AF%B4%EF%BC%8C%E6%8B%B7%E8%B4%9D%E6%9B%B4%E5%8A%A0%E9%AB%98%E6%95%88%E3%80%82%3C/p%3E%3Cp%3E%E7%AC%AC%E4%BA%8C%E7%A7%8D%E5%AF%B9%E8%B1%A1%EF%BC%8C%E7%A7%B0%E4%B8%BA%E2%80%9C%E5%85%8B%E9%9A%86%E8%80%8C%E9%9D%9E%E6%8B%B7%E8%B4%9D%E5%AF%B9%E8%B1%A1%EF%BC%8Ccloneable%20but%20non-copyable%20objects%E2%80%9D%EF%BC%8C%E9%A1%BE%E5%90%8D%E6%80%9D%E4%B9%89%EF%BC%8C%E8%BF%99%E7%B1%BB%E5%AF%B9%E8%B1%A1%E5%8F%AF%E4%BB%A5%E5%AE%9E%E7%8E%B0%E6%8B%B7%E8%B4%9D%E8%AF%AD%E4%B9%89%EF%BC%8C%E4%BD%86%E4%B9%9F%E5%BA%94%E8%AF%A5%E5%AE%9E%E7%8E%B0%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%EF%BC%8C%E4%BB%A5%E9%81%BF%E5%85%8D%E8%BF%90%E8%A1%8C%E6%9C%9F%E9%9D%9E%E5%BF%85%E8%A6%81%E7%9A%84%E5%89%AF%E6%9C%AC%E6%B6%88%E8%80%97%E3%80%82%E7%94%9A%E8%87%B3%EF%BC%8C%E9%9C%80%E8%A6%81%E6%98%BE%E5%BC%8F%E6%8F%90%E4%BE%9B%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E5%A4%8D%E5%88%B6%E3%80%82%3C/p%3E%3Cp%3E%E7%AC%AC%E4%B8%89%E7%A7%8D%E7%B1%BB%E5%9E%8B%EF%BC%8C%E5%BA%94%E8%AF%A5%E5%AE%9E%E7%8E%B0%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%EF%BC%8C%E4%BD%86%E4%B8%8D%E5%BA%94%E8%AF%A5%E6%8F%90%E4%BE%9B%E5%A4%8D%E5%88%B6%E6%96%B9%E6%B3%95%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%AE%83%E6%8B%A5%E6%9C%89%E7%9A%84%E8%B5%84%E6%BA%90%E4%B8%8D%E8%83%BD%E5%9C%A8Rust%E4%BB%A3%E7%A0%81%E5%A4%8D%E5%88%B6%EF%BC%8C%E8%BF%99%E7%A7%8D%E8%B5%84%E6%BA%90%E4%BB%85%E8%83%BD%E6%9C%89%E4%B8%80%E4%B8%AA%E2%80%9Cowner%E2%80%9D%EF%BC%8C%E6%89%80%E4%BB%A5%E8%BF%99%E7%B1%BB%E7%A7%B0%E4%B9%8B%E4%B8%BA%E2%80%9C%E4%B8%8D%E5%8F%AF%E6%8B%B7%E8%B4%9D%E5%AF%B9%E8%B1%A1%EF%BC%8Cnon-cloneable%20objects%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E5%BD%93%E7%84%B6%EF%BC%8C%E4%BB%BB%E4%BD%95%E5%AF%B9%E8%B1%A1%E5%8F%AF%E8%87%AA%E5%8A%A8%E8%A2%AB%E6%8B%B7%E8%B4%9D%E4%B9%9F%E5%8F%AF%E6%98%BE%E5%BC%8F%E5%9C%B0%E8%A2%AB%E6%8B%B7%E8%B4%9D%EF%BC%8C%E6%89%80%E4%BB%A5%E4%BB%BB%E4%BD%95%E5%8F%AF%E6%8B%B7%E8%B4%9D%E5%AF%B9%E8%B1%A1(copyable%20object)%E4%B9%9F%E6%98%AF%E4%B8%80%E4%B8%AA%E5%8F%AF%E5%85%8B%E9%9A%86%E5%AF%B9%E8%B1%A1(cloneable%20object)%E3%80%82%3C/p%3E%3Cp%3E%E6%80%BB%E7%BB%93%EF%BC%8C%E6%9F%90%E4%BA%9B%E5%AF%B9%E8%B1%A1%E4%B8%8D%E8%83%BD%E8%A2%AB%E5%85%8B%E9%9A%86(%E5%A6%82%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86)%EF%BC%8C%E6%9F%90%E4%BA%9B%E5%8F%AF%E4%BB%A5%E6%8B%B7%E8%B4%9D(%E6%98%BE%E5%BC%8F%E5%9C%B0)%EF%BC%8C%E6%9F%90%E4%BA%9B%E5%8F%AF%E4%BB%A5%E9%9A%90%E5%BC%8F%E6%8B%B7%E8%B4%9D(%E5%A6%82%E6%95%B0%E5%AD%97)%EF%BC%8C%E6%9F%90%E4%BA%9B%E4%B8%8D%E8%83%BD%E6%8B%B7%E8%B4%9D(%E5%A6%82%E9%9B%86%E5%90%88)%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%BA%E4%BA%86%E5%8C%BA%E5%88%86%E8%BF%99%E4%B8%89%E8%80%85%EF%BC%8CRust%E6%A0%87%E5%87%86%E5%BA%93%E5%8C%85%E5%90%AB%E6%9C%89%E4%B8%A4%E4%B8%AA%E7%89%B9%E6%AE%8A%E7%9A%84trait%EF%BC%9A%3Ccode%3ECopy%3C/code%3E%E5%92%8C%3Ccode%3EClone%3C/code%3E%E3%80%82%E4%BB%BB%E4%BD%95%E7%B1%BB%E5%9E%8B%E5%AE%9E%E7%8E%B0%E4%BA%86%3Ccode%3ECopy%3C/code%3E%E7%9A%84%E6%98%AF%E5%8F%AF%E6%8B%B7%E8%B4%9D%E7%9A%84%EF%BC%9B%E4%BB%BB%E4%BD%95%E7%B1%BB%E5%9E%8B%E5%AE%9E%E7%8E%B0%E4%BA%86%3Ccode%3EClone%3C/code%3E%E6%98%AF%E5%8F%AF%E5%85%8B%E9%9A%86%E7%9A%84%E3%80%82%3C/p%3E%3Cp%3E%E5%9B%A0%E6%AD%A4%EF%BC%8C%E8%BF%99%E4%B8%89%E7%A7%8D%E5%8F%AF%E4%BB%A5%E6%96%87%E5%AD%97%E6%8F%8F%E8%BF%B0%E4%B8%BA%E5%A6%82%E4%B8%8B%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%E5%AF%B9%E8%B1%A1%E5%AE%9E%E7%8E%B0%E4%BA%86%3Ccode%3ECopy%3C/code%3E%E5%92%8C%3Ccode%3EClone%3C/code%3E%E7%9A%84%EF%BC%8C%E5%8C%85%E5%90%AB%E6%8B%B7%E8%B4%9D%E8%AF%AD%E4%B9%89%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E6%98%BE%E5%BC%8F%E5%85%8B%E9%9A%86%E3%80%82%E4%BE%8B%E5%A6%82%E5%8E%9F%E7%94%9F%E7%B1%BB%E5%9E%8B%E3%80%82%3C/li%3E%3Cli%3E%E5%AF%B9%E8%B1%A1%E5%AE%9E%E7%8E%B0%E4%BA%86%3Ccode%3EClone%3C/code%3E%EF%BC%8C%E4%BD%86%E6%B2%A1%E6%9C%89%E5%AE%9E%E7%8E%B0%3Ccode%3ECopy%3C/code%3E%E7%9A%84%EF%BC%8C%E5%AE%83%E4%BB%AC%E5%AE%9E%E7%8E%B0%E4%BA%86%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%98%BE%E5%BC%8F%E5%85%8B%E9%9A%86%E3%80%82%E4%BE%8B%E5%A6%82%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%E3%80%82%3C/li%3E%3Cli%3E%E6%97%A2%E6%B2%A1%E6%9C%89%E5%AE%9E%E7%8E%B0%3Ccode%3ECopy%3C/code%3E%EF%BC%8C%E4%B9%9F%E6%B2%A1%E6%9C%89%E5%AE%9E%E7%8E%B0%3Ccode%3EClone%3C/code%3E%E7%9A%84%EF%BC%8C%E5%B1%9E%E4%BA%8E%E4%B8%8D%E5%8F%AF%E5%A4%8D%E5%88%B6%EF%BC%8C%E5%AE%83%E4%BB%AC%E5%AE%9E%E7%8E%B0%E4%BA%86%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%EF%BC%8C%E4%BE%8B%E5%A6%82%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86%E7%AD%89%E3%80%82%3C/li%3E%3Cli%3E%E6%B2%A1%E6%9C%89%E5%AF%B9%E8%B1%A1%E6%98%AF%E5%AE%9E%E7%8E%B0%E4%BA%86%3Ccode%3ECopy%3C/code%3E%EF%BC%8C%E5%8D%B4%E6%B2%A1%E6%9C%89%3Ccode%3EClone%3C/code%3E%E7%9A%84%E3%80%82%E8%BF%99%E6%84%8F%E5%91%B3%E7%9D%80%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%8B%B7%E8%B4%9D%E6%98%AF%E9%9A%90%E5%BC%8F%E7%9A%84%EF%BC%8C%E5%8D%B4%E4%B8%8D%E8%83%BD%E6%98%BE%E5%BC%8F%E8%B0%83%E7%94%A8%EF%BC%8C%E8%BF%99%E6%98%AF%E6%97%A0%E6%84%8F%E4%B9%89%E7%9A%84%E3%80%82%3C/li%3E%3C/ul%3E%3Cp%3E%E4%B8%8B%E9%9D%A2%E4%BE%8B%E5%AD%90%E5%B1%95%E7%A4%BA%E6%89%80%E6%9C%89%E7%9A%84%E6%83%85%E5%86%B5%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ea1%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E123%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Eb1%3C/span%3E%20=%20a1.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eclone%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ec1%3C/span%3E%20=%20b1;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20a1,%20b1,%20c1);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ea2%3C/span%3E%20=%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E::&amp;lt;%3Cspan%20class=%22type%22%3Ebool%3C/span%3E&amp;gt;::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enew%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Eb2%3C/span%3E%20=%20a2.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eclone%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ec2%3C/span%3E%20=%20b2;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;%20&amp;#123;:?&amp;#125;&amp;quot;%3C/span%3E,%20a2);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22comment%22%3E/%20ILLEGAL:%20print!(&amp;quot;%20&amp;#123;:?&amp;#125;&amp;quot;,%20b2);%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;%20&amp;#123;:?&amp;#125;&amp;quot;%3C/span%3E,%20c2);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ea3%3C/span%3E%20=%20std::fs::File::%3Cspan%20class=%22title%20function_%20invoke__%22%3Eopen%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;.&amp;quot;%3C/span%3E).%3Cspan%20class=%22title%20function_%20invoke__%22%3Eunwrap%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22comment%22%3E/%20ILLEGAL:%20let%20b3%20=%20a3.clone();%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ec3%3C/span%3E%20=%20a3;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22comment%22%3E/%20ILLEGAL:%20print!(&amp;quot;%20&amp;#123;:?&amp;#125;&amp;quot;,%20a3);%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;%20&amp;#123;:?&amp;#125;&amp;quot;%3C/span%3E,%20c3);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BB%93%E6%9E%9C%E6%89%93%E5%8D%B0%EF%BC%9A%E2%80%9C%3Ccode%3E123%20123%20123%20[]%20[]%20File%3C/code%3E%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E6%AD%A4%E5%A4%84%E4%B8%89%E5%A4%84%E6%B3%A8%E9%87%8A%E7%9A%84%E5%9C%B0%E6%96%B9%E6%98%AF%E4%B8%8D%E5%90%88%E6%B3%95%E7%9A%84%E8%AF%AD%E5%8F%A5%E3%80%82%3C/p%3E%3Cp%3E%E9%A6%96%E5%85%88%EF%BC%8C%3Ccode%3Ea1%3C/code%3E%E6%98%AF%E5%8E%9F%E7%94%9F%E7%B1%BB%E5%9E%8B%EF%BC%8C%E6%89%80%E4%BB%A5%E8%BF%99%E7%A7%8D%E7%B1%BB%E5%9E%8B%E5%8F%AF%E4%BB%A5%E9%9A%90%E5%BC%8F%E6%8B%B7%E8%B4%9D%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E6%98%BE%E5%BC%8F%E5%85%8B%E9%9A%86(clone)%E3%80%82%E6%89%80%E4%BB%A5%E6%AD%A4%E5%A4%84%E4%B8%89%E4%B8%AA%E5%AF%B9%E8%B1%A1%E6%9C%89%E5%90%8C%E6%A0%B7%E7%9A%84%E5%80%BC%EF%BC%8C%E5%B9%B6%E6%89%93%E5%8D%B0%E8%BE%93%E5%87%BA%E3%80%82%3C/p%3E%3Cp%3E%E5%9B%A0%E4%B8%BA%3Ccode%3Ea2%3C/code%3E%E6%98%AF%E4%B8%80%E4%B8%AA%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%EF%BC%8C%E8%BF%99%E7%A7%8D%E7%B1%BB%E5%9E%8B%E5%8F%AF%E4%BB%A5%E5%85%8B%E9%9A%86%EF%BC%8C%E4%BD%86%E4%B8%8D%E8%83%BD%E6%8B%B7%E8%B4%9D%EF%BC%8C%E6%89%80%E4%BB%A5%3Ccode%3Eb2%3C/code%3E%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%3Ccode%3Ea2%3C/code%3E%E6%98%BE%E5%BC%8F%E5%85%8B%E9%9A%86%EF%BC%8C%E5%AF%B9%3Ccode%3Eb2%3C/code%3E%E5%88%B0%3Ccode%3Ec2%3C/code%3E%E7%9A%84%E8%B5%8B%E5%80%BC%E6%98%AF%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%EF%BC%8C%3Ccode%3Eb2%3C/code%3E%E4%B8%8D%E5%8F%AF%E5%86%8D%E8%AE%BF%E9%97%AE%E3%80%82%3C/p%3E%3Cp%3E%E5%AF%B9%E4%BA%8E%3Ccode%3Ea3%3C/code%3E%E8%80%8C%E8%A8%80%EF%BC%8C%E5%AE%83%E6%98%AF%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6handle%EF%BC%8C%E8%BF%99%E7%A7%8D%E7%B1%BB%E5%9E%8B%E4%B8%8D%E8%83%BD%E8%A2%AB%E5%85%8B%E9%9A%86%EF%BC%8C%E5%B0%9D%E8%AF%95%E7%BC%96%E8%AF%91%3Ccode%3Ea3.clone()%3C/code%3E%E4%BC%9A%E5%87%BA%E7%8E%B0%E7%BC%96%E8%AF%91%E9%94%99%E8%AF%AF%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%AF%B9%3Ccode%3Ea3%3C/code%3E%E5%88%B0%3Ccode%3Ec3%3C/code%3E%E7%9A%84%E8%B5%8B%E5%80%BC%E6%98%AF%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%EF%BC%8C%E5%AF%B9%E8%B1%A1%E8%A2%AB%E7%A7%BB%E5%8A%A8%E4%BA%86%EF%BC%8C%3Ccode%3Ea3%3C/code%3E%E4%B8%8D%E5%8F%AF%E5%86%8D%E8%AE%BF%E9%97%AE%E3%80%82%3C/p%3E%3Ch2%20id=%22Making-Types-Cloneable-or-Copyable%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Making-Types-Cloneable-or-Copyable%22%3E%C2%B6%3C/a%3EMaking%20Types%20Cloneable%20or%20Copyable%3C/h2%3E%3Cp%3E%E5%89%8D%E9%9D%A2%E8%AF%B4%E8%BF%87%EF%BC%8C%E6%9E%9A%E4%B8%BE%EF%BC%8C%E7%BB%93%E6%9E%84%E4%BD%93%EF%BC%8C%E5%85%83%E7%BB%84-%E7%BB%93%E6%9E%84%E4%BD%93%EF%BC%8C%E9%BB%98%E8%AE%A4%E9%83%BD%E6%B2%A1%E6%9C%89%E5%AE%9E%E7%8E%B0%3Ccode%3ECopy%3C/code%3E%E5%92%8C%3Ccode%3EClone%3C/code%3E%E3%80%82%E5%9B%A0%E6%AD%A4%E5%AE%83%E6%98%AF%E4%B8%8D%E5%8F%AF%E5%85%8B%E9%9A%86%E7%9A%84%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8C%E4%BD%A0%E5%8F%AF%E8%83%BD%E9%9C%80%E8%A6%81%E4%BB%85%E5%AE%9E%E7%8E%B0%3Ccode%3EClone%3C/code%3E%EF%BC%8C%E5%8F%88%E6%88%96%3Ccode%3ECopy%3C/code%3E%E5%92%8C%3Ccode%3EClone%3C/code%3E%E9%83%BD%E9%9C%80%E8%A6%81%E6%9C%89%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%8B%E9%9D%A2%E4%BB%A3%E7%A0%81%E6%98%AF%E4%B8%8D%E5%90%88%E6%B3%95%E7%9A%84%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Es%3C/span%3E%20=%20S%20&amp;#123;&amp;#125;;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Es.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eclone%3C/span%3E();%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E6%89%80%E4%BB%A5%E4%BD%A0%E4%BC%9A%E4%B8%BA%E5%85%B6%E5%AE%9E%E7%8E%B0%3Ccode%3EClone%3C/code%3E%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;&amp;#125;%20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eimpl%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EClone%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Eclone%3C/span%3E(&amp;amp;%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20%3Cspan%20class=%22keyword%22%3ESelf%3C/span%3E%20&amp;#123;%20%3Cspan%20class=%22keyword%22%3ESelf%3C/span%3E%20&amp;#123;&amp;#125;%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Es%3C/span%3E%20=%20S%20&amp;#123;&amp;#125;;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Es.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eclone%3C/span%3E();%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%BF%99%E4%BA%9B%E5%AE%9E%E7%8E%B0%E5%86%99%E6%B3%95%EF%BC%8C%E5%9C%A8%E5%89%8D%E9%9D%A2%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E4%BB%8B%E7%BB%8D%E8%BF%87%EF%BC%8C%E4%BD%A0%E9%9C%80%E8%A6%81%E4%B8%BA%E5%85%B6%E5%AE%9E%E7%8E%B0%3Ccode%3Eclone%3C/code%3E%E6%96%B9%E6%B3%95%EF%BC%8C%3C/p%3E%3Cp%3E%E5%8F%A6%E5%A4%96%EF%BC%8C%E5%AE%9E%E7%8E%B0%E7%9A%84%3Ccode%3EClone%3C/code%3E%E6%96%B9%E6%B3%95%EF%BC%8C%E4%B8%8D%E8%83%BD%E9%9A%90%E5%BC%8F%E4%BD%BF%E7%94%A8%E6%8B%B7%E8%B4%9D%E8%AF%AD%E4%B9%89%EF%BC%8C%E6%89%80%E4%BB%A5%E4%B8%8B%E9%9D%A2%E4%BB%A3%E7%A0%81%E6%98%AF%E4%B8%8D%E5%90%88%E6%B3%95%E7%9A%84%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eimpl%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EClone%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Eclone%3C/span%3E(&amp;amp;%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20%3Cspan%20class=%22keyword%22%3ESelf%3C/span%3E%20&amp;#123;%20%3Cspan%20class=%22keyword%22%3ESelf%3C/span%3E%20&amp;#123;&amp;#125;%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Es%3C/span%3E%20=%20S%20&amp;#123;&amp;#125;;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Es.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eclone%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_s2%3C/span%3E%20=%20s;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Es;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E6%89%80%E4%BB%A5%EF%BC%8C%E4%BD%A0%E9%9C%80%E8%A6%81%E5%AE%9E%E7%8E%B0%3Ccode%3ECopy%3C/code%3E%EF%BC%8C%E4%BD%BF%E5%85%B6%E5%90%88%E6%B3%95%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eimpl%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EClone%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Eclone%3C/span%3E(&amp;amp;%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20%3Cspan%20class=%22keyword%22%3ESelf%3C/span%3E%20&amp;#123;%20%3Cspan%20class=%22keyword%22%3ESelf%3C/span%3E%20&amp;#123;&amp;#125;%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eimpl%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ECopy%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Es%3C/span%3E%20=%20S%20&amp;#123;&amp;#125;;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Es.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eclone%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_s2%3C/span%3E%20=%20s;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Es;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E4%B8%BB%E8%A6%81%E5%88%B0%3Ccode%3ECopy%3C/code%3E%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8F%AF%E4%BB%A5%E4%B8%BA%E7%A9%BA%EF%BC%9B%E5%8F%AA%E8%A6%81%E5%A3%B0%E6%98%8E%E4%BA%86%3Ccode%3ECopy%3C/code%3E%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%8C%E6%8B%B7%E8%B4%9D%E8%AF%AD%E4%B9%89%E5%B0%B1%E6%BF%80%E6%B4%BB%E4%BA%86%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%8B%E9%9D%A2%E5%86%99%E6%B3%95%E5%8D%B4%E6%98%AF%E4%B8%8D%E5%90%88%E6%B3%95%E7%9A%84%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eimpl%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ECopy%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BC%96%E8%AF%91%E5%99%A8%E4%BC%9A%E6%8A%B1%E6%80%A8%EF%BC%9A%E2%80%9C%3Ccode%3Ethe%20trait%20bound%20%3C/code%3Emain::S:std::clone::Clone%3Ccode%3E%20is%20not%20satisfied%3C/code%3E%E2%80%9D%E3%80%82%3Ccode%3ECopy%3C/code%3E%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%8C%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6%E6%98%AF%3Ccode%3EClone%3C/code%3E%E4%B9%9F%E5%AE%9E%E7%8E%B0%E4%BA%86%EF%BC%8C%3C/p%3E%3Cp%3E%E4%BD%86%E4%B8%8B%E9%9D%A2%E5%86%99%E6%B3%95%E4%B9%9F%E6%98%AF%E4%B8%8D%E5%90%88%E6%B3%95%E7%9A%84%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;%20x:%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Ei32%3C/span%3E&amp;gt;%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eimpl%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ECopy%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eimpl%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EClone%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Eclone%3C/span%3E(&amp;amp;%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20%3Cspan%20class=%22keyword%22%3ESelf%3C/span%3E%20&amp;#123;%20*%20%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BC%96%E8%AF%91%E4%BA%A7%E7%94%9F%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF%EF%BC%8C%E2%80%9Cthe%20trait%20%3Ccode%3ECopy%3C/code%3E%20may%20not%20be%20implemented%20for%20this%20type%E2%80%9D%E3%80%82%E5%91%8A%E8%AF%89%E4%BD%A0%3Ccode%3EVec&amp;lt;i2&amp;gt;%3C/code%3E%E7%B1%BB%E5%9E%8B%E6%B2%A1%E6%9C%89%E5%AE%9E%E7%8E%B0%3Ccode%3ECopy%3C/code%3E%E3%80%82%3C/p%3E%3Cp%3ERust%E5%85%81%E8%AE%B8%E5%AE%9E%E7%8E%B0%3Ccode%3ECopy%3C/code%3E%EF%BC%8C%E4%BB%85%E8%83%BD%E5%85%81%E8%AE%B8%E5%85%B6%E7%B1%BB%E5%9E%8B%E6%98%AF%E5%8C%85%E5%90%AB%E5%8F%AF%E6%8B%B7%E8%B4%9D%E5%AF%B9%E8%B1%A1%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%E6%8B%B7%E8%B4%9D%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%84%8F%E5%91%B3%E7%9D%80%E4%BC%9A%E6%8B%B7%E8%B4%9D%E5%AE%83%E7%9A%84%E6%89%80%E6%9C%89%E6%88%90%E5%91%98(members)%E3%80%82%E8%BF%99%E9%87%8C%EF%BC%8C%3Ccode%3EVec%3C/code%3E%E6%B2%A1%E6%9C%89%E5%AE%9E%E7%8E%B0%3Ccode%3ECopy%3C/code%3E%EF%BC%8C%E6%89%80%E4%BB%A5%3Ccode%3ES%3C/code%3E%E4%B9%9F%E4%B8%8D%E8%83%BD%E5%AE%9E%E7%8E%B0%E6%8B%B7%E8%B4%9D%E8%AF%AD%E4%B9%89%E3%80%82%3C/p%3E%3Cp%3E%E7%9B%B8%E5%8F%8D%EF%BC%8C%E4%B8%8B%E9%9D%A2%E4%BB%A3%E7%A0%81%E6%98%AF%E5%90%88%E6%B3%95%E7%9A%84%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Estruct%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;%20x:%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Ei32%3C/span%3E&amp;gt;%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Eimpl%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3EClone%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22title%20class_%22%3ES%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Eclone%3C/span%3E(&amp;amp;%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20%3Cspan%20class=%22keyword%22%3ESelf%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3ES%20&amp;#123;%20x:%20%3Cspan%20class=%22keyword%22%3Eself%3C/span%3E.x.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eclone%3C/span%3E()%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Es1%3C/span%3E%20=%20S%20&amp;#123;%20x:%20%3Cspan%20class=%22built_in%22%3Evec!%3C/span%3E[%3Cspan%20class=%22number%22%3E12%3C/span%3E]%20&amp;#125;;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Es2%3C/span%3E%20=%20s1.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eclone%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Es1.x[%3Cspan%20class=%22number%22%3E0%3C/span%3E]%20+=%20%3Cspan%20class=%22number%22%3E1%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20s1.x[%3Cspan%20class=%22number%22%3E0%3C/span%3E],%20s2.x[%3Cspan%20class=%22number%22%3E0%3C/span%3E]);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BB%93%E6%9E%9C%E5%B0%86%E6%89%93%E5%8D%B0%EF%BC%9A%E2%80%9C13%2012%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E8%BF%99%E9%87%8C%EF%BC%8C%3Ccode%3ES%3C/code%3E%E7%BB%93%E6%9E%84%E4%BD%93%E4%B8%8D%E6%98%AF%E5%8F%AF%E6%8B%B7%E8%B4%9D%E7%9A%84%EF%BC%8C%E4%BD%86%E5%8D%B4%E6%98%AF%E5%8F%AF%E5%85%8B%E9%9A%86%E7%9A%84(clonable)%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%AE%83%E5%AE%9E%E7%8E%B0%E4%BA%86%3Ccode%3EClone%3C/code%3E%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8C%3Ccode%3Es1%3C/code%3E%E5%8F%AF%E4%BB%A5%E5%AF%B9%3Ccode%3Es2%3C/code%3E%E8%B5%8B%E5%80%BC%E3%80%82%3Ccode%3Es1%3C/code%3E%E8%A2%AB%E4%BF%AE%E6%94%B9%EF%BC%8C%E4%B8%A4%E8%80%85%E8%BE%93%E5%87%BA%E5%86%85%E5%AE%B9%E4%B8%8D%E5%90%8C%E3%80%82%3C/p%3E" type="image"/>
    
    
    <category term="learning" scheme="https://galudisu.info/categories/learning/"/>
    
    
    <category term="rust" scheme="https://galudisu.info/tags/rust/"/>
    
  </entry>
  
  <entry>
    <title>rust基础入门[20] - Standard Library Collections</title>
    <link href="https://galudisu.info/2023/01/20/rust/beginning/chapter20_Standard%20Library%20Collections/"/>
    <id>https://galudisu.info/2023/01/20/rust/beginning/chapter20_Standard%20Library%20Collections/</id>
    <published>2023-01-20T07:50:46.000Z</published>
    <updated>2025-04-27T11:59:08.282Z</updated>
    
    <content type="html"><![CDATA[<p>本章覆盖有：</p><ul><li>如何度量运行部分代码所花费的时间</li><li>基于性能因素，如何使用哪种类型的集合</li><li>集合中的各种操作中哪个更好：顺序扫描(sequential scan)、两端插入和删除(insertion and removal of items at both ends)、删除最大项(removal of the largest item)、搜索(search)、键搜索(search by key)、保持顺序(keeping items sorted)</li></ul><span id="more"></span><h2 id="Collections"><a class="header-anchor" href="#Collections">¶</a>Collections</h2><p>数组、向量、结构体、元组结构体、元组、枚举属于数据类型，它们的对象可能包含几个其它对象。然而，对于结构体、元组-结构体、元组、枚举，每个包含的对象，需要指定声明类型和构造类型，它们不能存储多个对象。相反数组和向量的数据类型会包含多个对象，这一类对象称为“集合”。</p><p>数组和向量是最佳集合：内存高效，读取速度快，CPU缓存高效，能通过索引快速访问内部元素。当然，在某些情况不尽是高效的，这种情况下需要使用其它集合。Rust标准库提供了各种各样的集合类型：<code>VecDeque&lt;T&gt;</code>、<code>LinkedList&lt;T&gt;</code>、<code>BinaryHeap&lt;T&gt;</code>、<code>BTreeSet&lt;T&gt;</code>、<code>BTreeMap&lt;K,V&gt;</code>、<code>HashSet&lt;T&gt;</code>和<code>HashMap&lt;K,V&gt;</code>。</p><p>说到集合，数组是一个单独案例，因为它完全是栈分配的，以及在编译期已经定义了大小。而对于其它集合，包括vector，元素个数可变，它将header存储在stack，数据部分则存储在堆。这种称为“动态数据集dynamically-sized collections”。</p><h2 id="Measuring-Execution-Time"><a class="header-anchor" href="#Measuring-Execution-Time">¶</a>Measuring Execution Time</h2><p>集合的选取更多地由它的性能决定，先绕开这方面内容，看看如何精确度量不同Rust代码所花费的性能。</p><p>对于软件开发者来说性能是很重要的一方面。单个函数的运行，高级语言都要求命令处理花费至毫秒和秒级别，像Rust这类低级语言，都要求毫秒甚至纳秒。</p><p>在Rust标准库中，有几个函数可以度量源代码消耗的时间，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::time::Instant;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">elapsed_ms</span>(t1: Instant, t2: Instant) <span class="punctuation">-&gt;</span> <span class="type">f64</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">t</span> = t2 - t1;</span><br><span class="line">    t.<span class="title function_ invoke__">as_secs</span>() <span class="keyword">as</span> <span class="type">f64</span> * <span class="number">1000</span>. + t.<span class="title function_ invoke__">subsec_nanos</span>() <span class="keyword">as</span> <span class="type">f64</span> / <span class="number">1e6</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">time0</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..<span class="number">10_000</span> &#123;</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">time1</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, <span class="title function_ invoke__">elapsed_ms</span>(time0, time1));</span><br></pre></td></tr></table></figure><p>程序会打印0到9999的整数，然后将所花费的毫秒数输出。</p><p>所花费的时间跟计算机能力有关，当然也跟编译器的优化有关。</p><p>前面章节说到，可以用<code>rustc</code>来编译源代码文件，但是这个命令并没有编译器优化，只是单纯生成机器码用于调试，它不是高效的。</p><p>如果你对性能感兴趣，可以带上编译参数<code>-O</code>。省略这个参数，所有优化都是禁用的。</p><p>因此，这章示例可以通过下面命令行编译优化，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rustc -O main.rs</span><br></pre></td></tr></table></figure><p>要度量一个时间，你应该用<code>Instant</code>类的<code>now</code>函数。这个类型定义在Rust的标准库中。</p><h2 id="Performing-Arbitrary-Insertions-and-Removals"><a class="header-anchor" href="#Performing-Arbitrary-Insertions-and-Removals">¶</a>Performing Arbitrary Insertions and Removals</h2><p>回到原来的集合处理。下面程序是非常高效的，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> SIZE: <span class="type">usize</span> = <span class="number">100_000_000</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">t0</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">v</span> = <span class="type">Vec</span>::&lt;<span class="type">usize</span>&gt;::<span class="title function_ invoke__">with_capacity</span>(SIZE);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">t1</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..SIZE &#123;</span><br><span class="line">v.<span class="title function_ invoke__">push</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">t2</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="keyword">for</span> <span class="variable">_</span> <span class="keyword">in</span> <span class="number">0</span>..SIZE &#123;</span><br><span class="line">v.<span class="title function_ invoke__">pop</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">t3</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125; &#123;&#125;&quot;</span>, <span class="title function_ invoke__">elapsed_ms</span>(t0, t1), <span class="title function_ invoke__">elapsed_ms</span>(t1, t2), <span class="title function_ invoke__">elapsed_ms</span>(t2, t3));</span><br></pre></td></tr></table></figure><p>记得添加<code>-O</code>进行编译。</p><p>程序将打印三段数字，它是由编译器、或者有操作系统所决定。</p><p>假设你本机输出的数据是：“0.002667 454.516057 87.302678”。</p><p>这意味着创建一个vector为这个<code>usize</code>对象分配“房间”，它占64位系统800M，以及少于3毫秒的消耗时间。要将一千万的值塞入这个空间，不使用内存派遣，少于1秒的损耗时间，同时还要删除所有数据，花费1/10秒的时间。</p><p>如果不加<code>-O</code>参数编译，你会发现它花费时间非常大。</p><p>相反，下面的程序非常低效，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> SIZE: <span class="type">usize</span> = <span class="number">100_000_000</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">t0</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">v</span> = <span class="type">Vec</span>::&lt;<span class="type">usize</span>&gt;::<span class="title function_ invoke__">with_capacity</span>(SIZE);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">t1</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..SIZE &#123;</span><br><span class="line">v.<span class="title function_ invoke__">insert</span>(<span class="number">0</span>, i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">t2</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="keyword">for</span> <span class="variable">_</span> <span class="keyword">in</span> <span class="number">0</span>..SIZE &#123;</span><br><span class="line">v.<span class="title function_ invoke__">remove</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">t3</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125; &#123;&#125;&quot;</span>, <span class="title function_ invoke__">elapsed_ms</span>(t0, t1), <span class="title function_ invoke__">elapsed_ms</span>(t1, t2), <span class="title function_ invoke__">elapsed_ms</span>(t2, t3));</span><br></pre></td></tr></table></figure><p>它会打印：“0.00178 2038.879344 2029.447851”。</p><p>要创建一个800KB的vector，花费少于2毫秒的时间，但是插入数据却花费了多于2秒的时间，以及差不多等同的时间用来删除数据。这里发现插入动作，比前面花费更多的时间。</p><p>导致两者的差异很好解析。</p><p>从栈顶添加元素，只需要确保有足够的空间，然后将数据拷贝到缓冲区，增加元素个数。对于计算机来说，处理这些时间少于5纳秒，包括迭代器的移位动作。</p><p>同样，对于从栈顶删除元素，确保vector不为空，然后递减元素，花费不到1纳秒的时间。</p><p>相反，从vector的开始部分插入元素，首先你需要将地址进行转换，每次有新的元素过来，都要释放地址空间。虽然转换很快，随着元素个数的增加，要插入首位置的元素也越来越多。</p><p>类似的，要从首位置移除元素，需要将所有元素都转换一遍，不仅仅是首位置，</p><p>从计算复杂度表示，栈顶(尾部)插入或删除元素是<code>O(K)</code>复杂度，它是常量复杂度(constant complexity)；而对于从栈尾(首部)插入或删除元素是<code>O(N)</code>复杂度，它是线性复杂度(linear complexity)。</p><p>即使是在中间部分插入或删除数据，性能可能会稍微好一点，但仍然比在栈顶插入或删除数据要慢。</p><h2 id="Queues"><a class="header-anchor" href="#Queues">¶</a>Queues</h2><p>如果是在首部和尾部同时有插入或删除动作，这个vector不会是一个优化集合。典型情况类似于Queue，它在尾部插入元素，在首部萃取元素，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> SIZE: <span class="type">usize</span> = <span class="number">40_000</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">t0</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">v</span> = <span class="type">Vec</span>::&lt;<span class="type">usize</span>&gt;::<span class="title function_ invoke__">new</span>();</span><br><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..SIZE &#123;</span><br><span class="line">v.<span class="title function_ invoke__">push</span>(i);</span><br><span class="line">v.<span class="title function_ invoke__">push</span>(SIZE + i);</span><br><span class="line">v.<span class="title function_ invoke__">remove</span>(<span class="number">0</span>);</span><br><span class="line">v.<span class="title function_ invoke__">push</span>(SIZE * <span class="number">2</span> + i);</span><br><span class="line">v.<span class="title function_ invoke__">remove</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">t1</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="keyword">while</span> v.<span class="title function_ invoke__">len</span>() &gt; <span class="number">0</span> &#123;</span><br><span class="line">v.<span class="title function_ invoke__">remove</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">t2</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125;&quot;</span>, <span class="title function_ invoke__">elapsed_ms</span>(t0, t1), <span class="title function_ invoke__">elapsed_ms</span>(t1, t2));</span><br></pre></td></tr></table></figure><p>可能的输出会是：“561.189636 276.056133”。</p><p>代码中，创建了一个空的vector，用了4千次循环，将三个数插入栈顶，以及在栈顶删除两个元素。第二个循环体内，每次从栈顶删除元素。第一个循环片段花费了大约半秒的时间，第二个循环体花费了大约四分之一秒。实际上，大部分时间都用在了萃取元素上，插入其实是非常快的。</p><p>我们希望插入元素总是发生在栈尾，萃取(extract)元素总是在栈顶，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> SIZE: <span class="type">usize</span> = <span class="number">40_000</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">t0</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">v</span> = <span class="type">Vec</span>::&lt;<span class="type">usize</span>&gt;::<span class="title function_ invoke__">new</span>();</span><br><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..SIZE &#123;</span><br><span class="line">v.<span class="title function_ invoke__">insert</span>(<span class="number">0</span>, i);</span><br><span class="line">v.<span class="title function_ invoke__">insert</span>(<span class="number">0</span>, SIZE + i);</span><br><span class="line">v.<span class="title function_ invoke__">pop</span>();</span><br><span class="line">v.<span class="title function_ invoke__">insert</span>(<span class="number">0</span>, SIZE * <span class="number">2</span> + i);</span><br><span class="line">v.<span class="title function_ invoke__">pop</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">t1</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="keyword">while</span> v.<span class="title function_ invoke__">len</span>() &gt; <span class="number">0</span> &#123;</span><br><span class="line">v.<span class="title function_ invoke__">pop</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">t2</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125;&quot;</span>, <span class="title function_ invoke__">elapsed_ms</span>(t0, t1), <span class="title function_ invoke__">elapsed_ms</span>(t1, t2));</span><br></pre></td></tr></table></figure><p>结果可能打印：“790.365012 0.000112”。</p><p>现在插入很慢，删除却很快。可是总共花费的时间并没有提升多少。我们尝试用<code>VecDeque</code>类型，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> SIZE: <span class="type">usize</span> = <span class="number">40_000</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">t0</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">v</span> = std::collections::VecDeque::&lt;<span class="type">usize</span>&gt;::<span class="title function_ invoke__">new</span>();</span><br><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..SIZE &#123;</span><br><span class="line">v.<span class="title function_ invoke__">insert</span>(<span class="number">0</span>, i);</span><br><span class="line">v.<span class="title function_ invoke__">insert</span>(<span class="number">0</span>, SIZE + i);</span><br><span class="line">v.<span class="title function_ invoke__">pop</span>();</span><br><span class="line">v.<span class="title function_ invoke__">insert</span>(<span class="number">0</span>, SIZE * <span class="number">2</span> + i);</span><br><span class="line">v.<span class="title function_ invoke__">pop</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">t1</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="keyword">while</span> v.<span class="title function_ invoke__">len</span>() &gt; <span class="number">0</span> &#123;</span><br><span class="line">v.<span class="title function_ invoke__">pop</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">t2</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125;&quot;</span>, <span class="title function_ invoke__">elapsed_ms</span>(t0, t1), <span class="title function_ invoke__">elapsed_ms</span>(t1, t2));</span><br></pre></td></tr></table></figure><p>结果打印：“0.40793 0.050257”。</p><p>整段程序花费不到半毫秒的时间，这里需要显式声明<code>VecDeque</code>的类型，它是“vector-like double-ended queue”的缩写，“queue”表示的是“sequential collection into which items are inserted at one end and from which items are extracted at the other end”。“double-ended”表示在尾部插入元素，也可以在尾部萃取元素，不带有penalty。“vector-like”表示具有vector相似的操作。</p><p>要在vector栈顶添加或删除元素，可以简单使用<code>push</code>和<code>pop</code>，而对于<code>双端队列，double-ended queue</code>，需要理解两端的实现是等效的，插入元素可以用<code>push_front</code>和<code>push_back</code>，也可以在两端用<code>pop_front</code>和<code>pop_back</code>删除元素。虽然<code>VecDeque</code>类型支持<code>insert</code>和<code>remove</code>函数，但不被推荐使用，因为它不是高效的。</p><p>给出的队列非常高效，为什么我们总是用它，而是选择用vector？</p><p>原因是vector更普遍的操作是迭代、元素访问，这种时间损耗一直保持为常量因素。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> SIZE: <span class="type">usize</span> = <span class="number">40_000</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">v</span> = <span class="type">Vec</span>::&lt;<span class="type">usize</span>&gt;::<span class="title function_ invoke__">new</span>();</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">vd</span> = std::collections::VecDeque::&lt;<span class="type">usize</span>&gt;::<span class="title function_ invoke__">new</span>();</span><br><span class="line"><span class="keyword">let</span> <span class="variable">t0</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..SIZE &#123;</span><br><span class="line">v.<span class="title function_ invoke__">push</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">t1</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..SIZE &#123;</span><br><span class="line">vd.<span class="title function_ invoke__">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">count</span> = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="number">2</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> v.<span class="title function_ invoke__">iter</span>() &#123;</span><br><span class="line">count += i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">t3</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> vd.<span class="title function_ invoke__">iter</span>() &#123;</span><br><span class="line">count += i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">t4</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125; &#123;&#125; &#123;&#125; &#123;&#125;&quot;</span>, count,</span><br><span class="line"><span class="title function_ invoke__">elapsed_ms</span>(t0, t1), <span class="title function_ invoke__">elapsed_ms</span>(t1, t2),</span><br><span class="line"><span class="title function_ invoke__">elapsed_ms</span>(t2, t3), <span class="title function_ invoke__">elapsed_ms</span>(t3, t4));</span><br></pre></td></tr></table></figure><p>可能打印：“1599960000 0.230073 0.203979 0.013144 0.035295”。</p><p>会发现，<code>Vec</code>和<code>VecDeque</code>几乎花费相当的时间，但对于扫描整个集合元素，<code>Vec</code>效率要高出两倍。</p><h2 id="Linked-Lists"><a class="header-anchor" href="#Linked-Lists">¶</a>Linked Lists</h2><p>对于某些应用，可能会频繁地在中间位置插入或删除元素。这种情况，向量(vector)和对象(queue)不是高效的，所以需要引入新的集合类型——<code>LinkedList</code>。</p><p>然而，如果你需要在一个集合进行大量操作，譬如添加或删除很多个条目，会比<code>Vec</code>或<code>VecDeque</code>要快很多，它会创建一个新的临时集合，并由临时集合替换原来的集合。</p><p><code>LinkedList</code>的使用，不应该用于那些需要频繁读取的位置做插入或删除操作。</p><h2 id="Binary-Heaps"><a class="header-anchor" href="#Binary-Heaps">¶</a>Binary Heaps</h2><p>访问集合还有另外一种方式，即所谓的“优先队列”。它出现在仅有两个函数的地方：插入元素和萃取元素。但每个元素都有优先值，萃取(extract)元素需要根据优先级获取。使用Vector时，可以类似下面这种方式包含这种行为，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">add</span>(v: &amp;<span class="keyword">mut</span> <span class="type">Vec</span>&lt;<span class="type">i32</span>&gt;, a: <span class="type">i32</span>) &#123;</span><br><span class="line">v.<span class="title function_ invoke__">push</span>(a);</span><br><span class="line">v.<span class="title function_ invoke__">sort</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">a</span> = [<span class="number">48</span>, <span class="number">18</span>, <span class="number">20</span>, <span class="number">35</span>, <span class="number">17</span>, <span class="number">13</span>, <span class="number">39</span>, <span class="number">12</span>, <span class="number">42</span>, <span class="number">33</span>, <span class="number">29</span>, <span class="number">27</span>, <span class="number">50</span>, <span class="number">16</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">v</span> = <span class="type">Vec</span>::&lt;<span class="type">i32</span>&gt;::<span class="title function_ invoke__">new</span>();</span><br><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..a.<span class="title function_ invoke__">len</span>() / <span class="number">2</span> &#123;</span><br><span class="line"><span class="title function_ invoke__">add</span>(&amp;<span class="keyword">mut</span> v, a[i * <span class="number">2</span>]);</span><br><span class="line"><span class="title function_ invoke__">add</span>(&amp;<span class="keyword">mut</span> v, a[i * <span class="number">2</span> + <span class="number">1</span>]);</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &quot;</span>, v.<span class="title function_ invoke__">pop</span>().<span class="title function_ invoke__">unwrap</span>());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span> ! v.<span class="title function_ invoke__">is_empty</span>() &#123;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &quot;</span>, v.<span class="title function_ invoke__">pop</span>().<span class="title function_ invoke__">unwrap</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>每次将数组元素添加到vector时，vector都进行一次排序，它的元素保持升阶的顺序。所以vector的值的萃取也总可以得到最大值。</p><p>下面是另一种等价实现，只不过是在萃取前进行排序，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">extract</span>(v: &amp;<span class="keyword">mut</span> <span class="type">Vec</span>&lt;<span class="type">i32</span>&gt;) <span class="punctuation">-&gt;</span> OPtion&lt;<span class="type">i32</span>&gt; &#123;</span><br><span class="line">v.<span class="title function_ invoke__">sort</span>();</span><br><span class="line">v.<span class="title function_ invoke__">pop</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">a</span> = [<span class="number">48</span>, <span class="number">18</span>, <span class="number">20</span>, <span class="number">35</span>, <span class="number">17</span>, <span class="number">13</span>, <span class="number">39</span>, <span class="number">12</span>, <span class="number">42</span>, <span class="number">33</span>, <span class="number">29</span>, <span class="number">27</span>, <span class="number">50</span>, <span class="number">16</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">v</span> = <span class="type">Vec</span>::&lt;<span class="type">i32</span>&gt;::<span class="title function_ invoke__">new</span>();</span><br><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..a.<span class="title function_ invoke__">len</span>() / <span class="number">2</span> &#123;</span><br><span class="line">v.<span class="title function_ invoke__">push</span>(a[i * <span class="number">2</span>]);</span><br><span class="line">v.<span class="title function_ invoke__">push</span>(a[i * <span class="number">2</span> + <span class="number">1</span>]);</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &quot;</span>, <span class="title function_ invoke__">extract</span>(&amp;<span class="keyword">mut</span> v).<span class="title function_ invoke__">unwrap</span>());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span> ! v.<span class="title function_ invoke__">is_empty</span>() &#123;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &quot;</span>, <span class="title function_ invoke__">extract</span>(&amp;<span class="keyword">mut</span> v).<span class="title function_ invoke__">unwrap</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这两个代码都有不好之处在于频繁调用了<code>sort</code>函数，它有较大消耗。</p><p>下面是一个等价实现，并且更快，</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">a</span> = [<span class="number">48</span>, <span class="number">18</span>, <span class="number">20</span>, <span class="number">35</span>, <span class="number">17</span>, <span class="number">13</span>, <span class="number">39</span>, <span class="number">12</span>, <span class="number">42</span>, <span class="number">33</span>, <span class="number">29</span>, <span class="number">27</span>, <span class="number">50</span>, <span class="number">16</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">v</span> = std::collections::BinaryHeap::&lt;<span class="type">i32</span>&gt;::<span class="title function_ invoke__">new</span>();</span><br><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..a.<span class="title function_ invoke__">len</span>() / <span class="number">2</span> &#123;</span><br><span class="line">v.<span class="title function_ invoke__">push</span>(a[i * <span class="number">2</span>]);</span><br><span class="line">v.<span class="title function_ invoke__">push</span>(a[i * <span class="number">2</span> + <span class="number">1</span>]);</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &quot;</span>, v.<span class="title function_ invoke__">pop</span>().<span class="title function_ invoke__">unwrap</span>());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span> ! v.<span class="title function_ invoke__">is_empty</span>() &#123;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &quot;</span>, v.<span class="title function_ invoke__">pop</span>().<span class="title function_ invoke__">unwrap</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里的二叉堆(binary heap)类似vector一样，可以调用<code>push</code>和<code>pop</code>函数，不同的是，二叉堆的<code>pop</code>函数萃取的是容器中最大的值。</p><h2 id="Ordered-Sets-and-Unordered-Sets"><a class="header-anchor" href="#Ordered-Sets-and-Unordered-Sets">¶</a>Ordered Sets and Unordered Sets</h2><p>集合概念中的Set是一种不包含重复元素的概念，存储这个元素的一个高效实现是“hashtable”，对应集合类型的<code>HashSet</code>。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">arr</span> = [<span class="number">6</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">0</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">v</span> = <span class="type">Vec</span>::&lt;_&gt;::<span class="title function_ invoke__">new</span>();</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">hs</span> = std::collections::HashSet::&lt;_&gt;::<span class="title function_ invoke__">new</span>();</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">bs</span> = std::collections::BTreeSet::&lt;_&gt;::<span class="title function_ invoke__">new</span>();</span><br><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> arr.<span class="title function_ invoke__">iter</span>() &#123;</span><br><span class="line">v.<span class="title function_ invoke__">push</span>(i);</span><br><span class="line">hs.<span class="title function_ invoke__">insert</span>(i);</span><br><span class="line">bs.<span class="title function_ invoke__">insert</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;Vec:&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> v.<span class="title function_ invoke__">iter</span>() &#123; <span class="built_in">print!</span>(<span class="string">&quot; &#123;&#125;&quot;</span>, i); &#125;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;. &#123;:?&#125;, v);</span></span><br><span class="line"><span class="string">print!(&quot;</span>HashSet :<span class="string">&quot;);</span></span><br><span class="line"><span class="string">for i in hs.iter() &#123; print!(&quot;</span> &#123;&#125;<span class="string">&quot;, i); &#125;</span></span><br><span class="line"><span class="string">println!(&quot;</span>. &#123;:?&#125;, hs);</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;BTreeSet:&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> bs.<span class="title function_ invoke__">iter</span>() &#123; <span class="built_in">print!</span>(<span class="string">&quot; &#123;&#125;&quot;</span>, i); &#125;</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;. &#123;:?&#125;&quot;</span>, bs);</span><br></pre></td></tr></table></figure><p>会打印，</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vec: 6 8 2 8 4 9 6 1 8 0. [6, 8, 2, 8, 4, 9, 6, 1, 8, 0]</span><br><span class="line">HashSet : 8 2 9 6 4 0 1. &#123;8, 2, 9, 6, 4, 0, 1&#125;</span><br><span class="line">BTreeSet: 0 1 2 4 6 8 9. &#123;0, 1, 2, 4, 6, 8, 9&#125;</span><br></pre></td></tr></table></figure><p><code>Vec v</code>集合包含所有插入元素，保留插入顺序；<code>Hashset hs</code>集合不包含重复元素；<code>BTreeSet bs</code>进行了插入排序。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">elapsed_ms</span>(t1: Instant, t2: Instant) <span class="punctuation">-&gt;</span> <span class="type">f64</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">t</span> = t2 - t1;</span><br><span class="line">    t.<span class="title function_ invoke__">as_secs</span>() <span class="keyword">as</span> <span class="type">f64</span> * <span class="number">1000</span>. + t.<span class="title function_ invoke__">subsec_nanos</span>() <span class="keyword">as</span> <span class="type">f64</span> / <span class="number">1e6</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> SIZE: <span class="type">i32</span> = <span class="number">40_000</span>;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">ns_per_op</span>(t1: Instant, t2: Instant) <span class="punctuation">-&gt;</span> <span class="type">f64</span> &#123;</span><br><span class="line">    <span class="title function_ invoke__">elapsed_ms</span>(t1, t2) / SIZE <span class="keyword">as</span> <span class="type">f64</span> * <span class="number">1_000_000</span>.</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">v</span> = <span class="type">Vec</span>::&lt;_&gt;::<span class="title function_ invoke__">new</span>();</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">hs</span> = std::collections::HashSet::&lt;_&gt;::<span class="title function_ invoke__">new</span>();</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">bs</span> = std::collections::BTreeSet::&lt;_&gt;::<span class="title function_ invoke__">new</span>();</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">t0</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line">    <span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..SIZE &#123; v.<span class="title function_ invoke__">push</span>(i); &#125;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">t1</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line">    <span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..SIZE &#123; hs.<span class="title function_ invoke__">insert</span>(i); &#125;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">t2</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line">    <span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..SIZE &#123; bs.<span class="title function_ invoke__">insert</span>(i); &#125;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">t3</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line">    <span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..SIZE &#123; <span class="keyword">if</span> ! v.<span class="title function_ invoke__">contains</span>(&amp;i) &#123; <span class="keyword">return</span>; &#125; &#125;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">t4</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line">    v.<span class="title function_ invoke__">swap</span>(<span class="number">10_000</span>, <span class="number">20_000</span>);</span><br><span class="line">    v.<span class="title function_ invoke__">sort</span>();</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">t5</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line">    <span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..SIZE &#123;</span><br><span class="line">        <span class="keyword">if</span> v.<span class="title function_ invoke__">binary_search</span>(&amp;i).<span class="title function_ invoke__">is_err</span>() &#123; <span class="keyword">return</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">t6</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line">    <span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..SIZE &#123; <span class="keyword">if</span> ! hs.<span class="title function_ invoke__">contains</span>(&amp;i) &#123; <span class="keyword">return</span>; &#125; &#125;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">t7</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line">    <span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..SIZE &#123; <span class="keyword">if</span> ! bs.<span class="title function_ invoke__">contains</span>(&amp;i) &#123; <span class="keyword">return</span>; &#125; &#125;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">t8</span> = Instant::<span class="title function_ invoke__">now</span>();</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Pushes in Vec: &#123;&#125;&quot;</span>, <span class="title function_ invoke__">ns_per_op</span>(t0, t1));</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Insertions in HashSet: &#123;&#125;&quot;</span>, <span class="title function_ invoke__">ns_per_op</span>(t1, t2));</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Insertions in BTreeSet: &#123;&#125;&quot;</span>, <span class="title function_ invoke__">ns_per_op</span>(t2, t3));</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Linear search in Vec: &#123;&#125;&quot;</span>, <span class="title function_ invoke__">ns_per_op</span>(t3, t4));</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Sort of Vec: &#123;&#125;&quot;</span>, <span class="title function_ invoke__">ns_per_op</span>(t4, t5));</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Binary search in Vec: &#123;&#125;&quot;</span>, <span class="title function_ invoke__">ns_per_op</span>(t5, t6));</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Search in HashSet: &#123;&#125;&quot;</span>, <span class="title function_ invoke__">ns_per_op</span>(t6, t7));</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Search in BTreeSet: &#123;&#125;&quot;</span>, <span class="title function_ invoke__">ns_per_op</span>(t7, t8));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>将会打印：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Pushes in Vec: 6.4021</span><br><span class="line">Insertions in HashSet: 139.214</span><br><span class="line">Insertions in BTreeSet: 127.3047</span><br><span class="line">Linear search in Vec: 17389.3111</span><br><span class="line">Sort of Vec: 3.1132</span><br><span class="line">Binary search in Vec: 47.7641</span><br><span class="line">Search in HashSet: 36.5041</span><br><span class="line">Search in BTreeSet: 56.2444</span><br></pre></td></tr></table></figure><p>栈顶插入元素，花费6纳秒，<code>HashSet</code>和<code>BTreeSet</code>插入元素，花费接近20倍。</p><p>线性方式搜索vector，花费时间非常大，改为二分查找算法后，平均在50纳秒的时间。所以，如果插入比查找少的情况，每次插入元素之后进行排序，再用二分查找会更加高效。</p><p><code>HashSet</code>的查找花费40纳秒左右；<code>BTreeSet</code>的查找花费接近60纳秒左右。</p><p>优化数据结构的原则是，</p><p>首先声明一个trait，它包含有该数据结构的方法签名，接着实现这个trait，再测试这个trait的实现方法的性能，如果性能太低。重构代码进行优化，知道满意的实现。</p><h2 id="Ordered-Dictionaries-and-Unordered-Dictionaries"><a class="header-anchor" href="#Ordered-Dictionaries-and-Unordered-Dictionaries">¶</a>Ordered Dictionaries and Unordered Dictionaries</h2><p>集合处理简单的存储、访问使用外，另一种常见用法是“字典”，即由“key”进行访问。</p><p>字典可以看做是key-value对，它的处理由key决定。所以，字典不能有两个相同的key。</p><p>Rust标准库中提供了<code>HashMap</code>和<code>BTreeMap</code>的算法实现，类同于<code>HashSet</code>，<code>HashMap</code>不进行排序，但速度较快；<code>BTreeMap</code>较慢，但按顺序存储。</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">arr</span> = [(<span class="number">640</span>, <span class="string">&#x27;T&#x27;</span>), (<span class="number">917</span>, <span class="string">&#x27;C&#x27;</span>), (<span class="number">412</span>, <span class="string">&#x27;S&#x27;</span>), (<span class="number">670</span>, <span class="string">&#x27;T&#x27;</span>), (<span class="number">917</span>, <span class="string">&#x27;L&#x27;</span>)];</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">v</span> = <span class="type">Vec</span>::&lt;_&gt;::<span class="title function_ invoke__">new</span>();</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">hs</span> = std::collections::HashMap::&lt;_, _&gt;::<span class="title function_ invoke__">new</span>();</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">bs</span> = std::collections::BTreeMap::&lt;_, _&gt;::<span class="title function_ invoke__">new</span>();</span><br><span class="line"><span class="keyword">for</span> &amp;(key, value) <span class="keyword">in</span> arr.<span class="title function_ invoke__">iter</span>() &#123;</span><br><span class="line">v.<span class="title function_ invoke__">push</span>((key, value));</span><br><span class="line">hs.<span class="title function_ invoke__">insert</span>(key, value);</span><br><span class="line">bs.<span class="title function_ invoke__">insert</span>(key, value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;Vec:&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> &amp;(key, value) <span class="keyword">in</span> v.<span class="title function_ invoke__">iter</span>() &#123;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot; &#123;&#125;: &#123;&#125;,&quot;</span>, key, value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;\n &#123;:?&#125;&quot;</span>, v);</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;HashMap:&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (key, value) <span class="keyword">in</span> hs.<span class="title function_ invoke__">iter</span>() &#123;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot; &#123;&#125;: &#123;&#125;,&quot;</span>, key, value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;\n &#123;:?&#125;&quot;</span>, hs);</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;BTreeMap:&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (key, value) <span class="keyword">in</span> bs.<span class="title function_ invoke__">iter</span>() &#123;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot; &#123;&#125;: &#123;&#125;,&quot;</span>, key, value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;\n &#123;:?&#125;&quot;</span>, bs);</span><br></pre></td></tr></table></figure><p>结果打印：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Vec: 640: T, 917: C, 412: S, 670: T, 917: L,</span><br><span class="line"> [(640, &#x27;T&#x27;), (917, &#x27;C&#x27;), (412, &#x27;S&#x27;), (670, &#x27;T&#x27;), (917, &#x27;L&#x27;)]</span><br><span class="line">HashMap: 640: T, 412: S, 917: L, 670: T,</span><br><span class="line"> &#123;640: &#x27;T&#x27;, 412: &#x27;S&#x27;, 917: &#x27;L&#x27;, 670: &#x27;T&#x27;&#125;</span><br><span class="line">BTreeMap: 412: S, 640: T, 670: T, 917: L,</span><br><span class="line"> &#123;412: &#x27;S&#x27;, 640: &#x27;T&#x27;, 670: &#x27;T&#x27;, 917: &#x27;L&#x27;&#125;</span><br></pre></td></tr></table></figure><p>字典中不允许重复的key，但允许重复的value，以及<code>BTreeMap</code>按照key顺序排列，而<code>HashMap</code>顺序随机。</p><p>它们的性能类似于<code>HashSet</code>和<code>BTreeSet</code>。</p><h2 id="Collections-in-C-and-in-Rust"><a class="header-anchor" href="#Collections-in-C-and-in-Rust">¶</a>Collections in C++ and in Rust</h2><p>C++标准库中对应Rust集合列表如下，某些集合库在Rust中并没有对应，用<code>~</code>标记表示最相似的集合，</p><table><thead><tr><th style="text-align:left">C++</th><th style="text-align:left">Rust</th></tr></thead><tbody><tr><td style="text-align:left"><code>array&lt;T&gt;</code></td><td style="text-align:left"><code>[T]</code></td></tr><tr><td style="text-align:left"><code>vector&lt;T&gt;</code></td><td style="text-align:left"><code>Vec&lt;T&gt;</code></td></tr><tr><td style="text-align:left"><code>deque&lt;T&gt;</code></td><td style="text-align:left"><code>VecDeque&lt;T&gt;</code></td></tr><tr><td style="text-align:left"><code>forward_list&lt;T&gt;</code></td><td style="text-align:left"><code>~ LinkedList&lt;T&gt;</code></td></tr><tr><td style="text-align:left"><code>list&lt;T&gt;</code></td><td style="text-align:left"><code>LinkedList&lt;T&gt;</code></td></tr><tr><td style="text-align:left"><code>stack&lt;T&gt;</code></td><td style="text-align:left"><code>~ Vec&lt;T&gt;</code></td></tr><tr><td style="text-align:left"><code>queue&lt;T&gt;</code></td><td style="text-align:left"><code>~ VecDeque&lt;T&gt;</code></td></tr><tr><td style="text-align:left"><code>priority_queue&lt;T&gt;</code></td><td style="text-align:left"><code>BinaryHeap&lt;T&gt;</code></td></tr><tr><td style="text-align:left"><code>set&lt;T&gt;</code></td><td style="text-align:left"><code>BTreeSet&lt;T&gt;</code></td></tr><tr><td style="text-align:left"><code>multiset&lt;T&gt;</code></td><td style="text-align:left"><code>~ BTreeMap&lt;T,u32&gt;</code></td></tr><tr><td style="text-align:left"><code>map&lt;K,V&gt;</code></td><td style="text-align:left"><code>BTreeMap&lt;K,V&gt;</code></td></tr><tr><td style="text-align:left"><code>multimap&lt;K,V&gt;</code></td><td style="text-align:left"><code>~ BTreeMap&lt;K, (V,u32)&gt;</code></td></tr><tr><td style="text-align:left"><code>unordered_set&lt;T&gt;</code></td><td style="text-align:left"><code>HashSet&lt;T&gt;</code></td></tr><tr><td style="text-align:left"><code>unordered_multiset&lt;T&gt;</code></td><td style="text-align:left"><code>~ HashMap&lt;T,u32&gt;</code></td></tr><tr><td style="text-align:left"><code>unordered_map&lt;K,V&gt;</code></td><td style="text-align:left"><code>HashMap&lt;K,V&gt;</code></td></tr><tr><td style="text-align:left"><code>unordered_multimap&lt;K,V&gt;</code></td><td style="text-align:left"><code>~ HashMap&lt;K,(V,u32)&gt;</code></td></tr></tbody></table>]]></content>
    
    
    <summary type="html">&lt;p&gt;本章覆盖有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如何度量运行部分代码所花费的时间&lt;/li&gt;
&lt;li&gt;基于性能因素，如何使用哪种类型的集合&lt;/li&gt;
&lt;li&gt;集合中的各种操作中哪个更好：顺序扫描(sequential scan)、两端插入和删除(insertion and removal of items at both ends)、删除最大项(removal of the largest item)、搜索(search)、键搜索(search by key)、保持顺序(keeping items sorted)&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    <content src="https://galudisu.info/%3Cp%3E%E6%9C%AC%E7%AB%A0%E8%A6%86%E7%9B%96%E6%9C%89%EF%BC%9A%3C/p%3E%3Cul%3E%3Cli%3E%E5%A6%82%E4%BD%95%E5%BA%A6%E9%87%8F%E8%BF%90%E8%A1%8C%E9%83%A8%E5%88%86%E4%BB%A3%E7%A0%81%E6%89%80%E8%8A%B1%E8%B4%B9%E7%9A%84%E6%97%B6%E9%97%B4%3C/li%3E%3Cli%3E%E5%9F%BA%E4%BA%8E%E6%80%A7%E8%83%BD%E5%9B%A0%E7%B4%A0%EF%BC%8C%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E5%93%AA%E7%A7%8D%E7%B1%BB%E5%9E%8B%E7%9A%84%E9%9B%86%E5%90%88%3C/li%3E%3Cli%3E%E9%9B%86%E5%90%88%E4%B8%AD%E7%9A%84%E5%90%84%E7%A7%8D%E6%93%8D%E4%BD%9C%E4%B8%AD%E5%93%AA%E4%B8%AA%E6%9B%B4%E5%A5%BD%EF%BC%9A%E9%A1%BA%E5%BA%8F%E6%89%AB%E6%8F%8F(sequential%20scan)%E3%80%81%E4%B8%A4%E7%AB%AF%E6%8F%92%E5%85%A5%E5%92%8C%E5%88%A0%E9%99%A4(insertion%20and%20removal%20of%20items%20at%20both%20ends)%E3%80%81%E5%88%A0%E9%99%A4%E6%9C%80%E5%A4%A7%E9%A1%B9(removal%20of%20the%20largest%20item)%E3%80%81%E6%90%9C%E7%B4%A2(search)%E3%80%81%E9%94%AE%E6%90%9C%E7%B4%A2(search%20by%20key)%E3%80%81%E4%BF%9D%E6%8C%81%E9%A1%BA%E5%BA%8F(keeping%20items%20sorted)%3C/li%3E%3C/ul%3E%3Cspan%20id=%22more%22%3E%3C/span%3E%3Ch2%20id=%22Collections%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Collections%22%3E%C2%B6%3C/a%3ECollections%3C/h2%3E%3Cp%3E%E6%95%B0%E7%BB%84%E3%80%81%E5%90%91%E9%87%8F%E3%80%81%E7%BB%93%E6%9E%84%E4%BD%93%E3%80%81%E5%85%83%E7%BB%84%E7%BB%93%E6%9E%84%E4%BD%93%E3%80%81%E5%85%83%E7%BB%84%E3%80%81%E6%9E%9A%E4%B8%BE%E5%B1%9E%E4%BA%8E%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%8C%E5%AE%83%E4%BB%AC%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%8F%AF%E8%83%BD%E5%8C%85%E5%90%AB%E5%87%A0%E4%B8%AA%E5%85%B6%E5%AE%83%E5%AF%B9%E8%B1%A1%E3%80%82%E7%84%B6%E8%80%8C%EF%BC%8C%E5%AF%B9%E4%BA%8E%E7%BB%93%E6%9E%84%E4%BD%93%E3%80%81%E5%85%83%E7%BB%84-%E7%BB%93%E6%9E%84%E4%BD%93%E3%80%81%E5%85%83%E7%BB%84%E3%80%81%E6%9E%9A%E4%B8%BE%EF%BC%8C%E6%AF%8F%E4%B8%AA%E5%8C%85%E5%90%AB%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E9%9C%80%E8%A6%81%E6%8C%87%E5%AE%9A%E5%A3%B0%E6%98%8E%E7%B1%BB%E5%9E%8B%E5%92%8C%E6%9E%84%E9%80%A0%E7%B1%BB%E5%9E%8B%EF%BC%8C%E5%AE%83%E4%BB%AC%E4%B8%8D%E8%83%BD%E5%AD%98%E5%82%A8%E5%A4%9A%E4%B8%AA%E5%AF%B9%E8%B1%A1%E3%80%82%E7%9B%B8%E5%8F%8D%E6%95%B0%E7%BB%84%E5%92%8C%E5%90%91%E9%87%8F%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BC%9A%E5%8C%85%E5%90%AB%E5%A4%9A%E4%B8%AA%E5%AF%B9%E8%B1%A1%EF%BC%8C%E8%BF%99%E4%B8%80%E7%B1%BB%E5%AF%B9%E8%B1%A1%E7%A7%B0%E4%B8%BA%E2%80%9C%E9%9B%86%E5%90%88%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E6%95%B0%E7%BB%84%E5%92%8C%E5%90%91%E9%87%8F%E6%98%AF%E6%9C%80%E4%BD%B3%E9%9B%86%E5%90%88%EF%BC%9A%E5%86%85%E5%AD%98%E9%AB%98%E6%95%88%EF%BC%8C%E8%AF%BB%E5%8F%96%E9%80%9F%E5%BA%A6%E5%BF%AB%EF%BC%8CCPU%E7%BC%93%E5%AD%98%E9%AB%98%E6%95%88%EF%BC%8C%E8%83%BD%E9%80%9A%E8%BF%87%E7%B4%A2%E5%BC%95%E5%BF%AB%E9%80%9F%E8%AE%BF%E9%97%AE%E5%86%85%E9%83%A8%E5%85%83%E7%B4%A0%E3%80%82%E5%BD%93%E7%84%B6%EF%BC%8C%E5%9C%A8%E6%9F%90%E4%BA%9B%E6%83%85%E5%86%B5%E4%B8%8D%E5%B0%BD%E6%98%AF%E9%AB%98%E6%95%88%E7%9A%84%EF%BC%8C%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%8B%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8%E5%85%B6%E5%AE%83%E9%9B%86%E5%90%88%E3%80%82Rust%E6%A0%87%E5%87%86%E5%BA%93%E6%8F%90%E4%BE%9B%E4%BA%86%E5%90%84%E7%A7%8D%E5%90%84%E6%A0%B7%E7%9A%84%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%EF%BC%9A%3Ccode%3EVecDeque&amp;lt;T&amp;gt;%3C/code%3E%E3%80%81%3Ccode%3ELinkedList&amp;lt;T&amp;gt;%3C/code%3E%E3%80%81%3Ccode%3EBinaryHeap&amp;lt;T&amp;gt;%3C/code%3E%E3%80%81%3Ccode%3EBTreeSet&amp;lt;T&amp;gt;%3C/code%3E%E3%80%81%3Ccode%3EBTreeMap&amp;lt;K,V&amp;gt;%3C/code%3E%E3%80%81%3Ccode%3EHashSet&amp;lt;T&amp;gt;%3C/code%3E%E5%92%8C%3Ccode%3EHashMap&amp;lt;K,V&amp;gt;%3C/code%3E%E3%80%82%3C/p%3E%3Cp%3E%E8%AF%B4%E5%88%B0%E9%9B%86%E5%90%88%EF%BC%8C%E6%95%B0%E7%BB%84%E6%98%AF%E4%B8%80%E4%B8%AA%E5%8D%95%E7%8B%AC%E6%A1%88%E4%BE%8B%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%AE%83%E5%AE%8C%E5%85%A8%E6%98%AF%E6%A0%88%E5%88%86%E9%85%8D%E7%9A%84%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%9C%A8%E7%BC%96%E8%AF%91%E6%9C%9F%E5%B7%B2%E7%BB%8F%E5%AE%9A%E4%B9%89%E4%BA%86%E5%A4%A7%E5%B0%8F%E3%80%82%E8%80%8C%E5%AF%B9%E4%BA%8E%E5%85%B6%E5%AE%83%E9%9B%86%E5%90%88%EF%BC%8C%E5%8C%85%E6%8B%ACvector%EF%BC%8C%E5%85%83%E7%B4%A0%E4%B8%AA%E6%95%B0%E5%8F%AF%E5%8F%98%EF%BC%8C%E5%AE%83%E5%B0%86header%E5%AD%98%E5%82%A8%E5%9C%A8stack%EF%BC%8C%E6%95%B0%E6%8D%AE%E9%83%A8%E5%88%86%E5%88%99%E5%AD%98%E5%82%A8%E5%9C%A8%E5%A0%86%E3%80%82%E8%BF%99%E7%A7%8D%E7%A7%B0%E4%B8%BA%E2%80%9C%E5%8A%A8%E6%80%81%E6%95%B0%E6%8D%AE%E9%9B%86dynamically-sized%20collections%E2%80%9D%E3%80%82%3C/p%3E%3Ch2%20id=%22Measuring-Execution-Time%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Measuring-Execution-Time%22%3E%C2%B6%3C/a%3EMeasuring%20Execution%20Time%3C/h2%3E%3Cp%3E%E9%9B%86%E5%90%88%E7%9A%84%E9%80%89%E5%8F%96%E6%9B%B4%E5%A4%9A%E5%9C%B0%E7%94%B1%E5%AE%83%E7%9A%84%E6%80%A7%E8%83%BD%E5%86%B3%E5%AE%9A%EF%BC%8C%E5%85%88%E7%BB%95%E5%BC%80%E8%BF%99%E6%96%B9%E9%9D%A2%E5%86%85%E5%AE%B9%EF%BC%8C%E7%9C%8B%E7%9C%8B%E5%A6%82%E4%BD%95%E7%B2%BE%E7%A1%AE%E5%BA%A6%E9%87%8F%E4%B8%8D%E5%90%8CRust%E4%BB%A3%E7%A0%81%E6%89%80%E8%8A%B1%E8%B4%B9%E7%9A%84%E6%80%A7%E8%83%BD%E3%80%82%3C/p%3E%3Cp%3E%E5%AF%B9%E4%BA%8E%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E8%80%85%E6%9D%A5%E8%AF%B4%E6%80%A7%E8%83%BD%E6%98%AF%E5%BE%88%E9%87%8D%E8%A6%81%E7%9A%84%E4%B8%80%E6%96%B9%E9%9D%A2%E3%80%82%E5%8D%95%E4%B8%AA%E5%87%BD%E6%95%B0%E7%9A%84%E8%BF%90%E8%A1%8C%EF%BC%8C%E9%AB%98%E7%BA%A7%E8%AF%AD%E8%A8%80%E9%83%BD%E8%A6%81%E6%B1%82%E5%91%BD%E4%BB%A4%E5%A4%84%E7%90%86%E8%8A%B1%E8%B4%B9%E8%87%B3%E6%AF%AB%E7%A7%92%E5%92%8C%E7%A7%92%E7%BA%A7%E5%88%AB%EF%BC%8C%E5%83%8FRust%E8%BF%99%E7%B1%BB%E4%BD%8E%E7%BA%A7%E8%AF%AD%E8%A8%80%EF%BC%8C%E9%83%BD%E8%A6%81%E6%B1%82%E6%AF%AB%E7%A7%92%E7%94%9A%E8%87%B3%E7%BA%B3%E7%A7%92%E3%80%82%3C/p%3E%3Cp%3E%E5%9C%A8Rust%E6%A0%87%E5%87%86%E5%BA%93%E4%B8%AD%EF%BC%8C%E6%9C%89%E5%87%A0%E4%B8%AA%E5%87%BD%E6%95%B0%E5%8F%AF%E4%BB%A5%E5%BA%A6%E9%87%8F%E6%BA%90%E4%BB%A3%E7%A0%81%E6%B6%88%E8%80%97%E7%9A%84%E6%97%B6%E9%97%B4%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Euse%3C/span%3E%20std::time::Instant;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Eelapsed_ms%3C/span%3E(t1:%20Instant,%20t2:%20Instant)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et%3C/span%3E%20=%20t2%20-%20t1;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20t.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eas_secs%3C/span%3E()%20%3Cspan%20class=%22keyword%22%3Eas%3C/span%3E%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E%20*%20%3Cspan%20class=%22number%22%3E1000%3C/span%3E.%20+%20t.%3Cspan%20class=%22title%20function_%20invoke__%22%3Esubsec_nanos%3C/span%3E()%20%3Cspan%20class=%22keyword%22%3Eas%3C/span%3E%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E%20/%20%3Cspan%20class=%22number%22%3E1e6%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Etime0%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E..%3Cspan%20class=%22number%22%3E10_000%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20i);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Etime1%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Eelapsed_ms%3C/span%3E(time0,%20time1));%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%A8%8B%E5%BA%8F%E4%BC%9A%E6%89%93%E5%8D%B00%E5%88%B09999%E7%9A%84%E6%95%B4%E6%95%B0%EF%BC%8C%E7%84%B6%E5%90%8E%E5%B0%86%E6%89%80%E8%8A%B1%E8%B4%B9%E7%9A%84%E6%AF%AB%E7%A7%92%E6%95%B0%E8%BE%93%E5%87%BA%E3%80%82%3C/p%3E%3Cp%3E%E6%89%80%E8%8A%B1%E8%B4%B9%E7%9A%84%E6%97%B6%E9%97%B4%E8%B7%9F%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%83%BD%E5%8A%9B%E6%9C%89%E5%85%B3%EF%BC%8C%E5%BD%93%E7%84%B6%E4%B9%9F%E8%B7%9F%E7%BC%96%E8%AF%91%E5%99%A8%E7%9A%84%E4%BC%98%E5%8C%96%E6%9C%89%E5%85%B3%E3%80%82%3C/p%3E%3Cp%3E%E5%89%8D%E9%9D%A2%E7%AB%A0%E8%8A%82%E8%AF%B4%E5%88%B0%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%94%A8%3Ccode%3Erustc%3C/code%3E%E6%9D%A5%E7%BC%96%E8%AF%91%E6%BA%90%E4%BB%A3%E7%A0%81%E6%96%87%E4%BB%B6%EF%BC%8C%E4%BD%86%E6%98%AF%E8%BF%99%E4%B8%AA%E5%91%BD%E4%BB%A4%E5%B9%B6%E6%B2%A1%E6%9C%89%E7%BC%96%E8%AF%91%E5%99%A8%E4%BC%98%E5%8C%96%EF%BC%8C%E5%8F%AA%E6%98%AF%E5%8D%95%E7%BA%AF%E7%94%9F%E6%88%90%E6%9C%BA%E5%99%A8%E7%A0%81%E7%94%A8%E4%BA%8E%E8%B0%83%E8%AF%95%EF%BC%8C%E5%AE%83%E4%B8%8D%E6%98%AF%E9%AB%98%E6%95%88%E7%9A%84%E3%80%82%3C/p%3E%3Cp%3E%E5%A6%82%E6%9E%9C%E4%BD%A0%E5%AF%B9%E6%80%A7%E8%83%BD%E6%84%9F%E5%85%B4%E8%B6%A3%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%B8%A6%E4%B8%8A%E7%BC%96%E8%AF%91%E5%8F%82%E6%95%B0%3Ccode%3E-O%3C/code%3E%E3%80%82%E7%9C%81%E7%95%A5%E8%BF%99%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%8C%E6%89%80%E6%9C%89%E4%BC%98%E5%8C%96%E9%83%BD%E6%98%AF%E7%A6%81%E7%94%A8%E7%9A%84%E3%80%82%3C/p%3E%3Cp%3E%E5%9B%A0%E6%AD%A4%EF%BC%8C%E8%BF%99%E7%AB%A0%E7%A4%BA%E4%BE%8B%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E4%B8%8B%E9%9D%A2%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%BC%96%E8%AF%91%E4%BC%98%E5%8C%96%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3Erustc%20-O%20main.rs%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%A6%81%E5%BA%A6%E9%87%8F%E4%B8%80%E4%B8%AA%E6%97%B6%E9%97%B4%EF%BC%8C%E4%BD%A0%E5%BA%94%E8%AF%A5%E7%94%A8%3Ccode%3EInstant%3C/code%3E%E7%B1%BB%E7%9A%84%3Ccode%3Enow%3C/code%3E%E5%87%BD%E6%95%B0%E3%80%82%E8%BF%99%E4%B8%AA%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89%E5%9C%A8Rust%E7%9A%84%E6%A0%87%E5%87%86%E5%BA%93%E4%B8%AD%E3%80%82%3C/p%3E%3Ch2%20id=%22Performing-Arbitrary-Insertions-and-Removals%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Performing-Arbitrary-Insertions-and-Removals%22%3E%C2%B6%3C/a%3EPerforming%20Arbitrary%20Insertions%20and%20Removals%3C/h2%3E%3Cp%3E%E5%9B%9E%E5%88%B0%E5%8E%9F%E6%9D%A5%E7%9A%84%E9%9B%86%E5%90%88%E5%A4%84%E7%90%86%E3%80%82%E4%B8%8B%E9%9D%A2%E7%A8%8B%E5%BA%8F%E6%98%AF%E9%9D%9E%E5%B8%B8%E9%AB%98%E6%95%88%E7%9A%84%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Econst%3C/span%3E%20SIZE:%20%3Cspan%20class=%22type%22%3Eusize%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E100_000_000%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et0%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ev%3C/span%3E%20=%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E::&amp;lt;%3Cspan%20class=%22type%22%3Eusize%3C/span%3E&amp;gt;::%3Cspan%20class=%22title%20function_%20invoke__%22%3Ewith_capacity%3C/span%3E(SIZE);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et1%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E..SIZE%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epush%3C/span%3E(i);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et2%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E..SIZE%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epop%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et3%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Eelapsed_ms%3C/span%3E(t0,%20t1),%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Eelapsed_ms%3C/span%3E(t1,%20t2),%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Eelapsed_ms%3C/span%3E(t2,%20t3));%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%AE%B0%E5%BE%97%E6%B7%BB%E5%8A%A0%3Ccode%3E-O%3C/code%3E%E8%BF%9B%E8%A1%8C%E7%BC%96%E8%AF%91%E3%80%82%3C/p%3E%3Cp%3E%E7%A8%8B%E5%BA%8F%E5%B0%86%E6%89%93%E5%8D%B0%E4%B8%89%E6%AE%B5%E6%95%B0%E5%AD%97%EF%BC%8C%E5%AE%83%E6%98%AF%E7%94%B1%E7%BC%96%E8%AF%91%E5%99%A8%E3%80%81%E6%88%96%E8%80%85%E6%9C%89%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%89%80%E5%86%B3%E5%AE%9A%E3%80%82%3C/p%3E%3Cp%3E%E5%81%87%E8%AE%BE%E4%BD%A0%E6%9C%AC%E6%9C%BA%E8%BE%93%E5%87%BA%E7%9A%84%E6%95%B0%E6%8D%AE%E6%98%AF%EF%BC%9A%E2%80%9C0.002667%20454.516057%2087.302678%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E8%BF%99%E6%84%8F%E5%91%B3%E7%9D%80%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAvector%E4%B8%BA%E8%BF%99%E4%B8%AA%3Ccode%3Eusize%3C/code%3E%E5%AF%B9%E8%B1%A1%E5%88%86%E9%85%8D%E2%80%9C%E6%88%BF%E9%97%B4%E2%80%9D%EF%BC%8C%E5%AE%83%E5%8D%A064%E4%BD%8D%E7%B3%BB%E7%BB%9F800M%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%B0%91%E4%BA%8E3%E6%AF%AB%E7%A7%92%E7%9A%84%E6%B6%88%E8%80%97%E6%97%B6%E9%97%B4%E3%80%82%E8%A6%81%E5%B0%86%E4%B8%80%E5%8D%83%E4%B8%87%E7%9A%84%E5%80%BC%E5%A1%9E%E5%85%A5%E8%BF%99%E4%B8%AA%E7%A9%BA%E9%97%B4%EF%BC%8C%E4%B8%8D%E4%BD%BF%E7%94%A8%E5%86%85%E5%AD%98%E6%B4%BE%E9%81%A3%EF%BC%8C%E5%B0%91%E4%BA%8E1%E7%A7%92%E7%9A%84%E6%8D%9F%E8%80%97%E6%97%B6%E9%97%B4%EF%BC%8C%E5%90%8C%E6%97%B6%E8%BF%98%E8%A6%81%E5%88%A0%E9%99%A4%E6%89%80%E6%9C%89%E6%95%B0%E6%8D%AE%EF%BC%8C%E8%8A%B1%E8%B4%B91/10%E7%A7%92%E7%9A%84%E6%97%B6%E9%97%B4%E3%80%82%3C/p%3E%3Cp%3E%E5%A6%82%E6%9E%9C%E4%B8%8D%E5%8A%A0%3Ccode%3E-O%3C/code%3E%E5%8F%82%E6%95%B0%E7%BC%96%E8%AF%91%EF%BC%8C%E4%BD%A0%E4%BC%9A%E5%8F%91%E7%8E%B0%E5%AE%83%E8%8A%B1%E8%B4%B9%E6%97%B6%E9%97%B4%E9%9D%9E%E5%B8%B8%E5%A4%A7%E3%80%82%3C/p%3E%3Cp%3E%E7%9B%B8%E5%8F%8D%EF%BC%8C%E4%B8%8B%E9%9D%A2%E7%9A%84%E7%A8%8B%E5%BA%8F%E9%9D%9E%E5%B8%B8%E4%BD%8E%E6%95%88%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Econst%3C/span%3E%20SIZE:%20%3Cspan%20class=%22type%22%3Eusize%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E100_000_000%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et0%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ev%3C/span%3E%20=%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E::&amp;lt;%3Cspan%20class=%22type%22%3Eusize%3C/span%3E&amp;gt;::%3Cspan%20class=%22title%20function_%20invoke__%22%3Ewith_capacity%3C/span%3E(SIZE);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et1%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E..SIZE%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Einsert%3C/span%3E(%3Cspan%20class=%22number%22%3E0%3C/span%3E,%20i);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et2%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3E_%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E..SIZE%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eremove%3C/span%3E(%3Cspan%20class=%22number%22%3E0%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et3%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Eelapsed_ms%3C/span%3E(t0,%20t1),%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Eelapsed_ms%3C/span%3E(t1,%20t2),%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Eelapsed_ms%3C/span%3E(t2,%20t3));%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%AE%83%E4%BC%9A%E6%89%93%E5%8D%B0%EF%BC%9A%E2%80%9C0.00178%202038.879344%202029.447851%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E8%A6%81%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA800KB%E7%9A%84vector%EF%BC%8C%E8%8A%B1%E8%B4%B9%E5%B0%91%E4%BA%8E2%E6%AF%AB%E7%A7%92%E7%9A%84%E6%97%B6%E9%97%B4%EF%BC%8C%E4%BD%86%E6%98%AF%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%E5%8D%B4%E8%8A%B1%E8%B4%B9%E4%BA%86%E5%A4%9A%E4%BA%8E2%E7%A7%92%E7%9A%84%E6%97%B6%E9%97%B4%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%B7%AE%E4%B8%8D%E5%A4%9A%E7%AD%89%E5%90%8C%E7%9A%84%E6%97%B6%E9%97%B4%E7%94%A8%E6%9D%A5%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E3%80%82%E8%BF%99%E9%87%8C%E5%8F%91%E7%8E%B0%E6%8F%92%E5%85%A5%E5%8A%A8%E4%BD%9C%EF%BC%8C%E6%AF%94%E5%89%8D%E9%9D%A2%E8%8A%B1%E8%B4%B9%E6%9B%B4%E5%A4%9A%E7%9A%84%E6%97%B6%E9%97%B4%E3%80%82%3C/p%3E%3Cp%3E%E5%AF%BC%E8%87%B4%E4%B8%A4%E8%80%85%E7%9A%84%E5%B7%AE%E5%BC%82%E5%BE%88%E5%A5%BD%E8%A7%A3%E6%9E%90%E3%80%82%3C/p%3E%3Cp%3E%E4%BB%8E%E6%A0%88%E9%A1%B6%E6%B7%BB%E5%8A%A0%E5%85%83%E7%B4%A0%EF%BC%8C%E5%8F%AA%E9%9C%80%E8%A6%81%E7%A1%AE%E4%BF%9D%E6%9C%89%E8%B6%B3%E5%A4%9F%E7%9A%84%E7%A9%BA%E9%97%B4%EF%BC%8C%E7%84%B6%E5%90%8E%E5%B0%86%E6%95%B0%E6%8D%AE%E6%8B%B7%E8%B4%9D%E5%88%B0%E7%BC%93%E5%86%B2%E5%8C%BA%EF%BC%8C%E5%A2%9E%E5%8A%A0%E5%85%83%E7%B4%A0%E4%B8%AA%E6%95%B0%E3%80%82%E5%AF%B9%E4%BA%8E%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%9D%A5%E8%AF%B4%EF%BC%8C%E5%A4%84%E7%90%86%E8%BF%99%E4%BA%9B%E6%97%B6%E9%97%B4%E5%B0%91%E4%BA%8E5%E7%BA%B3%E7%A7%92%EF%BC%8C%E5%8C%85%E6%8B%AC%E8%BF%AD%E4%BB%A3%E5%99%A8%E7%9A%84%E7%A7%BB%E4%BD%8D%E5%8A%A8%E4%BD%9C%E3%80%82%3C/p%3E%3Cp%3E%E5%90%8C%E6%A0%B7%EF%BC%8C%E5%AF%B9%E4%BA%8E%E4%BB%8E%E6%A0%88%E9%A1%B6%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0%EF%BC%8C%E7%A1%AE%E4%BF%9Dvector%E4%B8%8D%E4%B8%BA%E7%A9%BA%EF%BC%8C%E7%84%B6%E5%90%8E%E9%80%92%E5%87%8F%E5%85%83%E7%B4%A0%EF%BC%8C%E8%8A%B1%E8%B4%B9%E4%B8%8D%E5%88%B01%E7%BA%B3%E7%A7%92%E7%9A%84%E6%97%B6%E9%97%B4%E3%80%82%3C/p%3E%3Cp%3E%E7%9B%B8%E5%8F%8D%EF%BC%8C%E4%BB%8Evector%E7%9A%84%E5%BC%80%E5%A7%8B%E9%83%A8%E5%88%86%E6%8F%92%E5%85%A5%E5%85%83%E7%B4%A0%EF%BC%8C%E9%A6%96%E5%85%88%E4%BD%A0%E9%9C%80%E8%A6%81%E5%B0%86%E5%9C%B0%E5%9D%80%E8%BF%9B%E8%A1%8C%E8%BD%AC%E6%8D%A2%EF%BC%8C%E6%AF%8F%E6%AC%A1%E6%9C%89%E6%96%B0%E7%9A%84%E5%85%83%E7%B4%A0%E8%BF%87%E6%9D%A5%EF%BC%8C%E9%83%BD%E8%A6%81%E9%87%8A%E6%94%BE%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4%E3%80%82%E8%99%BD%E7%84%B6%E8%BD%AC%E6%8D%A2%E5%BE%88%E5%BF%AB%EF%BC%8C%E9%9A%8F%E7%9D%80%E5%85%83%E7%B4%A0%E4%B8%AA%E6%95%B0%E7%9A%84%E5%A2%9E%E5%8A%A0%EF%BC%8C%E8%A6%81%E6%8F%92%E5%85%A5%E9%A6%96%E4%BD%8D%E7%BD%AE%E7%9A%84%E5%85%83%E7%B4%A0%E4%B9%9F%E8%B6%8A%E6%9D%A5%E8%B6%8A%E5%A4%9A%E3%80%82%3C/p%3E%3Cp%3E%E7%B1%BB%E4%BC%BC%E7%9A%84%EF%BC%8C%E8%A6%81%E4%BB%8E%E9%A6%96%E4%BD%8D%E7%BD%AE%E7%A7%BB%E9%99%A4%E5%85%83%E7%B4%A0%EF%BC%8C%E9%9C%80%E8%A6%81%E5%B0%86%E6%89%80%E6%9C%89%E5%85%83%E7%B4%A0%E9%83%BD%E8%BD%AC%E6%8D%A2%E4%B8%80%E9%81%8D%EF%BC%8C%E4%B8%8D%E4%BB%85%E4%BB%85%E6%98%AF%E9%A6%96%E4%BD%8D%E7%BD%AE%EF%BC%8C%3C/p%3E%3Cp%3E%E4%BB%8E%E8%AE%A1%E7%AE%97%E5%A4%8D%E6%9D%82%E5%BA%A6%E8%A1%A8%E7%A4%BA%EF%BC%8C%E6%A0%88%E9%A1%B6(%E5%B0%BE%E9%83%A8)%E6%8F%92%E5%85%A5%E6%88%96%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0%E6%98%AF%3Ccode%3EO(K)%3C/code%3E%E5%A4%8D%E6%9D%82%E5%BA%A6%EF%BC%8C%E5%AE%83%E6%98%AF%E5%B8%B8%E9%87%8F%E5%A4%8D%E6%9D%82%E5%BA%A6(constant%20complexity)%EF%BC%9B%E8%80%8C%E5%AF%B9%E4%BA%8E%E4%BB%8E%E6%A0%88%E5%B0%BE(%E9%A6%96%E9%83%A8)%E6%8F%92%E5%85%A5%E6%88%96%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0%E6%98%AF%3Ccode%3EO(N)%3C/code%3E%E5%A4%8D%E6%9D%82%E5%BA%A6%EF%BC%8C%E5%AE%83%E6%98%AF%E7%BA%BF%E6%80%A7%E5%A4%8D%E6%9D%82%E5%BA%A6(linear%20complexity)%E3%80%82%3C/p%3E%3Cp%3E%E5%8D%B3%E4%BD%BF%E6%98%AF%E5%9C%A8%E4%B8%AD%E9%97%B4%E9%83%A8%E5%88%86%E6%8F%92%E5%85%A5%E6%88%96%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%EF%BC%8C%E6%80%A7%E8%83%BD%E5%8F%AF%E8%83%BD%E4%BC%9A%E7%A8%8D%E5%BE%AE%E5%A5%BD%E4%B8%80%E7%82%B9%EF%BC%8C%E4%BD%86%E4%BB%8D%E7%84%B6%E6%AF%94%E5%9C%A8%E6%A0%88%E9%A1%B6%E6%8F%92%E5%85%A5%E6%88%96%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E8%A6%81%E6%85%A2%E3%80%82%3C/p%3E%3Ch2%20id=%22Queues%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Queues%22%3E%C2%B6%3C/a%3EQueues%3C/h2%3E%3Cp%3E%E5%A6%82%E6%9E%9C%E6%98%AF%E5%9C%A8%E9%A6%96%E9%83%A8%E5%92%8C%E5%B0%BE%E9%83%A8%E5%90%8C%E6%97%B6%E6%9C%89%E6%8F%92%E5%85%A5%E6%88%96%E5%88%A0%E9%99%A4%E5%8A%A8%E4%BD%9C%EF%BC%8C%E8%BF%99%E4%B8%AAvector%E4%B8%8D%E4%BC%9A%E6%98%AF%E4%B8%80%E4%B8%AA%E4%BC%98%E5%8C%96%E9%9B%86%E5%90%88%E3%80%82%E5%85%B8%E5%9E%8B%E6%83%85%E5%86%B5%E7%B1%BB%E4%BC%BC%E4%BA%8EQueue%EF%BC%8C%E5%AE%83%E5%9C%A8%E5%B0%BE%E9%83%A8%E6%8F%92%E5%85%A5%E5%85%83%E7%B4%A0%EF%BC%8C%E5%9C%A8%E9%A6%96%E9%83%A8%E8%90%83%E5%8F%96%E5%85%83%E7%B4%A0%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Econst%3C/span%3E%20SIZE:%20%3Cspan%20class=%22type%22%3Eusize%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E40_000%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et0%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ev%3C/span%3E%20=%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E::&amp;lt;%3Cspan%20class=%22type%22%3Eusize%3C/span%3E&amp;gt;::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enew%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E..SIZE%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epush%3C/span%3E(i);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epush%3C/span%3E(SIZE%20+%20i);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eremove%3C/span%3E(%3Cspan%20class=%22number%22%3E0%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epush%3C/span%3E(SIZE%20*%20%3Cspan%20class=%22number%22%3E2%3C/span%3E%20+%20i);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eremove%3C/span%3E(%3Cspan%20class=%22number%22%3E0%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et1%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Ewhile%3C/span%3E%20v.%3Cspan%20class=%22title%20function_%20invoke__%22%3Elen%3C/span%3E()%20&amp;gt;%20%3Cspan%20class=%22number%22%3E0%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eremove%3C/span%3E(%3Cspan%20class=%22number%22%3E0%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et2%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Eelapsed_ms%3C/span%3E(t0,%20t1),%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Eelapsed_ms%3C/span%3E(t1,%20t2));%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%8F%AF%E8%83%BD%E7%9A%84%E8%BE%93%E5%87%BA%E4%BC%9A%E6%98%AF%EF%BC%9A%E2%80%9C561.189636%20276.056133%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E4%BB%A3%E7%A0%81%E4%B8%AD%EF%BC%8C%E5%88%9B%E5%BB%BA%E4%BA%86%E4%B8%80%E4%B8%AA%E7%A9%BA%E7%9A%84vector%EF%BC%8C%E7%94%A8%E4%BA%864%E5%8D%83%E6%AC%A1%E5%BE%AA%E7%8E%AF%EF%BC%8C%E5%B0%86%E4%B8%89%E4%B8%AA%E6%95%B0%E6%8F%92%E5%85%A5%E6%A0%88%E9%A1%B6%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%9C%A8%E6%A0%88%E9%A1%B6%E5%88%A0%E9%99%A4%E4%B8%A4%E4%B8%AA%E5%85%83%E7%B4%A0%E3%80%82%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%BE%AA%E7%8E%AF%E4%BD%93%E5%86%85%EF%BC%8C%E6%AF%8F%E6%AC%A1%E4%BB%8E%E6%A0%88%E9%A1%B6%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0%E3%80%82%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%BE%AA%E7%8E%AF%E7%89%87%E6%AE%B5%E8%8A%B1%E8%B4%B9%E4%BA%86%E5%A4%A7%E7%BA%A6%E5%8D%8A%E7%A7%92%E7%9A%84%E6%97%B6%E9%97%B4%EF%BC%8C%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%BE%AA%E7%8E%AF%E4%BD%93%E8%8A%B1%E8%B4%B9%E4%BA%86%E5%A4%A7%E7%BA%A6%E5%9B%9B%E5%88%86%E4%B9%8B%E4%B8%80%E7%A7%92%E3%80%82%E5%AE%9E%E9%99%85%E4%B8%8A%EF%BC%8C%E5%A4%A7%E9%83%A8%E5%88%86%E6%97%B6%E9%97%B4%E9%83%BD%E7%94%A8%E5%9C%A8%E4%BA%86%E8%90%83%E5%8F%96%E5%85%83%E7%B4%A0%E4%B8%8A%EF%BC%8C%E6%8F%92%E5%85%A5%E5%85%B6%E5%AE%9E%E6%98%AF%E9%9D%9E%E5%B8%B8%E5%BF%AB%E7%9A%84%E3%80%82%3C/p%3E%3Cp%3E%E6%88%91%E4%BB%AC%E5%B8%8C%E6%9C%9B%E6%8F%92%E5%85%A5%E5%85%83%E7%B4%A0%E6%80%BB%E6%98%AF%E5%8F%91%E7%94%9F%E5%9C%A8%E6%A0%88%E5%B0%BE%EF%BC%8C%E8%90%83%E5%8F%96(extract)%E5%85%83%E7%B4%A0%E6%80%BB%E6%98%AF%E5%9C%A8%E6%A0%88%E9%A1%B6%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Econst%3C/span%3E%20SIZE:%20%3Cspan%20class=%22type%22%3Eusize%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E40_000%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et0%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ev%3C/span%3E%20=%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E::&amp;lt;%3Cspan%20class=%22type%22%3Eusize%3C/span%3E&amp;gt;::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enew%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E..SIZE%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Einsert%3C/span%3E(%3Cspan%20class=%22number%22%3E0%3C/span%3E,%20i);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Einsert%3C/span%3E(%3Cspan%20class=%22number%22%3E0%3C/span%3E,%20SIZE%20+%20i);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epop%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Einsert%3C/span%3E(%3Cspan%20class=%22number%22%3E0%3C/span%3E,%20SIZE%20*%20%3Cspan%20class=%22number%22%3E2%3C/span%3E%20+%20i);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epop%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et1%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Ewhile%3C/span%3E%20v.%3Cspan%20class=%22title%20function_%20invoke__%22%3Elen%3C/span%3E()%20&amp;gt;%20%3Cspan%20class=%22number%22%3E0%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epop%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et2%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Eelapsed_ms%3C/span%3E(t0,%20t1),%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Eelapsed_ms%3C/span%3E(t1,%20t2));%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BB%93%E6%9E%9C%E5%8F%AF%E8%83%BD%E6%89%93%E5%8D%B0%EF%BC%9A%E2%80%9C790.365012%200.000112%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E7%8E%B0%E5%9C%A8%E6%8F%92%E5%85%A5%E5%BE%88%E6%85%A2%EF%BC%8C%E5%88%A0%E9%99%A4%E5%8D%B4%E5%BE%88%E5%BF%AB%E3%80%82%E5%8F%AF%E6%98%AF%E6%80%BB%E5%85%B1%E8%8A%B1%E8%B4%B9%E7%9A%84%E6%97%B6%E9%97%B4%E5%B9%B6%E6%B2%A1%E6%9C%89%E6%8F%90%E5%8D%87%E5%A4%9A%E5%B0%91%E3%80%82%E6%88%91%E4%BB%AC%E5%B0%9D%E8%AF%95%E7%94%A8%3Ccode%3EVecDeque%3C/code%3E%E7%B1%BB%E5%9E%8B%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Econst%3C/span%3E%20SIZE:%20%3Cspan%20class=%22type%22%3Eusize%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E40_000%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et0%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ev%3C/span%3E%20=%20std::collections::VecDeque::&amp;lt;%3Cspan%20class=%22type%22%3Eusize%3C/span%3E&amp;gt;::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enew%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E..SIZE%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Einsert%3C/span%3E(%3Cspan%20class=%22number%22%3E0%3C/span%3E,%20i);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Einsert%3C/span%3E(%3Cspan%20class=%22number%22%3E0%3C/span%3E,%20SIZE%20+%20i);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epop%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Einsert%3C/span%3E(%3Cspan%20class=%22number%22%3E0%3C/span%3E,%20SIZE%20*%20%3Cspan%20class=%22number%22%3E2%3C/span%3E%20+%20i);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epop%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et1%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Ewhile%3C/span%3E%20v.%3Cspan%20class=%22title%20function_%20invoke__%22%3Elen%3C/span%3E()%20&amp;gt;%20%3Cspan%20class=%22number%22%3E0%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epop%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et2%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Eelapsed_ms%3C/span%3E(t0,%20t1),%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Eelapsed_ms%3C/span%3E(t1,%20t2));%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BB%93%E6%9E%9C%E6%89%93%E5%8D%B0%EF%BC%9A%E2%80%9C0.40793%200.050257%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E6%95%B4%E6%AE%B5%E7%A8%8B%E5%BA%8F%E8%8A%B1%E8%B4%B9%E4%B8%8D%E5%88%B0%E5%8D%8A%E6%AF%AB%E7%A7%92%E7%9A%84%E6%97%B6%E9%97%B4%EF%BC%8C%E8%BF%99%E9%87%8C%E9%9C%80%E8%A6%81%E6%98%BE%E5%BC%8F%E5%A3%B0%E6%98%8E%3Ccode%3EVecDeque%3C/code%3E%E7%9A%84%E7%B1%BB%E5%9E%8B%EF%BC%8C%E5%AE%83%E6%98%AF%E2%80%9Cvector-like%20double-ended%20queue%E2%80%9D%E7%9A%84%E7%BC%A9%E5%86%99%EF%BC%8C%E2%80%9Cqueue%E2%80%9D%E8%A1%A8%E7%A4%BA%E7%9A%84%E6%98%AF%E2%80%9Csequential%20collection%20into%20which%20items%20are%20inserted%20at%20one%20end%20and%20from%20which%20items%20are%20extracted%20at%20the%20other%20end%E2%80%9D%E3%80%82%E2%80%9Cdouble-ended%E2%80%9D%E8%A1%A8%E7%A4%BA%E5%9C%A8%E5%B0%BE%E9%83%A8%E6%8F%92%E5%85%A5%E5%85%83%E7%B4%A0%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%9C%A8%E5%B0%BE%E9%83%A8%E8%90%83%E5%8F%96%E5%85%83%E7%B4%A0%EF%BC%8C%E4%B8%8D%E5%B8%A6%E6%9C%89penalty%E3%80%82%E2%80%9Cvector-like%E2%80%9D%E8%A1%A8%E7%A4%BA%E5%85%B7%E6%9C%89vector%E7%9B%B8%E4%BC%BC%E7%9A%84%E6%93%8D%E4%BD%9C%E3%80%82%3C/p%3E%3Cp%3E%E8%A6%81%E5%9C%A8vector%E6%A0%88%E9%A1%B6%E6%B7%BB%E5%8A%A0%E6%88%96%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%3Ccode%3Epush%3C/code%3E%E5%92%8C%3Ccode%3Epop%3C/code%3E%EF%BC%8C%E8%80%8C%E5%AF%B9%E4%BA%8E%3Ccode%3E%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97%EF%BC%8Cdouble-ended%20queue%3C/code%3E%EF%BC%8C%E9%9C%80%E8%A6%81%E7%90%86%E8%A7%A3%E4%B8%A4%E7%AB%AF%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%98%AF%E7%AD%89%E6%95%88%E7%9A%84%EF%BC%8C%E6%8F%92%E5%85%A5%E5%85%83%E7%B4%A0%E5%8F%AF%E4%BB%A5%E7%94%A8%3Ccode%3Epush_front%3C/code%3E%E5%92%8C%3Ccode%3Epush_back%3C/code%3E%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%9C%A8%E4%B8%A4%E7%AB%AF%E7%94%A8%3Ccode%3Epop_front%3C/code%3E%E5%92%8C%3Ccode%3Epop_back%3C/code%3E%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0%E3%80%82%E8%99%BD%E7%84%B6%3Ccode%3EVecDeque%3C/code%3E%E7%B1%BB%E5%9E%8B%E6%94%AF%E6%8C%81%3Ccode%3Einsert%3C/code%3E%E5%92%8C%3Ccode%3Eremove%3C/code%3E%E5%87%BD%E6%95%B0%EF%BC%8C%E4%BD%86%E4%B8%8D%E8%A2%AB%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%AE%83%E4%B8%8D%E6%98%AF%E9%AB%98%E6%95%88%E7%9A%84%E3%80%82%3C/p%3E%3Cp%3E%E7%BB%99%E5%87%BA%E7%9A%84%E9%98%9F%E5%88%97%E9%9D%9E%E5%B8%B8%E9%AB%98%E6%95%88%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E4%BB%AC%E6%80%BB%E6%98%AF%E7%94%A8%E5%AE%83%EF%BC%8C%E8%80%8C%E6%98%AF%E9%80%89%E6%8B%A9%E7%94%A8vector%EF%BC%9F%3C/p%3E%3Cp%3E%E5%8E%9F%E5%9B%A0%E6%98%AFvector%E6%9B%B4%E6%99%AE%E9%81%8D%E7%9A%84%E6%93%8D%E4%BD%9C%E6%98%AF%E8%BF%AD%E4%BB%A3%E3%80%81%E5%85%83%E7%B4%A0%E8%AE%BF%E9%97%AE%EF%BC%8C%E8%BF%99%E7%A7%8D%E6%97%B6%E9%97%B4%E6%8D%9F%E8%80%97%E4%B8%80%E7%9B%B4%E4%BF%9D%E6%8C%81%E4%B8%BA%E5%B8%B8%E9%87%8F%E5%9B%A0%E7%B4%A0%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E18%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E19%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E21%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E22%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E23%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E24%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Econst%3C/span%3E%20SIZE:%20%3Cspan%20class=%22type%22%3Eusize%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E40_000%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ev%3C/span%3E%20=%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E::&amp;lt;%3Cspan%20class=%22type%22%3Eusize%3C/span%3E&amp;gt;::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enew%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Evd%3C/span%3E%20=%20std::collections::VecDeque::&amp;lt;%3Cspan%20class=%22type%22%3Eusize%3C/span%3E&amp;gt;::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enew%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et0%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E..SIZE%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epush%3C/span%3E(i);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et1%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E..SIZE%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Evd.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epush_back%3C/span%3E(i);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ecount%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E0%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22number%22%3E2%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20v.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eiter%3C/span%3E()%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ecount%20+=%20i;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et3%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20vd.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eiter%3C/span%3E()%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ecount%20+=%20i;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et4%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20count,%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22title%20function_%20invoke__%22%3Eelapsed_ms%3C/span%3E(t0,%20t1),%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Eelapsed_ms%3C/span%3E(t1,%20t2),%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22title%20function_%20invoke__%22%3Eelapsed_ms%3C/span%3E(t2,%20t3),%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Eelapsed_ms%3C/span%3E(t3,%20t4));%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%8F%AF%E8%83%BD%E6%89%93%E5%8D%B0%EF%BC%9A%E2%80%9C1599960000%200.230073%200.203979%200.013144%200.035295%E2%80%9D%E3%80%82%3C/p%3E%3Cp%3E%E4%BC%9A%E5%8F%91%E7%8E%B0%EF%BC%8C%3Ccode%3EVec%3C/code%3E%E5%92%8C%3Ccode%3EVecDeque%3C/code%3E%E5%87%A0%E4%B9%8E%E8%8A%B1%E8%B4%B9%E7%9B%B8%E5%BD%93%E7%9A%84%E6%97%B6%E9%97%B4%EF%BC%8C%E4%BD%86%E5%AF%B9%E4%BA%8E%E6%89%AB%E6%8F%8F%E6%95%B4%E4%B8%AA%E9%9B%86%E5%90%88%E5%85%83%E7%B4%A0%EF%BC%8C%3Ccode%3EVec%3C/code%3E%E6%95%88%E7%8E%87%E8%A6%81%E9%AB%98%E5%87%BA%E4%B8%A4%E5%80%8D%E3%80%82%3C/p%3E%3Ch2%20id=%22Linked-Lists%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Linked-Lists%22%3E%C2%B6%3C/a%3ELinked%20Lists%3C/h2%3E%3Cp%3E%E5%AF%B9%E4%BA%8E%E6%9F%90%E4%BA%9B%E5%BA%94%E7%94%A8%EF%BC%8C%E5%8F%AF%E8%83%BD%E4%BC%9A%E9%A2%91%E7%B9%81%E5%9C%B0%E5%9C%A8%E4%B8%AD%E9%97%B4%E4%BD%8D%E7%BD%AE%E6%8F%92%E5%85%A5%E6%88%96%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0%E3%80%82%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%EF%BC%8C%E5%90%91%E9%87%8F(vector)%E5%92%8C%E5%AF%B9%E8%B1%A1(queue)%E4%B8%8D%E6%98%AF%E9%AB%98%E6%95%88%E7%9A%84%EF%BC%8C%E6%89%80%E4%BB%A5%E9%9C%80%E8%A6%81%E5%BC%95%E5%85%A5%E6%96%B0%E7%9A%84%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%E2%80%94%E2%80%94%3Ccode%3ELinkedList%3C/code%3E%E3%80%82%3C/p%3E%3Cp%3E%E7%84%B6%E8%80%8C%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%BD%A0%E9%9C%80%E8%A6%81%E5%9C%A8%E4%B8%80%E4%B8%AA%E9%9B%86%E5%90%88%E8%BF%9B%E8%A1%8C%E5%A4%A7%E9%87%8F%E6%93%8D%E4%BD%9C%EF%BC%8C%E8%AD%AC%E5%A6%82%E6%B7%BB%E5%8A%A0%E6%88%96%E5%88%A0%E9%99%A4%E5%BE%88%E5%A4%9A%E4%B8%AA%E6%9D%A1%E7%9B%AE%EF%BC%8C%E4%BC%9A%E6%AF%94%3Ccode%3EVec%3C/code%3E%E6%88%96%3Ccode%3EVecDeque%3C/code%3E%E8%A6%81%E5%BF%AB%E5%BE%88%E5%A4%9A%EF%BC%8C%E5%AE%83%E4%BC%9A%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E4%B8%B4%E6%97%B6%E9%9B%86%E5%90%88%EF%BC%8C%E5%B9%B6%E7%94%B1%E4%B8%B4%E6%97%B6%E9%9B%86%E5%90%88%E6%9B%BF%E6%8D%A2%E5%8E%9F%E6%9D%A5%E7%9A%84%E9%9B%86%E5%90%88%E3%80%82%3C/p%3E%3Cp%3E%3Ccode%3ELinkedList%3C/code%3E%E7%9A%84%E4%BD%BF%E7%94%A8%EF%BC%8C%E4%B8%8D%E5%BA%94%E8%AF%A5%E7%94%A8%E4%BA%8E%E9%82%A3%E4%BA%9B%E9%9C%80%E8%A6%81%E9%A2%91%E7%B9%81%E8%AF%BB%E5%8F%96%E7%9A%84%E4%BD%8D%E7%BD%AE%E5%81%9A%E6%8F%92%E5%85%A5%E6%88%96%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C%E3%80%82%3C/p%3E%3Ch2%20id=%22Binary-Heaps%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Binary-Heaps%22%3E%C2%B6%3C/a%3EBinary%20Heaps%3C/h2%3E%3Cp%3E%E8%AE%BF%E9%97%AE%E9%9B%86%E5%90%88%E8%BF%98%E6%9C%89%E5%8F%A6%E5%A4%96%E4%B8%80%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%8C%E5%8D%B3%E6%89%80%E8%B0%93%E7%9A%84%E2%80%9C%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97%E2%80%9D%E3%80%82%E5%AE%83%E5%87%BA%E7%8E%B0%E5%9C%A8%E4%BB%85%E6%9C%89%E4%B8%A4%E4%B8%AA%E5%87%BD%E6%95%B0%E7%9A%84%E5%9C%B0%E6%96%B9%EF%BC%9A%E6%8F%92%E5%85%A5%E5%85%83%E7%B4%A0%E5%92%8C%E8%90%83%E5%8F%96%E5%85%83%E7%B4%A0%E3%80%82%E4%BD%86%E6%AF%8F%E4%B8%AA%E5%85%83%E7%B4%A0%E9%83%BD%E6%9C%89%E4%BC%98%E5%85%88%E5%80%BC%EF%BC%8C%E8%90%83%E5%8F%96(extract)%E5%85%83%E7%B4%A0%E9%9C%80%E8%A6%81%E6%A0%B9%E6%8D%AE%E4%BC%98%E5%85%88%E7%BA%A7%E8%8E%B7%E5%8F%96%E3%80%82%E4%BD%BF%E7%94%A8Vector%E6%97%B6%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%B1%BB%E4%BC%BC%E4%B8%8B%E9%9D%A2%E8%BF%99%E7%A7%8D%E6%96%B9%E5%BC%8F%E5%8C%85%E5%90%AB%E8%BF%99%E7%A7%8D%E8%A1%8C%E4%B8%BA%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Eadd%3C/span%3E(v:%20&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Ei32%3C/span%3E&amp;gt;,%20a:%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E)%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epush%3C/span%3E(a);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Esort%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ea%3C/span%3E%20=%20[%3Cspan%20class=%22number%22%3E48%3C/span%3E,%20%3Cspan%20class=%22number%22%3E18%3C/span%3E,%20%3Cspan%20class=%22number%22%3E20%3C/span%3E,%20%3Cspan%20class=%22number%22%3E35%3C/span%3E,%20%3Cspan%20class=%22number%22%3E17%3C/span%3E,%20%3Cspan%20class=%22number%22%3E13%3C/span%3E,%20%3Cspan%20class=%22number%22%3E39%3C/span%3E,%20%3Cspan%20class=%22number%22%3E12%3C/span%3E,%20%3Cspan%20class=%22number%22%3E42%3C/span%3E,%20%3Cspan%20class=%22number%22%3E33%3C/span%3E,%20%3Cspan%20class=%22number%22%3E29%3C/span%3E,%20%3Cspan%20class=%22number%22%3E27%3C/span%3E,%20%3Cspan%20class=%22number%22%3E50%3C/span%3E,%20%3Cspan%20class=%22number%22%3E16%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ev%3C/span%3E%20=%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E::&amp;lt;%3Cspan%20class=%22type%22%3Ei32%3C/span%3E&amp;gt;::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enew%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E..a.%3Cspan%20class=%22title%20function_%20invoke__%22%3Elen%3C/span%3E()%20/%20%3Cspan%20class=%22number%22%3E2%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22title%20function_%20invoke__%22%3Eadd%3C/span%3E(&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20v,%20a[i%20*%20%3Cspan%20class=%22number%22%3E2%3C/span%3E]);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22title%20function_%20invoke__%22%3Eadd%3C/span%3E(&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20v,%20a[i%20*%20%3Cspan%20class=%22number%22%3E2%3C/span%3E%20+%20%3Cspan%20class=%22number%22%3E1%3C/span%3E]);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;quot;%3C/span%3E,%20v.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epop%3C/span%3E().%3Cspan%20class=%22title%20function_%20invoke__%22%3Eunwrap%3C/span%3E());%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Ewhile%3C/span%3E%20!%20v.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eis_empty%3C/span%3E()%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;quot;%3C/span%3E,%20v.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epop%3C/span%3E().%3Cspan%20class=%22title%20function_%20invoke__%22%3Eunwrap%3C/span%3E());%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E6%AF%8F%E6%AC%A1%E5%B0%86%E6%95%B0%E7%BB%84%E5%85%83%E7%B4%A0%E6%B7%BB%E5%8A%A0%E5%88%B0vector%E6%97%B6%EF%BC%8Cvector%E9%83%BD%E8%BF%9B%E8%A1%8C%E4%B8%80%E6%AC%A1%E6%8E%92%E5%BA%8F%EF%BC%8C%E5%AE%83%E7%9A%84%E5%85%83%E7%B4%A0%E4%BF%9D%E6%8C%81%E5%8D%87%E9%98%B6%E7%9A%84%E9%A1%BA%E5%BA%8F%E3%80%82%E6%89%80%E4%BB%A5vector%E7%9A%84%E5%80%BC%E7%9A%84%E8%90%83%E5%8F%96%E4%B9%9F%E6%80%BB%E5%8F%AF%E4%BB%A5%E5%BE%97%E5%88%B0%E6%9C%80%E5%A4%A7%E5%80%BC%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%8B%E9%9D%A2%E6%98%AF%E5%8F%A6%E4%B8%80%E7%A7%8D%E7%AD%89%E4%BB%B7%E5%AE%9E%E7%8E%B0%EF%BC%8C%E5%8F%AA%E4%B8%8D%E8%BF%87%E6%98%AF%E5%9C%A8%E8%90%83%E5%8F%96%E5%89%8D%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Eextract%3C/span%3E(v:%20&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E&amp;lt;%3Cspan%20class=%22type%22%3Ei32%3C/span%3E&amp;gt;)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20OPtion&amp;lt;%3Cspan%20class=%22type%22%3Ei32%3C/span%3E&amp;gt;%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Esort%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epop%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ea%3C/span%3E%20=%20[%3Cspan%20class=%22number%22%3E48%3C/span%3E,%20%3Cspan%20class=%22number%22%3E18%3C/span%3E,%20%3Cspan%20class=%22number%22%3E20%3C/span%3E,%20%3Cspan%20class=%22number%22%3E35%3C/span%3E,%20%3Cspan%20class=%22number%22%3E17%3C/span%3E,%20%3Cspan%20class=%22number%22%3E13%3C/span%3E,%20%3Cspan%20class=%22number%22%3E39%3C/span%3E,%20%3Cspan%20class=%22number%22%3E12%3C/span%3E,%20%3Cspan%20class=%22number%22%3E42%3C/span%3E,%20%3Cspan%20class=%22number%22%3E33%3C/span%3E,%20%3Cspan%20class=%22number%22%3E29%3C/span%3E,%20%3Cspan%20class=%22number%22%3E27%3C/span%3E,%20%3Cspan%20class=%22number%22%3E50%3C/span%3E,%20%3Cspan%20class=%22number%22%3E16%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ev%3C/span%3E%20=%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E::&amp;lt;%3Cspan%20class=%22type%22%3Ei32%3C/span%3E&amp;gt;::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enew%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E..a.%3Cspan%20class=%22title%20function_%20invoke__%22%3Elen%3C/span%3E()%20/%20%3Cspan%20class=%22number%22%3E2%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epush%3C/span%3E(a[i%20*%20%3Cspan%20class=%22number%22%3E2%3C/span%3E]);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epush%3C/span%3E(a[i%20*%20%3Cspan%20class=%22number%22%3E2%3C/span%3E%20+%20%3Cspan%20class=%22number%22%3E1%3C/span%3E]);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Eextract%3C/span%3E(&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20v).%3Cspan%20class=%22title%20function_%20invoke__%22%3Eunwrap%3C/span%3E());%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Ewhile%3C/span%3E%20!%20v.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eis_empty%3C/span%3E()%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Eextract%3C/span%3E(&amp;amp;%3Cspan%20class=%22keyword%22%3Emut%3C/span%3E%20v).%3Cspan%20class=%22title%20function_%20invoke__%22%3Eunwrap%3C/span%3E());%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%BF%99%E4%B8%A4%E4%B8%AA%E4%BB%A3%E7%A0%81%E9%83%BD%E6%9C%89%E4%B8%8D%E5%A5%BD%E4%B9%8B%E5%A4%84%E5%9C%A8%E4%BA%8E%E9%A2%91%E7%B9%81%E8%B0%83%E7%94%A8%E4%BA%86%3Ccode%3Esort%3C/code%3E%E5%87%BD%E6%95%B0%EF%BC%8C%E5%AE%83%E6%9C%89%E8%BE%83%E5%A4%A7%E6%B6%88%E8%80%97%E3%80%82%3C/p%3E%3Cp%3E%E4%B8%8B%E9%9D%A2%E6%98%AF%E4%B8%80%E4%B8%AA%E7%AD%89%E4%BB%B7%E5%AE%9E%E7%8E%B0%EF%BC%8C%E5%B9%B6%E4%B8%94%E6%9B%B4%E5%BF%AB%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ea%3C/span%3E%20=%20[%3Cspan%20class=%22number%22%3E48%3C/span%3E,%20%3Cspan%20class=%22number%22%3E18%3C/span%3E,%20%3Cspan%20class=%22number%22%3E20%3C/span%3E,%20%3Cspan%20class=%22number%22%3E35%3C/span%3E,%20%3Cspan%20class=%22number%22%3E17%3C/span%3E,%20%3Cspan%20class=%22number%22%3E13%3C/span%3E,%20%3Cspan%20class=%22number%22%3E39%3C/span%3E,%20%3Cspan%20class=%22number%22%3E12%3C/span%3E,%20%3Cspan%20class=%22number%22%3E42%3C/span%3E,%20%3Cspan%20class=%22number%22%3E33%3C/span%3E,%20%3Cspan%20class=%22number%22%3E29%3C/span%3E,%20%3Cspan%20class=%22number%22%3E27%3C/span%3E,%20%3Cspan%20class=%22number%22%3E50%3C/span%3E,%20%3Cspan%20class=%22number%22%3E16%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ev%3C/span%3E%20=%20std::collections::BinaryHeap::&amp;lt;%3Cspan%20class=%22type%22%3Ei32%3C/span%3E&amp;gt;::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enew%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E..a.%3Cspan%20class=%22title%20function_%20invoke__%22%3Elen%3C/span%3E()%20/%20%3Cspan%20class=%22number%22%3E2%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epush%3C/span%3E(a[i%20*%20%3Cspan%20class=%22number%22%3E2%3C/span%3E]);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epush%3C/span%3E(a[i%20*%20%3Cspan%20class=%22number%22%3E2%3C/span%3E%20+%20%3Cspan%20class=%22number%22%3E1%3C/span%3E]);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;quot;%3C/span%3E,%20v.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epop%3C/span%3E().%3Cspan%20class=%22title%20function_%20invoke__%22%3Eunwrap%3C/span%3E());%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Ewhile%3C/span%3E%20!%20v.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eis_empty%3C/span%3E()%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&amp;#123;&amp;#125;%20&amp;quot;%3C/span%3E,%20v.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epop%3C/span%3E().%3Cspan%20class=%22title%20function_%20invoke__%22%3Eunwrap%3C/span%3E());%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E8%BF%99%E9%87%8C%E7%9A%84%E4%BA%8C%E5%8F%89%E5%A0%86(binary%20heap)%E7%B1%BB%E4%BC%BCvector%E4%B8%80%E6%A0%B7%EF%BC%8C%E5%8F%AF%E4%BB%A5%E8%B0%83%E7%94%A8%3Ccode%3Epush%3C/code%3E%E5%92%8C%3Ccode%3Epop%3C/code%3E%E5%87%BD%E6%95%B0%EF%BC%8C%E4%B8%8D%E5%90%8C%E7%9A%84%E6%98%AF%EF%BC%8C%E4%BA%8C%E5%8F%89%E5%A0%86%E7%9A%84%3Ccode%3Epop%3C/code%3E%E5%87%BD%E6%95%B0%E8%90%83%E5%8F%96%E7%9A%84%E6%98%AF%E5%AE%B9%E5%99%A8%E4%B8%AD%E6%9C%80%E5%A4%A7%E7%9A%84%E5%80%BC%E3%80%82%3C/p%3E%3Ch2%20id=%22Ordered-Sets-and-Unordered-Sets%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Ordered-Sets-and-Unordered-Sets%22%3E%C2%B6%3C/a%3EOrdered%20Sets%20and%20Unordered%20Sets%3C/h2%3E%3Cp%3E%E9%9B%86%E5%90%88%E6%A6%82%E5%BF%B5%E4%B8%AD%E7%9A%84Set%E6%98%AF%E4%B8%80%E7%A7%8D%E4%B8%8D%E5%8C%85%E5%90%AB%E9%87%8D%E5%A4%8D%E5%85%83%E7%B4%A0%E7%9A%84%E6%A6%82%E5%BF%B5%EF%BC%8C%E5%AD%98%E5%82%A8%E8%BF%99%E4%B8%AA%E5%85%83%E7%B4%A0%E7%9A%84%E4%B8%80%E4%B8%AA%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0%E6%98%AF%E2%80%9Chashtable%E2%80%9D%EF%BC%8C%E5%AF%B9%E5%BA%94%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%E7%9A%84%3Ccode%3EHashSet%3C/code%3E%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E18%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Earr%3C/span%3E%20=%20[%3Cspan%20class=%22number%22%3E6%3C/span%3E,%20%3Cspan%20class=%22number%22%3E8%3C/span%3E,%20%3Cspan%20class=%22number%22%3E2%3C/span%3E,%20%3Cspan%20class=%22number%22%3E8%3C/span%3E,%20%3Cspan%20class=%22number%22%3E4%3C/span%3E,%20%3Cspan%20class=%22number%22%3E9%3C/span%3E,%20%3Cspan%20class=%22number%22%3E6%3C/span%3E,%20%3Cspan%20class=%22number%22%3E1%3C/span%3E,%20%3Cspan%20class=%22number%22%3E8%3C/span%3E,%20%3Cspan%20class=%22number%22%3E0%3C/span%3E];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ev%3C/span%3E%20=%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E::&amp;lt;_&amp;gt;::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enew%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ehs%3C/span%3E%20=%20std::collections::HashSet::&amp;lt;_&amp;gt;::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enew%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ebs%3C/span%3E%20=%20std::collections::BTreeSet::&amp;lt;_&amp;gt;::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enew%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20arr.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eiter%3C/span%3E()%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epush%3C/span%3E(i);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ehs.%3Cspan%20class=%22title%20function_%20invoke__%22%3Einsert%3C/span%3E(i);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ebs.%3Cspan%20class=%22title%20function_%20invoke__%22%3Einsert%3C/span%3E(i);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;Vec:&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20v.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eiter%3C/span%3E()%20&amp;#123;%20%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20i);%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;.%20&amp;#123;:?&amp;#125;,%20v);%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22string%22%3Eprint!(&amp;quot;%3C/span%3EHashSet%20:%3Cspan%20class=%22string%22%3E&amp;quot;);%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22string%22%3Efor%20i%20in%20hs.iter()%20&amp;#123;%20print!(&amp;quot;%3C/span%3E%20&amp;#123;&amp;#125;%3Cspan%20class=%22string%22%3E&amp;quot;,%20i);%20&amp;#125;%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22string%22%3Eprintln!(&amp;quot;%3C/span%3E.%20&amp;#123;:?&amp;#125;,%20hs);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;BTreeSet:&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20bs.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eiter%3C/span%3E()%20&amp;#123;%20%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20i);%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;.%20&amp;#123;:?&amp;#125;&amp;quot;%3C/span%3E,%20bs);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E4%BC%9A%E6%89%93%E5%8D%B0%EF%BC%8C%3C/p%3E%3Cfigure%20class=%22highlight%20plaintext%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3EVec:%206%208%202%208%204%209%206%201%208%200.%20[6,%208,%202,%208,%204,%209,%206,%201,%208,%200]%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EHashSet%20:%208%202%209%206%204%200%201.%20&amp;#123;8,%202,%209,%206,%204,%200,%201&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EBTreeSet:%200%201%202%204%206%208%209.%20&amp;#123;0,%201,%202,%204,%206,%208,%209&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%3Ccode%3EVec%20v%3C/code%3E%E9%9B%86%E5%90%88%E5%8C%85%E5%90%AB%E6%89%80%E6%9C%89%E6%8F%92%E5%85%A5%E5%85%83%E7%B4%A0%EF%BC%8C%E4%BF%9D%E7%95%99%E6%8F%92%E5%85%A5%E9%A1%BA%E5%BA%8F%EF%BC%9B%3Ccode%3EHashset%20hs%3C/code%3E%E9%9B%86%E5%90%88%E4%B8%8D%E5%8C%85%E5%90%AB%E9%87%8D%E5%A4%8D%E5%85%83%E7%B4%A0%EF%BC%9B%3Ccode%3EBTreeSet%20bs%3C/code%3E%E8%BF%9B%E8%A1%8C%E4%BA%86%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E18%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E19%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E21%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E22%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E23%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E24%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E25%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E26%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E27%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E28%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E29%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E30%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E31%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E32%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E33%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E34%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E35%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E36%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E37%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E38%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E39%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E40%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E41%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E42%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Eelapsed_ms%3C/span%3E(t1:%20Instant,%20t2:%20Instant)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et%3C/span%3E%20=%20t2%20-%20t1;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20t.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eas_secs%3C/span%3E()%20%3Cspan%20class=%22keyword%22%3Eas%3C/span%3E%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E%20*%20%3Cspan%20class=%22number%22%3E1000%3C/span%3E.%20+%20t.%3Cspan%20class=%22title%20function_%20invoke__%22%3Esubsec_nanos%3C/span%3E()%20%3Cspan%20class=%22keyword%22%3Eas%3C/span%3E%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E%20/%20%3Cspan%20class=%22number%22%3E1e6%3C/span%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Econst%3C/span%3E%20SIZE:%20%3Cspan%20class=%22type%22%3Ei32%3C/span%3E%20=%20%3Cspan%20class=%22number%22%3E40_000%3C/span%3E;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Ens_per_op%3C/span%3E(t1:%20Instant,%20t2:%20Instant)%20%3Cspan%20class=%22punctuation%22%3E-&amp;gt;%3C/span%3E%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Eelapsed_ms%3C/span%3E(t1,%20t2)%20/%20SIZE%20%3Cspan%20class=%22keyword%22%3Eas%3C/span%3E%20%3Cspan%20class=%22type%22%3Ef64%3C/span%3E%20*%20%3Cspan%20class=%22number%22%3E1_000_000%3C/span%3E.%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efn%3C/span%3E%20%3Cspan%20class=%22title%20function_%22%3Emain%3C/span%3E()%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ev%3C/span%3E%20=%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E::&amp;lt;_&amp;gt;::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enew%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ehs%3C/span%3E%20=%20std::collections::HashSet::&amp;lt;_&amp;gt;::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enew%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ebs%3C/span%3E%20=%20std::collections::BTreeSet::&amp;lt;_&amp;gt;::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enew%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et0%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E..SIZE%20&amp;#123;%20v.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epush%3C/span%3E(i);%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et1%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E..SIZE%20&amp;#123;%20hs.%3Cspan%20class=%22title%20function_%20invoke__%22%3Einsert%3C/span%3E(i);%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et2%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E..SIZE%20&amp;#123;%20bs.%3Cspan%20class=%22title%20function_%20invoke__%22%3Einsert%3C/span%3E(i);%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et3%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E..SIZE%20&amp;#123;%20%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20!%20v.%3Cspan%20class=%22title%20function_%20invoke__%22%3Econtains%3C/span%3E(&amp;amp;i)%20&amp;#123;%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E;%20&amp;#125;%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et4%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20v.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eswap%3C/span%3E(%3Cspan%20class=%22number%22%3E10_000%3C/span%3E,%20%3Cspan%20class=%22number%22%3E20_000%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20v.%3Cspan%20class=%22title%20function_%20invoke__%22%3Esort%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et5%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E..SIZE%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%20%20%20%20%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20v.%3Cspan%20class=%22title%20function_%20invoke__%22%3Ebinary_search%3C/span%3E(&amp;amp;i).%3Cspan%20class=%22title%20function_%20invoke__%22%3Eis_err%3C/span%3E()%20&amp;#123;%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E;%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et6%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E..SIZE%20&amp;#123;%20%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20!%20hs.%3Cspan%20class=%22title%20function_%20invoke__%22%3Econtains%3C/span%3E(&amp;amp;i)%20&amp;#123;%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E;%20&amp;#125;%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et7%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20%3Cspan%20class=%22variable%22%3Ei%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20%3Cspan%20class=%22number%22%3E0%3C/span%3E..SIZE%20&amp;#123;%20%3Cspan%20class=%22keyword%22%3Eif%3C/span%3E%20!%20bs.%3Cspan%20class=%22title%20function_%20invoke__%22%3Econtains%3C/span%3E(&amp;amp;i)%20&amp;#123;%20%3Cspan%20class=%22keyword%22%3Ereturn%3C/span%3E;%20&amp;#125;%20&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Et8%3C/span%3E%20=%20Instant::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enow%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;Pushes%20in%20Vec:%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Ens_per_op%3C/span%3E(t0,%20t1));%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;Insertions%20in%20HashSet:%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Ens_per_op%3C/span%3E(t1,%20t2));%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;Insertions%20in%20BTreeSet:%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Ens_per_op%3C/span%3E(t2,%20t3));%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;Linear%20search%20in%20Vec:%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Ens_per_op%3C/span%3E(t3,%20t4));%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;Sort%20of%20Vec:%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Ens_per_op%3C/span%3E(t4,%20t5));%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;Binary%20search%20in%20Vec:%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Ens_per_op%3C/span%3E(t5,%20t6));%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;Search%20in%20HashSet:%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Ens_per_op%3C/span%3E(t6,%20t7));%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20%20%20%20%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;Search%20in%20BTreeSet:%20&amp;#123;&amp;#125;&amp;quot;%3C/span%3E,%20%3Cspan%20class=%22title%20function_%20invoke__%22%3Ens_per_op%3C/span%3E(t7,%20t8));%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%B0%86%E4%BC%9A%E6%89%93%E5%8D%B0%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20plaintext%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3EPushes%20in%20Vec:%206.4021%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EInsertions%20in%20HashSet:%20139.214%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EInsertions%20in%20BTreeSet:%20127.3047%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3ELinear%20search%20in%20Vec:%2017389.3111%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3ESort%20of%20Vec:%203.1132%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EBinary%20search%20in%20Vec:%2047.7641%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3ESearch%20in%20HashSet:%2036.5041%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3ESearch%20in%20BTreeSet:%2056.2444%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E6%A0%88%E9%A1%B6%E6%8F%92%E5%85%A5%E5%85%83%E7%B4%A0%EF%BC%8C%E8%8A%B1%E8%B4%B96%E7%BA%B3%E7%A7%92%EF%BC%8C%3Ccode%3EHashSet%3C/code%3E%E5%92%8C%3Ccode%3EBTreeSet%3C/code%3E%E6%8F%92%E5%85%A5%E5%85%83%E7%B4%A0%EF%BC%8C%E8%8A%B1%E8%B4%B9%E6%8E%A5%E8%BF%9120%E5%80%8D%E3%80%82%3C/p%3E%3Cp%3E%E7%BA%BF%E6%80%A7%E6%96%B9%E5%BC%8F%E6%90%9C%E7%B4%A2vector%EF%BC%8C%E8%8A%B1%E8%B4%B9%E6%97%B6%E9%97%B4%E9%9D%9E%E5%B8%B8%E5%A4%A7%EF%BC%8C%E6%94%B9%E4%B8%BA%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95%E5%90%8E%EF%BC%8C%E5%B9%B3%E5%9D%87%E5%9C%A850%E7%BA%B3%E7%A7%92%E7%9A%84%E6%97%B6%E9%97%B4%E3%80%82%E6%89%80%E4%BB%A5%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%8F%92%E5%85%A5%E6%AF%94%E6%9F%A5%E6%89%BE%E5%B0%91%E7%9A%84%E6%83%85%E5%86%B5%EF%BC%8C%E6%AF%8F%E6%AC%A1%E6%8F%92%E5%85%A5%E5%85%83%E7%B4%A0%E4%B9%8B%E5%90%8E%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F%EF%BC%8C%E5%86%8D%E7%94%A8%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E4%BC%9A%E6%9B%B4%E5%8A%A0%E9%AB%98%E6%95%88%E3%80%82%3C/p%3E%3Cp%3E%3Ccode%3EHashSet%3C/code%3E%E7%9A%84%E6%9F%A5%E6%89%BE%E8%8A%B1%E8%B4%B940%E7%BA%B3%E7%A7%92%E5%B7%A6%E5%8F%B3%EF%BC%9B%3Ccode%3EBTreeSet%3C/code%3E%E7%9A%84%E6%9F%A5%E6%89%BE%E8%8A%B1%E8%B4%B9%E6%8E%A5%E8%BF%9160%E7%BA%B3%E7%A7%92%E5%B7%A6%E5%8F%B3%E3%80%82%3C/p%3E%3Cp%3E%E4%BC%98%E5%8C%96%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E5%8E%9F%E5%88%99%E6%98%AF%EF%BC%8C%3C/p%3E%3Cp%3E%E9%A6%96%E5%85%88%E5%A3%B0%E6%98%8E%E4%B8%80%E4%B8%AAtrait%EF%BC%8C%E5%AE%83%E5%8C%85%E5%90%AB%E6%9C%89%E8%AF%A5%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E6%96%B9%E6%B3%95%E7%AD%BE%E5%90%8D%EF%BC%8C%E6%8E%A5%E7%9D%80%E5%AE%9E%E7%8E%B0%E8%BF%99%E4%B8%AAtrait%EF%BC%8C%E5%86%8D%E6%B5%8B%E8%AF%95%E8%BF%99%E4%B8%AAtrait%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95%E7%9A%84%E6%80%A7%E8%83%BD%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%80%A7%E8%83%BD%E5%A4%AA%E4%BD%8E%E3%80%82%E9%87%8D%E6%9E%84%E4%BB%A3%E7%A0%81%E8%BF%9B%E8%A1%8C%E4%BC%98%E5%8C%96%EF%BC%8C%E7%9F%A5%E9%81%93%E6%BB%A1%E6%84%8F%E7%9A%84%E5%AE%9E%E7%8E%B0%E3%80%82%3C/p%3E%3Ch2%20id=%22Ordered-Dictionaries-and-Unordered-Dictionaries%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Ordered-Dictionaries-and-Unordered-Dictionaries%22%3E%C2%B6%3C/a%3EOrdered%20Dictionaries%20and%20Unordered%20Dictionaries%3C/h2%3E%3Cp%3E%E9%9B%86%E5%90%88%E5%A4%84%E7%90%86%E7%AE%80%E5%8D%95%E7%9A%84%E5%AD%98%E5%82%A8%E3%80%81%E8%AE%BF%E9%97%AE%E4%BD%BF%E7%94%A8%E5%A4%96%EF%BC%8C%E5%8F%A6%E4%B8%80%E7%A7%8D%E5%B8%B8%E8%A7%81%E7%94%A8%E6%B3%95%E6%98%AF%E2%80%9C%E5%AD%97%E5%85%B8%E2%80%9D%EF%BC%8C%E5%8D%B3%E7%94%B1%E2%80%9Ckey%E2%80%9D%E8%BF%9B%E8%A1%8C%E8%AE%BF%E9%97%AE%E3%80%82%3C/p%3E%3Cp%3E%E5%AD%97%E5%85%B8%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%81%9A%E6%98%AFkey-value%E5%AF%B9%EF%BC%8C%E5%AE%83%E7%9A%84%E5%A4%84%E7%90%86%E7%94%B1key%E5%86%B3%E5%AE%9A%E3%80%82%E6%89%80%E4%BB%A5%EF%BC%8C%E5%AD%97%E5%85%B8%E4%B8%8D%E8%83%BD%E6%9C%89%E4%B8%A4%E4%B8%AA%E7%9B%B8%E5%90%8C%E7%9A%84key%E3%80%82%3C/p%3E%3Cp%3ERust%E6%A0%87%E5%87%86%E5%BA%93%E4%B8%AD%E6%8F%90%E4%BE%9B%E4%BA%86%3Ccode%3EHashMap%3C/code%3E%E5%92%8C%3Ccode%3EBTreeMap%3C/code%3E%E7%9A%84%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0%EF%BC%8C%E7%B1%BB%E5%90%8C%E4%BA%8E%3Ccode%3EHashSet%3C/code%3E%EF%BC%8C%3Ccode%3EHashMap%3C/code%3E%E4%B8%8D%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F%EF%BC%8C%E4%BD%86%E9%80%9F%E5%BA%A6%E8%BE%83%E5%BF%AB%EF%BC%9B%3Ccode%3EBTreeMap%3C/code%3E%E8%BE%83%E6%85%A2%EF%BC%8C%E4%BD%86%E6%8C%89%E9%A1%BA%E5%BA%8F%E5%AD%98%E5%82%A8%E3%80%82%3C/p%3E%3Cfigure%20class=%22highlight%20rust%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E7%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E8%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E9%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E10%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E11%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E12%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E13%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E14%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E15%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E16%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E17%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E18%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E19%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E20%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E21%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E22%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E23%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E24%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22variable%22%3Earr%3C/span%3E%20=%20[(%3Cspan%20class=%22number%22%3E640%3C/span%3E,%20%3Cspan%20class=%22string%22%3E&amp;#x27;T&amp;#x27;%3C/span%3E),%20(%3Cspan%20class=%22number%22%3E917%3C/span%3E,%20%3Cspan%20class=%22string%22%3E&amp;#x27;C&amp;#x27;%3C/span%3E),%20(%3Cspan%20class=%22number%22%3E412%3C/span%3E,%20%3Cspan%20class=%22string%22%3E&amp;#x27;S&amp;#x27;%3C/span%3E),%20(%3Cspan%20class=%22number%22%3E670%3C/span%3E,%20%3Cspan%20class=%22string%22%3E&amp;#x27;T&amp;#x27;%3C/span%3E),%20(%3Cspan%20class=%22number%22%3E917%3C/span%3E,%20%3Cspan%20class=%22string%22%3E&amp;#x27;L&amp;#x27;%3C/span%3E)];%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ev%3C/span%3E%20=%20%3Cspan%20class=%22type%22%3EVec%3C/span%3E::&amp;lt;_&amp;gt;::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enew%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ehs%3C/span%3E%20=%20std::collections::HashMap::&amp;lt;_,%20_&amp;gt;::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enew%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Elet%3C/span%3E%20%3Cspan%20class=%22keyword%22%3Emut%20%3C/span%3E%3Cspan%20class=%22variable%22%3Ebs%3C/span%3E%20=%20std::collections::BTreeMap::&amp;lt;_,%20_&amp;gt;::%3Cspan%20class=%22title%20function_%20invoke__%22%3Enew%3C/span%3E();%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20&amp;amp;(key,%20value)%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20arr.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eiter%3C/span%3E()%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ev.%3Cspan%20class=%22title%20function_%20invoke__%22%3Epush%3C/span%3E((key,%20value));%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ehs.%3Cspan%20class=%22title%20function_%20invoke__%22%3Einsert%3C/span%3E(key,%20value);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3Ebs.%3Cspan%20class=%22title%20function_%20invoke__%22%3Einsert%3C/span%3E(key,%20value);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;Vec:&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20&amp;amp;(key,%20value)%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20v.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eiter%3C/span%3E()%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;%20&amp;#123;&amp;#125;:%20&amp;#123;&amp;#125;,&amp;quot;%3C/span%3E,%20key,%20value);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&#92;n%20&amp;#123;:?&amp;#125;&amp;quot;%3C/span%3E,%20v);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;HashMap:&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20(key,%20value)%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20hs.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eiter%3C/span%3E()%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;%20&amp;#123;&amp;#125;:%20&amp;#123;&amp;#125;,&amp;quot;%3C/span%3E,%20key,%20value);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&#92;n%20&amp;#123;:?&amp;#125;&amp;quot;%3C/span%3E,%20hs);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;BTreeMap:&amp;quot;%3C/span%3E);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22keyword%22%3Efor%3C/span%3E%20(key,%20value)%20%3Cspan%20class=%22keyword%22%3Ein%3C/span%3E%20bs.%3Cspan%20class=%22title%20function_%20invoke__%22%3Eiter%3C/span%3E()%20&amp;#123;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprint!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;%20&amp;#123;&amp;#125;:%20&amp;#123;&amp;#125;,&amp;quot;%3C/span%3E,%20key,%20value);%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%3Cspan%20class=%22built_in%22%3Eprintln!%3C/span%3E(%3Cspan%20class=%22string%22%3E&amp;quot;&#92;n%20&amp;#123;:?&amp;#125;&amp;quot;%3C/span%3E,%20bs);%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E7%BB%93%E6%9E%9C%E6%89%93%E5%8D%B0%EF%BC%9A%3C/p%3E%3Cfigure%20class=%22highlight%20plaintext%22%3E%3Ctable%3E%3Ctr%3E%3Ctd%20class=%22gutter%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3E1%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E2%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E3%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E4%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E5%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E6%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3Ctd%20class=%22code%22%3E%3Cpre%3E%3Cspan%20class=%22line%22%3EVec:%20640:%20T,%20917:%20C,%20412:%20S,%20670:%20T,%20917:%20L,%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20[(640,%20&amp;#x27;T&amp;#x27;),%20(917,%20&amp;#x27;C&amp;#x27;),%20(412,%20&amp;#x27;S&amp;#x27;),%20(670,%20&amp;#x27;T&amp;#x27;),%20(917,%20&amp;#x27;L&amp;#x27;)]%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EHashMap:%20640:%20T,%20412:%20S,%20917:%20L,%20670:%20T,%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20&amp;#123;640:%20&amp;#x27;T&amp;#x27;,%20412:%20&amp;#x27;S&amp;#x27;,%20917:%20&amp;#x27;L&amp;#x27;,%20670:%20&amp;#x27;T&amp;#x27;&amp;#125;%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3EBTreeMap:%20412:%20S,%20640:%20T,%20670:%20T,%20917:%20L,%3C/span%3E%3Cbr%3E%3Cspan%20class=%22line%22%3E%20&amp;#123;412:%20&amp;#x27;S&amp;#x27;,%20640:%20&amp;#x27;T&amp;#x27;,%20670:%20&amp;#x27;T&amp;#x27;,%20917:%20&amp;#x27;L&amp;#x27;&amp;#125;%3C/span%3E%3Cbr%3E%3C/pre%3E%3C/td%3E%3C/tr%3E%3C/table%3E%3C/figure%3E%3Cp%3E%E5%AD%97%E5%85%B8%E4%B8%AD%E4%B8%8D%E5%85%81%E8%AE%B8%E9%87%8D%E5%A4%8D%E7%9A%84key%EF%BC%8C%E4%BD%86%E5%85%81%E8%AE%B8%E9%87%8D%E5%A4%8D%E7%9A%84value%EF%BC%8C%E4%BB%A5%E5%8F%8A%3Ccode%3EBTreeMap%3C/code%3E%E6%8C%89%E7%85%A7key%E9%A1%BA%E5%BA%8F%E6%8E%92%E5%88%97%EF%BC%8C%E8%80%8C%3Ccode%3EHashMap%3C/code%3E%E9%A1%BA%E5%BA%8F%E9%9A%8F%E6%9C%BA%E3%80%82%3C/p%3E%3Cp%3E%E5%AE%83%E4%BB%AC%E7%9A%84%E6%80%A7%E8%83%BD%E7%B1%BB%E4%BC%BC%E4%BA%8E%3Ccode%3EHashSet%3C/code%3E%E5%92%8C%3Ccode%3EBTreeSet%3C/code%3E%E3%80%82%3C/p%3E%3Ch2%20id=%22Collections-in-C-and-in-Rust%22%3E%3Ca%20class=%22header-anchor%22%20href=%22#Collections-in-C-and-in-Rust%22%3E%C2%B6%3C/a%3ECollections%20in%20C++%20and%20in%20Rust%3C/h2%3E%3Cp%3EC++%E6%A0%87%E5%87%86%E5%BA%93%E4%B8%AD%E5%AF%B9%E5%BA%94Rust%E9%9B%86%E5%90%88%E5%88%97%E8%A1%A8%E5%A6%82%E4%B8%8B%EF%BC%8C%E6%9F%90%E4%BA%9B%E9%9B%86%E5%90%88%E5%BA%93%E5%9C%A8Rust%E4%B8%AD%E5%B9%B6%E6%B2%A1%E6%9C%89%E5%AF%B9%E5%BA%94%EF%BC%8C%E7%94%A8%3Ccode%3E~%3C/code%3E%E6%A0%87%E8%AE%B0%E8%A1%A8%E7%A4%BA%E6%9C%80%E7%9B%B8%E4%BC%BC%E7%9A%84%E9%9B%86%E5%90%88%EF%BC%8C%3C/p%3E%3Ctable%3E%3Cthead%3E%3Ctr%3E%3Cth%20style=%22text-align:left%22%3EC++%3C/th%3E%3Cth%20style=%22text-align:left%22%3ERust%3C/th%3E%3C/tr%3E%3C/thead%3E%3Ctbody%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3Earray&amp;lt;T&amp;gt;%3C/code%3E%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3E[T]%3C/code%3E%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3Evector&amp;lt;T&amp;gt;%3C/code%3E%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3EVec&amp;lt;T&amp;gt;%3C/code%3E%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3Edeque&amp;lt;T&amp;gt;%3C/code%3E%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3EVecDeque&amp;lt;T&amp;gt;%3C/code%3E%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3Eforward_list&amp;lt;T&amp;gt;%3C/code%3E%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3E~%20LinkedList&amp;lt;T&amp;gt;%3C/code%3E%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3Elist&amp;lt;T&amp;gt;%3C/code%3E%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3ELinkedList&amp;lt;T&amp;gt;%3C/code%3E%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3Estack&amp;lt;T&amp;gt;%3C/code%3E%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3E~%20Vec&amp;lt;T&amp;gt;%3C/code%3E%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3Equeue&amp;lt;T&amp;gt;%3C/code%3E%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3E~%20VecDeque&amp;lt;T&amp;gt;%3C/code%3E%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3Epriority_queue&amp;lt;T&amp;gt;%3C/code%3E%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3EBinaryHeap&amp;lt;T&amp;gt;%3C/code%3E%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3Eset&amp;lt;T&amp;gt;%3C/code%3E%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3EBTreeSet&amp;lt;T&amp;gt;%3C/code%3E%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3Emultiset&amp;lt;T&amp;gt;%3C/code%3E%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3E~%20BTreeMap&amp;lt;T,u32&amp;gt;%3C/code%3E%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3Emap&amp;lt;K,V&amp;gt;%3C/code%3E%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3EBTreeMap&amp;lt;K,V&amp;gt;%3C/code%3E%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3Emultimap&amp;lt;K,V&amp;gt;%3C/code%3E%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3E~%20BTreeMap&amp;lt;K,%20(V,u32)&amp;gt;%3C/code%3E%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3Eunordered_set&amp;lt;T&amp;gt;%3C/code%3E%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3EHashSet&amp;lt;T&amp;gt;%3C/code%3E%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3Eunordered_multiset&amp;lt;T&amp;gt;%3C/code%3E%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3E~%20HashMap&amp;lt;T,u32&amp;gt;%3C/code%3E%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3Eunordered_map&amp;lt;K,V&amp;gt;%3C/code%3E%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3EHashMap&amp;lt;K,V&amp;gt;%3C/code%3E%3C/td%3E%3C/tr%3E%3Ctr%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3Eunordered_multimap&amp;lt;K,V&amp;gt;%3C/code%3E%3C/td%3E%3Ctd%20style=%22text-align:left%22%3E%3Ccode%3E~%20HashMap&amp;lt;K,(V,u32)&amp;gt;%3C/code%3E%3C/td%3E%3C/tr%3E%3C/tbody%3E%3C/table%3E" type="image"/>
    
    
    <category term="learning" scheme="https://galudisu.info/categories/learning/"/>
    
    
    <category term="rust" scheme="https://galudisu.info/tags/rust/"/>
    
  </entry>
  
</feed>
