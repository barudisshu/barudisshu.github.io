<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><title>ruståŸºç¡€å…¥é—¨[08] - Using Heterogeneous Data Structures</title>
<link rel="stylesheet" href="/css/layout.css">
<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="/css/vendors/rabbit-lyrics.css">
<link rel="shortcut icon" href="/img/favicon.ico"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ç®€å•æ˜“æ‡‚ã®ç°ä»£é­”æ³•" type="application/atom+xml">
</head><body><header class="base-menu"><div class="menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a class="menu-link" href="/">ç®€å•æ˜“æ‡‚ã®ç°ä»£é­”æ³•</a></li><li class="menu-item"><a class="menu-link" href="/archives/">Archives</a></li><li class="menu-item"><a class="menu-link" target="_blank" rel="noopener" href="http://weibo.com/u/2360401155">Weibo</a></li><li class="menu-item"><a class="menu-link" href="/about">About</a></li><li class="menu-item"><a class="menu-link" href="/atom.xml">Rss</a></li></ul></nav></div></header><header class="base-mobile-menu"><div class="mobile-menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a class="menu-link" href="/">ç®€å•æ˜“æ‡‚ã®ç°ä»£é­”æ³•</a></li><li class="menu-item"><a class="menu-link" href="/archives/">Archives</a></li><li class="menu-item"><a class="menu-link" target="_blank" rel="noopener" href="http://weibo.com/u/2360401155">Weibo</a></li><li class="menu-item"><a class="menu-link" href="/about">About</a></li><li class="menu-item"><a class="menu-link" href="/atom.xml">Rss</a></li></ul></nav><div class="toggle-menu" id="mobile-menu-toggle"><span class="menu-bar"></span><span class="menu-bar"> </span><span class="menu-bar"></span></div></div></header><div class="base-content"><div class="base-content-main"><article class="article-main"><h1 class="article-title">ruståŸºç¡€å…¥é—¨[08] - Using Heterogeneous Data Structures</h1><div class="article-meta"><p class="meta-item meta-time"><span class="meta-item-title"></span><i class="icon-calendar"> </i>2023-01-08</p><p class="meta-item meta-tag"><span class="meta-item-title"></span><i class="icon-tag"> </i><a class="tag-link" href="/tags/rust/">rust</a></p><p class="meta-item meta-category"><span class="meta-item-title"></span><i class="icon-bookmark"> </i><a class="category-link" href="/categories/learning/">learning</a></p></div><div class="article-content"><p>æœ¬ç« è¦†ç›–æœ‰ï¼š</p>
<p>å¼‚æ„æ•°æ®ç»“æ„(Heterogeneous Data Structures, ä¹Ÿå«å¤åˆæ•°æ®ç»“æ„)ï¼Œå°±æ˜¯ä¸åŒç±»å‹çš„ç»„åˆï¼ŒåŒ…æ‹¬æœ‰ï¼Œ</p>
<ul>
<li>Tuples</li>
<li>Structs</li>
<li>Tuple-Structs</li>
</ul>
<span id="more"></span>
<p>ç”¨äºä¸åŒç±»å‹çš„åˆ†ç»„å¯¹è±¡ã€‚æœ¬ç« æœ€åï¼Œä¼šä»‹ç»ä¸€äº›ä»£ç é£æ ¼çš„è§„çº¦ã€‚</p>
<h2 id="The-Tuples"><a class="header-anchor" href="#The-Tuples">Â¶</a>The Tuples</h2>
<p>æ•°ç»„å’Œå‘é‡å¯ä»¥åŒ…å«å¤šä¸ªæ¡ç›®å…ƒç´ ï¼Œæ¯ä¸ªæ¡ç›®å¿…é¡»æ˜¯ç›¸åŒç±»å‹ã€‚å¦‚æœä½ å¸Œæœ›ä¸€ä¸ªå¯¹è±¡å­˜å‚¨ä¸åŒç±»å‹çš„å‡ ä¸ªå­å¯¹è±¡ï¼Œå¯ä»¥å¦‚ä¸‹å®ç°ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">data</span> = (<span class="number">10000000</span>, <span class="number">183.19</span>, <span class="string">&#x27;Q&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">copy_of_data</span> = data;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;, &#123;&#125;, &#123;&#125;&quot;</span>, data.<span class="number">0</span>, copy_of_data.<span class="number">1</span>, data.<span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<p>ç»“æœå°†æ‰“å°ï¼šâ€œ10000000, 183.19, Qâ€ã€‚</p>
<p>â€œdataâ€æ˜¯ä¸€ä¸ªç»„åˆå¯¹è±¡ï¼Œç”±ä¸‰ä¸ªå¯¹è±¡ç»„æˆã€‚è¿™ä¸‰ä¸ªå¯¹è±¡æœ‰ä¸åŒç±»å‹ï¼šæ•´å‹ã€æµ®ç‚¹å‹ã€å­—ç¬¦ã€‚</p>
<p>è¿™ç±»å¯¹è±¡ç§°ä¸ºï¼š<code>tuple</code>ã€‚</p>
<p>tupleçš„å£°æ˜å’Œarrayç±»ä¼¼ã€‚å”¯ä¸€ä¸åŒæ˜¯tupleç”¨çš„æ˜¯å°æ‹¬å·ï¼Œæ•°ç»„ç”¨çš„æ˜¯æ–¹æ‹¬å·ã€‚</p>
<p>tupleçš„æ¡ç›®ç§°ä¸ºå­—æ®µ(field)ã€‚</p>
<p>tupleçš„ç±»å‹å¯ä»¥æ˜¾å¼æŒ‡æ˜ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">data</span>: (<span class="type">i32</span>, <span class="type">f64</span>, <span class="type">char</span>) = (<span class="number">10000000</span>, <span class="number">183.19</span>, <span class="string">&#x27;Q&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>ä½ å¯ä»¥ç”¨ç‚¹ç¬¦å·(dot-notation)è®¿é—®tupleçš„fieldçš„å€¼ã€‚</p>
<p>ç±»ä¼¼åœ°ï¼Œtupleå¯ä»¥æ˜¯mutableçš„ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">data</span> = (<span class="number">10000000</span>, <span class="number">183.19</span>, <span class="string">&#x27;Q&#x27;</span>);</span><br><span class="line">data.<span class="number">0</span> = -<span class="number">5</span>;</span><br><span class="line">data.<span class="number">2</span> = <span class="string">&#x27;x&#x27;</span>;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;, &#123;&#125;, &#123;&#125;&quot;</span>, data.<span class="number">0</span>, data.<span class="number">1</span>, data.<span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºä¸ºï¼šâ€œ-5, 183.19, xâ€ã€‚</p>
<p>ç±»ä¼¼äºæ•°ç»„ï¼Œtupleå¯ä»¥æœ‰ä»»æ„ä¸ªå­—æ®µ(field)ã€‚å¦‚æœä¸€ä¸ªfieldéƒ½æ²¡æœ‰ï¼Œè¿™ä¸ªtupleçš„ç±»å‹æ˜¯â€œ()â€ã€‚</p>
<p>å‰é¢å·²ç»ä»‹ç»è¿‡â€œempty tuplesâ€ã€‚ä¸‹é¢è§£æä¸‹ï¼š</p>
<p>ä¸€ä¸ªä¸åŒçš„åœ°æ–¹æ˜¯ï¼Œtuplesä¸åŒé€šè¿‡å˜é‡ä¸‹æ ‡è¿›è¡Œè®¿é—®ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">array</span> = [<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">tuple</span> = (<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">i</span> = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, array[i]);</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, tuple.i);</span><br></pre></td></tr></table></figure>
<p>æœ€åä¸€è¡Œæ˜¯ä¸åˆæ³•çš„ï¼Œå› ä¸ºä¸èƒ½åœ¨è¿è¡Œæ—¶ç¡®å®štupleçš„fieldçš„å€¼ã€‚å³ä½¿ç”¨constæ¥æ ‡è¯†ä¹Ÿä¸è¡Œï¼Œå› ä¸ºtuple.iè¡¨è¿°çš„æ˜¯å®ƒçš„fieldï¼Œè¯­æ³•ä¸Šè®¤ä¸º<code>&lt;expr&gt;.&lt;integer&gt;</code>ï¼Œè§£æå™¨ä¼šè®¤ä¸ºå–å…¶fieldï¼Œå®é™…ä¸Šå¯çœ‹åšæ˜¯ä¸€ä¸ªæ–¹æ³•è°ƒç”¨ï¼Œä¸»è¦æ˜¯ä¸ºäº†è¯­ä¹‰ä¸Šçš„ä¸€è‡´æ€§ã€‚</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆRustè¿™æ ·å®šä¹‰ï¼š<br>
å®é™…ä¸Šï¼Œå¯ä»¥å‚è€ƒ<a target="_blank" rel="noopener" href="https://github.com/AndrewScull/rust/blob/1cc8b6ec664f30b43f75551e95299d943c8a4e6a/src/libcore/tuple.rs">æºç </a>å¾—çŸ¥ï¼Œtupleåœ¨å®ä¸­ï¼Œæ»¡è¶³<code>&lt;expr&gt;.&lt;integer&gt;</code>ï¼Œåé¢çš„æ•°å­—è¢«çœ‹åšidentifierå¤„ç†äº†ã€‚<br>
å¯ä»¥å‚è€ƒ<a target="_blank" rel="noopener" href="https://github.com/rust-lang/rfcs/blob/master/text/0184-tuple-accessors.md">rfc</a>è¿™æ ·è®¾è®¡çš„åŸå› ã€‚</p>
</blockquote>
<h2 id="The-Structs"><a class="header-anchor" href="#The-Structs">Â¶</a>The Structs</h2>
<p>Tupleåœ¨æ¡ç›®è¾ƒå°‘æ—¶æ¯”è¾ƒå¥½ç”¨ã€‚å½“å­—æ®µè¿‡å¤šäº†ï¼Œä¼šå¸¦æ¥ä¸€äº›éšœç¢ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">data</span> = (<span class="number">10</span>, <span class="string">&#x27;x&#x27;</span>, <span class="number">12</span>, <span class="number">183.19</span>, <span class="string">&#x27;Q&#x27;</span>, <span class="literal">false</span>, -<span class="number">9</span>);</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, data.<span class="number">2</span> + data.<span class="number">6</span>);</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç ï¼Œå¹¶ä¸èƒ½ä¸€çœ¼çœ‹å‡ºè¾“å‡ºç»“æœæ˜¯3ã€‚å¦å¤–ï¼Œä»»ä½•tupleå­—æ®µæ˜¯æŒ‰é¡ºåºå®šä¹‰çš„ï¼Œå½“ç±»å‹è¶³å¤Ÿå¤šæ—¶ï¼Œä¼šå˜å¾—éš¾äºé˜…è¯»ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">data1</span> = (<span class="number">10</span>, <span class="string">&#x27;x&#x27;</span>, <span class="number">12</span>, <span class="number">183.19</span>, <span class="string">&#x27;Q&#x27;</span>, <span class="literal">false</span>, -<span class="number">9</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">data2</span>: (<span class="type">u16</span>, <span class="type">char</span>, <span class="type">i16</span>, <span class="type">f64</span>, <span class="type">bool</span>, <span class="type">char</span>, <span class="type">i16</span>);</span><br><span class="line">data2 = data1;</span><br></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œå¯¹äºtupleæ¥è¯´ï¼Œæ·»åŠ æˆ–åˆ é™¤ä¸€ä¸ªfiledï¼Œdata.2å°±å¯èƒ½åç§»åˆ°data.3ã€‚è¿™æ ·å¤„ç†ä¹Ÿå¾ˆéº»çƒ¦ã€‚</p>
<p>å› æ­¤ï¼ŒRustç»™å‡ºäº†ä¸€ä¸ªæœ‰å…·ä½“ç±»å‹çš„ç»“æ„ï¼Œç›¸å½“äºCè¯­è¨€çš„æ„é€ ä½“ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">SomeData</span> &#123;</span><br><span class="line">	integer: <span class="type">i32</span>,</span><br><span class="line">	fractional: <span class="type">f32</span>,</span><br><span class="line">	character: <span class="type">char</span>,</span><br><span class="line">	five_bytes: [<span class="type">u8</span>; <span class="number">5</span>],</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">data</span> = SomeData &#123;</span><br><span class="line">	integer: <span class="number">10_000_000</span>,</span><br><span class="line">	fractional: <span class="number">183.19</span>,</span><br><span class="line">	character: <span class="string">&#x27;Q&#x27;</span>,</span><br><span class="line">	five_bytes: [<span class="number">9</span>, <span class="number">0</span>, <span class="number">250</span>, <span class="number">60</span>, <span class="number">200</span>],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;, &#123;&#125;, &#123;&#125;, &#123;&#125;&quot;</span>,</span><br><span class="line">	data.five_bytes[<span class="number">3</span>], data.integer,</span><br><span class="line">	data.fractional, data.character);</span><br></pre></td></tr></table></figure>
<p>ç»“æœæ‰“å°ï¼š60ï¼Œ 10000000ï¼Œ 183.19ï¼Œ Qã€‚</p>
<p>Rustä¸­çš„ç»“æ„ä½“ï¼Œæ˜¯æœ‰<code>struct</code>å…³é”®å­—å£°æ˜çš„ä¸€ä¸ªblockï¼Œå®ƒå£°æ˜äº†ä¸€ä¸ªâ€œSomeDataâ€ç±»å‹ã€‚ä»»ä½•è¯¥ç±»å‹çš„å¯¹è±¡ï¼Œéƒ½æœ‰ä¸”ä»…æœ‰å›ºå®šçš„å­—æ®µï¼Œä»¥åŠæ¯ä¸ªå­—æ®µçš„ç±»å‹ä¹Ÿæ˜¯å›ºå®šçš„ã€‚</p>
<p>è¦å£°æ˜ä¸€ä¸ªè¯¥ç±»å‹çš„å˜é‡â€œdataâ€ï¼Œä»¥åŠåˆå§‹åŒ–è¿™ä¸ªç±»å‹å¯¹è±¡ã€‚ç›´æ¥ç”¨â€œnameâ€å¸¦ä¸Šå¯¹åº”å­—æ®µå³å¯ã€‚</p>
<p>è¦è®¿é—®struct-objectçš„å€¼ï¼Œç”¨æ³•å’Œtupleä¸€æ ·ï¼Œç”¨dot-notationè®¿é—®ã€‚</p>
<p>ä¸Šè¿°ä»£ç ç±»ä¼¼äºCè¯­è¨€ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">SomeData</span> &#123;</span></span><br><span class="line">		<span class="type">int</span> integer;</span><br><span class="line">		<span class="type">float</span> fractional;</span><br><span class="line">		<span class="type">char</span> character;</span><br><span class="line">		<span class="type">unsigned</span> <span class="type">char</span> five_bytes[<span class="number">5</span>];</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">SomeData</span> <span class="title">data</span> =</span> &#123;</span><br><span class="line">		<span class="number">10000000</span>,</span><br><span class="line">		<span class="number">183.19</span>,</span><br><span class="line">		<span class="string">&#x27;Q&#x27;</span>,</span><br><span class="line">		&#123;<span class="number">9</span>, <span class="number">0</span>, <span class="number">250</span>, <span class="number">60</span>, <span class="number">200</span>&#125;,</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d, %d, %g, %c&quot;</span>,</span><br><span class="line">		data.five_bytes[<span class="number">3</span>], data.integer,</span><br><span class="line">		data.fractional, data.character);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢å’ŒCè¯­è¨€çš„å†™æ³•è¿›è¡Œå¯¹æ¯”ä¸‹ã€‚</p>
<p>Cä¸­å­—æ®µç”¨åˆ†å·éš”å¼€ï¼ŒRustä¸­ç”¨é€—å·ï¼Œ</p>
<p>Rustä¸­ï¼Œå­—æ®µå¸¦æœ‰ç±»å‹ï¼Œæ”¾åœ¨åé¢ï¼›Cæ”¾åœ¨å‰é¢ï¼Œ</p>
<p>Cçš„å­—æ®µç±»å‹å¯ä»¥ç®€å†™ï¼Œâ€œint a, b;â€ï¼›ä½†æ˜¯åœ¨Rustä¸­ï¼Œæ¯ä¸ªå­—æ®µéƒ½è¦æŒ‡å®šç±»å‹â€œa: i32, b: i32â€ã€‚</p>
<p>Cä¸­ï¼Œåˆå§‹åŒ–å¾ˆç®€å•ï¼Œç±»ä¼¼äºRustçš„tupleï¼›ä½†æ˜¯Rustçš„ç»“æ„ä½“åˆå§‹åŒ–ï¼Œå¿…é¡»æŒ‡å®šå­—æ®µåã€‚</p>
<p>ä¸è®ºCè¿˜æ˜¯Rustï¼Œéƒ½æ˜¯ç‚¹æ ‡è®°ç¬¦(dot-notation)è°ƒç”¨ã€‚</p>
<p>å¦‚æœå£°æ˜çš„æ˜¯ä¸€ä¸ªå¯å˜(mutable)å˜é‡ï¼ŒåŒæ ·å¯ä»¥ç”¨ç‚¹æ ‡è®°ç¬¦(dot-notation)å˜æ›´å­—æ®µçš„å€¼ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">SomeData</span> &#123;</span><br><span class="line">	integer: <span class="type">i32</span>,</span><br><span class="line">	fractional: <span class="type">f32</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">data</span> = SomeData &#123;</span><br><span class="line">	integer: <span class="number">10</span>,</span><br><span class="line">	fractional: <span class="number">183.19</span>,</span><br><span class="line">&#125;;</span><br><span class="line">data.fractional = <span class="number">8.2</span>;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;ï¼Œ &#123;&#125;&quot;</span>, data.fractional, data.integer);</span><br></pre></td></tr></table></figure>
<p>ç»“æœå°†è¾“å‡ºï¼šâ€œ8.2ï¼Œ10â€ã€‚</p>
<p>å’Œtupleä¸€æ ·ï¼Œstrcutä¹Ÿå¯ä»¥æ˜¯ç©ºã€‚</p>
<h2 id="The-Tuple-Structs"><a class="header-anchor" href="#The-Tuple-Structs">Â¶</a>The Tuple-Structs</h2>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæœ‰ä¸¤ç±»ç»“æ„åŒ–çš„å®¹å™¨ï¼š</p>
<ul>
<li>tupleï¼Œç±»å‹æ²¡æœ‰åç§°ï¼Œä¸èƒ½æå‰å£°æ˜ï¼Œå­—æ®µæ²¡æœ‰åç§°ï¼›</li>
<li>structï¼Œç±»å‹æœ‰åç§°ï¼Œå¿…é¡»æå‰å£°æ˜ï¼Œå­—æ®µæœ‰åç§°ã€‚</li>
</ul>
<p>å¦å¤–è¿˜éœ€è¦ä¸€ç§ç»“æ„ï¼šç±»å‹æœ‰åç§°ï¼Œéœ€è¦æå‰å£°æ˜ï¼Œä½†å­—æ®µæ²¡æœ‰åç§°ã€‚è¿™ç§åŸºäºtupleå’Œstructå½¢å¼çš„ç»“æ„ä½“ã€‚ç§°ä¸ºï¼šâ€œ<code>tuple-structs</code>â€ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">SomeData</span> (</span><br><span class="line">	<span class="type">i32</span>,</span><br><span class="line">	<span class="type">f32</span>,</span><br><span class="line">	<span class="type">char</span>,</span><br><span class="line">	[<span class="type">u8</span>; <span class="number">5</span>],</span><br><span class="line">);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">data</span> = <span class="title function_ invoke__">SomeData</span> (</span><br><span class="line">	<span class="number">10_000_000</span>,</span><br><span class="line">	<span class="number">183.19</span>,</span><br><span class="line">	<span class="string">&#x27;Q&#x27;</span>,</span><br><span class="line">	[<span class="number">9</span>, <span class="number">0</span>, <span class="number">250</span>, <span class="number">60</span>, <span class="number">200</span>],</span><br><span class="line">);</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;, &#123;&#125;, &#123;&#125;, &#123;&#125;&quot;</span>, </span><br><span class="line">	data.<span class="number">2</span>, data.<span class="number">0</span>, data.<span class="number">1</span>, data.<span class="number">3</span>[<span class="number">2</span>]);</span><br></pre></td></tr></table></figure>
<p>è¿™ç§ç»“æ„æ„Ÿè§‰å¾ˆåˆ«æ‰­ï¼Œå› ä¸ºæ˜¯ç”¨åœ†æ‹¬å·ä½œè¯­å¥å—ï¼Œå¹¶ä¸”æ²¡æœ‰æŒ‡å®šå­—æ®µçš„åç§°ï¼Œåˆå§‹åŒ–åƒstructï¼Œè®¿é—®å­—æ®µæ–¹å¼åƒtupleã€‚</p>
<p>åŒºåˆ«äºtupleå’Œstructï¼Œ<code>tuple-structs</code>è¿™ç§ç»“æ„ä¸èƒ½ä¸ºç©ºã€‚</p>
<p>å®é™…åº”ç”¨ä¸­ï¼Œtuple-structå¹¶ä¸å¸¸ç”¨ã€‚</p>
<h2 id="Lexical-Convertions"><a class="header-anchor" href="#Lexical-Convertions">Â¶</a>Lexical Convertions</h2>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬è®¤è¯†äº†ä¸€éƒ¨åˆ†Rustç»“æ„ä½“(ä¸æ˜¯å…¨éƒ¨ï¼)ï¼Œæ¥ä¸‹æ¥è¦é˜è¿°ä¸€äº›è¯æ³•è§„åˆ™ã€‚è¿™äº›è§„åˆ™æ˜¯å¦‚æ­¤æ ¹æ·±è’‚å›ºï¼Œç”šè‡³äºè¿åè¿™äº›è§„åˆ™ä¼šä»¤ç¼–è¯‘å™¨æŠ›å‡ºè­¦å‘Šã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MAXIMUM_POWER: <span class="type">u16</span> = <span class="number">600</span>;</span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">VehicleKind</span> &#123;</span><br><span class="line">	Motorcycle,</span><br><span class="line">	Car,</span><br><span class="line">	Truck,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">VehicleData</span> &#123;</span><br><span class="line">	kind: VehicleKind,</span><br><span class="line">	registration_year: <span class="type">u16</span>,</span><br><span class="line">	registration_month: <span class="type">u8</span>,</span><br><span class="line">	power: <span class="type">u16</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">vehicle</span> = VehicleData &#123;</span><br><span class="line">	kind: VehicleKind::Car,</span><br><span class="line">	registration_year: <span class="number">2003</span>,</span><br><span class="line">	registration_month: <span class="number">11</span>,</span><br><span class="line">	power: <span class="number">120</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">if</span> vehicle.power &gt; MAXIMUM_POWER &#123;</span><br><span class="line">	<span class="built_in">println!</span>(<span class="string">&quot;Too powerful&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä¾‹å­é˜è¿°äº†ä¸€äº›è§„åˆ™è¦æ±‚ï¼š</p>
<ul>
<li>å¸¸ç†çš„åç§°è¦å¤§äº›ï¼Œå¹¶ä¸”ç”¨ä¸‹åˆ’çº¿åˆ’åˆ†è¯ç»„ã€‚</li>
<li>ç±»å‹çš„åç§°ç”±åº”ç”¨ä»£ç æˆ–æ ‡å‡†åº“å®šä¹‰ï¼Œæšä¸¾å˜é‡çš„åç§°ç”±ä¸€ç»„å…³è”è¯æ±‡ç²˜åˆï¼Œè¦æ±‚å‘½åé¦–å­—æ¯å¤§å†™ã€‚</li>
<li>å…¶å®ƒ(è¯¸å¦‚å…³é”®å­—<code>let</code>ã€åŸç”Ÿç±»å‹<code>u8</code>)åç§°åˆ™ç”±å°å†™å­—æ¯ï¼Œä¸‹åˆ’çº¿åˆ’åˆ†è¯ç»„ã€‚</li>
</ul>
</div></article><nav class="article-nav"><div class="article-nav-prev">ğŸ”™<a href="/2023/01/09/rust/beginning/chapter09_Defining%20Functions/">ruståŸºç¡€å…¥é—¨[09] - Defining Functions</a></div><div class="article-nav-next">ğŸ”œ<a href="/2023/01/07/rust/beginning/chapter07_Enumerating%20%20Cases/">ruståŸºç¡€å…¥é—¨[07] - Enumerating Cases</a></div></nav><div id="base-discus"><div id="disqus_thread"></div><script>var disqus_shortname = 'barudisshu-github-io';
var disqus_identifier = '2023/01/08/rust/beginning/chapter08_Using Heterogeneous Data Structures/';
var disqus_title = 'ruståŸºç¡€å…¥é—¨[08] - Using Heterogeneous Data Structures';
var disqus_url = 'https://galudisu.info/2023/01/08/rust/beginning/chapter08_Using Heterogeneous Data Structures/';
(function () {
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async>  </script></div></div></div><footer class="base-footer"><div class="footer-wrapper"><span>Â©2016 - 2025 <a href="https://galudisu.info">barudisshu</a>, unless otherwise noted.</span></div></footer><div class="dom-ready">
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>

<link rel="stylesheet" href="//cdn.bootcss.com/pace/1.0.2/themes/green/pace-theme-flash.min.css">

<script src="/js/base.js"></script>

<script src="/js/rabbit-lyrics.js"></script>
</div></body></html>