<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><title>rust基础入门[05] - Using Data Sequences</title>
<link rel="stylesheet" href="/css/layout.css">
<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="/css/vendors/rabbit-lyrics.css">
<link rel="shortcut icon" href="/img/favicon.ico"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="简单易懂の现代魔法" type="application/atom+xml">
</head><body><header class="base-menu"><div class="menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a class="menu-link" href="/">简单易懂の现代魔法</a></li><li class="menu-item"><a class="menu-link" href="/archives/">Archives</a></li><li class="menu-item"><a class="menu-link" target="_blank" rel="noopener" href="http://weibo.com/u/2360401155">Weibo</a></li><li class="menu-item"><a class="menu-link" href="/about">About</a></li><li class="menu-item"><a class="menu-link" href="/atom.xml">Rss</a></li></ul></nav></div></header><header class="base-mobile-menu"><div class="mobile-menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a class="menu-link" href="/">简单易懂の现代魔法</a></li><li class="menu-item"><a class="menu-link" href="/archives/">Archives</a></li><li class="menu-item"><a class="menu-link" target="_blank" rel="noopener" href="http://weibo.com/u/2360401155">Weibo</a></li><li class="menu-item"><a class="menu-link" href="/about">About</a></li><li class="menu-item"><a class="menu-link" href="/atom.xml">Rss</a></li></ul></nav><div class="toggle-menu" id="mobile-menu-toggle"><span class="menu-bar"></span><span class="menu-bar"> </span><span class="menu-bar"></span></div></div></header><div class="base-content"><div class="base-content-main"><article class="article-main"><h1 class="article-title">rust基础入门[05] - Using Data Sequences</h1><div class="article-meta"><p class="meta-item meta-time"><span class="meta-item-title"></span><i class="icon-calendar"> </i>2023-01-05</p><p class="meta-item meta-tag"><span class="meta-item-title"></span><i class="icon-tag"> </i><a class="tag-link" href="/tags/rust/">rust</a></p><p class="meta-item meta-category"><span class="meta-item-title"></span><i class="icon-bookmark"> </i><a class="category-link" href="/categories/learning/">learning</a></p></div><div class="article-content"><p>本章覆盖有：</p>
<ul>
<li>如何定义相同类型的序列，包含固定长度(arrays)和可变长度(vectors)</li>
<li>如何初始化arrays和vector</li>
<li>如何向arrays和vector写和读</li>
<li>如何向一个vector添加条目或删除条目</li>
<li>如何创建多维数组</li>
<li>如何打印或复制整个数组或向量</li>
</ul>
<span id="more"></span>
<h2 id="Arrays"><a class="header-anchor" href="#Arrays">¶</a>Arrays</h2>
<p>存储字符串变量：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">x</span> = [<span class="string">&quot;English&quot;</span>, <span class="string">&quot;This&quot;</span>, <span class="string">&quot;sentence&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;in&quot;</span>, <span class="string">&quot;is&quot;</span>];</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125; &#123;&#125; &#123;&#125; &#123;&#125; &#123;&#125;&quot;</span>, x[<span class="number">1</span>], x[<span class="number">5</span>], x[<span class="number">3</span>], x[<span class="number">2</span>], x[<span class="number">4</span>], x[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure>
<p>获取数组的元素个数，你可以：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">a</span> = [<span class="literal">true</span>, <span class="literal">false</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">b</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;, &#123;&#125;.&quot;</span>, a.<span class="title function_ invoke__">len</span>(), b.<span class="title function_ invoke__">len</span>());</span><br></pre></td></tr></table></figure>
<p>数组中的元素要求类型一致，像下面的写法是错误的：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">x</span> = [<span class="string">&quot;This&quot;</span>, <span class="number">4</span>];</span><br><span class="line">or</span><br><span class="line"><span class="keyword">let</span> <span class="variable">x</span> = [<span class="number">4</span>, <span class="number">5</span>.]:</span><br></pre></td></tr></table></figure>
<p>下面的写法也是错误的：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">x</span> = [<span class="string">&quot;a&quot;</span>];</span><br><span class="line">x[<span class="number">0</span>] = <span class="number">3</span>;</span><br><span class="line">x[-<span class="number">1</span>] = <span class="string">&quot;b&quot;</span>;</span><br><span class="line">x[<span class="number">0</span>.] = <span class="string">&quot;b&quot;</span>;</span><br><span class="line">x[<span class="literal">false</span>] = <span class="string">&quot;b&quot;</span>;</span><br><span class="line">x[<span class="string">&quot;0&quot;</span>] = <span class="string">&quot;b&quot;</span>;</span><br></pre></td></tr></table></figure>
<p>第二条语句是错误的，因为声明的类型不一致。</p>
<p>下面的情况是有效的</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">x</span> = [<span class="string">&quot;a&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_y</span> = x[<span class="number">1</span>];</span><br></pre></td></tr></table></figure>
<h2 id="Mutable-Arrays"><a class="header-anchor" href="#Mutable-Arrays">¶</a>Mutable Arrays</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">x</span> = [<span class="string">&quot;This&quot;</span>, <span class="string">&quot;is&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;sentence&quot;</span>];</span><br><span class="line">x[<span class="number">2</span>] = <span class="string">&quot;a nice&quot;</span>;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125; &#123;&#125; &#123;&#125;.&quot;</span>, x[<span class="number">0</span>], x[<span class="number">1</span>], x[<span class="number">2</span>], x[<span class="number">3</span>]);</span><br></pre></td></tr></table></figure>
<p>通过<code>mut</code>关键字声明数组可变。</p>
<ul>
<li><code>x</code>变量是可变的。</li>
<li>新赋值的类型和<code>x</code>相同</li>
<li>下标是非负整数。</li>
</ul>
<h2 id="Arrays-of-Specified-Size"><a class="header-anchor" href="#Arrays-of-Specified-Size">¶</a>Arrays of Specified Size</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">x</span> = [<span class="number">4</span>.; <span class="number">5000</span>];</span><br><span class="line">x[<span class="number">2000</span>] = <span class="number">3.14</span>;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;, &#123;&#125;&quot;</span>, x[<span class="number">1000</span>], x[<span class="number">2000</span>]);</span><br></pre></td></tr></table></figure>
<p>这里指定了变量数组的大小为5000，所有元素的值都是4.</p>
<p>练习，运用初始化大小的方式，计算斐波那契数列</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">fib</span> = [<span class="number">1</span>; <span class="number">15</span>];</span><br><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">2</span>..fib.<span class="title function_ invoke__">len</span>() &#123;</span><br><span class="line">    fib[i] = fib[i - <span class="number">2</span>] + fib[i - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..fib.<span class="title function_ invoke__">len</span>() &#123;</span><br><span class="line">    <span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;, &quot;</span>, fib[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Multidimensional-Arrays"><a class="header-anchor" href="#Multidimensional-Arrays">¶</a>Multidimensional Arrays</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">x</span> = [[[[<span class="number">23</span>; <span class="number">4</span>]; <span class="number">6</span>]; <span class="number">8</span>]; <span class="number">15</span>];</span><br><span class="line">x[<span class="number">14</span>][<span class="number">7</span>][<span class="number">5</span>][<span class="number">3</span>] = <span class="number">56</span>;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;, &#123;&#125;&quot;</span>, x[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>], x[<span class="number">14</span>][<span class="number">7</span>][<span class="number">5</span>][<span class="number">3</span>]);</span><br></pre></td></tr></table></figure>
<p>这里将打印输出：“23，56”。</p>
<p>我们看看多维数组的长度，</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">x</span> = [[[[<span class="number">0</span>; <span class="number">4</span>]; <span class="number">6</span>]; <span class="number">8</span>]; <span class="number">15</span>];</span><br><span class="line"> <span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;, &#123;&#125;, &#123;&#125;, &#123;&#125;.&quot;</span>, x.<span class="title function_ invoke__">len</span>(), x[<span class="number">0</span>].<span class="title function_ invoke__">len</span>(), x[<span class="number">0</span>][<span class="number">0</span>].<span class="title function_ invoke__">len</span>(), x[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>].<span class="title function_ invoke__">len</span>());</span><br></pre></td></tr></table></figure>
<p>数组的最大限制是必须在编译其指定长度。</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">length</span> = <span class="number">6</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">arr</span> = [<span class="number">0</span>; length];</span><br></pre></td></tr></table></figure>
<p>该代码会提示“attempt to use a non-constant value in a constant”，实际上表达式<code>length</code>是一个变量，从概念上来说它不是一个编译时常量，即使它是可变的，即使它被初始化为一个常量。</p>
<h2 id="Vectors"><a class="header-anchor" href="#Vectors">¶</a>Vectors</h2>
<p>Rust标准库提供了Vec类型，代表<code>vector</code>。</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">x</span> = <span class="built_in">vec!</span>[<span class="string">&quot;This&quot;</span>, <span class="string">&quot;is&quot;</span>];</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125;. Length: &#123;&#125;.&quot;</span>, x[<span class="number">0</span>], x[<span class="number">1</span>], x.<span class="title function_ invoke__">len</span>());</span><br></pre></td></tr></table></figure>
<p>结果将输出“This is. Lenght: 2.”</p>
<p>Vec类型的长度是不固定的，因此，</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">x</span> = <span class="built_in">vec!</span>[<span class="string">&quot;This&quot;</span>, <span class="string">&quot;is&quot;</span>];</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, x.<span class="title function_ invoke__">len</span>());</span><br><span class="line">x.<span class="title function_ invoke__">push</span>(<span class="string">&quot;sentence&quot;</span>);</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot; &#123;&#125;&quot;</span>, x.<span class="title function_ invoke__">len</span>());</span><br><span class="line">x[<span class="number">0</span>] = <span class="string">&quot;That&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..x.<span class="title function_ invoke__">len</span>() &#123;</span><br><span class="line">    <span class="built_in">print!</span>(<span class="string">&quot; &#123;&#125;&quot;</span>, x[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出为：“2 3 4 That is a sentence.&quot;</p>
<p>和数组array不同，vector可以定义长度，或者在执行时改变它的长度。因为vector的长度在运行时是个变量，它不属于类型。因为Rust中的所有类型在编译期都是定义的：</p>
 <figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">let</span> <span class="variable">length</span> = <span class="number">5000</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">y</span> = <span class="built_in">vec!</span>[<span class="number">4</span>.; length];</span><br><span class="line">y[<span class="number">6</span>] = <span class="number">3.14</span>;</span><br><span class="line">y.<span class="title function_ invoke__">push</span>(<span class="number">4.89</span>);</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;, &#123;&#125;, &#123;&#125;&quot;</span>, y[<span class="number">6</span>], y[<span class="number">4999</span>], y[<span class="number">5000</span>]);</span><br></pre></td></tr></table></figure>
<p>因为Rust要求类型在运行时是预先定义好的，所以，下面的不是合法的代码：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">_x</span> = <span class="built_in">vec!</span>[<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>];</span><br><span class="line">_x = <span class="built_in">vec!</span>[<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>];</span><br></pre></td></tr></table></figure>
<h2 id="Other-Operations-on-Vectors"><a class="header-anchor" href="#Other-Operations-on-Vectors">¶</a>Other Operations on Vectors</h2>
<p>标准库中为vector提供了许多操作，下面常见一些例子：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">x</span>= <span class="built_in">vec!</span>[<span class="string">&quot;This&quot;</span>, <span class="string">&quot;is&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;sentence&quot;</span>];</span><br><span class="line">x.<span class="title function_ invoke__">insert</span>(<span class="number">1</span>, <span class="string">&quot;line&quot;</span>);</span><br><span class="line">x.<span class="title function_ invoke__">insert</span>(<span class="number">2</span>, <span class="string">&quot;contains&quot;</span>);</span><br><span class="line">x.<span class="title function_ invoke__">remove</span>(<span class="number">3</span>);</span><br><span class="line">x.<span class="title function_ invoke__">push</span>(<span class="string">&quot;about Rust&quot;</span>);</span><br><span class="line">x.<span class="title function_ invoke__">pop</span>();</span><br><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>..x.<span class="title function_ invoke__">len</span>() &#123;<span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &quot;</span>, x[i]); &#125;</span><br></pre></td></tr></table></figure>
<p>结果将输出&quot;This line contains a sentence。&quot;</p>
<p>上述显示的<code>vector.push(item);</code>，实际上和<code>insert(vector.len(), item);</code>等价；<code>vector.pop()</code>和<code>vector.remove(vector.len() - 1)</code>等价。</p>
<p>同样，基于类型安全，下面的写法是错误的。</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">_x</span> = <span class="built_in">vec!</span>[<span class="string">&quot;This&quot;</span>, <span class="string">&quot;is&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;sentence&quot;</span>];</span><br><span class="line">_x.<span class="title function_ invoke__">insert</span>(<span class="string">&quot;line&quot;</span>, <span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<h2 id="Empty-Arrays-and-Vectors"><a class="header-anchor" href="#Empty-Arrays-and-Vectors">¶</a>Empty Arrays and Vectors</h2>
<p>Rust中不支持没有预先定义的类型操作，假如有一个函数<code>f</code>接收两个参数,</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">f</span>([<span class="string">&quot;help&quot;</span>, <span class="string">&quot;debug&quot;</span>], <span class="built_in">vec!</span>[<span class="number">0</span>, <span class="number">4</span>, <span class="number">15</span>]);</span><br></pre></td></tr></table></figure>
<p>当传递空array和vector时，编译器将报错，因为它不能决定数组或向量的类型。那怎么定义一个空数组和向量。</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">_a</span> = [];</span><br></pre></td></tr></table></figure>
<p>这样写编译器会报&quot;type annotations needed&quot;和 “cannot infer type.”</p>
<p>但是这样写却是可以的</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">_a</span> = [<span class="string">&quot;&quot;</span>; <span class="number">0</span>];</span><br></pre></td></tr></table></figure>
<p>类型地，向量</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">_a</span> = <span class="built_in">vec!</span>[<span class="literal">true</span>; <span class="number">0</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">_b</span> = <span class="built_in">vec!</span>[<span class="literal">false</span>; <span class="number">0</span>];</span><br></pre></td></tr></table></figure>
<p>因此，我们的函数调用可以表示为这样：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">f</span>([<span class="string">&quot;&quot;</span>; <span class="number">0</span>], <span class="built_in">vec!</span>[<span class="number">0</span>; <span class="number">0</span>]);</span><br></pre></td></tr></table></figure>
<h2 id="Debug-Print"><a class="header-anchor" href="#Debug-Print">¶</a>Debug Print</h2>
<p>如何打印数组和向量呢？因为<code>print</code>和<code>println</code>是个宏调用，它可以接收各种类型地输出。然而，对于数组或向量却不适用：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125; &#123;&#125;&quot;</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="built_in">vec!</span>[<span class="number">4</span>, <span class="number">5</span>]);</span><br></pre></td></tr></table></figure>
<p>因为没有定义适当的输出格式，因此要改为：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;:?&#125; &#123;:?&#125;&quot;</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="built_in">vec!</span>[<span class="number">4</span>, <span class="number">5</span>]);</span><br></pre></td></tr></table></figure>
<p>将会输出： “[1, 2, 3] [4, 5]”。</p>
<p><code>:?</code> 表示的是<code>print</code>(<code>println</code>)宏将生成一个debug format的响应数据。 因此不管是任何变量，你都可以用<code>&#123;:?&#125;</code>处理。</p>
<h2 id="Copying-Arrays-and-Vectors"><a class="header-anchor" href="#Copying-Arrays-and-Vectors">¶</a>Copying Arrays and Vectors</h2>
<p>如果你想要复制整个数组或向量，你不需要逐个浏览每个元素：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">a1</span> = [<span class="number">4</span>, <span class="number">56</span>, -<span class="number">2</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">a2</span> = [<span class="number">7</span>, <span class="number">81</span>, <span class="number">12500</span>];</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;:?&#125; &quot;</span>, a1);</span><br><span class="line">a1 = a2;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, a1);</span><br></pre></td></tr></table></figure>
<p>向量也是一样：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">a1</span> = <span class="built_in">vec!</span>[<span class="number">4</span>, <span class="number">56</span>, -<span class="number">2</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">a2</span> = <span class="built_in">vec!</span>[<span class="number">7</span>, <span class="number">81</span>, <span class="number">12500</span>];</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;:?&#125; &quot;</span>, a1);</span><br><span class="line">a1 = a2;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, a1);</span><br></pre></td></tr></table></figure>
<p>需要注意的是，Array的复制必须指定长度和类型，如下则报错：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">a1</span> = [<span class="number">4</span>, <span class="number">56</span>, -<span class="number">2</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">a2</span> = [<span class="number">7</span>, <span class="number">81</span>];</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;:?&#125; &quot;</span>, a1);</span><br><span class="line">a1 = a2;</span><br><span class="line"><span class="built_in">print!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, a1);</span><br></pre></td></tr></table></figure>
</div></article><nav class="article-nav"><div class="article-nav-prev">🔙<a href="/2023/01/06/rust/beginning/chapter06_Using%20Primitive%20Types/">rust基础入门[06] - Using Primitive Types</a></div><div class="article-nav-next">🔜<a href="/2023/01/04/rust/beginning/chapter04_Controlling%20Execution%20Flow/">rust基础入门[04] - Controlling Execution Flow</a></div></nav><div id="base-discus"><div id="disqus_thread"></div><script>var disqus_shortname = 'barudisshu-github-io';
var disqus_identifier = '2023/01/05/rust/beginning/chapter05_Using Data Sequences/';
var disqus_title = 'rust基础入门[05] - Using Data Sequences';
var disqus_url = 'https://galudisu.info/2023/01/05/rust/beginning/chapter05_Using Data Sequences/';
(function () {
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async>  </script></div></div></div><footer class="base-footer"><div class="footer-wrapper"><span>©2016 - 2025 <a href="https://galudisu.info">barudisshu</a>, unless otherwise noted.</span></div></footer><div class="dom-ready">
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>

<link rel="stylesheet" href="//cdn.bootcss.com/pace/1.0.2/themes/green/pace-theme-flash.min.css">

<script src="/js/base.js"></script>

<script src="/js/rabbit-lyrics.js"></script>
</div></body></html>