<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><title>Gentoo å¿«é€Ÿå®‰è£…</title>
<link rel="stylesheet" href="/css/layout.css">
<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="/css/vendors/rabbit-lyrics.css">
<link rel="shortcut icon" href="/img/favicon.ico"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ç®€å•æ˜“æ‡‚ã®ç°ä»£é­”æ³•" type="application/atom+xml">
</head><body><header class="base-menu"><div class="menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a class="menu-link" href="/">ç®€å•æ˜“æ‡‚ã®ç°ä»£é­”æ³•</a></li><li class="menu-item"><a class="menu-link" href="/archives/">Archives</a></li><li class="menu-item"><a class="menu-link" target="_blank" rel="noopener" href="http://weibo.com/u/2360401155">Weibo</a></li><li class="menu-item"><a class="menu-link" href="/about">About</a></li><li class="menu-item"><a class="menu-link" href="/atom.xml">Rss</a></li></ul></nav></div></header><header class="base-mobile-menu"><div class="mobile-menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a class="menu-link" href="/">ç®€å•æ˜“æ‡‚ã®ç°ä»£é­”æ³•</a></li><li class="menu-item"><a class="menu-link" href="/archives/">Archives</a></li><li class="menu-item"><a class="menu-link" target="_blank" rel="noopener" href="http://weibo.com/u/2360401155">Weibo</a></li><li class="menu-item"><a class="menu-link" href="/about">About</a></li><li class="menu-item"><a class="menu-link" href="/atom.xml">Rss</a></li></ul></nav><div class="toggle-menu" id="mobile-menu-toggle"><span class="menu-bar"></span><span class="menu-bar"> </span><span class="menu-bar"></span></div></div></header><div class="base-content"><div class="base-content-main"><article class="article-main"><h1 class="article-title">Gentoo å¿«é€Ÿå®‰è£…</h1><div class="article-meta"><p class="meta-item meta-time"><span class="meta-item-title"></span><i class="icon-calendar"> </i>2017-07-26</p><p class="meta-item meta-tag"><span class="meta-item-title"></span><i class="icon-tag"> </i><a class="tag-link" href="/tags/gentoo/">gentoo</a></p></div><div class="article-content"><p>å‰ç½®å·¥ä½œï¼Œä¸‹è½½miniå®‰è£…é•œåƒï¼Œæ£€æŸ¥ç½‘ç»œã€ç¡¬ä»¶è®¾å¤‡ä¿¡æ¯ã€SSHè¿æ¥â€¦</p>
<span id="more"></span>
<h3 id="åˆ†åŒº"><a class="header-anchor" href="#åˆ†åŒº">Â¶</a>åˆ†åŒº</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cfdisk /dev/sda</span><br></pre></td></tr></table></figure>
<p>åˆ†åŒºå‘½ä»¤æ¯”è¾ƒå¤šï¼Œè‡ªå·±é€‰ä¸€ç§å³å¯ã€‚ä¸€èˆ¬ç®€å•å¯åˆ†3ä¸ª</p>
<ul>
<li><code>dev/sda1</code> bootå¼•å¯¼ï¼Œä¸€èˆ¬ä¸è¶…è¿‡1G</li>
<li><code>dev/sda2</code> äº¤æ¢åˆ†åŒºï¼Œä¸€èˆ¬ä¸ºå†…å­˜çš„ä¸€åŠå¤§å°</li>
<li><code>dev/sda3</code> ç³»ç»Ÿé€»è¾‘åŒºï¼Œä¹Ÿå¯ä»¥æ ¹æ®ä¸ªäººå–œå¥½ï¼Œåˆ†<code>home</code>ã€<code>usr</code>åŒº</li>
</ul>
<h3 id="æ ¼å¼åŒ–ç›˜åŒº"><a class="header-anchor" href="#æ ¼å¼åŒ–ç›˜åŒº">Â¶</a>æ ¼å¼åŒ–ç›˜åŒº</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs.ext2 /dev/sda1 &amp;&amp; mkfs.ext4 /dev/sda3 &amp;&amp; mkswap /dev/sda2</span><br></pre></td></tr></table></figure>
<h3 id="æŒ‚è½½"><a class="header-anchor" href="#æŒ‚è½½">Â¶</a>æŒ‚è½½</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mount /dev/sda3 /mnt/gentoo</span><br><span class="line">mkdir /mnt/gentoo/boot</span><br><span class="line">mount /dev/sda1 /mnt/gentoo/boot</span><br><span class="line">swapon /dev/sda2</span><br></pre></td></tr></table></figure>
<h3 id="åŸºç¡€ç¯å¢ƒStage"><a class="header-anchor" href="#åŸºç¡€ç¯å¢ƒStage">Â¶</a>åŸºç¡€ç¯å¢ƒStage</h3>
<p>stageæ˜¯ä»€ä¹ˆï¼Ÿstageå®é™…ä¸Šæ˜¯ä¸€ä¸ª<code>tarball</code>ï¼ˆå‹ç¼©æ–‡ä»¶ã€æ‰“åŒ…å·¥å…·ï¼‰ï¼Œå› ä¸ºæŒ‚è½½çš„/mnt/gentooé‡Œé¢ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œä½ éœ€è¦ä¸‹è½½ä¸€ä¸ªæ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œé‡Œé¢åŒ…å«æœ‰ <code>/bin</code>ã€<code>/root</code>ã€‚ã€‚ã€‚ è¿™äº›å†…å®¹ã€‚è‡³äºä¸ºä»€ä¹ˆæœ‰stage1ã€stage2ã€stage3ã€stage4ï¼Œå®é™…ä¸Šæ˜¯ä¸åŒçš„æ ‡å‡†ï¼Œå¯ä»¥ä»å®˜ç½‘ä¸Šäº†è§£ã€‚</p>
<p>è°ƒæ•´åŒæ­¥æ—¶é—´</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date MMDDhhmmYYY</span><br></pre></td></tr></table></figure>
<p>ä¸‹è½½ç›¸åº”çš„äºŒè¿›åˆ¶</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /mnt/gentoo</span><br><span class="line">links http://www.gentoo.org/main/en/mirrors.xml</span><br></pre></td></tr></table></figure>
<p>è§£å‹åˆ°å½“å‰ç›®å½•</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar xvjpf stage3-*.tar.bz2</span><br></pre></td></tr></table></figure>
<p>è§£å‹å®Œæˆåï¼Œç§»é™¤è¯¥åŒ…</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm stage3-*.tar.bz2</span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®"><a class="header-anchor" href="#é…ç½®">Â¶</a>é…ç½®</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /mnt/gentoo/etc/portage/make.conf</span><br></pre></td></tr></table></figure>
<p>é€‰æ‹©é•œåƒ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mirrorselect -i -o &gt;&gt; /mnt/gentoo/etc/portage/make.conf</span><br><span class="line">mirrorselect -i -r -o &gt;&gt; /mnt/gentoo/etc/portage/make.conf</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nano /mnt/gentoo/etc/portage/make.conf</span><br><span class="line">cp -L /etc/resolv.conf /mnt/gentoo/etc/</span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…"><a class="header-anchor" href="#å®‰è£…">Â¶</a>å®‰è£…</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mount -t proc /proc /mnt/gentoo/proc</span><br><span class="line">mount --rbind /sys /mnt/gentoo/sys</span><br><span class="line">mount --rbind /dev /mnt/gentoo/dev</span><br></pre></td></tr></table></figure>
<p>åˆ‡æ¢åˆ°æŒ‚è½½ç³»ç»Ÿ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chroot /mnt/gentoo /bin/bash</span><br><span class="line">source /etc/profile</span><br><span class="line">export PS1=&quot;(chroot) $PS1&quot;</span><br></pre></td></tr></table></figure>
<p>ä¸‹è½½æœ€æ–°çš„portage snapshot</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /usr/portage</span><br><span class="line">emerge-webrsync</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…ç›´æ¥ä¸‹è½½åè§£å‹åˆ° <code>/usr/portage</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">links http://www.gentoo.org/main/en/mirrors.xml</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar xvjpf portage-*.tar.bz2 -C /usr/portage</span><br></pre></td></tr></table></figure>
<h3 id="ç¯å¢ƒè®¾ç½®"><a class="header-anchor" href="#ç¯å¢ƒè®¾ç½®">Â¶</a>ç¯å¢ƒè®¾ç½®</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">eselect profile list</span><br><span class="line">eselect profile set 6   ## For KDE</span><br></pre></td></tr></table></figure>
<h3 id="æ—¶åŒº"><a class="header-anchor" href="#æ—¶åŒº">Â¶</a>æ—¶åŒº</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ls /usr/share/zoneinfo</span><br><span class="line">cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br><span class="line">echo &quot;Asia/Shanghai&quot; &gt; /etc/timezone</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/locale.gen</span><br><span class="line">locale-gen</span><br><span class="line">env-update &amp;&amp; source /etc/profile</span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…linuxå†…æ ¸"><a class="header-anchor" href="#å®‰è£…linuxå†…æ ¸">Â¶</a>å®‰è£…linuxå†…æ ¸</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">emerge gentoo-sources</span><br><span class="line">ls -l /usr/src/linux</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘å†…æ ¸</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">emerge genkernel</span><br><span class="line">genkernel all</span><br></pre></td></tr></table></figure>
<h3 id="å…¶å®ƒä¸€äº›é…ç½®"><a class="header-anchor" href="#å…¶å®ƒä¸€äº›é…ç½®">Â¶</a>å…¶å®ƒä¸€äº›é…ç½®</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/fstab</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/conf.d/hostanme</span><br><span class="line">nano /etc/hosts</span><br></pre></td></tr></table></figure>
<p>ç½‘ç»œè¿æ¥</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">emerge dhcpcd </span><br><span class="line">rc-update add dhcpcd default</span><br></pre></td></tr></table></figure>
<p>ä¸€äº›æœ‰ç”¨çš„å·¥å…·</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">emerge virtual/ssh</span><br><span class="line">emerge syslog-ng</span><br><span class="line">emerge cronie</span><br><span class="line">emerge mlocate</span><br><span class="line">rc-update add sshd default</span><br><span class="line">rc-update add syslog-ng default</span><br><span class="line">rc-update add cronie default</span><br></pre></td></tr></table></figure>
<p>æ£€æŸ¥ç³»ç»ŸæœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nano -w /etc/rc.conf</span><br><span class="line">nano -w /etc/conf.d/keymaps</span><br><span class="line">nano -w /etc/conf.d/hwclock</span><br></pre></td></tr></table></figure>
<p>æ·»åŠ ç”¨æˆ·</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">passwd </span><br><span class="line">useradd -m -G users,wheel,audio,lp,cdrom,portage,cron -s /bin/bash caezsar</span><br><span class="line">passwd caezsar</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">emerge sudo</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/sudoers</span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…ç³»ç»Ÿå¼•å¯¼"><a class="header-anchor" href="#å®‰è£…ç³»ç»Ÿå¼•å¯¼">Â¶</a>å®‰è£…ç³»ç»Ÿå¼•å¯¼</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">emerge sys-boot/grub</span><br><span class="line">grub2-install /dev/sda</span><br><span class="line">grub2-mkconfig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure>
<h3 id="å¸è½½"><a class="header-anchor" href="#å¸è½½">Â¶</a>å¸è½½</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">exit</span><br><span class="line">cd</span><br><span class="line">umount -l /mnt/gentoo/dev&#123;/shm,/pts,&#125;</span><br><span class="line">umount -l /mnt/gentoo&#123;/boot,/proc,&#125;</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure>
<p>é‡å¯å³å¯ï¼ï¼</p>
</div></article><nav class="article-nav"><div class="article-nav-prev">ğŸ”™<a href="/2017/07/26/akka/http/writing-an-api-client-with-akka-http/">writing an api client with akka http</a></div><div class="article-nav-next">ğŸ”œ<a href="/2017/05/26/akka/streaming/akka-streams-learning/">Akka Streamingå­¦ä¹ </a></div></nav><div id="base-discus"><div id="disqus_thread"></div><script>var disqus_shortname = 'barudisshu-github-io';
var disqus_identifier = '2017/07/26/linux/gentoo/gentoo-install-guide/';
var disqus_title = 'Gentoo å¿«é€Ÿå®‰è£…';
var disqus_url = 'https://galudisu.info/2017/07/26/linux/gentoo/gentoo-install-guide/';
(function () {
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async>  </script></div></div></div><footer class="base-footer"><div class="footer-wrapper"><span>Â©2016 - 2025 <a href="https://galudisu.info">barudisshu</a>, unless otherwise noted.</span></div></footer><div class="dom-ready">
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>

<link rel="stylesheet" href="//cdn.bootcss.com/pace/1.0.2/themes/green/pace-theme-flash.min.css">

<script src="/js/base.js"></script>

<script src="/js/rabbit-lyrics.js"></script>
</div></body></html>