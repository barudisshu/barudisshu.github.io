<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><title>第一章 基础</title>
<link rel="stylesheet" href="/css/layout.css">
<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="/css/vendors/rabbit-lyrics.css">
<link rel="shortcut icon" href="/img/favicon.ico"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="简单易懂の现代魔法" type="application/atom+xml">
</head><body><header class="base-menu"><div class="menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a class="menu-link" href="/">简单易懂の现代魔法</a></li><li class="menu-item"><a class="menu-link" href="/maths/">Maths</a></li><li class="menu-item"><a class="menu-link" href="/projects/">Projects</a></li><li class="menu-item"><a class="menu-link" href="/archives/">Archives</a></li><li class="menu-item"><a class="menu-link" target="_blank" rel="noopener" href="http://weibo.com/u/2360401155">Weibo</a></li><li class="menu-item"><a class="menu-link" href="/about">About</a></li><li class="menu-item"><a class="menu-link" href="/atom.xml">Rss</a></li></ul></nav></div></header><header class="base-mobile-menu"><div class="mobile-menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a class="menu-link" href="/">简单易懂の现代魔法</a></li><li class="menu-item"><a class="menu-link" href="/maths/">Maths</a></li><li class="menu-item"><a class="menu-link" href="/projects/">Projects</a></li><li class="menu-item"><a class="menu-link" href="/archives/">Archives</a></li><li class="menu-item"><a class="menu-link" target="_blank" rel="noopener" href="http://weibo.com/u/2360401155">Weibo</a></li><li class="menu-item"><a class="menu-link" href="/about">About</a></li><li class="menu-item"><a class="menu-link" href="/atom.xml">Rss</a></li></ul></nav><div class="toggle-menu" id="mobile-menu-toggle"><span class="menu-bar"></span><span class="menu-bar"> </span><span class="menu-bar"></span></div></div></header><div class="base-content"><div class="base-content-main"><article class="article-main"><h1 class="article-title">第一章 基础</h1><div class="article-meta"><p class="meta-item meta-time"><span class="meta-item-title"></span><i class="icon-calendar"> </i>2019-11-27</p><p class="meta-item meta-tag"><span class="meta-item-title"></span><i class="icon-tags"> </i><a class="tag-link" href="/tags/react/">react<span class="tag">, </span></a><a class="tag-link" href="/tags/typescript/">typescript</a></p><p class="meta-item meta-category"><span class="meta-item-title"></span><i class="icon-bookmark"> </i><a class="category-link" href="/categories/react/">react</a></p></div><div class="article-content"><ul>
<li>TypeScript 的好处</li>
<li>基础类型</li>
<li>接口，类型alias，类</li>
<li>模块结构</li>
<li>配置</li>
<li>TypeScript lint</li>
<li>代码格式化</li>
</ul>
<h2 id="技术前提"><a class="header-anchor" href="#技术前提">¶</a>技术前提</h2>
<ul>
<li>
<p>TypeScript 背景： <a target="_blank" rel="noopener" href="https://www.typescriptlang.org/play/">https://www.typescriptlang.org/play/</a></p>
</li>
<li>
<p>Node.js 以及npm：Node &gt;= 8.2， npm &gt;= 5.2</p>
</li>
<li>
<p>TypeScript安装：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g typescript</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Visual Studio Code：前端开发利器</p>
</li>
</ul>
<h2 id="TypeScript-带来了什么"><a class="header-anchor" href="#TypeScript-带来了什么">¶</a>TypeScript 带来了什么</h2>
<p>TypeScript解决了JavaScript代码增长带来难于阅读和难于维护的痛点。比起JavaScript，</p>
<ul>
<li>开发前期可以捕获代码错误</li>
<li>静态类型允许开发工具提升开发者的经验和生产力</li>
<li>兼容各种浏览器，以及一些非浏览器平台</li>
</ul>
<h2 id="基础类型"><a class="header-anchor" href="#基础类型">¶</a>基础类型</h2>
<h3 id="原生类型"><a class="header-anchor" href="#原生类型">¶</a>原生类型</h3>
<ul>
<li><code>string</code>: Unicode字符串</li>
<li><code>number</code>: 表达整数和浮点数</li>
<li><code>boolean</code>: 逻辑true或false</li>
<li><code>undefined</code>: 未定义值</li>
<li><code>null</code>: null</li>
</ul>
<h3 id="类型标注"><a class="header-anchor" href="#类型标注">¶</a>类型标注</h3>
<p>TypeScript在变量声明时带有类型，语法为<code>:Type</code>。</p>
<h3 id="类型推断"><a class="header-anchor" href="#类型推断">¶</a>类型推断</h3>
<p>TypeScript可以简单地有赋值推断出其类型，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> flag = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>
<h4 id="Any"><a class="header-anchor" href="#Any">¶</a>Any</h4>
<p>既没有值，也没有指定类型的变量，它的类型是<code>any</code>，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> flag;</span><br></pre></td></tr></table></figure>
<p>它用于动态声明，表示其值的类型会随后被确定。</p>
<h4 id="Void"><a class="header-anchor" href="#Void">¶</a>Void</h4>
<p>用于函数的返回表示，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function logText(text: string): void &#123;</span><br><span class="line">	console.log(text);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通常不带return语句体的函数，返回值类型会自动推断为<code>void</code>。</p>
<h4 id="Never"><a class="header-anchor" href="#Never">¶</a>Never</h4>
<p>表示“从不”，用于指定该代码不可达</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function foreverTask(taskName: string): never &#123;</span><br><span class="line">	while(true) &#123;</span><br><span class="line">		console.log(`Doing $&#123;taskName&#125; over and over again ...`);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>该函数一直循环，永不返回，所以需要给定类型<code>never</code>。</p>
<h4 id="Enumerations"><a class="header-anchor" href="#Enumerations">¶</a>Enumerations</h4>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">OrderStatus</span> &#123;</span><br><span class="line">	<span class="title class_">Paid</span>,</span><br><span class="line">	<span class="title class_">Shipped</span>,</span><br><span class="line">	<span class="title class_">Completed</span>,</span><br><span class="line">	<span class="title class_">Cancelled</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下标访问，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let status = OrderStatus.Paid</span><br></pre></td></tr></table></figure>
<p>TypeScript的枚举，遵循自动下标的语法，即</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">enum OrderStatus &#123;</span><br><span class="line">	Paid = 1,</span><br><span class="line">	Shipped,</span><br><span class="line">	Completed,</span><br><span class="line">	Cancelled</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>不声明的部分按顺序逐个递增，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let status = OrderStatus.Shipped;</span><br><span class="line">console.log(status);		// print 2</span><br></pre></td></tr></table></figure>
<h4 id="Objects"><a class="header-anchor" href="#Objects">¶</a>Objects</h4>
<p>TS的object和JS是共享的，是一种非原生类型。例如，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const customer = &#123;</span><br><span class="line">	name: &quot;Lamps Ltd&quot;,</span><br><span class="line">	turnover: 2000134,</span><br><span class="line">	active: true</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>和JS一样，可以通过下标，直接修改和访问其值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">customer.turnover = 123,</span><br></pre></td></tr></table></figure>
<p>不同的是，它有类型，所以下面会报错</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">customer.turnover = &quot;500,500&quot;,</span><br></pre></td></tr></table></figure>
<h4 id="Arrays"><a class="header-anchor" href="#Arrays">¶</a>Arrays</h4>
<p>数组需要带类型，其它地方用法和JS差不多</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const numbers: number[] = [];</span><br><span class="line">number.push(1);</span><br></pre></td></tr></table></figure>
<p>另外可以通过类型推断来声明，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const numbers = [1, 3, 5];</span><br></pre></td></tr></table></figure>
<p>迭代方式有几种，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for (let i in numbers) &#123;</span><br><span class="line">	console.log(numbers[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">numbers.forEach(function (num)&#123;</span><br><span class="line">	console.log(num);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="创建接口，类型别名，类"><a class="header-anchor" href="#创建接口，类型别名，类">¶</a>创建接口，类型别名，类</h3>
<p>常量的定义，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const customer = &#123;</span><br><span class="line">	name: &quot;Lamps Ltd&quot;,</span><br><span class="line">	turnover: 2000134,</span><br><span class="line">	active: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是改为下面会出现编译错误，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let customer: Object;</span><br><span class="line">customer = &#123;</span><br><span class="line">	name: &quot;Lamps Ltd&quot;,</span><br><span class="line">	turnover: 2000134,</span><br><span class="line">	active: true</span><br><span class="line">&#125;;</span><br><span class="line">customer.turnover = 20002000;	// error</span><br></pre></td></tr></table></figure>
<p>Typescript 编译器不知道<code>customer</code>有哪些属性，所以需要引入结构化特性。</p>
<h3 id="Interfaces"><a class="header-anchor" href="#Interfaces">¶</a>Interfaces</h3>
<p>接口用<code>interface</code>关键字声明，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">interface Product &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Properties"><a class="header-anchor" href="#Properties">¶</a>Properties</h3>
<p>结构的属性，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface Product &#123;</span><br><span class="line">	name: string;</span><br><span class="line">	unitPrice: number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接口的属性必须声明了才能访问，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const table: Product = &#123;</span><br><span class="line">	name: &quot;Table&quot;,</span><br><span class="line">	unitPrice: 500</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接口也是类型，所以可以在其它接口引用，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">interface Product &#123;</span><br><span class="line">	name: string;</span><br><span class="line">	unitPrice: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface OrderDetail &#123;</span><br><span class="line">	product: Product;</span><br><span class="line">	quantity: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const table: Product = &#123;</span><br><span class="line">	name: &quot;Table&quot;,</span><br><span class="line">	unitPrice: 500</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const tableOrder: OrderDetail = &#123;</span><br><span class="line">	product: table,</span><br><span class="line">	quantity: 1</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="方法签名"><a class="header-anchor" href="#方法签名">¶</a>方法签名</h3>
<p>接口可以包含方法签名而没有具体实现，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">interface OrderDetail &#123;</span><br><span class="line">	product: Product;</span><br><span class="line">	quantity: number;</span><br><span class="line">	getTotal(idscount: number): number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>具体对象需要实现接口的方法签名，方法签名必须一致，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const tableOrder: OrderDetail = &#123;</span><br><span class="line">	product: table,</span><br><span class="line">	quantity: 1,</span><br><span class="line">	getTotal(discount: number): number &#123;</span><br><span class="line">		const priceWithoutDiscount = this.product.unitPrice * this.quantity;</span><br><span class="line">		const discountAmount = priceWithoutDiscount * discount;</span><br><span class="line">		return priceWithoutDiscount - discountAmount;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>接口中的方法签名，参数部分可以不用声明类型，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface OrderDetail &#123;</span><br><span class="line">	....</span><br><span class="line">	getTotal(number): number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但省略的参数类型使得阅读难于理解，我们不知道具体参数是什么类型？</p>
<h3 id="可选属性，可选参数"><a class="header-anchor" href="#可选属性，可选参数">¶</a>可选属性，可选参数</h3>
<p>和大部分现代语言类似，TypeScript中使用<code>?</code>表示属性或参数是个optional 的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">interface OrderDetail &#123;</span><br><span class="line">	product: Product;</span><br><span class="line">	quantity: number;</span><br><span class="line">	dateAdded?: Date,</span><br><span class="line">	getTotal(discount: number): number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>方法签名的参数也可以是可选的，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">interface OrderDetail &#123;</span><br><span class="line">	product: Product;</span><br><span class="line">	quantity: number;</span><br><span class="line">	dateAdded?: Date,</span><br><span class="line">	getTotal(discount?: number): number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>方法签名的实现可以改为，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">getTotal(discount?: number): number &#123;</span><br><span class="line">	const priceWithoutDiscount = this.product.unitPrice * this.quantity;</span><br><span class="line">	const discountAmount = priceWithoutDiscount * (discount || 0);</span><br><span class="line">	return priceWithoutDiscount - discountAmount;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因此在方法调用时，可以不传参数，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tableOrder.getTotal();</span><br></pre></td></tr></table></figure>
<h3 id="Readonly-属性"><a class="header-anchor" href="#Readonly-属性">¶</a>Readonly 属性</h3>
<p><code>readonly</code>属性，顾名思义只能读取，不能修改，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface Product &#123;</span><br><span class="line">	readonly name: string;</span><br><span class="line">	unitPrice: number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因此，下面操作发生编译错误，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const table: Product = &#123;</span><br><span class="line">	name: &quot;Table&quot;;</span><br><span class="line">	unitPrice: 500</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">table.name = &quot;Better Table&quot;;</span><br></pre></td></tr></table></figure>
<h3 id="接口继承"><a class="header-anchor" href="#接口继承">¶</a>接口继承</h3>
<p>接口继承使用<code>extends</code>关键字，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">interface Product &#123;</span><br><span class="line">	name: string;</span><br><span class="line">	unitPrice: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface DiscountCode [</span><br><span class="line">	code: string;</span><br><span class="line">	percentage: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface ProductWithDiscountCodes extends Product &#123;</span><br><span class="line">	discountCodes: DiscountCode[];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接口的实例可以简单创建，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const table: ProductWithDiscountCodes = &#123;</span><br><span class="line">	name: &quot;Table&quot;,</span><br><span class="line">	unitPrice: 500,</span><br><span class="line">	discountCodes: [</span><br><span class="line">		&#123; code: &quot;SUMMER10&quot;, percentage: 0.1 &#125;,</span><br><span class="line">		&#123; code: &quot;BFRI&quot;, percentage: 0.2 &#125;</span><br><span class="line">	]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="类型别名"><a class="header-anchor" href="#类型别名">¶</a>类型别名</h3>
<p>类型别名就是给指定类型标准一个新的类型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">type GetTotal = (discount: number) =&gt; number;</span><br><span class="line"></span><br><span class="line">interface OrderDetail &#123;</span><br><span class="line">	product: Product;</span><br><span class="line">	quantity: number;</span><br><span class="line">	getTotal: GetTotal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>类型别名和接口相似，不同的是类型别名不能有extends，也不能implemented。</p>
<h3 id="类"><a class="header-anchor" href="#类">¶</a>类</h3>
<p>相比接口，类有更多的特性，</p>
<h3 id="基础类"><a class="header-anchor" href="#基础类">¶</a>基础类</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class Product &#123;</span><br><span class="line">	name: stirng;</span><br><span class="line">	unitPrice: number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>大部分概念和Java类型，可以通过<code>new</code>关键字声明实例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const table = new Product();</span><br><span class="line">table.name = &quot;Table&quot;;</span><br><span class="line">table.unitPrice = 500;</span><br></pre></td></tr></table></figure>
<p>可以调用对应的成员方法，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class OrderDetail &#123;</span><br><span class="line">	product: Product;</span><br><span class="line">	quantity: number;</span><br><span class="line">	</span><br><span class="line">	getTotal(discount: number): number &#123;</span><br><span class="line">		const priceWithoutDiscount = this.product.unitPrice * this.quantity;</span><br><span class="line">		const discountAmount = priceWithoutDiscount * discount;</span><br><span class="line">		return priceWithoutDiscount - discountAmount;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>创建对应实例，调用成员方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const table = new Product();</span><br><span class="line">table.name = &quot;Table&quot;;</span><br><span class="line">table.unitPrice = 500;</span><br><span class="line"></span><br><span class="line">const orderDtail = new OrderDetail();</span><br><span class="line">orderDetail.product = table;</span><br><span class="line">orderDetail.quantity = 2;</span><br><span class="line"></span><br><span class="line">const total = orderDetail.getTotal(0.1);</span><br><span class="line">console.log(total);</span><br></pre></td></tr></table></figure>
<h3 id="接口继承-v2"><a class="header-anchor" href="#接口继承-v2">¶</a>接口继承</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">interface IOrderDetail &#123;</span><br><span class="line">	product: Product;</span><br><span class="line">	quantity: number;</span><br><span class="line">	getTotal(discount: number): number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class OrderDetail implements IOrderDetail &#123;</span><br><span class="line">	product: Product;</span><br><span class="line">	quantity: number;</span><br><span class="line">	</span><br><span class="line">	getTotal(discount: number): number &#123;</span><br><span class="line">		const priceWithoutDiscount = this.product.unitPrice * this.quantity;</span><br><span class="line">		const discountAmount = priceWithoutDiscount * discount;</span><br><span class="line">		return priceWithoutDiscount - discountAmount;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="构造器"><a class="header-anchor" href="#构造器">¶</a>构造器</h3>
<p>TS中的构造函数概念和Java一样，形式不一样，TS中需要使用<code>constructor</code>私有成员，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class OrderDetail implements IOrderDetail &#123;</span><br><span class="line">	product: Product;</span><br><span class="line">	quantity: number;</span><br><span class="line">	</span><br><span class="line">	constructor(product: Product, quantity: number) &#123;</span><br><span class="line">		this.product = product;</span><br><span class="line">		this.quantity = quantity;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	getTotal(discount: number): number = &#123;</span><br><span class="line">		...</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>创建实例时，会强制要求传递参数，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const orderDetail = new OrderDetail(table, 2);</span><br></pre></td></tr></table></figure>
<p>某些情况下，可以使用默认值，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">constructor(product: Product, quantity: number = 1) &#123;</span><br><span class="line">	this.product = product;</span><br><span class="line">	this.quantity = quantitty;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>声明实例时可以不写，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const orderDetail = new OrderDetail(table);</span><br></pre></td></tr></table></figure>
<p>可以少写点代码，在构造参数前引入<code>public</code>关键字，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class OrderDetail implements IOrderDetail &#123;</span><br><span class="line">	constructor(public product: Product, public quantity: number = 1) &#123;</span><br><span class="line">		this.product = product;</span><br><span class="line">		this.quantity = quantity;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	getTotal(discount: number): number &#123;</span><br><span class="line">		...</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="类继承"><a class="header-anchor" href="#类继承">¶</a>类继承</h3>
<p>类之间可以继承，使用关键字<code>extends</code>，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class Product &#123;</span><br><span class="line">	name: string;</span><br><span class="line">	unitPrice: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface DiscountCode &#123;</span><br><span class="line">	code: string;</span><br><span class="line">	percentage: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class ProductWithDiscountCodes etends Product &#123;</span><br><span class="line">	discountCodes: DiscountCode[];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>该类型实例的创建如下，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const table = new ProductWithDiscountCodes();</span><br><span class="line">table.name = &quot;Table&quot;;</span><br><span class="line">table.unitPrice = 500;</span><br><span class="line">table.discountCodes = [</span><br><span class="line">	&#123; code: &quot;SUMMER10&quot;, percentage: 0.1 &#125;,</span><br><span class="line">	&#123; code: &quot;BFRI&quot;, percentage: 0.2 &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<p>父类包含构造函数，子类也必须包含构造函数的实现，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class Product &#123;</span><br><span class="line">	constructor(public: name: string; public unitPrice: number) &#123;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface DiscountCode &#123;</span><br><span class="line">	code: string;</span><br><span class="line">	percentage: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class ProductWithDiscountCodes extends Product &#123;</span><br><span class="line">	constructor(public name: string, public unitPrice: number) &#123;</span><br><span class="line">		super(name, unitPrice);</span><br><span class="line">	&#125;</span><br><span class="line">	discountCodes: DiscountCode[];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="抽象类"><a class="header-anchor" href="#抽象类">¶</a>抽象类</h3>
<p>抽象类使用<code>abstract</code>关键字声明，表示没有实例化能力的成员</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">	<span class="attr">uitPrice</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bread = <span class="keyword">new</span> <span class="title class_">Procut</span>();		<span class="comment">// compile error</span></span><br></pre></td></tr></table></figure>
<p>抽象方法需要带有<code>abstract</code>关键字，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">	<span class="attr">uitPrice</span>: <span class="built_in">number</span>;</span><br><span class="line">	<span class="keyword">abstract</span> <span class="title function_">delete</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>所有子类都要实现这个抽象方法，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Fond</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Product</span> &#123;</span><br><span class="line">	<span class="attr">deleted</span>: <span class="built_in">boolean</span>;</span><br><span class="line">	<span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">bestBefore</span>: <span class="title class_">Date</span></span>) &#123;</span><br><span class="line">		<span class="variable language_">super</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="title function_">delete</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">deleted</span> = <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="访问修改器"><a class="header-anchor" href="#访问修改器">¶</a>访问修改器</h3>
<p>按照访问作用域划分，目前有以下几种，</p>
<ul>
<li><code>public</code>:</li>
<li><code>private</code>:</li>
<li><code>protected</code>:</li>
<li><default>:</li>
</ul>
<h3 id="Setter和Getter"><a class="header-anchor" href="#Setter和Getter">¶</a>Setter和Getter</h3>
<p>和Java不同，TS中有关键字<code>get</code>和<code>set</code>，语法和方法类似，其中<code>get</code>不带参数；<code>set</code>带一个参数，一般用于私有方法的操作处理，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="attr">_unitPrice</span>: <span class="built_in">number</span>;</span><br><span class="line">	<span class="keyword">get</span> <span class="title function_">unitPrice</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_unitPrice</span> || <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">set</span> <span class="title function_">unitPrice</span>(<span class="params"><span class="attr">value</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">		<span class="keyword">if</span>(value &lt; <span class="number">0</span>) &#123;</span><br><span class="line">			value = <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">_unitPrice</span> = value;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> table = <span class="keyword">new</span> <span class="title class_">Product</span>();</span><br><span class="line">table.<span class="property">name</span> = <span class="string">&quot;Table&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(table.<span class="property">unitPrice</span>);</span><br><span class="line">table.<span class="property">unitPrice</span> = -<span class="number">10</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(table.<span class="property">unitPrice</span>);</span><br></pre></td></tr></table></figure>
<h3 id="Static"><a class="header-anchor" href="#Static">¶</a>Static</h3>
<p>静态声明的方法或属性，作用于类自身而不是类的对象实例。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">OrderDetail</span> &#123;</span><br><span class="line">	<span class="attr">product</span>: <span class="title class_">Product</span>;</span><br><span class="line">	<span class="attr">quantity</span>: <span class="built_in">number</span>;</span><br><span class="line">	<span class="keyword">static</span> <span class="title function_">getTotal</span>(<span class="attr">discount</span>: <span class="built_in">number</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">		<span class="keyword">const</span> priceWithoutDiscount = <span class="variable language_">this</span>.<span class="property">product</span>.<span class="property">unitPrice</span> * <span class="variable language_">this</span>.<span class="property">quantity</span>;	<span class="comment">// compile error</span></span><br><span class="line">		...</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>静态作用域里面的访问成员要求也必须是静态的，因此不能在静态方法中使用<code>this.properties</code>进行访问</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="title function_">getTotal</span>(<span class="attr">unitPrice</span>: <span class="built_in">number</span>, <span class="attr">quantity</span>: <span class="built_in">number</span>, <span class="attr">discount</span>: <span class="built_in">number</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">	<span class="keyword">const</span> priceWithoutDiscount = unitPrice * quantity;</span><br><span class="line">	...</span><br><span class="line">	<span class="keyword">return</span> ...;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> total = <span class="title class_">OrderDetail</span>.<span class="title function_">getTotal</span>(<span class="number">500</span>, <span class="number">2</span>, <span class="number">0.1</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(total);</span><br></pre></td></tr></table></figure>
<h2 id="结构化-转变-为模块"><a class="header-anchor" href="#结构化-转变-为模块">¶</a>结构化 转变 为模块</h2>
<p>由于TypeScript是最终编译成为JavaScript，并且其作用域的是全局的。这样就带来一个问题是，同名的条目会在不同文件中造成冲突，因此需要实现模块化来解决这个问题，使得代码更容易组织，更高的重用性。</p>
<h3 id="模块化格式"><a class="header-anchor" href="#模块化格式">¶</a>模块化格式</h3>
<p>模块化是属于ES6的JavaScript的部分特性。简要描述一下TypeScript的不同模块化格式：</p>
<ul>
<li><code>AMD(Asynchronous Module Definition)</code>: 最常见，对目标浏览器，用一个<code>define</code>函数来定义模块。</li>
<li><code>CommonJS</code>: 用于Node.js程式，使用<code>module.exports</code>来定义模块，用<code>require</code>来定义依赖。</li>
<li><code>UMD(Universal Module Definition)</code>: 可以用于浏览器app和Node.js程式。</li>
<li><code>ES6</code>: 使用<code>export</code>关键字来定义模块，<code>import</code>来定义依赖。</li>
</ul>
<p>笔者这里使用ES6。</p>
<h3 id="Exporting"><a class="header-anchor" href="#Exporting">¶</a>Exporting</h3>
<p>从一个module进行export以允许在其它module中被使用。使用<code>export</code>关键字。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">	<span class="attr">unitPrice</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者重命名，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">	<span class="attr">unitPrice</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; <span class="title class_">Product</span> <span class="keyword">as</span> <span class="title class_">Stock</span> &#125;</span><br></pre></td></tr></table></figure>
<h3 id="Importing"><a class="header-anchor" href="#Importing">¶</a>Importing</h3>
<p>有export就需要在其它模块进行import，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Product</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./product&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">OrderDetail</span> &#123;</span><br><span class="line">	<span class="attr">product</span>: <span class="title class_">Product</span>;</span><br><span class="line">	<span class="attr">quantity</span>: <span class="built_in">number</span>;</span><br><span class="line">	<span class="title function_">getTotal</span>(<span class="attr">discount</span>: <span class="built_in">number</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">		...</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者重命名，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Product</span> <span class="keyword">as</span> <span class="title class_">Stock</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./product&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">OrderDetail</span> &#123;</span><br><span class="line">	<span class="attr">product</span>: <span class="title class_">Stock</span>;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="default-exports"><a class="header-anchor" href="#default-exports">¶</a>default exports</h3>
<p>带有<code>default</code> 语句的export不需要花括号，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">interface</span> &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">	<span class="attr">unitPrice</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Product</span> <span class="keyword">from</span> <span class="string">&quot;./product&quot;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="编译配置"><a class="header-anchor" href="#编译配置">¶</a>编译配置</h2>
<p>TypeScript的编译器是<code>tsc</code>，它会将对应的<code>TS</code>文件编译为<code>JS</code>文件，</p>
<p>新建文件，<code>orderDetail.ts</code>，内容如下，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">	<span class="attr">unitPrice</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">OrderDetail</span> &#123;</span><br><span class="line">	<span class="attr">product</span>: <span class="title class_">Product</span>;</span><br><span class="line">	<span class="attr">quantity</span>: <span class="built_in">number</span>;</span><br><span class="line">	<span class="title function_">getTotal</span>(<span class="attr">discount</span>: <span class="built_in">number</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">		<span class="keyword">const</span> priceWithoutDiscount = <span class="variable language_">this</span>.<span class="property">product</span>.<span class="property">unitPrice</span> * <span class="variable language_">this</span>.<span class="property">quantity</span>;</span><br><span class="line">		<span class="keyword">const</span> discountAmount = priceWithoutDiscount * discount;</span><br><span class="line">		<span class="keyword">return</span> priceWithoutDiscount - discountAmount;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>打开终端，输入如下命令，</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc orderDetail</span><br></pre></td></tr></table></figure>
<p>不出错的话，在对应目录会生成一个文件<code>orderDetail.js</code>，里面是转换的JavaScript内容，</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="built_in">exports</span>.<span class="property">__esModule</span> = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">OrderDetail</span> = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">function</span> <span class="title function_">OrderDetail</span>(<span class="params"></span>) &#123;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="title class_">OrderDetail</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getTotal</span> = <span class="keyword">function</span> (<span class="params">discount</span>) &#123;</span><br><span class="line">		<span class="keyword">var</span> priceWithoutDiscount = <span class="variable language_">this</span>.<span class="property">product</span>.<span class="property">unitPrice</span> * <span class="variable language_">this</span>.<span class="property">quantity</span>;</span><br><span class="line">		<span class="keyword">var</span> discountAmount = priceWithoutDiscount * discount;</span><br><span class="line">		<span class="keyword">return</span> priceWithoutDiscount - discountAmount;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="keyword">return</span> <span class="title class_">OrderDetail</span>;</span><br><span class="line">&#125;());</span><br><span class="line"><span class="built_in">exports</span>.<span class="property">OrderDetail</span> = <span class="title class_">OrderDetail</span>;</span><br></pre></td></tr></table></figure>
<h3 id="常见编译选项"><a class="header-anchor" href="#常见编译选项">¶</a>常见编译选项</h3>
<ul>
<li><code>--target</code>: 目标，默认是<code>ES3</code>，</li>
<li><code>--outDir</code>: 输出目录</li>
<li><code>--module</code>: 指定模块格式，<code>--target</code>是ES3或ES5时，默认是<code>CommonJS</code></li>
<li><code>--allowJS</code>: 告诉编译器处理JavaScript文件，应对那些TypeScript无法应对时候，需要JavaScript的情况。</li>
<li><code>--watch</code>: watch mode模式，修改文件后保存后立即编译输出。</li>
<li><code>--noImplicitAny</code>: 强制显式指定<code>any</code>类型。</li>
<li><code>--noImplicitReturns</code>: 强制显式返回。即对于不是<code>void</code>返回类型，所有case必须有返回值。</li>
<li><code>--sourceMap</code>: development模式中，生成<code>*.map</code>文件，以允许调试</li>
<li><code>--moduleResolution</code>: 告诉编译器如何处理模块，有两个选项<code>classic</code>或<code>node</code>，如果不指定，默认是<code>classic</code>，会要求使用第三方包，所以需要显式设置为<code>node</code>，编译器会查找<code>node_modules</code>模块。</li>
</ul>
<h3 id="tsconfig-json"><a class="header-anchor" href="#tsconfig-json">¶</a>tsconfig.json</h3>
<p><code>tsconfig.json</code>文件是上面这些开关的几种配置文件，样例如下，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="string">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">	<span class="string">&quot;target&quot;</span>: <span class="string">&quot;esnext&quot;</span>,</span><br><span class="line">	<span class="string">&quot;outDir&quot;</span>: <span class="string">&quot;dist&quot;</span>,</span><br><span class="line">	<span class="string">&quot;module&quot;</span>: <span class="string">&quot;es6&quot;</span>,</span><br><span class="line">	<span class="string">&quot;moduleResolution&quot;</span>: <span class="string">&quot;node&quot;</span>,</span><br><span class="line">	<span class="string">&quot;sourceMap&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">	<span class="string">&quot;noImplicitReturns&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">	<span class="string">&quot;noImplicitAny&quot;</span>: <span class="literal">true</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="指定编译文件"><a class="header-anchor" href="#指定编译文件">¶</a>指定编译文件</h3>
<p>在<code>tsconfig.json</code>中可以指定编译那些TypeScript文件，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&quot;files&quot;</span>: [<span class="string">&quot;product.ts&quot;</span>, <span class="string">&quot;orderDetail.ts&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者指定目录，</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&quot;include&quot;</span>: [<span class="string">&quot;src/**/*&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="TypeScript-linting"><a class="header-anchor" href="#TypeScript-linting">¶</a>TypeScript linting</h3>
<p>linting是一种检查规则，用于加强语法或优化编译，参考TSLint官网。</p>
<h3 id="Code-Formatting"><a class="header-anchor" href="#Code-Formatting">¶</a>Code Formatting</h3>
<p>代码格式化有很多种，常见的是<code>prettier</code>，另外还有less、css等等。</p>
<h2 id="本章回归"><a class="header-anchor" href="#本章回归">¶</a>本章回归</h2>
<ol>
<li>TS的5中原生类型是那些？						// string, number, boolean, undefined, null</li>
<li>下面变量<code>flag</code>类型推断的类型是什么？			// boolean</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> flag = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>接口和类型别名的区别是什么？					// type alias不能继承</li>
<li>下面代码有什么错误？如何处理？</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">	<span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>, <span class="keyword">public</span> <span class="attr">unitPrice</span>: <span class="built_in">number</span></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> table = <span class="keyword">new</span> <span class="title class_">Product</span>();</span><br><span class="line">table.<span class="property">name</span> = <span class="string">&quot;Table&quot;</span>;</span><br><span class="line">table.<span class="property">unitPrice</span> = <span class="number">700</span>;</span><br></pre></td></tr></table></figure>
<p>// 要么编写IProduct接口，继承成员属性；要么在Product中写上成员name，unitPrice；要么带上setter/getter方法；</p>
<ol start="5">
<li>如果想要我们的TS支持IE11，编译选项<code>--target</code>应该带什么？</li>
<li>如何转换为ES6版本的<code>.js</code>文件？				// --target ES6</li>
<li>如何阻止代码中出现<code>console.log</code>语句？		// tslint.yml 带<code>no-console</code></li>
</ol>
</div></article><nav class="article-nav"><div class="article-nav-prev"><a href="/2019/11/27/react-ts/chapter_2_TypeScript_3/">第二章 TypeScript3的新特性</a></div><div class="article-nav-next"><a href="/2019/10/21/jira/jira-install/">Jira 快速安装</a></div></nav><div id="base-discus"><div id="disqus_thread"></div><script>var disqus_shortname = 'barudisshu-github-io';
var disqus_identifier = '2019/11/27/react-ts/chapter_1_TypeScript_Basics/';
var disqus_title = '第一章 基础';
var disqus_url = 'https://galudisu.info/2019/11/27/react-ts/chapter_1_TypeScript_Basics/';
(function () {
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async>  </script></div></div></div><footer class="base-footer"><div class="footer-wrapper"><span>©2016 - 2025 <a href="https://galudisu.info">barudisshu</a>, unless otherwise noted.</span></div></footer><div class="dom-ready">
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>

<link rel="stylesheet" href="//cdn.bootcss.com/pace/1.0.2/themes/green/pace-theme-flash.min.css">

<script src="/js/base.js"></script>

<script src="/js/rabbit-lyrics.js"></script>
</div></body></html>